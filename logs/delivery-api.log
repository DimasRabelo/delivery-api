2025-11-01 19:51:16.485 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 19:51:16.487 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 19:51:16.489 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 19:51:16.550 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-01 19:51:16.551 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-01 19:51:18.139 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 19:51:18.251 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 100 ms. Found 5 JPA repository interfaces.
2025-11-01 19:51:19.105 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 19:51:19.125 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:51:19.129 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 19:51:19.130 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 19:51:19.216 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 19:51:19.217 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2665 ms
2025-11-01 19:51:19.615 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 19:51:19.617 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 19:51:20.129 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 19:51:20.164 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-01 19:51:20.379 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 19:51:20.381 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-01 19:51:20.412 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 19:51:21.726 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:51:21.730 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:51:21.731 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:51:21.731 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:51:21.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:51:21.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:51:21.740 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 19:51:21.757 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 19:51:21.765 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 19:51:21.771 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 19:51:21.773 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 19:51:21.776 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 19:51:21.779 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 19:51:21.794 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 19:51:21.797 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 19:51:21.800 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:51:21.803 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:51:21.812 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:51:22.245 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-01 19:51:23.948 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 19:51:24.687 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 19:51:24.758 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 19:51:24.975 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 19:51:25.104 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 19:51:25.203 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 19:51:25.296 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 19:51:25.543 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 19:51:25.694 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 19:51:25.777 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 19:51:25.794 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 19:51:25.821 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 10.035 seconds (process running for 10.536)
2025-11-01 19:53:47.392 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 19:53:47.393 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 19:53:47.394 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 19:53:47.394 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 19:53:47.394 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 19:53:47.397 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1a24553
2025-11-01 19:53:47.401 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@27f443e1
2025-11-01 19:53:47.402 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 19:53:47.402 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-11-01 19:53:47.453 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-01 19:53:47.625 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-01T20:40:24Z. Current time: 2025-11-01T22:53:47Z, a difference of 8003622 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-01 19:53:47.630 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 19:53:47.647 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-01 19:53:47.653 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-01 19:53:47.656 [http-nio-8080-exec-2] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-01 19:53:47.752 [http-nio-8080-exec-2] DEBUG [] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@1cfddf84]
2025-11-01 19:53:48.194 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 19:53:48.402 [http-nio-8080-exec-2] DEBUG [] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-01 19:53:48.478 [http-nio-8080-exec-2] DEBUG [] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 19:53:48.480 [http-nio-8080-exec-2] DEBUG [] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@24668baf]
2025-11-01 19:53:48.534 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 19:58:19.423 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-01 19:58:19.430 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 19:58:19.432 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:19.435 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 19:58:19.435 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:19.446 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:58:19.448 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:58:19.451 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:58:19.453 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:58:19.454 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:58:19.455 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:58:19.456 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:58:19.464 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 19:58:19.465 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-01 19:58:19.473 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-01 19:58:19.722 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 19:58:19.723 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 19:58:19.723 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 19:58:20.306 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 19:58:20.340 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 5 JPA repository interfaces.
2025-11-01 19:58:20.646 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 19:58:20.649 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:20.649 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 19:58:20.650 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 19:58:20.670 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 19:58:20.670 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 942 ms
2025-11-01 19:58:20.841 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 19:58:20.841 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 19:58:20.972 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 19:58:20.975 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-01 19:58:20.979 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 19:58:20.980 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-01 19:58:20.981 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 19:58:21.260 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:58:21.260 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:58:21.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:58:21.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:58:21.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:58:21.262 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:58:21.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 19:58:21.265 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 19:58:21.268 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 19:58:21.271 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 19:58:21.274 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 19:58:21.277 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 19:58:21.279 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 19:58:21.282 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 19:58:21.285 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 19:58:21.289 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:58:21.293 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:58:21.296 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:58:21.746 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 19:58:22.066 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 19:58:22.106 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 19:58:22.253 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 19:58:22.366 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 19:58:22.447 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 19:58:22.501 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 19:58:22.798 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 19:58:22.968 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 19:58:23.006 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:23.009 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 19:58:23.023 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.379 seconds (process running for 427.738)
2025-11-01 19:58:23.029 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 19:58:37.833 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-11-01 19:58:37.836 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 19:58:37.836 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:37.838 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 19:58:37.838 [Thread-7] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:37.842 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:58:37.842 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:58:37.844 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:58:37.845 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:58:37.846 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:58:37.847 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:58:37.849 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:58:37.851 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 19:58:37.852 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-01 19:58:37.854 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-01 19:58:38.066 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 19:58:38.066 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 19:58:38.066 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 19:58:38.674 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 19:58:38.715 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 5 JPA repository interfaces.
2025-11-01 19:58:38.930 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 19:58:38.931 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:38.931 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 19:58:38.931 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 19:58:38.958 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 19:58:38.958 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 890 ms
2025-11-01 19:58:39.072 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 19:58:39.072 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 19:58:39.147 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 19:58:39.148 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-01 19:58:39.151 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 19:58:39.151 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-01 19:58:39.152 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 19:58:39.345 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:58:39.345 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:58:39.346 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:58:39.346 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:58:39.346 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:58:39.347 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:58:39.347 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 19:58:39.349 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 19:58:39.351 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 19:58:39.353 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 19:58:39.355 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 19:58:39.357 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 19:58:39.359 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 19:58:39.362 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 19:58:39.366 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 19:58:39.368 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:58:39.372 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:58:39.375 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:58:39.777 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 19:58:40.040 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 19:58:40.085 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 19:58:40.217 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 19:58:40.322 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 19:58:40.378 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 19:58:40.409 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 19:58:40.540 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 19:58:40.618 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 19:58:40.652 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:40.654 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 19:58:40.669 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.652 seconds (process running for 445.384)
2025-11-01 19:58:40.674 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 19:58:59.125 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 19:58:59.129 [Thread-12] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 19:58:59.130 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:59.131 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 19:58:59.131 [Thread-12] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 19:58:59.138 [Thread-12] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:58:59.138 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:58:59.140 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:58:59.141 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:58:59.142 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:58:59.143 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:58:59.144 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:58:59.146 [Thread-12] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 19:58:59.147 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-01 19:58:59.148 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-01 19:58:59.302 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 19:58:59.302 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 19:58:59.302 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 19:58:59.787 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 19:58:59.822 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 5 JPA repository interfaces.
2025-11-01 19:59:00.101 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 19:59:00.101 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:00.102 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 19:59:00.102 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 19:59:00.113 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 19:59:00.113 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 809 ms
2025-11-01 19:59:00.238 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 19:59:00.239 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 19:59:00.351 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 19:59:00.353 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-01 19:59:00.355 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 19:59:00.355 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-01 19:59:00.356 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 19:59:00.516 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:59:00.517 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:59:00.517 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:59:00.517 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:59:00.518 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:59:00.518 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:59:00.519 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 19:59:00.520 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 19:59:00.521 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 19:59:00.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 19:59:00.525 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 19:59:00.526 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 19:59:00.527 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 19:59:00.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 19:59:00.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 19:59:00.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:59:00.536 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:59:00.539 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:59:01.059 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 19:59:01.398 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 19:59:01.458 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 19:59:01.689 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 19:59:01.882 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 19:59:01.969 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 19:59:02.025 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 19:59:02.260 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 19:59:02.431 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 19:59:02.548 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:02.585 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 19:59:02.620 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.363 seconds (process running for 467.335)
2025-11-01 19:59:02.633 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 19:59:05.846 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 19:59:05.849 [Thread-16] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 19:59:05.850 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:05.851 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 19:59:05.852 [Thread-16] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:05.856 [Thread-16] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:59:05.856 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:59:05.858 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:59:05.859 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:59:05.860 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:59:05.860 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:59:05.861 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:59:05.863 [Thread-16] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 19:59:05.864 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-01 19:59:05.865 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-01 19:59:06.108 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 19:59:06.108 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 19:59:06.108 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 19:59:06.771 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 19:59:06.821 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 5 JPA repository interfaces.
2025-11-01 19:59:07.181 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 19:59:07.182 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:07.183 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 19:59:07.183 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 19:59:07.199 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 19:59:07.199 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1088 ms
2025-11-01 19:59:07.406 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 19:59:07.407 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 19:59:07.490 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 19:59:07.491 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-01 19:59:07.493 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 19:59:07.494 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-01 19:59:07.494 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 19:59:07.704 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:59:07.706 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:59:07.709 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:59:07.709 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:59:07.709 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:59:07.710 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:59:07.712 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 19:59:07.715 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 19:59:07.717 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 19:59:07.720 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 19:59:07.722 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 19:59:07.724 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 19:59:07.727 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 19:59:07.738 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 19:59:07.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 19:59:07.748 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:59:07.750 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:59:07.754 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:59:08.504 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 19:59:08.851 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 19:59:08.897 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 19:59:09.042 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 19:59:09.155 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 19:59:09.208 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 19:59:09.243 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 19:59:09.390 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 19:59:09.481 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 19:59:09.529 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:09.532 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 19:59:09.550 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.498 seconds (process running for 474.265)
2025-11-01 19:59:09.554 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 19:59:10.891 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 19:59:10.893 [Thread-20] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 19:59:10.893 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:10.894 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 19:59:10.895 [Thread-20] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:10.899 [Thread-20] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:59:10.899 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:59:10.901 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:59:10.902 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:59:10.903 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:59:10.904 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:59:10.904 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:59:10.906 [Thread-20] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 19:59:10.907 [Thread-20] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-01 19:59:10.910 [Thread-20] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-01 19:59:11.083 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 19:59:11.083 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 19:59:11.083 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 19:59:11.507 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 19:59:11.544 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 5 JPA repository interfaces.
2025-11-01 19:59:11.782 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 19:59:11.783 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:11.784 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 19:59:11.784 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 19:59:11.799 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 19:59:11.799 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 714 ms
2025-11-01 19:59:11.972 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 19:59:11.973 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 19:59:12.067 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 19:59:12.068 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-01 19:59:12.071 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 19:59:12.071 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-01 19:59:12.072 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 19:59:12.272 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:59:12.273 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:59:12.275 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:59:12.276 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:59:12.277 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:59:12.278 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:59:12.279 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 19:59:12.281 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 19:59:12.283 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 19:59:12.288 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 19:59:12.291 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 19:59:12.293 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 19:59:12.296 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 19:59:12.298 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 19:59:12.302 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 19:59:12.304 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:59:12.310 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:59:12.316 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:59:12.873 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 19:59:13.283 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 19:59:13.354 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 19:59:13.629 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 19:59:13.822 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 19:59:13.901 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 19:59:13.938 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 19:59:14.104 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 19:59:14.211 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 19:59:14.248 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:14.252 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 19:59:14.267 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.221 seconds (process running for 478.982)
2025-11-01 19:59:14.273 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 19:59:15.620 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 19:59:15.623 [Thread-24] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 19:59:15.625 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:15.626 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 19:59:15.627 [Thread-24] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:15.630 [Thread-24] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:59:15.631 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:59:15.632 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:59:15.633 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:59:15.634 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:59:15.634 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:59:15.635 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:59:15.637 [Thread-24] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 19:59:15.637 [Thread-24] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-01 19:59:15.639 [Thread-24] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-01 19:59:15.862 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 19:59:15.862 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 19:59:15.863 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 19:59:16.302 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 19:59:16.333 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 5 JPA repository interfaces.
2025-11-01 19:59:16.562 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 19:59:16.563 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:16.563 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 19:59:16.563 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 19:59:16.574 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 19:59:16.574 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 709 ms
2025-11-01 19:59:16.697 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 19:59:16.697 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 19:59:16.799 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 19:59:16.800 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-01 19:59:16.803 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 19:59:16.803 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-01 19:59:16.804 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 19:59:17.000 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 19:59:17.001 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 19:59:17.002 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 19:59:17.002 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 19:59:17.003 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 19:59:17.003 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 19:59:17.004 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 19:59:17.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 19:59:17.010 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 19:59:17.012 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 19:59:17.014 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 19:59:17.016 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 19:59:17.018 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 19:59:17.020 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 19:59:17.022 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 19:59:17.025 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:59:17.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 19:59:17.030 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 19:59:17.421 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 19:59:17.664 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 19:59:17.742 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 19:59:17.897 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 19:59:18.015 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 19:59:18.068 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 19:59:18.096 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 19:59:18.213 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 19:59:18.306 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 19:59:18.355 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 19:59:18.357 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 19:59:18.377 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.57 seconds (process running for 483.091)
2025-11-01 19:59:18.380 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 19:59:41.559 [http-nio-8080-exec-3] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 19:59:41.560 [http-nio-8080-exec-3] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 19:59:41.560 [http-nio-8080-exec-3] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 19:59:41.560 [http-nio-8080-exec-3] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 19:59:41.560 [http-nio-8080-exec-3] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 19:59:41.562 [http-nio-8080-exec-3] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@40af0e7
2025-11-01 19:59:41.563 [http-nio-8080-exec-3] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@63390cb8
2025-11-01 19:59:41.563 [http-nio-8080-exec-3] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 19:59:41.563 [http-nio-8080-exec-3] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-01 19:59:41.566 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-01 19:59:41.572 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-01T20:33:22Z. Current time: 2025-11-01T22:59:41Z, a difference of 8779572 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-01 19:59:41.573 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 19:59:41.577 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-01 19:59:41.578 [http-nio-8080-exec-3] DEBUG [cffcc5e3216d4444] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-01 19:59:41.583 [http-nio-8080-exec-3] DEBUG [cffcc5e3216d4444] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{email=admin@delivery.com, senha=123456}]
2025-11-01 19:59:41.620 [http-nio-8080-exec-3] DEBUG [cffcc5e3216d4444] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 19:59:41.625 [http-nio-8080-exec-3] DEBUG [cffcc5e3216d4444] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 19:59:43.700 [http-nio-8080-exec-3] DEBUG [cffcc5e3216d4444] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 19:59:43.712 [http-nio-8080-exec-3] DEBUG [cffcc5e3216d4444] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-01 19:59:43.732 [http-nio-8080-exec-3] DEBUG [cffcc5e3216d4444] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@9f56225]
2025-11-01 19:59:43.766 [http-nio-8080-exec-3] DEBUG [cffcc5e3216d4444] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 20:02:36.770 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:02:36.771 [Thread-28] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:02:36.772 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:02:36.774 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:02:36.774 [Thread-28] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:02:36.793 [Thread-28] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:02:36.794 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:02:36.797 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:02:36.798 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:02:36.799 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:02:36.800 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:02:36.801 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:02:36.803 [Thread-28] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:02:36.803 [Thread-28] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-01 20:02:36.807 [Thread-28] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-01 20:02:37.156 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:02:37.156 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:02:37.157 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:02:37.723 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:02:37.752 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 5 JPA repository interfaces.
2025-11-01 20:02:38.020 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:02:38.022 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:02:38.023 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:02:38.023 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:02:38.035 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:02:38.035 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 870 ms
2025-11-01 20:02:38.206 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:02:38.206 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:02:38.320 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:02:38.321 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-01 20:02:38.324 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn70: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:02:38.324 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-01 20:02:38.325 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:02:38.522 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:02:38.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:02:38.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:02:38.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:02:38.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:02:38.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:02:38.524 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:02:38.526 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:02:38.527 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:02:38.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:02:38.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:02:38.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:02:38.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:02:38.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:02:38.536 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:02:38.538 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:02:38.541 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:02:38.544 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:02:38.982 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:02:39.311 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:02:39.355 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:02:39.514 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:02:39.628 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:02:39.701 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:02:39.740 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:02:39.952 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:02:40.063 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:02:40.103 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:02:40.106 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:02:40.122 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.039 seconds (process running for 684.837)
2025-11-01 20:02:40.127 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:03:45.693 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-11-01 20:03:45.707 [Thread-32] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:03:45.852 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:03:45.853 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:03:45.853 [Thread-32] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:03:45.858 [Thread-32] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:03:45.858 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:03:45.860 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:03:45.861 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:03:45.861 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:03:45.862 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:03:45.862 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:03:45.864 [Thread-32] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:03:45.865 [Thread-32] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-01 20:03:45.867 [Thread-32] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-01 20:03:46.492 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:03:46.494 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:03:46.494 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:03:47.453 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:03:47.483 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-01 20:03:47.684 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:03:47.684 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:03:47.685 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:03:47.685 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:03:47.695 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:03:47.695 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1198 ms
2025-11-01 20:03:47.848 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:03:47.849 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:03:47.940 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:03:47.941 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-11-01 20:03:47.944 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn80: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:03:47.945 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-11-01 20:03:47.945 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:03:48.160 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:03:48.162 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:03:48.165 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:03:48.167 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:03:48.169 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:03:48.171 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:03:48.175 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:03:48.187 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:03:48.194 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:03:48.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:03:48.202 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:03:48.206 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:03:48.208 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:03:48.211 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:03:48.215 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:03:48.217 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:03:48.219 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:03:48.225 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:03:48.662 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:03:48.905 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:03:48.946 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:03:49.081 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:03:49.195 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:03:49.261 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:03:49.291 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:03:49.417 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:03:49.628 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:03:49.677 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:03:49.683 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:03:49.700 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.415 seconds (process running for 754.415)
2025-11-01 20:03:49.708 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:04:09.104 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:04:09.106 [Thread-36] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:04:09.108 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:04:09.109 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:04:09.109 [Thread-36] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:04:09.114 [Thread-36] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:04:09.115 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:04:09.116 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:04:09.117 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:04:09.117 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:04:09.117 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:04:09.118 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:04:09.119 [Thread-36] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:04:09.125 [Thread-36] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-11-01 20:04:09.132 [Thread-36] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-11-01 20:04:09.437 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:04:09.438 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:04:09.438 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:04:09.972 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:04:10.003 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-01 20:04:10.298 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:04:10.299 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:04:10.300 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:04:10.300 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:04:10.313 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:04:10.313 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 872 ms
2025-11-01 20:04:10.494 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:04:10.494 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:04:10.579 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:04:10.580 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-11-01 20:04:10.582 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn90: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:04:10.582 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-11-01 20:04:10.583 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:04:10.750 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:04:10.751 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:04:10.751 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:04:10.751 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:04:10.751 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:04:10.752 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:04:10.752 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:04:10.754 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:04:10.755 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:04:10.759 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:04:10.760 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:04:10.761 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:04:10.763 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:04:10.764 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:04:10.768 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:04:10.770 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:04:10.772 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:04:10.774 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:04:11.154 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:04:11.451 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:04:11.511 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:04:11.688 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:04:11.854 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:04:11.929 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:04:11.972 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:04:12.188 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:04:12.301 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:04:12.334 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:04:12.336 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:04:12.350 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.987 seconds (process running for 777.065)
2025-11-01 20:04:12.353 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:07:06.395 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-01 20:07:06.441 [Thread-40] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:07:06.442 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:06.443 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:07:06.444 [Thread-40] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:06.449 [Thread-40] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:07:06.450 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:07:06.452 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:07:06.452 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:07:06.453 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:07:06.453 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:07:06.453 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:07:06.454 [Thread-40] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:07:06.455 [Thread-40] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-11-01 20:07:06.457 [Thread-40] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-11-01 20:07:06.882 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:07:06.882 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:07:06.883 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:07:09.517 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:07:09.548 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 5 JPA repository interfaces.
2025-11-01 20:07:10.001 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:07:10.001 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:10.002 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:07:10.002 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:07:10.013 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:07:10.013 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3127 ms
2025-11-01 20:07:10.142 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:07:10.143 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:07:10.253 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:07:10.254 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-11-01 20:07:10.256 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn100: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:07:10.256 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-11-01 20:07:10.257 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:07:10.425 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:07:10.426 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:07:10.426 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:07:10.426 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:07:10.427 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:07:10.427 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:07:10.428 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:07:10.431 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:07:10.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:07:10.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:07:10.435 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:07:10.436 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:07:10.440 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:07:10.443 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:07:10.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:07:10.448 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:07:10.449 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:07:10.453 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:07:11.109 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:07:11.491 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:07:11.542 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:07:11.731 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:07:11.880 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:07:11.945 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:07:11.996 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:07:12.135 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:07:12.224 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:07:12.257 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:12.260 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:07:12.279 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.451 seconds (process running for 956.993)
2025-11-01 20:07:12.284 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:07:24.076 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:07:24.077 [Thread-44] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:07:24.078 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:24.079 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:07:24.079 [Thread-44] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:24.083 [Thread-44] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:07:24.083 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:07:24.084 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:07:24.084 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:07:24.084 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:07:24.085 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:07:24.085 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:07:24.086 [Thread-44] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:07:24.086 [Thread-44] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-11-01 20:07:24.087 [Thread-44] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-11-01 20:07:24.340 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:07:24.340 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:07:24.340 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:07:24.923 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:07:24.948 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 5 JPA repository interfaces.
2025-11-01 20:07:25.141 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:07:25.142 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:25.142 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:07:25.143 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:07:25.157 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:07:25.157 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 813 ms
2025-11-01 20:07:25.302 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:07:25.303 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:07:25.376 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:07:25.376 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-11-01 20:07:25.378 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn110: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:07:25.379 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-11-01 20:07:25.379 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:07:25.519 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:07:25.519 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:07:25.519 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:07:25.520 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:07:25.520 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:07:25.520 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:07:25.521 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:07:25.522 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:07:25.524 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:07:25.525 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:07:25.526 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:07:25.527 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:07:25.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:07:25.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:07:25.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:07:25.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:07:25.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:07:25.533 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:07:25.922 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:07:26.177 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:07:26.214 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:07:26.320 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:07:26.416 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:07:26.475 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:07:26.502 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:07:26.609 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:07:26.671 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:07:26.697 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:26.699 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:07:26.711 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.421 seconds (process running for 971.426)
2025-11-01 20:07:26.714 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:07:46.169 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:07:46.172 [Thread-48] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:07:46.173 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:46.174 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:07:46.175 [Thread-48] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:46.180 [Thread-48] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:07:46.180 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:07:46.181 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:07:46.184 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:07:46.185 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:07:46.185 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:07:46.186 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:07:46.187 [Thread-48] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:07:46.188 [Thread-48] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-11-01 20:07:46.193 [Thread-48] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-11-01 20:07:46.493 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:07:46.494 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:07:46.494 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:07:47.295 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:07:47.357 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 5 JPA repository interfaces.
2025-11-01 20:07:47.801 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:07:47.802 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:47.802 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:07:47.802 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:07:47.815 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:07:47.815 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1318 ms
2025-11-01 20:07:47.952 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:07:47.952 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:07:48.079 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:07:48.081 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Starting...
2025-11-01 20:07:48.084 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-13 - Added connection conn120: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:07:48.085 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Start completed.
2025-11-01 20:07:48.086 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:07:48.361 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:07:48.361 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:07:48.361 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:07:48.362 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:07:48.362 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:07:48.362 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:07:48.363 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:07:48.365 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:07:48.367 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:07:48.369 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:07:48.370 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:07:48.373 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:07:48.375 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:07:48.377 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:07:48.379 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:07:48.381 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:07:48.383 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:07:48.386 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:07:48.885 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:07:49.156 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:07:49.237 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:07:49.397 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:07:49.583 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:07:49.646 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:07:49.688 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:07:49.920 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:07:50.056 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:07:50.108 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:50.114 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:07:50.134 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.697 seconds (process running for 994.848)
2025-11-01 20:07:50.139 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:07:51.472 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:07:51.475 [Thread-52] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:07:51.476 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:51.478 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:07:51.480 [Thread-52] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:51.486 [Thread-52] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:07:51.487 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:07:51.488 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:07:51.489 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:07:51.490 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:07:51.491 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:07:51.492 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:07:51.493 [Thread-52] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:07:51.494 [Thread-52] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-11-01 20:07:51.496 [Thread-52] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
2025-11-01 20:07:51.762 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:07:51.763 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:07:51.763 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:07:52.239 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:07:52.268 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-01 20:07:52.494 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:07:52.495 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:52.496 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:07:52.496 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:07:52.507 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:07:52.508 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 742 ms
2025-11-01 20:07:52.649 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:07:52.649 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:07:52.735 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:07:52.736 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Starting...
2025-11-01 20:07:52.738 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-14 - Added connection conn130: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:07:52.738 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Start completed.
2025-11-01 20:07:52.738 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:07:52.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:07:52.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:07:52.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:07:52.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:07:52.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:07:52.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:07:52.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:07:52.900 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:07:52.922 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:07:52.923 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:07:52.923 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:07:52.924 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:07:52.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:07:52.927 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:07:52.928 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:07:52.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:07:52.931 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:07:52.933 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:07:53.334 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:07:53.577 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:07:53.619 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:07:53.762 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:07:53.873 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:07:53.928 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:07:53.965 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:07:54.095 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:07:54.193 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:07:54.234 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:07:54.237 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:07:54.252 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.529 seconds (process running for 998.967)
2025-11-01 20:07:54.256 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:08:04.648 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:08:04.650 [Thread-56] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:08:04.651 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:04.652 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:08:04.653 [Thread-56] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:04.659 [Thread-56] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:04.660 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:04.661 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:04.662 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:04.662 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:04.662 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:04.663 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:04.664 [Thread-56] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:08:04.665 [Thread-56] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown initiated...
2025-11-01 20:08:04.674 [Thread-56] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown completed.
2025-11-01 20:08:05.060 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:08:05.060 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:08:05.060 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:08:05.838 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:08:05.877 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 5 JPA repository interfaces.
2025-11-01 20:08:06.437 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:08:06.438 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:06.438 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:08:06.438 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:08:06.457 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:08:06.460 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1395 ms
2025-11-01 20:08:06.627 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:08:06.627 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:08:06.714 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:08:06.715 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Starting...
2025-11-01 20:08:06.718 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-15 - Added connection conn140: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:08:06.718 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Start completed.
2025-11-01 20:08:06.719 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:08:07.120 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:07.121 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:07.121 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:07.121 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:07.121 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:07.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:07.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:08:07.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:08:07.127 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:08:07.128 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:08:07.129 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:08:07.131 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:08:07.133 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:08:07.135 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:08:07.137 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:08:07.139 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:07.141 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:07.143 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:07.701 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:08:08.040 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:08:08.099 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:08:08.242 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:08:08.392 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:08:08.449 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:08:08.485 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:08:08.623 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:08:08.702 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:08:08.734 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:08.761 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:08:08.775 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.788 seconds (process running for 1013.49)
2025-11-01 20:08:08.778 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:08:10.108 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:08:10.110 [Thread-60] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:08:10.110 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:10.111 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:08:10.112 [Thread-60] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:10.115 [Thread-60] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:10.116 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:10.117 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:10.117 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:10.118 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:10.118 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:10.118 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:10.119 [Thread-60] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:08:10.120 [Thread-60] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown initiated...
2025-11-01 20:08:10.122 [Thread-60] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown completed.
2025-11-01 20:08:10.361 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:08:10.361 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:08:10.361 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:08:10.763 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:08:10.786 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 5 JPA repository interfaces.
2025-11-01 20:08:11.054 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:08:11.055 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:11.055 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:08:11.055 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:08:11.070 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:08:11.070 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 707 ms
2025-11-01 20:08:11.225 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:08:11.225 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:08:11.310 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:08:11.310 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Starting...
2025-11-01 20:08:11.313 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-16 - Added connection conn150: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:08:11.313 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Start completed.
2025-11-01 20:08:11.313 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:08:11.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:11.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:11.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:11.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:11.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:11.482 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:11.482 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:08:11.484 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:08:11.485 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:08:11.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:08:11.487 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:08:11.488 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:08:11.488 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:08:11.489 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:08:11.491 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:08:11.492 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:11.494 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:11.496 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:11.873 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:08:12.129 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:08:12.173 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:08:12.325 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:08:12.518 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:08:12.619 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:08:12.669 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:08:12.845 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:08:12.975 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:08:13.021 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:13.025 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:08:13.041 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.715 seconds (process running for 1017.756)
2025-11-01 20:08:13.045 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:08:17.392 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:08:17.394 [Thread-64] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:08:17.395 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:17.397 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:08:17.398 [Thread-64] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:17.408 [Thread-64] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:17.409 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:17.410 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:17.410 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:17.413 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:17.426 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:17.427 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:17.429 [Thread-64] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:08:17.430 [Thread-64] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown initiated...
2025-11-01 20:08:17.432 [Thread-64] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown completed.
2025-11-01 20:08:17.818 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:08:17.818 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:08:17.818 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:08:18.350 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:08:18.379 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 5 JPA repository interfaces.
2025-11-01 20:08:18.586 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:08:18.587 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:18.587 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:08:18.588 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:08:18.601 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:08:18.601 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 780 ms
2025-11-01 20:08:18.800 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:08:18.801 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:08:18.914 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:08:18.915 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Starting...
2025-11-01 20:08:18.917 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-17 - Added connection conn160: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:08:18.917 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Start completed.
2025-11-01 20:08:18.918 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:08:19.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:19.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:19.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:19.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:19.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:19.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:19.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:08:19.071 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:08:19.071 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:08:19.072 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:08:19.072 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:08:19.073 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:08:19.074 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:08:19.076 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:08:19.077 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:08:19.077 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:19.078 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:19.079 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:19.453 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:08:19.742 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:08:19.792 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:08:19.998 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:08:20.110 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:08:20.164 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:08:20.199 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:08:20.330 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:08:20.402 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:08:20.434 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:20.441 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:08:20.459 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.699 seconds (process running for 1025.174)
2025-11-01 20:08:20.463 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:08:25.827 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:08:25.830 [Thread-68] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:08:25.831 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:25.833 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:08:25.834 [Thread-68] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:25.839 [Thread-68] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:25.840 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:25.841 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:25.841 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:25.842 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:25.842 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:25.842 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:25.843 [Thread-68] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:08:25.844 [Thread-68] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown initiated...
2025-11-01 20:08:25.845 [Thread-68] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown completed.
2025-11-01 20:08:26.122 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:08:26.122 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:08:26.122 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:08:26.785 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:08:26.820 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 5 JPA repository interfaces.
2025-11-01 20:08:27.209 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:08:27.213 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:27.213 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:08:27.213 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:08:27.228 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:08:27.231 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1105 ms
2025-11-01 20:08:27.466 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:08:27.467 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:08:27.625 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:08:27.626 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Starting...
2025-11-01 20:08:27.632 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-18 - Added connection conn170: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:08:27.632 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Start completed.
2025-11-01 20:08:27.633 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:08:27.853 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:27.854 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:27.854 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:27.854 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:27.854 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:27.854 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:27.855 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:08:27.858 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:08:27.860 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:08:27.862 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:08:27.863 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:08:27.865 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:08:27.867 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:08:27.869 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:08:27.871 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:08:27.873 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:27.875 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:27.878 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:28.498 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:08:29.043 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:08:29.119 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:08:29.370 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:08:29.590 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:08:29.703 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:08:29.776 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:08:30.052 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:08:30.196 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:08:30.260 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:30.273 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:08:30.296 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.222 seconds (process running for 1035.011)
2025-11-01 20:08:30.316 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:08:33.612 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:08:33.614 [Thread-72] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:08:33.620 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:33.622 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:08:33.623 [Thread-72] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:33.629 [Thread-72] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:33.630 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:33.631 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:33.632 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:33.632 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:33.633 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:33.633 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:33.634 [Thread-72] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:08:33.635 [Thread-72] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown initiated...
2025-11-01 20:08:33.639 [Thread-72] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown completed.
2025-11-01 20:08:34.101 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:08:34.102 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:08:34.102 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:08:34.860 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:08:34.901 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 5 JPA repository interfaces.
2025-11-01 20:08:35.293 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:08:35.295 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:35.295 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:08:35.295 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:08:35.310 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:08:35.310 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1205 ms
2025-11-01 20:08:35.552 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:08:35.552 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:08:35.711 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:08:35.712 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Starting...
2025-11-01 20:08:35.715 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-19 - Added connection conn180: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:08:35.715 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Start completed.
2025-11-01 20:08:35.717 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:08:35.950 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:35.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:35.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:35.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:35.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:35.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:35.953 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:08:35.955 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:08:35.956 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:08:35.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:08:35.959 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:08:35.960 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:08:35.962 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:08:35.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:08:35.967 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:08:35.970 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:35.972 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:35.975 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:36.647 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:08:37.157 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:08:37.233 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:08:37.464 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:08:37.640 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:08:37.732 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:08:37.788 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:08:38.028 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:08:38.160 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:08:38.215 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:38.222 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:08:38.242 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.193 seconds (process running for 1042.956)
2025-11-01 20:08:38.247 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:08:39.569 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:08:39.572 [Thread-76] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:08:39.573 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:39.575 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:08:39.576 [Thread-76] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:39.581 [Thread-76] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:39.581 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:39.582 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:39.583 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:39.583 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:39.583 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:39.583 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:39.584 [Thread-76] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:08:39.585 [Thread-76] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown initiated...
2025-11-01 20:08:39.586 [Thread-76] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown completed.
2025-11-01 20:08:39.812 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:08:39.812 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:08:39.812 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:08:40.378 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:08:40.417 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 5 JPA repository interfaces.
2025-11-01 20:08:40.700 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:08:40.701 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:40.701 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:08:40.701 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:08:40.714 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:08:40.714 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 900 ms
2025-11-01 20:08:40.890 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:08:40.890 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:08:40.973 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:08:40.974 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Starting...
2025-11-01 20:08:40.976 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-20 - Added connection conn190: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:08:40.976 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Start completed.
2025-11-01 20:08:40.977 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:08:41.108 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:08:41.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:08:41.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:08:41.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:08:41.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:08:41.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:08:41.110 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:08:41.111 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:08:41.112 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:08:41.113 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:08:41.113 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:08:41.113 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:08:41.114 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:08:41.115 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:08:41.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:08:41.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:41.120 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:08:41.122 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:08:41.512 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:08:41.971 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:08:42.064 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:08:42.215 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:08:42.368 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:08:42.422 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:08:42.454 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:08:42.616 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:08:42.696 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:08:42.726 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:08:42.728 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:08:42.752 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.984 seconds (process running for 1047.467)
2025-11-01 20:08:42.760 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:09:54.547 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 20:09:54.548 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 20:09:54.548 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 20:09:54.548 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 20:09:54.548 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 20:09:54.552 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@608d8c78
2025-11-01 20:09:54.553 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@21c67720
2025-11-01 20:09:54.553 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 20:09:54.553 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-01 20:09:54.556 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 20:09:54.728 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 20:09:54.745 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 20:09:54.746 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-01 20:09:54.746 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 20:09:54.842 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@2a5db899]
2025-11-01 20:09:55.216 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:09:55.295 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:09:55.708 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 20:09:55.820 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-01 20:09:55.823 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-01 20:09:56.023 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:09:56.114 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-01 20:09:56.311 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-01 20:09:56.398 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:09:56.399 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@a50fcb4]
2025-11-01 20:09:56.452 [http-nio-8080-exec-2] DEBUG [69ff576dd047405e] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-01 20:13:26.529 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-01 20:13:26.534 [Thread-80] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:13:26.539 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:13:26.544 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:13:26.544 [Thread-80] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:13:26.552 [Thread-80] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:13:26.552 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:13:26.553 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:13:26.554 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:13:26.555 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:13:26.555 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:13:26.556 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:13:26.557 [Thread-80] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:13:26.560 [Thread-80] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown initiated...
2025-11-01 20:13:26.562 [Thread-80] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown completed.
2025-11-01 20:13:27.004 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:13:27.004 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:13:27.004 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:13:27.641 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:13:27.675 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 5 JPA repository interfaces.
2025-11-01 20:13:28.068 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:13:28.069 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:13:28.069 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:13:28.070 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:13:28.085 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:13:28.085 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1069 ms
2025-11-01 20:13:28.332 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:13:28.333 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:13:28.442 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:13:28.443 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Starting...
2025-11-01 20:13:28.446 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-21 - Added connection conn200: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:13:28.447 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Start completed.
2025-11-01 20:13:28.448 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:13:28.654 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:13:28.654 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:13:28.655 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:13:28.655 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:13:28.656 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:13:28.656 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:13:28.657 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:13:28.661 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:13:28.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:13:28.663 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:13:28.664 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:13:28.665 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:13:28.665 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:13:28.667 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:13:28.668 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:13:28.670 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:13:28.671 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:13:28.673 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:13:29.277 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:13:29.670 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:13:29.716 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:13:29.874 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:13:30.042 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:13:30.119 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:13:30.177 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:13:30.414 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:13:30.549 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:13:30.607 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:13:30.653 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:13:30.675 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.721 seconds (process running for 1335.389)
2025-11-01 20:13:30.680 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:17:44.369 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 1 deletion, 1 modification)
2025-11-01 20:17:44.373 [Thread-84] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:17:44.374 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:44.375 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:17:44.376 [Thread-84] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:44.381 [Thread-84] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:17:44.381 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:17:44.383 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:17:44.383 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:17:44.384 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:17:44.384 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:17:44.385 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:17:44.386 [Thread-84] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:17:44.387 [Thread-84] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown initiated...
2025-11-01 20:17:44.390 [Thread-84] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown completed.
2025-11-01 20:17:44.631 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:17:44.631 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:17:44.631 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:17:45.175 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:17:45.202 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-01 20:17:45.457 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:17:45.458 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:45.458 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:17:45.458 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:17:45.470 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:17:45.470 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 836 ms
2025-11-01 20:17:45.604 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:17:45.605 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:17:45.707 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:17:45.708 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Starting...
2025-11-01 20:17:45.710 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-22 - Added connection conn210: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:17:45.711 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Start completed.
2025-11-01 20:17:45.711 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:17:45.879 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:17:45.879 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:17:45.879 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:17:45.879 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:17:45.880 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:17:45.880 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:17:45.881 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:17:45.883 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:17:45.884 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:17:45.886 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:17:45.888 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:17:45.889 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:17:45.891 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:17:45.893 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:17:45.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:17:45.896 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:17:45.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:17:45.900 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:17:46.668 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:17:47.097 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:17:47.160 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:17:47.327 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:17:47.484 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:17:47.573 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:17:47.632 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:17:47.855 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:17:47.941 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:17:47.968 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:47.973 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:17:47.993 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.406 seconds (process running for 1592.708)
2025-11-01 20:17:47.997 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:17:54.375 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:17:54.377 [Thread-88] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:17:54.377 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:54.379 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:17:54.379 [Thread-88] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:54.382 [Thread-88] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:17:54.383 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:17:54.383 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:17:54.384 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:17:54.384 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:17:54.384 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:17:54.385 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:17:54.386 [Thread-88] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:17:54.387 [Thread-88] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown initiated...
2025-11-01 20:17:54.388 [Thread-88] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown completed.
2025-11-01 20:17:54.615 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:17:54.615 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:17:54.615 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:17:55.141 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:17:55.181 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 5 JPA repository interfaces.
2025-11-01 20:17:55.495 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:17:55.496 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:55.497 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:17:55.497 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:17:55.511 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:17:55.511 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 894 ms
2025-11-01 20:17:55.727 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:17:55.727 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:17:55.799 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:17:55.800 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Starting...
2025-11-01 20:17:55.801 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-23 - Added connection conn220: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:17:55.802 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Start completed.
2025-11-01 20:17:55.802 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:17:55.929 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:17:55.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:17:55.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:17:55.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:17:55.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:17:55.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:17:55.931 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:17:55.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:17:55.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:17:55.933 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:17:55.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:17:55.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:17:55.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:17:55.936 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:17:55.937 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:17:55.937 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:17:55.939 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:17:56.002 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:17:56.351 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:17:56.607 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:17:56.651 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:17:56.776 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:17:56.895 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:17:56.953 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:17:56.990 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:17:57.114 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:17:57.193 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:17:57.221 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:57.224 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:17:57.238 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.672 seconds (process running for 1601.952)
2025-11-01 20:17:57.242 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:17:58.605 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:17:58.609 [Thread-92] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:17:58.610 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:58.611 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:17:58.612 [Thread-92] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:58.616 [Thread-92] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:17:58.617 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:17:58.618 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:17:58.619 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:17:58.619 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:17:58.620 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:17:58.620 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:17:58.622 [Thread-92] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:17:58.623 [Thread-92] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown initiated...
2025-11-01 20:17:58.624 [Thread-92] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown completed.
2025-11-01 20:17:58.814 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:17:58.814 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:17:58.814 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:17:59.287 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:17:59.315 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-11-01 20:17:59.539 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:17:59.540 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:17:59.540 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:17:59.540 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:17:59.551 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:17:59.551 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 733 ms
2025-11-01 20:17:59.686 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:17:59.687 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:17:59.773 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:17:59.775 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Starting...
2025-11-01 20:17:59.778 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-24 - Added connection conn230: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:17:59.778 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Start completed.
2025-11-01 20:17:59.778 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:17:59.923 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:17:59.924 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:17:59.924 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:17:59.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:17:59.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:17:59.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:17:59.926 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:17:59.929 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:17:59.931 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:17:59.933 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:17:59.933 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:17:59.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:17:59.936 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:17:59.937 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:17:59.939 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:17:59.941 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:17:59.942 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:17:59.945 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:18:00.359 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:18:00.697 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:18:00.750 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:18:00.921 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:18:01.049 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:18:01.112 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:18:01.149 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:18:01.330 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:18:01.405 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:18:01.441 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:18:01.445 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:18:01.461 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.678 seconds (process running for 1606.176)
2025-11-01 20:18:01.488 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   TaskSchedulingAutoConfiguration#scheduledBeanLazyInitializationExcludeFilter matched:
      - @ConditionalOnBean (names: org.springframework.context.annotation.internalScheduledAnnotationProcessor; SearchStrategy: all) found bean 'org.springframework.context.annotation.internalScheduledAnnotationProcessor' (OnBeanCondition)

   TaskSchedulingConfigurations.TaskSchedulerConfiguration matched:
      - @ConditionalOnBean (names: org.springframework.context.annotation.internalScheduledAnnotationProcessor; SearchStrategy: all) found bean 'org.springframework.context.annotation.internalScheduledAnnotationProcessor'; @ConditionalOnMissingBean (types: org.springframework.scheduling.TaskScheduler,java.util.concurrent.ScheduledExecutorService; SearchStrategy: all) did not find any beans (OnBeanCondition)

   TaskSchedulingConfigurations.TaskSchedulerConfiguration#taskScheduler matched:
      - @ConditionalOnThreading found PLATFORM (OnThreadingCondition)


Negative matches:
-----------------

   TaskSchedulingConfigurations.TaskSchedulerConfiguration#taskSchedulerVirtualThreads:
      Did not match:
         - @ConditionalOnThreading did not find VIRTUAL (OnThreadingCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-01 20:19:00.528 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-11-01 20:19:00.531 [Thread-96] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:19:00.531 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:19:00.532 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:19:00.533 [Thread-96] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:19:00.538 [Thread-96] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:19:00.538 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:19:00.539 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:19:00.540 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:19:00.540 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:19:00.540 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:19:00.541 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:19:00.542 [Thread-96] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:19:00.542 [Thread-96] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown initiated...
2025-11-01 20:19:00.543 [Thread-96] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown completed.
2025-11-01 20:19:00.727 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:19:00.728 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:19:00.728 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:19:01.131 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:19:01.157 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-01 20:19:01.369 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:19:01.370 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:19:01.370 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:19:01.371 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:19:01.383 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:19:01.383 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 653 ms
2025-11-01 20:19:01.521 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:19:01.521 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:19:01.613 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:19:01.613 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Starting...
2025-11-01 20:19:01.615 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-25 - Added connection conn240: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:19:01.616 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Start completed.
2025-11-01 20:19:01.616 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:19:01.731 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:19:01.731 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:19:01.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:19:01.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:19:01.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:19:01.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:19:01.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:19:01.734 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:19:01.735 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:19:01.735 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:19:01.736 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:19:01.736 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:19:01.737 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:19:01.739 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:19:01.740 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:19:01.741 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:19:01.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:19:01.744 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:19:02.122 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:19:02.440 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:19:02.488 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:19:02.632 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:19:02.761 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:19:02.822 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:19:02.858 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:19:03.008 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:19:03.083 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:19:03.116 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:19:03.119 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:19:03.133 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.436 seconds (process running for 1667.847)
2025-11-01 20:19:03.136 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:19:32.649 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:19:32.651 [Thread-100] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:19:32.652 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:19:32.652 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:19:32.653 [Thread-100] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:19:32.657 [Thread-100] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:19:32.657 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:19:32.658 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:19:32.659 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:19:32.659 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:19:32.660 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:19:32.660 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:19:32.661 [Thread-100] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:19:32.662 [Thread-100] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown initiated...
2025-11-01 20:19:32.663 [Thread-100] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown completed.
2025-11-01 20:19:32.845 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:19:32.846 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:19:32.846 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:19:33.217 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:19:33.244 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-11-01 20:19:33.432 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:19:33.433 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:19:33.433 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:19:33.433 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:19:33.444 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:19:33.444 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 596 ms
2025-11-01 20:19:33.564 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:19:33.564 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:19:33.639 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:19:33.640 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Starting...
2025-11-01 20:19:33.642 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-26 - Added connection conn250: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:19:33.642 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Start completed.
2025-11-01 20:19:33.643 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:19:33.799 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:19:33.800 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:19:33.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:19:33.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:19:33.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:19:33.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:19:33.802 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:19:33.804 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:19:33.805 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:19:33.806 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:19:33.808 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:19:33.809 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:19:33.811 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:19:33.813 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:19:33.815 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:19:33.817 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:19:33.819 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:19:33.821 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:19:34.380 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:19:34.712 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:19:34.764 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:19:34.899 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:19:35.013 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:19:35.074 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:19:35.112 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:19:35.254 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:19:35.331 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:19:35.381 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:19:35.385 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:19:35.404 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.591 seconds (process running for 1700.119)
2025-11-01 20:19:35.405 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:19:35.407 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:19:35.408 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:19:35.409 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:19:36.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:20:05.401 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:20:05.402 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:20:05.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:20:06.657 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:20:35.401 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:20:35.402 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:20:35.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:20:35.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:21:05.401 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:21:05.402 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:21:05.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:21:05.538 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:21:35.401 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:21:35.402 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:21:35.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:21:35.855 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:22:05.401 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:22:05.402 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:22:05.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:22:05.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:22:13.709 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:22:13.712 [Thread-104] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:22:13.712 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:22:13.715 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:22:13.715 [Thread-104] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:22:13.720 [Thread-104] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:22:13.720 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:22:13.721 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:22:13.722 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:22:13.722 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:22:13.723 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:22:13.723 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:22:13.724 [Thread-104] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:22:13.725 [Thread-104] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Shutdown initiated...
2025-11-01 20:22:13.726 [Thread-104] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Shutdown completed.
2025-11-01 20:22:14.003 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:22:14.003 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:22:14.003 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:22:14.610 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:22:14.644 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 5 JPA repository interfaces.
2025-11-01 20:22:14.837 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:22:14.838 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:22:14.838 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:22:14.838 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:22:14.848 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:22:14.849 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 842 ms
2025-11-01 20:22:14.970 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:22:14.971 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:22:15.049 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:22:15.049 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Starting...
2025-11-01 20:22:15.051 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-27 - Added connection conn260: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:22:15.052 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Start completed.
2025-11-01 20:22:15.052 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:22:15.200 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:22:15.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:22:15.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:22:15.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:22:15.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:22:15.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:22:15.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:22:15.203 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:22:15.203 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:22:15.204 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:22:15.204 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:22:15.205 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:22:15.205 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:22:15.207 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:22:15.208 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:22:15.209 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:22:15.210 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:22:15.212 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:22:15.629 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:22:15.933 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:22:15.979 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:22:16.102 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:22:16.217 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:22:16.272 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:22:16.301 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:22:16.442 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:22:16.529 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:22:16.555 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:22:16.557 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:22:16.571 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:22:16.572 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.621 seconds (process running for 1861.286)
2025-11-01 20:22:16.573 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/500
2025-11-01 20:22:16.575 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:22:16.575 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:22:17.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 500 INTERNAL_SERVER_ERROR
2025-11-01 20:22:17.346 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Servio externo (Gateway de Pagamento) no est disponvel (Status: DOWN)
2025-11-01 20:22:32.022 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:22:32.025 [Thread-108] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:22:32.025 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:22:32.027 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:22:32.027 [Thread-108] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:22:32.032 [Thread-108] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:22:32.033 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:22:32.034 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:22:32.035 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:22:32.035 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:22:32.035 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:22:32.036 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:22:32.037 [Thread-108] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:22:32.037 [Thread-108] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Shutdown initiated...
2025-11-01 20:22:32.038 [Thread-108] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Shutdown completed.
2025-11-01 20:22:32.224 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:22:32.224 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:22:32.224 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:22:32.603 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:22:32.628 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 5 JPA repository interfaces.
2025-11-01 20:22:32.820 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:22:32.821 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:22:32.821 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:22:32.821 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:22:32.832 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:22:32.832 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 606 ms
2025-11-01 20:22:32.980 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:22:32.981 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:22:33.086 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:22:33.087 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Starting...
2025-11-01 20:22:33.089 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-28 - Added connection conn270: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:22:33.089 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Start completed.
2025-11-01 20:22:33.090 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:22:33.260 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:22:33.260 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:22:33.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:22:33.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:22:33.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:22:33.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:22:33.262 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:22:33.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:22:33.264 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:22:33.265 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:22:33.266 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:22:33.267 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:22:33.268 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:22:33.270 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:22:33.271 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:22:33.272 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:22:33.274 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:22:33.276 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:22:33.742 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:22:34.070 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:22:34.139 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:22:34.345 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:22:34.475 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:22:34.548 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:22:34.590 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:22:34.746 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:22:34.839 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:22:34.873 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:22:34.875 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:22:34.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:22:34.891 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.695 seconds (process running for 1879.606)
2025-11-01 20:22:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:22:34.896 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:22:34.897 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:22:35.306 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:23:04.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:23:04.890 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:23:04.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:23:05.743 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:23:34.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:23:34.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:23:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:23:35.036 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:24:04.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:24:04.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:24:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:24:05.037 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:24:34.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:24:34.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:24:34.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:24:37.645 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:24:40.345 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-11-01 20:24:40.347 [Thread-112] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:24:40.348 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:24:40.349 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:24:40.349 [Thread-112] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:24:40.356 [Thread-112] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:24:40.356 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:24:40.357 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:24:40.358 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:24:40.358 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:24:40.358 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:24:40.359 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:24:40.360 [Thread-112] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:24:40.360 [Thread-112] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Shutdown initiated...
2025-11-01 20:24:40.362 [Thread-112] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Shutdown completed.
2025-11-01 20:24:40.548 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:24:40.548 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:24:40.549 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:24:40.964 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:24:40.990 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-01 20:24:41.173 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:24:41.174 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:24:41.174 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:24:41.174 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:24:41.185 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:24:41.185 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 635 ms
2025-11-01 20:24:41.309 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:24:41.309 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:24:41.388 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:24:41.389 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Starting...
2025-11-01 20:24:41.391 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-29 - Added connection conn280: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:24:41.391 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Start completed.
2025-11-01 20:24:41.392 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:24:41.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:24:41.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:24:41.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:24:41.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:24:41.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:24:41.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:24:41.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:24:41.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:24:41.534 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:24:41.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:24:41.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:24:41.536 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:24:41.537 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:24:41.539 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:24:41.540 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:24:41.541 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:24:41.542 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:24:41.544 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:24:41.982 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:24:42.230 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:24:42.275 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:24:42.391 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:24:42.495 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:24:42.547 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:24:42.578 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:24:42.715 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:24:42.797 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:24:42.825 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:24:42.826 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:24:42.839 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:24:42.840 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.319 seconds (process running for 2007.555)
2025-11-01 20:24:42.841 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:24:42.844 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:24:42.845 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:24:43.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:25:08.337 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:25:08.339 [Thread-116] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:25:08.339 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:25:08.340 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:25:08.340 [Thread-116] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:25:08.344 [Thread-116] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:25:08.344 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:25:08.345 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:25:08.345 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:25:08.345 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:25:08.346 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:25:08.346 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:25:08.347 [Thread-116] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:25:08.347 [Thread-116] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Shutdown initiated...
2025-11-01 20:25:08.348 [Thread-116] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Shutdown completed.
2025-11-01 20:25:08.524 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:25:08.525 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:25:08.525 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:25:08.983 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:25:09.021 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 5 JPA repository interfaces.
2025-11-01 20:25:09.391 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:25:09.391 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:25:09.392 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:25:09.392 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:25:09.403 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:25:09.403 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 875 ms
2025-11-01 20:25:09.525 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:25:09.525 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:25:09.618 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:25:09.619 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Starting...
2025-11-01 20:25:09.622 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-30 - Added connection conn290: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:25:09.622 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Start completed.
2025-11-01 20:25:09.623 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:25:09.748 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:25:09.748 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:25:09.748 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:25:09.748 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:25:09.749 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:25:09.749 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:25:09.749 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:25:09.751 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:25:09.752 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:25:09.752 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:25:09.753 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:25:09.754 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:25:09.755 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:25:09.756 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:25:09.757 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:25:09.758 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:25:09.759 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:25:09.761 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:25:10.189 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:25:10.438 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:25:10.488 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:25:10.612 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:25:10.716 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:25:10.767 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:25:10.805 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:25:10.950 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:25:11.023 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:25:11.052 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:25:11.054 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:25:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:25:11.068 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.576 seconds (process running for 2035.783)
2025-11-01 20:25:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:25:11.073 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:25:11.073 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:25:11.699 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:25:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:25:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:25:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:25:41.209 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:26:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:26:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:26:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:26:11.204 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:26:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:26:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:26:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:26:41.478 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:27:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:27:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:27:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:27:11.937 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:27:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:27:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:27:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:27:41.356 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:28:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:28:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:28:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:28:11.232 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:28:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:28:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:28:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:28:41.209 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:29:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:29:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:29:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:29:11.201 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:29:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:29:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:29:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:29:41.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:30:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:30:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:30:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:30:11.204 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:30:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:30:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:30:41.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:30:41.211 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:31:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:31:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:31:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:31:11.700 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:31:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:31:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:31:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:31:41.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:32:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:32:11.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:32:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:32:11.338 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:32:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:32:41.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:32:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:32:41.204 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:33:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:33:11.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:33:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:33:11.225 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:33:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:33:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:33:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:33:41.689 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:34:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:34:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:34:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:34:11.201 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:34:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:34:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:34:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:34:41.209 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:35:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:35:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:35:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:35:11.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:35:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:35:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:35:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:35:41.291 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:36:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:36:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:36:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:36:11.202 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:36:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:36:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:36:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:36:41.213 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:37:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:37:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:37:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:37:12.894 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:37:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:37:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:37:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:37:41.210 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:38:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:38:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:38:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:38:11.734 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:38:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:38:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:38:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:38:41.216 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:39:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:39:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:39:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:39:12.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:39:14.354 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 20:39:14.354 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 20:39:14.355 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 20:39:14.355 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 20:39:14.355 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 20:39:14.356 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1736b750
2025-11-01 20:39:14.356 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6240c407
2025-11-01 20:39:14.357 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 20:39:14.357 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-01 20:39:14.606 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 20:39:14.607 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:39:14.608 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:39:19.662 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:39:19.663 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:39:19.664 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:39:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:39:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:39:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:39:41.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:40:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:40:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:40:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:40:11.202 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:40:13.283 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-01 20:40:13.287 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-01T20:40:24Z. Current time: 2025-11-01T23:40:13Z, a difference of 10789287 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-01 20:40:13.288 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:40:13.290 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-01 20:40:13.291 [http-nio-8080-exec-4] DEBUG [a72566b667964482] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-01 20:40:13.292 [http-nio-8080-exec-4] DEBUG [a72566b667964482] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-01 20:40:13.297 [http-nio-8080-exec-4] DEBUG [a72566b667964482] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@406e43f6]
2025-11-01 20:40:13.525 [http-nio-8080-exec-4] DEBUG [a72566b667964482] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 20:40:13.649 [http-nio-8080-exec-4] DEBUG [a72566b667964482] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-01 20:40:13.658 [http-nio-8080-exec-4] DEBUG [a72566b667964482] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:40:13.659 [http-nio-8080-exec-4] DEBUG [a72566b667964482] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@22428386]
2025-11-01 20:40:13.667 [http-nio-8080-exec-4] DEBUG [a72566b667964482] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 20:40:32.189 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 20:40:32.190 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:40:32.191 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:40:32.330 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:40:32.331 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:40:32.331 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:40:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:40:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:40:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:40:41.627 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:41:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:41:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:41:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:41:11.201 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:41:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:41:41.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:41:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:41:41.203 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:42:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:42:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:42:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:42:11.201 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:42:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:42:41.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:42:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:42:41.380 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:43:11.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:43:11.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:43:11.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:43:11.202 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:43:41.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:43:41.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:43:41.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:43:41.228 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:44:06.399 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:44:06.401 [Thread-120] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:44:06.402 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:06.403 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:44:06.403 [Thread-120] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:06.409 [Thread-120] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:06.410 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:06.410 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:06.411 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:06.411 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:06.412 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:06.412 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:06.413 [Thread-120] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:44:06.414 [Thread-120] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Shutdown initiated...
2025-11-01 20:44:06.415 [Thread-120] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Shutdown completed.
2025-11-01 20:44:06.617 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:44:06.617 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:44:06.617 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:44:07.024 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:44:07.048 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 5 JPA repository interfaces.
2025-11-01 20:44:07.282 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:44:07.284 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:07.285 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:44:07.285 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:44:07.298 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:44:07.298 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 678 ms
2025-11-01 20:44:07.445 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:44:07.446 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:44:07.531 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:44:07.533 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Starting...
2025-11-01 20:44:07.535 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-31 - Added connection conn300: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:44:07.535 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Start completed.
2025-11-01 20:44:07.536 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:44:07.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:07.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:07.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:07.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:07.663 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:07.664 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:07.664 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:44:07.666 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:44:07.667 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:44:07.668 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:44:07.669 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:44:07.669 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:44:07.670 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:44:07.671 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:44:07.672 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:44:07.673 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:07.674 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:07.675 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:08.163 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:44:08.666 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:44:08.738 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:44:08.967 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:44:09.130 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:44:09.245 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:44:09.310 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:44:09.652 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:44:09.802 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:44:09.860 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:09.864 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:44:09.891 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.31 seconds (process running for 3174.606)
2025-11-01 20:44:09.900 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:44:09.902 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:44:09.903 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:44:09.904 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:44:10.303 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:44:11.225 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:44:11.227 [Thread-124] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:44:11.228 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:11.229 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:44:11.229 [Thread-124] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:11.232 [Thread-124] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:11.233 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:11.234 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:11.234 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:11.234 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:11.235 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:11.235 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:11.236 [Thread-124] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:44:11.236 [Thread-124] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Shutdown initiated...
2025-11-01 20:44:11.238 [Thread-124] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Shutdown completed.
2025-11-01 20:44:11.444 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:44:11.445 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:44:11.445 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:44:11.955 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:44:11.982 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-11-01 20:44:12.180 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:44:12.181 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:12.181 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:44:12.181 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:44:12.192 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:44:12.192 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 745 ms
2025-11-01 20:44:12.328 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:44:12.328 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:44:12.408 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:44:12.409 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Starting...
2025-11-01 20:44:12.411 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-32 - Added connection conn310: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:44:12.411 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Start completed.
2025-11-01 20:44:12.412 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:44:12.557 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:12.557 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:12.557 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:12.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:12.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:12.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:12.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:44:12.559 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:44:12.560 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:44:12.560 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:44:12.561 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:44:12.562 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:44:12.562 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:44:12.564 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:44:12.565 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:44:12.566 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:12.566 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:12.568 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:12.919 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:44:13.121 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token ""/h2-console/**"", delete this token
	Syntax error, insert ")" to complete MethodInvocation

2025-11-01 20:44:13.121 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:13.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:13.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:13.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:13.123 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:13.123 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:13.123 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:13.124 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:44:13.124 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Shutdown initiated...
2025-11-01 20:44:13.127 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Shutdown completed.
2025-11-01 20:44:13.128 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-01 20:44:13.171 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-01 20:44:13.303 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token ""/h2-console/**"", delete this token
	Syntax error, insert ")" to complete MethodInvocation

	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token ""/h2-console/**"", delete this token
	Syntax error, insert ")" to complete MethodInvocation

	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:200)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:89)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Syntax error on token ""/h2-console/**"", delete this token
	Syntax error, insert ")" to complete MethodInvocation

	at com.deliverytech.delivery.config.SecurityConfig.securityFilterChain(SecurityConfig.java:143)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$2(<generated>)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:172)
	... 27 common frames omitted
2025-11-01 20:44:37.931 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:44:37.931 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:44:37.931 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:44:38.341 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:44:38.365 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 5 JPA repository interfaces.
2025-11-01 20:44:38.568 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:44:38.570 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:38.571 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:44:38.571 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:44:38.581 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:44:38.582 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 649 ms
2025-11-01 20:44:38.721 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:44:38.721 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:44:38.794 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:44:38.795 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Starting...
2025-11-01 20:44:38.796 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-33 - Added connection conn320: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:44:38.796 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Start completed.
2025-11-01 20:44:38.797 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:44:38.938 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:38.938 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:38.938 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:38.938 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:38.938 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:38.939 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:38.939 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:44:38.940 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:44:38.942 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:44:38.943 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:44:38.945 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:44:38.946 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:44:38.947 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:44:38.949 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:44:38.950 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:44:38.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:38.953 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:38.955 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:39.424 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:44:39.685 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:44:39.724 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:44:39.873 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:44:40.035 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:44:40.117 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:44:40.162 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:44:40.331 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:44:40.427 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:44:40.463 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:40.465 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:44:40.482 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:44:40.483 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.585 seconds (process running for 3205.198)
2025-11-01 20:44:40.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:44:40.484 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:44:40.488 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:44:41.005 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:44:43.841 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:44:43.844 [Thread-128] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:44:43.846 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:43.848 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:44:43.849 [Thread-128] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:43.861 [Thread-128] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:43.867 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:43.868 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:43.869 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:43.869 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:43.869 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:43.870 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:43.871 [Thread-128] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:44:43.871 [Thread-128] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Shutdown initiated...
2025-11-01 20:44:43.876 [Thread-128] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Shutdown completed.
2025-11-01 20:44:44.259 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:44:44.259 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:44:44.259 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:44:45.000 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:44:45.039 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 5 JPA repository interfaces.
2025-11-01 20:44:45.430 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:44:45.431 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:45.431 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:44:45.431 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:44:45.445 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:44:45.446 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1183 ms
2025-11-01 20:44:45.644 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:44:45.644 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:44:45.772 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:44:45.774 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Starting...
2025-11-01 20:44:45.777 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-34 - Added connection conn330: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:44:45.778 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Start completed.
2025-11-01 20:44:45.780 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:44:45.963 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:45.963 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:45.963 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:45.964 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:45.964 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:45.964 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:45.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:44:45.966 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:44:45.968 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:44:45.969 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:44:45.971 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:44:45.972 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:44:45.974 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:44:45.975 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:44:45.976 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:44:45.978 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:45.979 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:45.981 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:46.376 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:44:46.723 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:44:46.801 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:44:47.043 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:44:47.249 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:44:47.337 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:44:47.393 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:44:47.579 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:44:47.658 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:44:47.718 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:47.723 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:44:47.736 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:44:47.736 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.521 seconds (process running for 3212.451)
2025-11-01 20:44:47.737 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:44:47.738 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:44:47.740 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:44:48.130 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:44:49.067 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 20:44:49.069 [Thread-135] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:44:49.069 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:49.070 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:44:49.071 [Thread-135] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:49.074 [Thread-135] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:49.075 [Thread-135] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:49.075 [Thread-135] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:49.076 [Thread-135] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:49.076 [Thread-135] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:49.076 [Thread-135] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:49.076 [Thread-135] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:49.077 [Thread-135] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:44:49.078 [Thread-135] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Shutdown initiated...
2025-11-01 20:44:49.079 [Thread-135] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Shutdown completed.
2025-11-01 20:44:49.317 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 423546 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:44:49.318 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:44:49.318 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:44:49.819 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:44:49.843 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 5 JPA repository interfaces.
2025-11-01 20:44:50.038 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:44:50.039 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:50.039 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:44:50.040 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:44:50.053 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:44:50.053 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 732 ms
2025-11-01 20:44:50.191 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:44:50.191 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:44:50.262 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:44:50.263 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Starting...
2025-11-01 20:44:50.265 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-35 - Added connection conn340: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:44:50.265 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Start completed.
2025-11-01 20:44:50.266 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:44:50.411 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:44:50.414 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:44:50.414 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:44:50.414 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:44:50.414 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:44:50.414 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:44:50.415 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:44:50.418 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:44:50.420 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:44:50.421 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:44:50.422 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:44:50.430 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:44:50.431 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:44:50.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:44:50.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:44:50.435 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:50.436 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:44:50.438 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:44:51.133 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:44:51.630 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:44:51.716 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:44:51.940 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:44:52.114 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:44:52.179 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:44:52.226 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:44:52.554 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:44:52.714 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:44:52.770 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:44:52.776 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:44:52.806 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.528 seconds (process running for 3217.521)
2025-11-01 20:44:52.812 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:44:52.821 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:44:52.823 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:44:52.826 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:44:53.862 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:44:55.861 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 20:44:55.862 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 20:44:55.862 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 20:44:55.862 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 20:44:55.862 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 20:44:55.864 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@23391ba5
2025-11-01 20:44:55.865 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7171cd9
2025-11-01 20:44:55.865 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 20:44:55.865 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-01 20:44:55.867 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 20:44:55.869 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:44:55.870 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:44:55.872 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 20:44:55.875 [http-nio-8080-exec-1] DEBUG [21d031163fce4df9] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 20:44:55.877 [http-nio-8080-exec-1] DEBUG [21d031163fce4df9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 20:44:55.930 [http-nio-8080-exec-1] DEBUG [21d031163fce4df9] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 20:44:55.932 [http-nio-8080-exec-1] DEBUG [21d031163fce4df9] o.s.w.s.view.InternalResourceView - View name [dashboard], model {}
2025-11-01 20:44:55.934 [http-nio-8080-exec-1] DEBUG [21d031163fce4df9] o.s.web.servlet.DispatcherServlet - Error rendering view [org.springframework.web.servlet.view.InternalResourceView: name [dashboard]; URL [dashboard]]
jakarta.servlet.ServletException: Circular view path [dashboard]: would dispatch back to the current handler URL [/dashboard] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)
	at org.springframework.web.servlet.view.InternalResourceView.prepareForRendering(InternalResourceView.java:210)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:148)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:314)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1438)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.deliverytech.delivery.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:490)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:351)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:83)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:129)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at com.deliverytech.delivery.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:139)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:334)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:225)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1776)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:975)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:493)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-01 20:44:55.936 [http-nio-8080-exec-1] DEBUG [21d031163fce4df9] o.s.web.servlet.DispatcherServlet - Failed to complete request: jakarta.servlet.ServletException: Circular view path [dashboard]: would dispatch back to the current handler URL [/dashboard] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)
2025-11-01 20:44:55.941 [http-nio-8080-exec-1] ERROR [] o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Circular view path [dashboard]: would dispatch back to the current handler URL [/dashboard] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)] with root cause
jakarta.servlet.ServletException: Circular view path [dashboard]: would dispatch back to the current handler URL [/dashboard] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)
	at org.springframework.web.servlet.view.InternalResourceView.prepareForRendering(InternalResourceView.java:210)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:148)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:314)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1438)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.deliverytech.delivery.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:490)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:351)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:83)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:129)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at com.deliverytech.delivery.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:139)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:334)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:225)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1776)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:975)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:493)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-01 20:44:56.047 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-01 20:44:56.049 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:44:56.272 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:44:56.273 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:44:56.273 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:44:59.250 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 20:44:59.251 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:44:59.251 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:44:59.252 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 20:44:59.252 [http-nio-8080-exec-3] DEBUG [1bdd9df987fe47a8] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 20:44:59.253 [http-nio-8080-exec-3] DEBUG [1bdd9df987fe47a8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 20:44:59.254 [http-nio-8080-exec-3] DEBUG [1bdd9df987fe47a8] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 20:44:59.255 [http-nio-8080-exec-3] DEBUG [1bdd9df987fe47a8] o.s.w.s.view.InternalResourceView - View name [dashboard], model {}
2025-11-01 20:44:59.255 [http-nio-8080-exec-3] DEBUG [1bdd9df987fe47a8] o.s.web.servlet.DispatcherServlet - Error rendering view [org.springframework.web.servlet.view.InternalResourceView: name [dashboard]; URL [dashboard]]
jakarta.servlet.ServletException: Circular view path [dashboard]: would dispatch back to the current handler URL [/dashboard] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)
	at org.springframework.web.servlet.view.InternalResourceView.prepareForRendering(InternalResourceView.java:210)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:148)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:314)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1438)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.deliverytech.delivery.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:490)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:351)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:83)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:129)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at com.deliverytech.delivery.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:139)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:334)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:225)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1776)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:975)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:493)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-01 20:44:59.257 [http-nio-8080-exec-3] DEBUG [1bdd9df987fe47a8] o.s.web.servlet.DispatcherServlet - Failed to complete request: jakarta.servlet.ServletException: Circular view path [dashboard]: would dispatch back to the current handler URL [/dashboard] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)
2025-11-01 20:44:59.258 [http-nio-8080-exec-3] ERROR [] o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Circular view path [dashboard]: would dispatch back to the current handler URL [/dashboard] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)] with root cause
jakarta.servlet.ServletException: Circular view path [dashboard]: would dispatch back to the current handler URL [/dashboard] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)
	at org.springframework.web.servlet.view.InternalResourceView.prepareForRendering(InternalResourceView.java:210)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:148)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:314)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1438)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.deliverytech.delivery.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:490)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:351)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:83)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:129)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at com.deliverytech.delivery.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:139)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:334)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:225)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1776)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:975)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:493)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-01 20:44:59.261 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-01 20:44:59.263 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:44:59.359 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:44:59.360 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:44:59.361 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:45:19.851 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:45:19.852 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:45:19.853 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:45:20.372 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:45:20.373 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:45:20.373 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:45:22.802 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:45:22.803 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:45:22.804 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:45:23.556 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:45:31.680 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:45:31.682 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:45:31.688 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:45:31.688 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:45:31.689 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:45:31.689 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:45:31.690 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:45:31.690 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:45:31.690 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:45:31.691 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:45:31.692 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Shutdown initiated...
2025-11-01 20:45:31.693 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Shutdown completed.
2025-11-01 20:46:11.347 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 443940 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:46:11.350 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:46:11.352 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:46:11.611 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-01 20:46:11.612 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-01 20:46:16.459 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:46:16.623 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 136 ms. Found 5 JPA repository interfaces.
2025-11-01 20:46:18.744 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:46:18.774 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:46:18.779 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:46:18.779 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:46:18.849 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:46:18.850 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 7236 ms
2025-11-01 20:46:19.587 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:46:19.590 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:46:21.396 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:46:21.551 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-01 20:46:22.035 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:46:22.037 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-01 20:46:22.134 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:46:24.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:46:24.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:46:24.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:46:24.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:46:24.439 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:46:24.440 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:46:24.502 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:46:24.541 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:46:24.570 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:46:24.575 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:46:24.578 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:46:24.582 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:46:24.585 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:46:24.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:46:24.611 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:46:24.615 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:46:24.618 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:46:24.630 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:46:25.381 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-01 20:46:27.212 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:46:28.550 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:46:28.617 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:46:28.886 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:46:29.057 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:46:29.210 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:46:29.313 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:46:29.843 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:46:30.075 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:46:30.211 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:46:30.227 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:46:30.263 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 21.256 seconds (process running for 22.415)
2025-11-01 20:46:30.268 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:46:30.453 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:46:30.489 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:46:31.496 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:46:55.049 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 20:46:55.050 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 20:46:55.050 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 20:46:55.050 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 20:46:55.051 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 20:46:55.053 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@39344ea7
2025-11-01 20:46:55.054 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@14e020ac
2025-11-01 20:46:55.055 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 20:46:55.055 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-01 20:46:55.086 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:46:55.107 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:46:55.116 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:46:55.207 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:46:55.209 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:46:55.210 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:47:00.258 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:47:00.260 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:47:00.261 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:47:00.630 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:47:30.258 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:47:30.259 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:47:30.260 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:47:31.025 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:48:00.258 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:48:00.260 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:48:00.262 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:48:02.292 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:48:30.258 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:48:30.260 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:48:30.261 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:48:30.493 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:49:00.258 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:49:00.259 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:49:00.260 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:49:00.397 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:49:30.258 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:49:30.260 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:49:30.261 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:49:30.604 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:49:47.998 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 96 class path changes (0 additions, 96 deletions, 0 modifications)
2025-11-01 20:49:48.007 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:49:48.010 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:49:48.018 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:49:48.019 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 20:49:48.033 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:49:48.034 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:49:48.041 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:49:48.043 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:49:48.044 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:49:48.045 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:49:48.046 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:49:48.063 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:49:48.065 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-01 20:49:48.076 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-01 20:49:54.573 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 443940 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:49:54.573 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:49:54.574 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:49:55.382 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:49:55.433 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2025-11-01 20:49:55.861 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:49:55.862 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:49:55.863 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:49:55.881 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:49:55.882 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1304 ms
2025-11-01 20:49:56.140 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:49:56.141 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:49:56.395 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:49:56.397 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-01 20:49:56.401 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:49:56.401 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-01 20:49:56.403 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:49:57.115 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:49:57.116 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:49:57.116 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:49:57.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:49:57.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:49:57.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:49:57.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:49:57.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:49:57.130 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:49:57.137 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:49:57.141 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:49:57.145 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:49:57.147 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:49:57.151 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:49:57.153 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:49:57.157 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:49:57.160 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:49:57.164 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:49:57.940 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:49:58.449 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:49:58.587 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:49:58.984 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:49:59.207 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:49:59.320 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:49:59.385 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:49:59.694 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:49:59.868 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:49:59.957 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:49:59.986 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.529 seconds (process running for 232.138)
2025-11-01 20:49:59.985 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:49:59.989 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:49:59.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:49:59.997 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 20:50:01.190 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:50:09.298 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 95 class path changes (0 additions, 95 deletions, 0 modifications)
2025-11-01 20:50:09.301 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:50:09.306 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:50:09.316 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:50:09.317 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:50:09.324 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:50:09.326 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:50:09.327 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:50:09.328 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:50:09.329 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:50:09.331 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:50:09.331 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-01 20:50:09.337 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-01 20:50:19.312 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 443940 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:50:19.312 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:50:19.313 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:50:19.775 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:50:19.809 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 5 JPA repository interfaces.
2025-11-01 20:50:20.007 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:50:20.008 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:50:20.008 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:50:20.020 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:50:20.020 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 706 ms
2025-11-01 20:50:20.138 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:50:20.139 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:50:20.261 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:50:20.262 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-01 20:50:20.264 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:50:20.265 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-01 20:50:20.266 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:50:20.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:50:20.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:50:20.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:50:20.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:50:20.470 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:50:20.470 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:50:20.471 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:50:20.473 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:50:20.474 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:50:20.476 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:50:20.478 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:50:20.479 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:50:20.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:50:20.484 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:50:20.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:50:20.488 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:50:20.490 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:50:20.492 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:50:21.009 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:50:21.347 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:50:21.393 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:50:21.628 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:50:21.848 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:50:21.907 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:50:21.945 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:50:22.092 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:50:22.182 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:50:22.215 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:50:22.229 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:50:22.229 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.97 seconds (process running for 254.381)
2025-11-01 20:50:22.230 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:50:22.231 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:50:22.233 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   EnvironmentEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpointWebExtension matched:
      - @ConditionalOnBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) found bean 'environmentEndpoint'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpointWebExtension; SearchStrategy: all) did not find any beans (OnBeanCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoContributorAutoConfiguration#buildInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) found a single bean 'buildProperties' (OnBeanCondition)

   InfoContributorAutoConfiguration#gitInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) found a single bean 'gitProperties'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.GitInfoContributor; SearchStrategy: all) did not find any beans (OnBeanCondition)

   InfoEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoEndpointAutoConfiguration#infoEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.InfoEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   LoggersEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   LoggersEndpointAutoConfiguration#loggersEndpoint matched:
      - Logging System enabled (LoggersEndpointAutoConfiguration.OnEnabledLoggingSystemCondition)
      - @ConditionalOnBean (types: org.springframework.boot.logging.LoggingSystem; SearchStrategy: all) found bean 'springBootLoggingSystem'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.logging.LoggersEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MetricsEndpointAutoConfiguration matched:
      - @ConditionalOnClass found required class 'io.micrometer.core.annotation.Timed' (OnClassCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   MetricsEndpointAutoConfiguration#metricsEndpoint matched:
      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean 'prometheusMeterRegistry'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.MetricsEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#buildProperties matched:
      - @ConditionalOnResource found location ${spring.info.build.location:classpath:META-INF/build-info.properties} (OnResourceCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#gitProperties matched:
      - GitResource found git info at classpath:git.properties (ProjectInfoAutoConfiguration.GitResourceAvailableCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration#prometheusEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.export.prometheus.PrometheusScrapeEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   JpaBaseConfiguration.JpaWebConfiguration:
      Did not match:
         - @ConditionalOnBooleanProperty (spring.jpa.open-in-view=true) found different value in property 'spring.jpa.open-in-view' (OnPropertyCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.web.servlet.config.annotation.WebMvcConfigurer' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' securityFilterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   UserDetailsServiceAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.security.authentication.AuthenticationManager,org.springframework.security.authentication.AuthenticationProvider,org.springframework.security.core.userdetails.UserDetailsService,org.springframework.security.authentication.AuthenticationManagerResolver,?; SearchStrategy: all) found beans of type 'org.springframework.security.authentication.AuthenticationManager' authenticationManager and found beans of type 'org.springframework.security.core.userdetails.UserDetailsService' authService (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.authentication.AuthenticationManager' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)
         - AnyNestedCondition 1 matched 2 did not; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.PasswordConfigured @ConditionalOnProperty (spring.security.user.password) did not find property 'spring.security.user.password'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.NameConfigured @ConditionalOnProperty (spring.security.user.name) did not find property 'spring.security.user.name'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.MissingAlternative @ConditionalOnMissingClass did not find unwanted classes 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository', 'org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector', 'org.springframework.security.saml2.provider.service.registration.RelyingPartyRegistrationRepository' (UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-01 20:50:22.810 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:50:25.273 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-3].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 20:50:25.274 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 20:50:25.274 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 20:50:25.274 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 20:50:25.274 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 20:50:25.277 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@38ae994d
2025-11-01 20:50:25.278 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@149552
2025-11-01 20:50:25.278 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 20:50:25.278 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-01 20:50:25.286 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:25.289 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:25.290 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:25.379 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:25.380 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:25.381 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:26.073 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:26.074 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:26.075 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:26.327 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:26.328 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:26.328 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:27.053 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:27.054 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:27.055 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:27.108 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:27.109 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:27.109 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:27.741 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:27.742 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:27.743 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:27.804 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:27.805 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:27.805 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:28.255 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:28.256 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:28.257 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:28.325 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:28.326 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:28.326 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:28.496 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:28.497 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:28.497 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:28.539 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:28.540 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:28.540 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:28.731 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:28.732 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:28.732 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:28.778 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:28.779 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:28.779 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:28.931 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:28.931 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:28.931 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:28.980 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:28.981 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:28.981 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:29.113 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:29.113 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:29.114 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:29.160 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:29.161 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:29.161 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:29.315 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:29.316 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:29.316 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:29.369 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:29.370 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:29.370 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:29.531 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:29.531 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:29.531 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:29.580 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:29.581 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:29.582 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:29.735 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:29.735 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:29.736 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:29.828 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:29.828 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:29.828 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:31.616 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:50:31.617 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:31.618 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:31.717 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:50:31.718 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:50:31.718 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:50:52.228 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:50:52.230 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:50:52.231 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:50:52.381 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:51:04.798 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 95 class path changes (0 additions, 95 deletions, 0 modifications)
2025-11-01 20:51:04.801 [Thread-22] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:51:04.802 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:51:04.807 [Thread-22] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:51:04.808 [Thread-22] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:51:04.809 [Thread-22] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:51:04.810 [Thread-22] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:51:04.811 [Thread-22] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:51:04.812 [Thread-22] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:51:04.813 [Thread-22] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:51:04.814 [Thread-22] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:51:04.815 [Thread-22] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-01 20:51:04.821 [Thread-22] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-01 20:51:08.756 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 443940 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:51:08.757 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:51:08.758 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:51:09.344 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:51:09.346 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2025-11-01 20:51:09.593 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:51:09.594 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:51:09.594 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:51:09.609 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:51:09.609 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 847 ms
2025-11-01 20:51:09.732 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:51:09.818 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:51:09.819 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-01 20:51:09.822 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:51:09.822 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-01 20:51:09.823 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:51:09.861 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:51:10.060 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 6 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:51:10.150 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:51:10.173 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:51:10.201 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:51:10.554 [restartedMain] WARN  [] o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 2453885d-f5bf-43eb-adec-b4ed38a589be

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-01 20:51:10.557 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-01 20:51:10.608 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:51:10.716 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:51:10.793 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:51:10.802 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'Joo Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null)
2025-11-01 20:51:10.804 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:51:10.805 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:51:10.805 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-01 20:51:10.815 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-01 20:51:10.817 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-01 20:51:10.853 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-01 20:51:10.857 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'Joo Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'Joo Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:293)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 23 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "USUARIO" not found (this database is empty); SQL statement:
INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'Joo Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null) [42104-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7932)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7916)
	at org.h2.command.Parser.readTableOrView(Parser.java:7895)
	at org.h2.command.Parser.readTableOrView(Parser.java:7857)
	at org.h2.command.Parser.parseInsert(Parser.java:1521)
	at org.h2.command.Parser.parsePrepared(Parser.java:698)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:556)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 33 common frames omitted
2025-11-01 20:51:16.988 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 443940 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:51:16.988 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:51:16.989 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:51:17.697 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:51:17.741 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 5 JPA repository interfaces.
2025-11-01 20:51:18.203 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:51:18.205 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:51:18.205 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:51:18.221 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:51:18.221 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1229 ms
2025-11-01 20:51:18.485 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:51:18.486 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:51:18.636 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:51:18.637 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-01 20:51:18.649 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn70: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:51:18.650 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-01 20:51:18.651 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:51:19.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:51:19.534 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:51:19.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:51:19.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:51:19.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:51:19.536 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:51:19.537 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:51:19.543 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:51:19.551 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:51:19.556 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:51:19.569 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:51:19.573 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:51:19.576 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:51:19.579 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:51:19.585 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:51:19.592 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:51:19.599 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:51:19.615 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:51:20.506 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:51:20.924 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:51:21.011 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:51:21.245 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:51:21.353 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:51:21.412 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:51:21.475 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:51:21.745 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:51:21.874 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:51:21.919 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:51:21.934 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:51:21.935 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.046 seconds (process running for 314.087)
2025-11-01 20:51:21.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:51:21.937 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:51:21.940 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   EnvironmentEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpointWebExtension matched:
      - @ConditionalOnBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) found bean 'environmentEndpoint'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpointWebExtension; SearchStrategy: all) did not find any beans (OnBeanCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoContributorAutoConfiguration#buildInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) found a single bean 'buildProperties' (OnBeanCondition)

   InfoContributorAutoConfiguration#gitInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) found a single bean 'gitProperties'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.GitInfoContributor; SearchStrategy: all) did not find any beans (OnBeanCondition)

   InfoEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoEndpointAutoConfiguration#infoEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.InfoEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   LoggersEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   LoggersEndpointAutoConfiguration#loggersEndpoint matched:
      - Logging System enabled (LoggersEndpointAutoConfiguration.OnEnabledLoggingSystemCondition)
      - @ConditionalOnBean (types: org.springframework.boot.logging.LoggingSystem; SearchStrategy: all) found bean 'springBootLoggingSystem'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.logging.LoggersEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MetricsEndpointAutoConfiguration matched:
      - @ConditionalOnClass found required class 'io.micrometer.core.annotation.Timed' (OnClassCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   MetricsEndpointAutoConfiguration#metricsEndpoint matched:
      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean 'prometheusMeterRegistry'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.MetricsEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#buildProperties matched:
      - @ConditionalOnResource found location ${spring.info.build.location:classpath:META-INF/build-info.properties} (OnResourceCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#gitProperties matched:
      - GitResource found git info at classpath:git.properties (ProjectInfoAutoConfiguration.GitResourceAvailableCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration#prometheusEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.export.prometheus.PrometheusScrapeEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   JpaBaseConfiguration.JpaWebConfiguration:
      Did not match:
         - @ConditionalOnBooleanProperty (spring.jpa.open-in-view=true) found different value in property 'spring.jpa.open-in-view' (OnPropertyCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.web.servlet.config.annotation.WebMvcConfigurer' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' securityFilterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   UserDetailsServiceAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.security.authentication.AuthenticationManager,org.springframework.security.authentication.AuthenticationProvider,org.springframework.security.core.userdetails.UserDetailsService,org.springframework.security.authentication.AuthenticationManagerResolver,?; SearchStrategy: all) found beans of type 'org.springframework.security.authentication.AuthenticationManager' authenticationManager and found beans of type 'org.springframework.security.core.userdetails.UserDetailsService' authService (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.authentication.AuthenticationManager' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)
         - AnyNestedCondition 1 matched 2 did not; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.PasswordConfigured @ConditionalOnProperty (spring.security.user.password) did not find property 'spring.security.user.password'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.NameConfigured @ConditionalOnProperty (spring.security.user.name) did not find property 'spring.security.user.name'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.MissingAlternative @ConditionalOnMissingClass did not find unwanted classes 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository', 'org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector', 'org.springframework.security.saml2.provider.service.registration.RelyingPartyRegistrationRepository' (UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-01 20:51:22.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:51:42.160 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:51:42.163 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:51:42.167 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:51:42.227 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@69a8617c
2025-11-01 20:51:46.212 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:51:46.411 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 182 ms. Found 5 JPA repository interfaces.
2025-11-01 20:51:48.830 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:51:48.948 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-01 20:51:49.675 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:51:49.683 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-01 20:51:49.777 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:51:51.933 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:51:51.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:51:51.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:51:52.400 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:51:53.193 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:51:53.224 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:51:53.225 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:51:53.226 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:51:53.227 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:51:53.227 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:51:53.241 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:51:53.297 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:51:53.325 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:51:53.340 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:51:53.346 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:51:53.354 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:51:53.359 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:51:53.403 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:51:53.408 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:51:53.412 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:51:53.416 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:51:53.431 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:51:54.533 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-01 20:51:57.168 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:51:57.536 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:51:57.543 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:51:57.788 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:51:57.895 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:51:57.904 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:51:59.390 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:01.251 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:01.450 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:02.001 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:02.298 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:02.826 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:03.337 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:03.960 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:04.278 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:04.278 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:04.279 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:04.282 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:04.282 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:04.285 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-01 20:52:04.531 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 23.824 seconds (process running for 42.409)
2025-11-01 20:52:04.571 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:04.621 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:04.695 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:05.124 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-01 20:52:05.336 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, nome, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:05.500 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-01 20:52:05.552 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:05.561 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:52:05.600 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-01 20:52:05.644 [main] DEBUG [2fc23ae164a84436] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-01 20:52:05.854 [main] DEBUG [2fc23ae164a84436] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@495dd12e]
2025-11-01 20:52:06.171 [main] DEBUG [2fc23ae164a84436] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 20:52:06.206 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:06.301 [main] DEBUG [2fc23ae164a84436] o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-11-01 20:52:06.328 [main] DEBUG [2fc23ae164a84436] o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2025-11-01 20:52:06.357 [main] DEBUG [2fc23ae164a84436] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:06.358 [main] DEBUG [2fc23ae164a84436] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Credenciais invlidas, status=401}]
2025-11-01 20:52:06.565 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@69a8617c, started on Sat Nov 01 20:51:42 BRT 2025
2025-11-01 20:52:06.580 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:06.582 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:06.587 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:06.589 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:06.592 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:06.594 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:06.596 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:06.608 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-01 20:52:06.613 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-01 20:52:06.621 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:06.782 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:06.783 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:06.783 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:06.788 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@643dd745
2025-11-01 20:52:07.719 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:07.764 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:08.122 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:08.125 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-01 20:52:08.131 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:08.132 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-01 20:52:08.133 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:08.355 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:08.356 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:08.356 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:08.357 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:08.357 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:08.358 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:08.359 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:08.362 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:08.365 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:08.367 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:08.369 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:08.371 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:08.373 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:08.375 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:08.378 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:08.380 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:08.386 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:08.390 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:08.640 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:08.676 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:08.681 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:08.691 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:08.697 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:08.704 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:08.930 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:09.283 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:09.310 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:09.475 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:09.544 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:09.607 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:09.655 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:09.857 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:09.937 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:09.938 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:09.938 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:09.938 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:09.939 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:09.942 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 3 ms
2025-11-01 20:52:10.012 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 3.391 seconds (process running for 47.89)
2025-11-01 20:52:10.020 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:10.022 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:10.026 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:10.047 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-01 20:52:10.101 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-11-01 20:52:10.110 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:10.114 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-11-01 20:52:10.115 [main] DEBUG [9ba02b1f054a4504] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#getCurrentUser(Authentication)
2025-11-01 20:52:10.158 [main] DEBUG [9ba02b1f054a4504] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:10.160 [main] DEBUG [9ba02b1f054a4504] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Token invlido. Acesso negado.}]
2025-11-01 20:52:10.191 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@643dd745, started on Sat Nov 01 20:52:06 BRT 2025
2025-11-01 20:52:11.162 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:11.172 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:11.172 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:11.175 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:11.177 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:11.179 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:11.180 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:11.181 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:11.183 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-01 20:52:11.185 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-01 20:52:11.191 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:11.273 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:11.273 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:11.273 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:11.276 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@76401f41
2025-11-01 20:52:11.915 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:11.952 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:12.174 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:12.175 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-01 20:52:12.181 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:12.181 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-01 20:52:12.182 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:12.420 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:12.421 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:12.422 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:12.422 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:12.423 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:12.423 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:12.424 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:12.428 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:12.432 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:12.435 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:12.438 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:12.442 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:12.446 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:12.450 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:12.455 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:12.459 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:12.463 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:12.468 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:12.662 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:12.687 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:12.692 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:12.697 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:12.703 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:12.710 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:12.884 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:13.135 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:13.156 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:13.304 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:13.409 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:13.557 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:13.601 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:13.714 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:13.760 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:13.761 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:13.761 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:13.761 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:13.761 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:13.762 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 20:52:13.792 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:13.792 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 2.602 seconds (process running for 51.671)
2025-11-01 20:52:13.793 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:13.795 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:13.816 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-01 20:52:13.902 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, nome, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:13.919 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-01 20:52:13.921 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:13.924 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:52:13.927 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-01 20:52:13.929 [main] DEBUG [993555e5ae894c40] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#register(RegisterRequest)
2025-11-01 20:52:13.954 [main] DEBUG [993555e5ae894c40] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@658e0f88]
2025-11-01 20:52:13.975 [main] DEBUG [993555e5ae894c40] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-01 20:52:13.986 [main] DEBUG [993555e5ae894c40] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:13.987 [main] DEBUG [993555e5ae894c40] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Email j est em uso}]
2025-11-01 20:52:13.998 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@76401f41, started on Sat Nov 01 20:52:11 BRT 2025
2025-11-01 20:52:14.362 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:14.367 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:14.367 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:14.369 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:14.371 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:14.373 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:14.374 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:14.376 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:14.378 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-01 20:52:14.380 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-01 20:52:14.392 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.controller.PedidoControllerIntegrationTest]: PedidoControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-01 20:52:14.419 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.controller.PedidoControllerIntegrationTest
2025-11-01 20:52:14.428 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:14.512 [main] INFO  [] c.d.d.c.PedidoControllerIntegrationTest - Starting PedidoControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:14.512 [main] DEBUG [] c.d.d.c.PedidoControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:14.512 [main] INFO  [] c.d.d.c.PedidoControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:14.515 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@9c6ecf
2025-11-01 20:52:15.190 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:15.228 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:15.491 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:15.493 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-01 20:52:15.498 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:15.498 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-01 20:52:15.500 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:15.665 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:15.666 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:15.666 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:15.667 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:15.667 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:15.667 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:15.668 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:15.671 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:15.675 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:15.679 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:15.682 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:15.685 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:15.688 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:15.692 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:15.697 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:15.700 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:15.704 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:15.708 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:15.913 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:15.939 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:15.945 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:15.951 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:15.961 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:15.968 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:16.111 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:16.355 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:16.388 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:16.555 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:16.611 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:16.683 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:16.712 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:16.839 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:16.892 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:16.892 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:16.892 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:16.892 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:16.892 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:16.893 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 20:52:16.922 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:16.922 [main] INFO  [] c.d.d.c.PedidoControllerIntegrationTest - Started PedidoControllerIntegrationTest in 2.495 seconds (process running for 54.801)
2025-11-01 20:52:16.923 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:16.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:16.953 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:16.959 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:16.965 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.001 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 20:52:17.003 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:17.007 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 20:52:17.008 [main] DEBUG [3f34083a78ec4ac8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 20:52:17.024 [main] DEBUG [3f34083a78ec4ac8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@6a021181]
2025-11-01 20:52:17.160 [main] DEBUG [3f34083a78ec4ac8] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:52:17.178 [main] DEBUG [3f34083a78ec4ac8] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:52:17.211 [main] DEBUG [3f34083a78ec4ac8] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-01 20:52:17.228 [main] DEBUG [3f34083a78ec4ac8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:17.229 [main] DEBUG [3f34083a78ec4ac8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@3f3f2b3]
2025-11-01 20:52:17.231 [main] DEBUG [3f34083a78ec4ac8] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.ClassCastException: class org.springframework.security.core.userdetails.User cannot be cast to class com.deliverytech.delivery.entity.Usuario (org.springframework.security.core.userdetails.User and com.deliverytech.delivery.entity.Usuario are in unnamed module of loader 'app')]
2025-11-01 20:52:17.297 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.307 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.321 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.332 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 20:52:17.336 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:17.347 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 20:52:17.350 [main] DEBUG [493f5ad4a8d74027] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 20:52:17.354 [main] DEBUG [493f5ad4a8d74027] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@4189da2a]
2025-11-01 20:52:17.402 [main] DEBUG [493f5ad4a8d74027] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-01 20:52:17.404 [main] DEBUG [493f5ad4a8d74027] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:17.404 [main] DEBUG [493f5ad4a8d74027] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6b64b3b3]
2025-11-01 20:52:17.411 [main] DEBUG [493f5ad4a8d74027] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.PedidoResponseDTO>> com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO) with 7 errors: [Field error in object 'pedidoDTO' on field 'cep': rejected value [null]; codes [ValidCEP.pedidoDTO.cep,ValidCEP.cep,ValidCEP.java.lang.String,ValidCEP]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.cep,cep]; arguments []; default message [cep]]; default message [CEP deve ter formato vlido (00000-000 ou 00000000)]] [Field error in object 'pedidoDTO' on field 'clienteId': rejected value [null]; codes [NotNull.pedidoDTO.clienteId,NotNull.clienteId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.clienteId,clienteId]; arguments []; default message [clienteId]]; default message [Cliente ID  obrigatrio]] [Field error in object 'pedidoDTO' on field 'cep': rejected value [null]; codes [NotBlank.pedidoDTO.cep,NotBlank.cep,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.cep,cep]; arguments []; default message [cep]]; default message [CEP  obrigatrio]] [Field error in object 'pedidoDTO' on field 'formaPagamento': rejected value [null]; codes [NotBlank.pedidoDTO.formaPagamento,NotBlank.formaPagamento,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.formaPagamento,formaPagamento]; arguments []; default message [formaPagamento]]; default message [Forma de pagamento  obrigatria]] [Field error in object 'pedidoDTO' on field 'enderecoEntrega': rejected value [null]; codes [NotBlank.pedidoDTO.enderecoEntrega,NotBlank.enderecoEntrega,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.enderecoEntrega,enderecoEntrega]; arguments []; default message [enderecoEntrega]]; default message [Endereo de entrega  obrigatrio]] [Field error in object 'pedidoDTO' on field 'itens': rejected value [[]]; codes [NotEmpty.pedidoDTO.itens,NotEmpty.itens,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.itens,itens]; arguments []; default message [itens]]; default message [Pedido deve ter pelo menos um item]] [Field error in object 'pedidoDTO' on field 'restauranteId': rejected value [null]; codes [NotNull.pedidoDTO.restauranteId,NotNull.restauranteId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.restauranteId,restauranteId]; arguments []; default message [restauranteId]]; default message [Restaurante ID  obrigatrio]] ]
2025-11-01 20:52:17.437 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.447 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.463 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.469 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.479 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 20:52:17.483 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:17.488 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 20:52:17.490 [main] DEBUG [9bd800c360534813] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 20:52:17.492 [main] DEBUG [9bd800c360534813] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@6139aae2]
2025-11-01 20:52:17.496 [main] DEBUG [9bd800c360534813] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:52:17.498 [main] DEBUG [9bd800c360534813] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:52:17.506 [main] DEBUG [9bd800c360534813] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-01 20:52:17.507 [main] DEBUG [9bd800c360534813] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:17.508 [main] DEBUG [9bd800c360534813] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@1cdd7a67]
2025-11-01 20:52:17.509 [main] DEBUG [9bd800c360534813] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.ClassCastException: class org.springframework.security.core.userdetails.User cannot be cast to class com.deliverytech.delivery.entity.Usuario (org.springframework.security.core.userdetails.User and com.deliverytech.delivery.entity.Usuario are in unnamed module of loader 'app')]
2025-11-01 20:52:17.518 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:17.541 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.549 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.557 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.602 [main] DEBUG [] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-01 20:52:17.620 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 20:52:17.621 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:17.624 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 20:52:17.625 [main] DEBUG [989ca87263ff4b6a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 20:52:17.630 [main] DEBUG [989ca87263ff4b6a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@46d7623a]
2025-11-01 20:52:17.632 [main] DEBUG [989ca87263ff4b6a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:52:17.635 [main] DEBUG [989ca87263ff4b6a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:52:17.640 [main] DEBUG [989ca87263ff4b6a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-01 20:52:17.641 [main] DEBUG [989ca87263ff4b6a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:17.642 [main] DEBUG [989ca87263ff4b6a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@68a474fe]
2025-11-01 20:52:17.643 [main] DEBUG [989ca87263ff4b6a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.ClassCastException: class org.springframework.security.core.userdetails.User cannot be cast to class com.deliverytech.delivery.entity.Usuario (org.springframework.security.core.userdetails.User and com.deliverytech.delivery.entity.Usuario are in unnamed module of loader 'app')]
2025-11-01 20:52:17.671 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.676 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.687 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.692 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.698 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:17.704 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 20:52:17.705 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:17.707 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 20:52:17.707 [main] DEBUG [33740b1896b64198] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 20:52:17.708 [main] DEBUG [33740b1896b64198] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@258eaf0b]
2025-11-01 20:52:17.710 [main] DEBUG [33740b1896b64198] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:52:17.711 [main] DEBUG [33740b1896b64198] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 20:52:17.713 [main] DEBUG [33740b1896b64198] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-01 20:52:17.714 [main] DEBUG [33740b1896b64198] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:17.715 [main] DEBUG [33740b1896b64198] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@7900272]
2025-11-01 20:52:17.716 [main] DEBUG [33740b1896b64198] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.ClassCastException: class org.springframework.security.core.userdetails.User cannot be cast to class com.deliverytech.delivery.entity.Usuario (org.springframework.security.core.userdetails.User and com.deliverytech.delivery.entity.Usuario are in unnamed module of loader 'app')]
2025-11-01 20:52:17.741 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.controller.ClienteControllerIntegrationTest]: ClienteControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-01 20:52:17.753 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.controller.ClienteControllerIntegrationTest
2025-11-01 20:52:17.766 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:17.804 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:17.805 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:17.805 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:17.807 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@44ed8546
2025-11-01 20:52:18.255 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:18.289 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:18.517 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:18.518 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-01 20:52:18.520 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:18.520 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-01 20:52:18.521 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:18.796 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:18.798 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:18.800 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:18.802 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:18.808 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:18.811 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:18.813 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:18.825 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:18.838 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:18.844 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:18.847 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:18.850 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:18.861 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:18.865 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:18.874 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:18.877 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:18.882 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:18.887 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:19.082 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:19.111 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:19.114 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:19.119 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:19.126 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:19.131 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:19.252 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:19.456 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:19.479 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:19.583 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:19.639 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:19.729 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:19.799 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:19.977 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:20.054 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:20.054 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:20.054 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:20.054 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:20.054 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:20.057 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-01 20:52:20.127 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:20.128 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.361 seconds (process running for 58.006)
2025-11-01 20:52:20.130 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:20.148 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:20.199 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:20.217 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 20:52:20.264 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 20:52:20.278 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:20.293 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing DELETE /api/clientes/2
2025-11-01 20:52:20.295 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:20.298 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured DELETE /api/clientes/2
2025-11-01 20:52:20.299 [main] DEBUG [d11d351387a441c2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#ativarDesativarCliente(Long)
2025-11-01 20:52:20.307 [main] DEBUG [d11d351387a441c2] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.ativarDesativarCliente(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:20.310 [main] DEBUG [d11d351387a441c2] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.ativarDesativarCliente(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:20.344 [main] DEBUG [d11d351387a441c2] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 20:52:20.388 [main] DEBUG [d11d351387a441c2] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Cliente */update cliente 
    set
        ativo=?,
        cpf=?,
        email=?,
        endereco=?,
        nome=?,
        telefone=? 
    where
        id=?
2025-11-01 20:52:20.394 [main] DEBUG [d11d351387a441c2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:20.394 [main] DEBUG [d11d351387a441c2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-11-01 20:52:20.418 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 20:52:20.427 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@44ed8546, started on Sat Nov 01 20:52:17 BRT 2025
2025-11-01 20:52:21.397 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:21.401 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:21.402 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:21.404 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:21.405 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:21.407 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:21.408 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:21.409 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:21.411 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-01 20:52:21.414 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-01 20:52:21.419 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:21.478 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:21.478 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:21.478 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:21.481 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2f54c9f1
2025-11-01 20:52:21.933 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:21.934 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:21.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:21.961 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:21.982 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:22.191 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:22.192 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-01 20:52:22.194 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:22.194 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-01 20:52:22.195 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:22.384 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:22.384 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:22.385 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:22.385 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:22.386 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:22.387 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:22.388 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:22.390 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:22.393 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:22.396 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:22.399 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:22.400 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:22.402 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:22.404 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:22.407 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:22.408 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:22.410 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:22.414 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:22.594 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:22.625 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:22.630 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:22.636 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:22.642 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:22.648 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:22.790 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:23.006 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:23.027 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:23.147 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:23.203 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:23.282 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:23.303 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:23.420 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:23.478 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:23.478 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:23.479 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:23.479 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:23.479 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:23.480 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 20:52:23.519 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:23.519 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.1 seconds (process running for 61.398)
2025-11-01 20:52:23.520 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:23.521 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:23.535 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:23.538 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 20:52:23.541 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 20:52:23.557 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/clientes
2025-11-01 20:52:23.559 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:23.562 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/clientes
2025-11-01 20:52:23.563 [main] DEBUG [ef1f76b86d1c4e9c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#cadastrarCliente(ClienteDTO)
2025-11-01 20:52:23.571 [main] DEBUG [ef1f76b86d1c4e9c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.ClienteDTO@7e48cd92]
2025-11-01 20:52:23.639 [main] DEBUG [ef1f76b86d1c4e9c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.cadastrarCliente(com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:23.644 [main] DEBUG [ef1f76b86d1c4e9c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.cadastrarCliente(com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:23.645 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:23.656 [main] DEBUG [ef1f76b86d1c4e9c] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id 
    from
        cliente c1_0 
    where
        c1_0.email=? 
    fetch
        first ? rows only
2025-11-01 20:52:23.665 [main] DEBUG [ef1f76b86d1c4e9c] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id 
    from
        cliente c1_0 
    where
        c1_0.cpf=? 
    fetch
        first ? rows only
2025-11-01 20:52:23.675 [main] DEBUG [ef1f76b86d1c4e9c] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:23.691 [main] DEBUG [ef1f76b86d1c4e9c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:23.692 [main] DEBUG [ef1f76b86d1c4e9c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@7088809e]
2025-11-01 20:52:23.736 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2f54c9f1, started on Sat Nov 01 20:52:21 BRT 2025
2025-11-01 20:52:25.136 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:25.139 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:25.140 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:25.141 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:25.143 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:25.144 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:25.145 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:25.145 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:25.146 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-01 20:52:25.148 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-01 20:52:25.152 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:25.215 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:25.216 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:25.217 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:25.220 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2f1844f
2025-11-01 20:52:25.682 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:25.708 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:25.910 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:25.911 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-01 20:52:25.913 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:25.913 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-01 20:52:25.914 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:26.081 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:26.081 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:26.081 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:26.082 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:26.082 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:26.083 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:26.084 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:26.086 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:26.089 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:26.092 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:26.094 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:26.096 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:26.099 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:26.101 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:26.104 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:26.106 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:26.107 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:26.110 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:26.284 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:26.304 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:26.308 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:26.315 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:26.321 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:26.327 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:26.486 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:26.665 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:26.687 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:26.783 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:26.842 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:26.911 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:26.946 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:27.056 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:27.107 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:27.107 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:27.108 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:27.108 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:27.108 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:27.109 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 20:52:27.137 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:27.138 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 1.987 seconds (process running for 65.017)
2025-11-01 20:52:27.139 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:27.140 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:27.158 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:27.161 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 20:52:27.166 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 20:52:27.172 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:27.179 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/clientes/2
2025-11-01 20:52:27.181 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:27.186 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/clientes/2
2025-11-01 20:52:27.187 [main] DEBUG [9c47b0effb994823] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#buscarPorId(Long)
2025-11-01 20:52:27.191 [main] DEBUG [9c47b0effb994823] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:27.195 [main] DEBUG [9c47b0effb994823] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:27.202 [main] DEBUG [9c47b0effb994823] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 20:52:27.217 [main] DEBUG [9c47b0effb994823] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:27.217 [main] DEBUG [9c47b0effb994823] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@48f9dae7]
2025-11-01 20:52:27.228 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2f1844f, started on Sat Nov 01 20:52:25 BRT 2025
2025-11-01 20:52:28.175 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:28.178 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:28.178 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:28.180 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:28.180 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:28.181 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:28.181 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:28.182 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:28.183 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-01 20:52:28.184 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-01 20:52:28.188 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:28.253 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:28.254 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:28.254 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:28.257 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7a0625af
2025-11-01 20:52:28.608 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:28.625 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:28.760 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:28.761 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-01 20:52:28.762 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn70: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:28.763 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-01 20:52:28.763 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:28.884 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:28.885 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:28.885 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:28.885 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:28.885 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:28.885 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:28.886 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:28.890 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:28.892 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:28.896 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:28.899 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:28.902 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:28.905 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:28.908 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:28.911 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:28.914 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:28.917 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:28.921 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:29.122 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:29.166 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:29.172 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:29.177 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:29.182 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:29.188 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:29.312 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:29.501 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:29.530 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:29.649 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:29.692 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:29.739 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:29.766 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:29.841 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:29.893 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:29.894 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:29.894 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:29.894 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:29.894 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:29.896 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-01 20:52:29.927 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:29.927 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 1.74 seconds (process running for 67.806)
2025-11-01 20:52:29.928 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:29.929 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:29.941 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:29.944 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 20:52:29.948 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 20:52:29.953 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:29.964 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing PUT /api/clientes/2
2025-11-01 20:52:29.966 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:29.968 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured PUT /api/clientes/2
2025-11-01 20:52:29.970 [main] DEBUG [7a198e9956d144a7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#atualizarCliente(Long, ClienteDTO)
2025-11-01 20:52:29.977 [main] DEBUG [7a198e9956d144a7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.ClienteDTO@489f980a]
2025-11-01 20:52:29.987 [main] DEBUG [7a198e9956d144a7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.atualizarCliente(java.lang.Long,com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:29.990 [main] DEBUG [7a198e9956d144a7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.atualizarCliente(java.lang.Long,com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:29.998 [main] DEBUG [7a198e9956d144a7] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 20:52:30.007 [main] DEBUG [7a198e9956d144a7] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Cliente */update cliente 
    set
        ativo=?,
        cpf=?,
        email=?,
        endereco=?,
        nome=?,
        telefone=? 
    where
        id=?
2025-11-01 20:52:30.016 [main] DEBUG [7a198e9956d144a7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:30.016 [main] DEBUG [7a198e9956d144a7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@ff05bd0]
2025-11-01 20:52:30.030 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@7a0625af, started on Sat Nov 01 20:52:28 BRT 2025
2025-11-01 20:52:30.343 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:30.346 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:30.346 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:30.347 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:30.348 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:30.349 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:30.350 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:30.350 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:30.351 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-01 20:52:30.353 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-01 20:52:30.357 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:30.399 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:30.399 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:30.400 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:30.403 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@26724ae5
2025-11-01 20:52:30.720 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:30.738 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:30.913 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:30.915 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-11-01 20:52:30.916 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn80: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:30.917 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-11-01 20:52:30.917 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:31.163 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:31.164 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:31.167 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:31.167 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:31.168 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:31.168 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:31.169 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:31.177 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:31.183 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:31.186 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:31.189 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:31.191 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:31.194 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:31.197 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:31.200 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:31.203 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:31.206 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:31.210 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:31.483 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:31.508 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:31.512 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:31.518 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:31.524 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:31.529 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:31.655 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:31.823 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:31.840 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:31.965 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:32.009 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:32.062 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:32.083 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:32.193 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:32.237 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:32.237 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:32.237 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:32.237 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:32.237 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:32.238 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 20:52:32.267 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:32.268 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 1.911 seconds (process running for 70.147)
2025-11-01 20:52:32.269 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:32.270 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:32.283 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:32.286 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 20:52:32.290 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 20:52:32.295 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:32.300 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/clientes
2025-11-01 20:52:32.302 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:32.304 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/clientes
2025-11-01 20:52:32.305 [main] DEBUG [4eab29c1720c4f81] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#listarClientes(Pageable)
2025-11-01 20:52:32.313 [main] DEBUG [4eab29c1720c4f81] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.listarClientes(org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:32.315 [main] DEBUG [4eab29c1720c4f81] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.listarClientes(org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:32.333 [main] DEBUG [4eab29c1720c4f81] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.ativo 
    fetch
        first ? rows only
2025-11-01 20:52:32.360 [main] DEBUG [4eab29c1720c4f81] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:32.360 [main] DEBUG [4eab29c1720c4f81] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.PagedResponseWrapper@6de46a69]
2025-11-01 20:52:32.382 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@26724ae5, started on Sat Nov 01 20:52:30 BRT 2025
2025-11-01 20:52:32.817 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:32.819 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:32.819 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:32.821 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:32.821 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:32.822 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:32.823 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:32.824 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:32.825 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-11-01 20:52:32.827 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-11-01 20:52:32.830 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:32.890 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:32.890 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:32.890 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:32.892 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1475af2c
2025-11-01 20:52:33.256 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:33.276 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:33.418 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:33.420 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-11-01 20:52:33.422 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn90: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:33.422 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-11-01 20:52:33.423 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:33.550 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:33.551 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:33.551 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:33.552 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:33.552 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:33.552 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:33.553 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:33.556 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:33.559 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:33.562 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:33.565 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:33.567 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:33.570 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:33.574 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:33.577 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:33.580 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:33.583 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:33.587 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:33.834 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:33.869 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:33.886 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:33.894 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:33.906 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:33.914 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:34.083 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:34.253 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:34.297 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:34.380 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:34.430 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:34.501 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:34.530 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:34.607 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:34.659 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:34.659 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:34.660 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:34.660 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:34.660 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:34.661 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 20:52:34.698 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 1.868 seconds (process running for 72.577)
2025-11-01 20:52:34.700 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:34.701 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:34.702 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:34.716 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:34.718 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 20:52:34.722 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 20:52:34.729 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/clientes/999
2025-11-01 20:52:34.731 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:34.734 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/clientes/999
2025-11-01 20:52:34.735 [main] DEBUG [5c392266811f4f31] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#buscarPorId(Long)
2025-11-01 20:52:34.739 [main] DEBUG [5c392266811f4f31] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:34.742 [main] DEBUG [5c392266811f4f31] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 20:52:34.755 [main] DEBUG [5c392266811f4f31] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 20:52:34.759 [main] DEBUG [5c392266811f4f31] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleEntityNotFoundException(EntityNotFoundException, WebRequest)
2025-11-01 20:52:34.770 [main] DEBUG [5c392266811f4f31] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:34.771 [main] DEBUG [5c392266811f4f31] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@2eda9249]
2025-11-01 20:52:34.772 [main] DEBUG [5c392266811f4f31] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.EntityNotFoundException: Cliente no encontrado com ID: 999]
2025-11-01 20:52:34.783 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@1475af2c, started on Sat Nov 01 20:52:32 BRT 2025
2025-11-01 20:52:35.110 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:35.113 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:35.114 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:35.115 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:35.116 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:35.117 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:35.118 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:35.119 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:35.120 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-11-01 20:52:35.121 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-11-01 20:52:35.125 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:35.171 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:35.172 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:35.172 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:35.174 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@72d98ea5
2025-11-01 20:52:35.448 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:35.464 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:35.610 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:35.611 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-11-01 20:52:35.612 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn100: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:35.612 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-11-01 20:52:35.613 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:35.738 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:35.739 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:35.739 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:35.740 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:35.740 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:35.740 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:35.741 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:35.744 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:35.746 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:35.749 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:35.750 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:35.752 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:35.754 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:35.756 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:35.758 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:35.760 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:35.761 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:35.764 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:35.879 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:35.895 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:35.899 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:35.903 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:35.909 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:35.914 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:36.019 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:36.168 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:36.191 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:36.285 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:36.333 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:36.392 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:36.416 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:36.511 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:36.596 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:36.597 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:36.597 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:36.597 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 20:52:36.597 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 20:52:36.599 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-01 20:52:36.646 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 1.521 seconds (process running for 74.525)
2025-11-01 20:52:36.647 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:36.648 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:36.650 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:36.662 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:36.665 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 20:52:36.669 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 20:52:36.683 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/clientes
2025-11-01 20:52:36.685 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:36.690 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/clientes
2025-11-01 20:52:36.691 [main] DEBUG [ace4d14cbc024e0c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#cadastrarCliente(ClienteDTO)
2025-11-01 20:52:36.697 [main] DEBUG [ace4d14cbc024e0c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.ClienteDTO@78cc00a]
2025-11-01 20:52:36.728 [main] DEBUG [ace4d14cbc024e0c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-01 20:52:36.737 [main] DEBUG [ace4d14cbc024e0c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:36.738 [main] DEBUG [ace4d14cbc024e0c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@38371aa7]
2025-11-01 20:52:36.740 [main] DEBUG [ace4d14cbc024e0c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.ClienteResponseDTO>> com.deliverytech.delivery.controller.ClienteController.cadastrarCliente(com.deliverytech.delivery.dto.ClienteDTO) with 6 errors: [Field error in object 'clienteDTO' on field 'telefone': rejected value [null]; codes [NotBlank.clienteDTO.telefone,NotBlank.telefone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.telefone,telefone]; arguments []; default message [telefone]]; default message [Telefone  obrigatrio]] [Field error in object 'clienteDTO' on field 'nome': rejected value []; codes [Size.clienteDTO.nome,Size.nome,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.nome,nome]; arguments []; default message [nome],100,2]; default message [Nome deve ter entre 2 e 100 caracteres]] [Field error in object 'clienteDTO' on field 'cpf': rejected value [null]; codes [NotBlank.clienteDTO.cpf,NotBlank.cpf,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.cpf,cpf]; arguments []; default message [cpf]]; default message [CPF  obrigatrio]] [Field error in object 'clienteDTO' on field 'nome': rejected value []; codes [NotBlank.clienteDTO.nome,NotBlank.nome,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.nome,nome]; arguments []; default message [nome]]; default message [Nome  obrigatrio]] [Field error in object 'clienteDTO' on field 'email': rejected value [email-invalido]; codes [Email.clienteDTO.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@40f5af0e,.*]; default message [Email deve ter formato vlido]] [Field error in object 'clienteDTO' on field 'endereco': rejected value [null]; codes [NotBlank.clienteDTO.endereco,NotBlank.endereco,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.endereco,endereco]; arguments []; default message [endereco]]; default message [Endereo  obrigatrio]] ]
2025-11-01 20:52:36.749 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@72d98ea5, started on Sat Nov 01 20:52:35 BRT 2025
2025-11-01 20:52:37.193 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:37.197 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:37.197 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:37.199 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:37.200 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:37.201 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:37.202 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:37.203 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:37.204 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-11-01 20:52:37.205 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-11-01 20:52:37.219 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.integration.SwaggerIntegrationTest]: SwaggerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-01 20:52:37.230 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.integration.SwaggerIntegrationTest
2025-11-01 20:52:37.243 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 20:52:37.308 [main] INFO  [] c.d.d.i.SwaggerIntegrationTest - Starting SwaggerIntegrationTest using Java 21.0.9 with PID 446594 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:52:37.309 [main] DEBUG [] c.d.d.i.SwaggerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:52:37.309 [main] INFO  [] c.d.d.i.SwaggerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 20:52:37.714 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:52:37.736 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 5 JPA repository interfaces.
2025-11-01 20:52:38.326 [main] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-11-01 20:52:38.387 [main] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2025-11-01 20:52:38.390 [main] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:52:38.390 [main] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:52:38.487 [main] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:52:38.488 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1176 ms
2025-11-01 20:52:38.694 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:52:38.695 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:52:38.695 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:52:38.763 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:52:38.764 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-11-01 20:52:38.765 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn110: url=jdbc:h2:mem:testdb user=SA
2025-11-01 20:52:38.766 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-11-01 20:52:38.766 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:52:38.898 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:38.899 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:38.900 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:38.900 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:38.901 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:38.901 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:38.903 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:52:38.907 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:52:38.910 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:52:38.913 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:52:38.915 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:52:38.918 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:52:38.921 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:52:38.925 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:52:38.928 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:52:38.931 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:38.934 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:52:38.938 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:39.125 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 20:52:39.133 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 20:52:39.137 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 20:52:39.144 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:39.150 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:39.155 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 20:52:39.305 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:52:39.496 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:52:39.534 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:52:39.648 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 20:52:39.753 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:52:39.797 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:52:39.827 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:52:39.919 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 20:52:39.995 [main] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-1"]
2025-11-01 20:52:40.041 [main] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 33013 (http) with context path '/'
2025-11-01 20:52:40.070 [main] INFO  [] c.d.d.i.SwaggerIntegrationTest - Started SwaggerIntegrationTest in 2.827 seconds (process running for 77.949)
2025-11-01 20:52:40.074 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:40.075 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:40.078 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:40.105 [main] DEBUG [] o.s.web.client.RestTemplate - HTTP GET http://localhost:33013/api-docs
2025-11-01 20:52:40.105 [main] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:40.456 [http-nio-auto-1-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 20:52:40.457 [http-nio-auto-1-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 20:52:40.457 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 20:52:40.457 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 20:52:40.457 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 20:52:40.458 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@26533e92
2025-11-01 20:52:40.459 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5ab8a1c7
2025-11-01 20:52:40.459 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 20:52:40.459 [http-nio-auto-1-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-01 20:52:40.472 [http-nio-auto-1-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-11-01 20:52:40.474 [http-nio-auto-1-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:40.475 [http-nio-auto-1-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:52:40.478 [http-nio-auto-1-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-11-01 20:52:40.481 [http-nio-auto-1-exec-1] DEBUG [fc036fbccfd64496] o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-11-01 20:52:40.483 [http-nio-auto-1-exec-1] DEBUG [fc036fbccfd64496] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-01 20:52:40.836 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:44.388 [http-nio-auto-1-exec-1] INFO  [fc036fbccfd64496] o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 3886 ms
2025-11-01 20:52:44.502 [http-nio-auto-1-exec-1] DEBUG [fc036fbccfd64496] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [text/plain, application/json, application/yaml, application/*+json, */*] and supported [application/json]
2025-11-01 20:52:44.525 [http-nio-auto-1-exec-1] DEBUG [fc036fbccfd64496] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-01 20:52:44.536 [http-nio-auto-1-exec-1] DEBUG [fc036fbccfd64496] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 20:52:44.577 [main] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:44.578 [main] DEBUG [] o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2025-11-01 20:52:44.606 [main] DEBUG [] o.s.web.client.RestTemplate - HTTP GET http://localhost:33013/api-docs
2025-11-01 20:52:44.607 [main] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:44.616 [http-nio-auto-1-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-11-01 20:52:44.618 [http-nio-auto-1-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:44.618 [http-nio-auto-1-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:52:44.619 [http-nio-auto-1-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-11-01 20:52:44.620 [http-nio-auto-1-exec-2] DEBUG [771466e410d3425e] o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-11-01 20:52:44.622 [http-nio-auto-1-exec-2] DEBUG [771466e410d3425e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-01 20:52:44.624 [http-nio-auto-1-exec-2] DEBUG [771466e410d3425e] o.s.api.AbstractOpenApiResource - Fetching openApi document from cache
2025-11-01 20:52:44.654 [http-nio-auto-1-exec-2] DEBUG [771466e410d3425e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [text/plain, application/json, application/yaml, application/*+json, */*] and supported [application/json]
2025-11-01 20:52:44.664 [http-nio-auto-1-exec-2] DEBUG [771466e410d3425e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-01 20:52:44.666 [http-nio-auto-1-exec-2] DEBUG [771466e410d3425e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 20:52:44.666 [main] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:44.667 [main] DEBUG [] o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2025-11-01 20:52:44.702 [main] DEBUG [] o.s.web.client.RestTemplate - HTTP GET http://localhost:33013/swagger-ui.html
2025-11-01 20:52:44.703 [main] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:44.719 [http-nio-auto-1-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui.html
2025-11-01 20:52:44.721 [http-nio-auto-1-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:44.721 [http-nio-auto-1-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:52:44.727 [http-nio-auto-1-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui.html
2025-11-01 20:52:44.736 [http-nio-auto-1-exec-3] DEBUG [54625d2f66a142fa] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui.html", parameters={}
2025-11-01 20:52:44.737 [http-nio-auto-1-exec-3] DEBUG [54625d2f66a142fa] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerWelcomeWebMvc#redirectToUi(HttpServletRequest)
2025-11-01 20:52:44.748 [http-nio-auto-1-exec-3] DEBUG [54625d2f66a142fa] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [text/plain, application/json, application/yaml, application/*+json, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 20:52:44.748 [http-nio-auto-1-exec-3] DEBUG [54625d2f66a142fa] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-11-01 20:52:44.749 [http-nio-auto-1-exec-3] DEBUG [54625d2f66a142fa] o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-11-01 20:52:44.770 [http-nio-auto-1-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-11-01 20:52:44.772 [http-nio-auto-1-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:52:44.773 [http-nio-auto-1-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:52:44.775 [http-nio-auto-1-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-11-01 20:52:44.777 [http-nio-auto-1-exec-3] DEBUG [e66e1793b36f4bec] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-11-01 20:52:44.779 [http-nio-auto-1-exec-3] DEBUG [e66e1793b36f4bec] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-01 20:52:44.790 [http-nio-auto-1-exec-3] DEBUG [e66e1793b36f4bec] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 20:52:44.792 [main] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:52:44.792 [main] DEBUG [] o.s.web.client.RestTemplate - Reading to [java.lang.String] as "text/html"
2025-11-01 20:52:46.885 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@9c6ecf, started on Sat Nov 01 20:52:14 BRT 2025
2025-11-01 20:52:46.890 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:46.891 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:46.894 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:46.896 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:46.898 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:46.899 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:46.901 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:46.903 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-01 20:52:46.920 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-01 20:52:46.926 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:52:46.934 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:52:46.942 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:52:46.943 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:52:46.943 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:52:46.944 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:52:46.944 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:52:46.944 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:52:46.944 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:52:46.945 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-11-01 20:52:46.947 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-11-01 20:52:51.933 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:52:51.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:52:51.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:52:54.219 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:53:04.570 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 20:53:04.571 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 20:53:04.571 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 20:53:04.571 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 20:53:04.571 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 20:53:04.575 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@18f0d347
2025-11-01 20:53:04.576 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@74ac86c7
2025-11-01 20:53:04.576 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 20:53:04.576 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-01 20:53:04.581 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:53:04.584 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:53:04.585 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:53:05.633 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:53:05.638 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:53:05.638 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:53:21.933 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:53:21.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:53:21.936 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:53:22.078 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:53:51.933 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:53:51.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:53:51.936 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:53:52.084 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:54:21.933 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:54:21.934 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:54:21.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:54:22.861 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:54:45.388 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 20:54:45.389 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 20:54:45.396 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:54:45.396 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:54:45.398 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:54:45.399 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:54:45.399 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:54:45.400 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:54:45.401 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:54:45.402 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 20:54:45.403 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-01 20:54:45.404 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-01 20:55:00.642 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 448500 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 20:55:00.645 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 20:55:00.648 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 20:55:00.801 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-01 20:55:00.802 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-01 20:55:03.014 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 20:55:03.121 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 94 ms. Found 5 JPA repository interfaces.
2025-11-01 20:55:03.981 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 20:55:03.997 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 20:55:04.001 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 20:55:04.003 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 20:55:04.058 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 20:55:04.058 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3254 ms
2025-11-01 20:55:04.491 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 20:55:04.493 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 20:55:04.494 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 20:55:05.327 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 20:55:05.373 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-01 20:55:05.695 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 20:55:05.698 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-01 20:55:05.732 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 20:55:07.228 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 20:55:07.233 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 20:55:07.233 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 20:55:07.234 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 20:55:07.234 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 20:55:07.234 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 20:55:07.247 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 20:55:07.268 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 20:55:07.277 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 20:55:07.280 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 20:55:07.282 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 20:55:07.285 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 20:55:07.288 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 20:55:07.306 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 20:55:07.308 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 20:55:07.310 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:55:07.313 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 20:55:07.323 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 20:55:07.797 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-01 20:55:09.371 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 20:55:10.226 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 20:55:10.296 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 20:55:10.526 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 20:55:10.661 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 20:55:10.770 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 20:55:10.883 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 20:55:11.146 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 20:55:11.341 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 20:55:11.430 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 20:55:11.445 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 20:55:11.474 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 11.905 seconds (process running for 12.798)
2025-11-01 20:55:11.486 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:55:11.533 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:55:11.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:55:13.439 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:55:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:55:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:55:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:55:41.898 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:56:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:56:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:56:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:56:12.805 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:56:13.769 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 20:56:13.770 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 20:56:13.770 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 20:56:13.770 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 20:56:13.770 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 20:56:13.773 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5759df6a
2025-11-01 20:56:13.773 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4b7e37e9
2025-11-01 20:56:13.774 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 20:56:13.774 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-01 20:56:13.803 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:56:13.819 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:56:13.822 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:56:13.906 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:56:13.907 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:56:13.908 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:56:18.054 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard.
2025-11-01 20:56:18.057 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:56:18.057 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:56:18.161 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:56:18.162 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:56:18.163 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:56:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:56:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:56:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:56:41.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:56:46.532 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 20:56:46.534 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:56:46.534 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:56:46.540 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 20:56:46.546 [http-nio-8080-exec-5] DEBUG [c080fe901cbe4274] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 20:56:46.554 [http-nio-8080-exec-5] DEBUG [c080fe901cbe4274] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 20:56:46.650 [http-nio-8080-exec-5] DEBUG [c080fe901cbe4274] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 20:56:47.243 [http-nio-8080-exec-5] DEBUG [c080fe901cbe4274] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 20:56:47.548 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:56:47.549 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:56:47.549 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:57:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:57:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:57:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:57:12.273 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:57:21.180 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 20:57:21.181 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:57:21.181 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:57:21.182 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 20:57:21.183 [http-nio-8080-exec-6] DEBUG [2b8bb1d79b4b45e2] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 20:57:21.184 [http-nio-8080-exec-6] DEBUG [2b8bb1d79b4b45e2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 20:57:21.185 [http-nio-8080-exec-6] DEBUG [2b8bb1d79b4b45e2] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 20:57:21.191 [http-nio-8080-exec-6] DEBUG [2b8bb1d79b4b45e2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 20:57:21.288 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 20:57:21.290 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:57:21.290 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:57:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:57:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:57:41.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:57:41.928 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:58:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:58:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:58:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:58:11.636 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:58:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:58:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:58:41.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:58:42.072 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:59:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:59:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:59:11.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:59:11.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 20:59:14.175 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-11-01 20:59:14.177 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 20:59:14.177 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 20:59:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 20:59:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 20:59:41.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 20:59:41.610 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:00:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:00:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:00:11.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:00:11.619 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:00:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:00:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:00:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:00:41.642 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:01:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:01:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:01:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:01:11.955 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:01:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:01:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:01:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:01:42.866 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:02:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:02:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:02:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:02:12.116 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:02:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:02:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:02:41.474 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:02:42.135 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:03:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:03:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:03:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:03:11.707 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:03:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:03:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:03:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:03:42.127 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:04:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:04:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:04:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:04:11.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:04:37.164 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:04:37.165 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:04:37.165 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:04:37.166 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:04:37.167 [http-nio-8080-exec-4] DEBUG [7ad4760979d14e22] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:04:37.168 [http-nio-8080-exec-4] DEBUG [7ad4760979d14e22] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:04:37.169 [http-nio-8080-exec-4] DEBUG [7ad4760979d14e22] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:04:37.175 [http-nio-8080-exec-4] DEBUG [7ad4760979d14e22] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:04:37.360 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:04:37.361 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:04:37.361 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:04:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:04:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:04:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:04:41.609 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:05:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:05:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:05:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:05:12.008 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:05:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:05:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:05:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:05:41.608 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:06:02.062 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:06:02.063 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:06:02.063 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:06:02.064 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:06:02.064 [http-nio-8080-exec-6] DEBUG [ed4e14ee7fad4d22] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:06:02.065 [http-nio-8080-exec-6] DEBUG [ed4e14ee7fad4d22] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:06:02.066 [http-nio-8080-exec-6] DEBUG [ed4e14ee7fad4d22] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:06:02.073 [http-nio-8080-exec-6] DEBUG [ed4e14ee7fad4d22] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:06:02.234 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:06:02.235 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:06:02.235 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:06:05.185 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:06:05.186 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:06:05.186 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:06:05.186 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:06:05.187 [http-nio-8080-exec-1] DEBUG [2e5e7f0f78fe4368] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:06:05.187 [http-nio-8080-exec-1] DEBUG [2e5e7f0f78fe4368] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:06:05.188 [http-nio-8080-exec-1] DEBUG [2e5e7f0f78fe4368] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:06:05.193 [http-nio-8080-exec-1] DEBUG [2e5e7f0f78fe4368] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:06:05.272 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:06:05.273 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:06:05.274 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:06:08.079 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:06:08.080 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:06:08.081 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:06:08.082 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:06:08.082 [http-nio-8080-exec-2] DEBUG [edd83c0f07314e99] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:06:08.083 [http-nio-8080-exec-2] DEBUG [edd83c0f07314e99] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:06:08.084 [http-nio-8080-exec-2] DEBUG [edd83c0f07314e99] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:06:08.094 [http-nio-8080-exec-2] DEBUG [edd83c0f07314e99] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:06:08.185 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:06:08.185 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:06:08.185 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:06:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:06:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:06:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:06:11.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:06:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:06:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:06:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:06:41.606 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:06:44.387 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:06:44.388 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:06:44.388 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:06:44.389 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:06:44.390 [http-nio-8080-exec-4] DEBUG [cc08ff96f3b444e6] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:06:44.390 [http-nio-8080-exec-4] DEBUG [cc08ff96f3b444e6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:06:44.392 [http-nio-8080-exec-4] DEBUG [cc08ff96f3b444e6] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:06:44.396 [http-nio-8080-exec-4] DEBUG [cc08ff96f3b444e6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:06:44.558 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:06:44.558 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:06:44.559 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:07:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:07:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:07:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:07:12.250 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:07:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:07:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:07:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:07:41.608 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:08:03.119 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:08:03.120 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:08:03.121 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:08:03.122 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:08:03.122 [http-nio-8080-exec-6] DEBUG [c486f842343142bf] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:08:03.123 [http-nio-8080-exec-6] DEBUG [c486f842343142bf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:08:03.129 [http-nio-8080-exec-6] DEBUG [c486f842343142bf] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:08:03.144 [http-nio-8080-exec-6] DEBUG [c486f842343142bf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:08:03.284 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:08:03.285 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:08:03.285 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:08:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:08:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:08:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:08:11.616 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:08:21.638 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-11-01 21:08:21.639 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:08:21.639 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:08:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:08:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:08:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:08:42.410 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:09:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:09:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:09:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:09:12.161 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:09:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:09:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:09:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:09:43.236 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:10:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:10:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:10:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:10:11.790 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:10:20.397 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:10:20.398 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:20.399 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:20.401 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:10:20.402 [http-nio-8080-exec-3] DEBUG [77772bba64764b88] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:10:20.404 [http-nio-8080-exec-3] DEBUG [77772bba64764b88] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:10:20.406 [http-nio-8080-exec-3] DEBUG [77772bba64764b88] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:10:20.420 [http-nio-8080-exec-3] DEBUG [77772bba64764b88] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:10:20.559 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-11-01 21:10:20.560 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:20.560 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:21.299 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:10:21.299 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:21.300 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:21.985 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:10:21.986 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:21.987 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:21.988 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:10:21.989 [http-nio-8080-exec-8] DEBUG [b28e514fd51d4f0b] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:10:21.990 [http-nio-8080-exec-8] DEBUG [b28e514fd51d4f0b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:10:21.992 [http-nio-8080-exec-8] DEBUG [b28e514fd51d4f0b] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:10:22.003 [http-nio-8080-exec-8] DEBUG [b28e514fd51d4f0b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:10:22.140 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-11-01 21:10:22.141 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:22.141 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:22.287 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:10:22.288 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:22.289 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:22.944 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:10:22.980 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:22.980 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:22.981 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:10:22.982 [http-nio-8080-exec-10] DEBUG [6dc2417b318b4dc9] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:10:22.983 [http-nio-8080-exec-10] DEBUG [6dc2417b318b4dc9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:10:22.985 [http-nio-8080-exec-10] DEBUG [6dc2417b318b4dc9] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:10:22.989 [http-nio-8080-exec-10] DEBUG [6dc2417b318b4dc9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:10:23.043 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-11-01 21:10:23.044 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:23.044 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:23.409 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:10:23.410 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:23.410 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:23.719 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:10:23.720 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:23.721 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:23.723 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:10:23.723 [http-nio-8080-exec-2] DEBUG [566b546735f64e26] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:10:23.725 [http-nio-8080-exec-2] DEBUG [566b546735f64e26] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:10:23.727 [http-nio-8080-exec-2] DEBUG [566b546735f64e26] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:10:23.735 [http-nio-8080-exec-2] DEBUG [566b546735f64e26] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:10:23.829 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-11-01 21:10:23.830 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:23.831 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:24.010 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:10:24.011 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:10:24.011 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:10:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:10:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:10:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:10:41.839 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:11:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:11:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:11:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:11:12.030 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:11:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:11:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:11:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:11:41.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:12:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:12:11.532 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:12:11.532 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:12:11.686 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:12:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:12:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:12:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:12:41.976 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:13:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:13:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:13:11.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:13:11.616 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:13:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:13:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:13:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:13:43.116 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:14:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:14:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:14:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:14:11.817 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:14:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:14:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:14:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:14:42.493 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:15:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:15:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:15:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:15:11.616 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:15:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:15:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:15:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:15:41.658 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:16:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:16:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:16:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:16:13.701 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:16:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:16:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:16:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:16:42.204 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:17:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:17:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:17:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:17:11.631 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:17:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:17:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:17:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:17:42.563 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:18:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:18:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:18:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:18:11.616 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:18:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:18:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:18:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:18:41.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:19:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:19:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:19:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:19:12.017 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:19:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:19:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:19:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:19:41.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:20:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:20:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:20:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:20:13.048 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:20:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:20:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:20:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:20:41.609 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:21:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:21:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:21:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:21:12.723 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:21:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:21:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:21:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:21:41.610 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:22:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:22:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:22:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:22:11.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:22:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:22:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:22:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:22:42.885 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:23:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:23:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:23:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:23:11.625 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:23:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:23:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:23:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:23:41.617 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:24:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:24:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:24:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:24:11.616 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:24:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:24:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:24:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:24:41.667 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:24:54.509 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:24:54.510 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:24:54.511 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:24:54.513 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:24:54.514 [http-nio-8080-exec-7] DEBUG [644875c019c74b71] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:24:54.516 [http-nio-8080-exec-7] DEBUG [644875c019c74b71] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:24:54.518 [http-nio-8080-exec-7] DEBUG [644875c019c74b71] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, application/xml;q=0.9, */*;q=0.8]
2025-11-01 21:24:54.524 [http-nio-8080-exec-7] DEBUG [644875c019c74b71] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:24:54.827 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:24:54.827 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:24:54.827 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:25:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:25:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:25:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:25:11.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:25:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:25:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:25:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:25:41.607 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:25:56.516 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:25:56.516 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:25:56.517 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:25:56.518 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:25:56.519 [http-nio-8080-exec-1] DEBUG [22121dd384ff4fa2] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:25:56.519 [http-nio-8080-exec-1] DEBUG [22121dd384ff4fa2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:25:56.521 [http-nio-8080-exec-1] DEBUG [22121dd384ff4fa2] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:25:56.525 [http-nio-8080-exec-1] DEBUG [22121dd384ff4fa2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:25:56.642 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:25:56.642 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:25:56.643 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:25:56.643 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:25:56.644 [http-nio-8080-exec-9] DEBUG [b6d2a0bbb51b48c5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:25:56.644 [http-nio-8080-exec-9] DEBUG [b6d2a0bbb51b48c5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:25:56.676 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:25:56.676 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:25:56.677 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:25:56.908 [http-nio-8080-exec-9] DEBUG [b6d2a0bbb51b48c5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:25:56.987 [http-nio-8080-exec-9] DEBUG [b6d2a0bbb51b48c5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:25:57.236 [http-nio-8080-exec-9] DEBUG [b6d2a0bbb51b48c5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:01.643 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:01.644 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:01.645 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:01.646 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:01.646 [http-nio-8080-exec-3] DEBUG [58725da66a704083] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:01.647 [http-nio-8080-exec-3] DEBUG [58725da66a704083] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:01.649 [http-nio-8080-exec-3] DEBUG [58725da66a704083] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:01.650 [http-nio-8080-exec-3] DEBUG [58725da66a704083] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:01.652 [http-nio-8080-exec-3] DEBUG [58725da66a704083] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:04.270 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:04.271 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:04.272 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:04.273 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:04.274 [http-nio-8080-exec-4] DEBUG [ac33992a2b904760] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:04.275 [http-nio-8080-exec-4] DEBUG [ac33992a2b904760] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:04.277 [http-nio-8080-exec-4] DEBUG [ac33992a2b904760] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:04.288 [http-nio-8080-exec-4] DEBUG [ac33992a2b904760] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:04.369 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:04.370 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:04.370 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:04.371 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:04.372 [http-nio-8080-exec-5] DEBUG [82c91342936e4e62] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:04.374 [http-nio-8080-exec-5] DEBUG [82c91342936e4e62] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:04.376 [http-nio-8080-exec-5] DEBUG [82c91342936e4e62] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:04.376 [http-nio-8080-exec-5] DEBUG [82c91342936e4e62] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:04.378 [http-nio-8080-exec-5] DEBUG [82c91342936e4e62] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:04.397 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:04.397 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:04.398 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:05.152 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:05.153 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:05.153 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:05.154 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:05.154 [http-nio-8080-exec-7] DEBUG [0bef2d5bc4304b74] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:05.154 [http-nio-8080-exec-7] DEBUG [0bef2d5bc4304b74] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:05.155 [http-nio-8080-exec-7] DEBUG [0bef2d5bc4304b74] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:05.159 [http-nio-8080-exec-7] DEBUG [0bef2d5bc4304b74] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:05.258 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:05.259 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:05.259 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:05.260 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:05.260 [http-nio-8080-exec-6] DEBUG [a85760117bed4cd6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:05.261 [http-nio-8080-exec-6] DEBUG [a85760117bed4cd6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:05.262 [http-nio-8080-exec-6] DEBUG [a85760117bed4cd6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:05.263 [http-nio-8080-exec-6] DEBUG [a85760117bed4cd6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:05.264 [http-nio-8080-exec-6] DEBUG [a85760117bed4cd6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:05.289 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:05.290 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:05.290 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:05.767 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:05.768 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:05.768 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:05.769 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:05.769 [http-nio-8080-exec-1] DEBUG [cbcff161da994764] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:05.770 [http-nio-8080-exec-1] DEBUG [cbcff161da994764] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:05.771 [http-nio-8080-exec-1] DEBUG [cbcff161da994764] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:05.774 [http-nio-8080-exec-1] DEBUG [cbcff161da994764] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:05.837 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:05.838 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:05.838 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:05.839 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:05.839 [http-nio-8080-exec-2] DEBUG [713e3beb5abf4e91] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:05.840 [http-nio-8080-exec-2] DEBUG [713e3beb5abf4e91] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:05.841 [http-nio-8080-exec-2] DEBUG [713e3beb5abf4e91] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:05.841 [http-nio-8080-exec-2] DEBUG [713e3beb5abf4e91] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:05.842 [http-nio-8080-exec-2] DEBUG [713e3beb5abf4e91] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:05.868 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:05.869 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:05.869 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:06.403 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:06.403 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:06.404 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:06.404 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:06.405 [http-nio-8080-exec-3] DEBUG [dec444705a944e91] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:06.405 [http-nio-8080-exec-3] DEBUG [dec444705a944e91] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:06.406 [http-nio-8080-exec-3] DEBUG [dec444705a944e91] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:06.409 [http-nio-8080-exec-3] DEBUG [dec444705a944e91] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:06.476 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:06.477 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:06.477 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:06.477 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:06.478 [http-nio-8080-exec-4] DEBUG [e4c1fe5eb0974142] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:06.478 [http-nio-8080-exec-4] DEBUG [e4c1fe5eb0974142] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:06.479 [http-nio-8080-exec-4] DEBUG [e4c1fe5eb0974142] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:06.479 [http-nio-8080-exec-4] DEBUG [e4c1fe5eb0974142] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:06.480 [http-nio-8080-exec-4] DEBUG [e4c1fe5eb0974142] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:06.501 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:06.501 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:06.502 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:07.011 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:07.012 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:07.012 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:07.013 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:07.014 [http-nio-8080-exec-8] DEBUG [74910f5e79e44a48] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:07.014 [http-nio-8080-exec-8] DEBUG [74910f5e79e44a48] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:07.016 [http-nio-8080-exec-8] DEBUG [74910f5e79e44a48] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:07.019 [http-nio-8080-exec-8] DEBUG [74910f5e79e44a48] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:07.091 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:07.092 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:07.092 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:07.093 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:07.093 [http-nio-8080-exec-7] DEBUG [56c03c174599462e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:07.094 [http-nio-8080-exec-7] DEBUG [56c03c174599462e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:07.095 [http-nio-8080-exec-7] DEBUG [56c03c174599462e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:07.096 [http-nio-8080-exec-7] DEBUG [56c03c174599462e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:07.096 [http-nio-8080-exec-7] DEBUG [56c03c174599462e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:07.114 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:07.115 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:07.115 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:07.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:07.593 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:07.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:07.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:07.594 [http-nio-8080-exec-10] DEBUG [7caebefd77cd4368] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:07.594 [http-nio-8080-exec-10] DEBUG [7caebefd77cd4368] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:07.595 [http-nio-8080-exec-10] DEBUG [7caebefd77cd4368] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:07.597 [http-nio-8080-exec-10] DEBUG [7caebefd77cd4368] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:07.663 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:07.664 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:07.664 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:07.665 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:07.666 [http-nio-8080-exec-1] DEBUG [3eebcc4f795c453e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:07.667 [http-nio-8080-exec-1] DEBUG [3eebcc4f795c453e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:07.668 [http-nio-8080-exec-1] DEBUG [3eebcc4f795c453e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:07.668 [http-nio-8080-exec-1] DEBUG [3eebcc4f795c453e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:07.669 [http-nio-8080-exec-1] DEBUG [3eebcc4f795c453e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:07.686 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:07.687 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:07.687 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:08.125 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:08.126 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:08.126 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:08.126 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:08.127 [http-nio-8080-exec-9] DEBUG [345a7748a285491d] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:08.127 [http-nio-8080-exec-9] DEBUG [345a7748a285491d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:08.128 [http-nio-8080-exec-9] DEBUG [345a7748a285491d] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:08.130 [http-nio-8080-exec-9] DEBUG [345a7748a285491d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:08.193 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:08.194 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:08.194 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:08.195 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:08.195 [http-nio-8080-exec-3] DEBUG [d88fd5d9ea1c4431] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:08.196 [http-nio-8080-exec-3] DEBUG [d88fd5d9ea1c4431] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:08.197 [http-nio-8080-exec-3] DEBUG [d88fd5d9ea1c4431] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:08.197 [http-nio-8080-exec-3] DEBUG [d88fd5d9ea1c4431] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:08.198 [http-nio-8080-exec-3] DEBUG [d88fd5d9ea1c4431] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:08.223 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:08.224 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:08.224 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:08.602 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:08.603 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:08.603 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:08.604 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:08.604 [http-nio-8080-exec-5] DEBUG [db0f3d3689d847a4] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:08.605 [http-nio-8080-exec-5] DEBUG [db0f3d3689d847a4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:08.606 [http-nio-8080-exec-5] DEBUG [db0f3d3689d847a4] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:08.609 [http-nio-8080-exec-5] DEBUG [db0f3d3689d847a4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:08.668 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:08.668 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:08.669 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:08.669 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:08.670 [http-nio-8080-exec-8] DEBUG [fc4ea1bb59074164] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:08.670 [http-nio-8080-exec-8] DEBUG [fc4ea1bb59074164] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:08.672 [http-nio-8080-exec-8] DEBUG [fc4ea1bb59074164] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:08.672 [http-nio-8080-exec-8] DEBUG [fc4ea1bb59074164] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:08.673 [http-nio-8080-exec-8] DEBUG [fc4ea1bb59074164] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:08.699 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:08.699 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:08.700 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:09.098 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:09.099 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:09.099 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:09.100 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:09.100 [http-nio-8080-exec-6] DEBUG [5f2debe1433a4259] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:09.101 [http-nio-8080-exec-6] DEBUG [5f2debe1433a4259] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:09.102 [http-nio-8080-exec-6] DEBUG [5f2debe1433a4259] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:09.105 [http-nio-8080-exec-6] DEBUG [5f2debe1433a4259] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:09.165 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:09.166 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:09.166 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:09.166 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:09.167 [http-nio-8080-exec-10] DEBUG [0e59b8cfa4484cd9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:09.167 [http-nio-8080-exec-10] DEBUG [0e59b8cfa4484cd9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:09.169 [http-nio-8080-exec-10] DEBUG [0e59b8cfa4484cd9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:09.169 [http-nio-8080-exec-10] DEBUG [0e59b8cfa4484cd9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:09.170 [http-nio-8080-exec-10] DEBUG [0e59b8cfa4484cd9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:09.198 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:09.199 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:09.199 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:26:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:26:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:26:11.694 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:26:12.561 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:26:12.561 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:12.562 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:12.562 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:26:12.563 [http-nio-8080-exec-2] DEBUG [94d13390adfa4e65] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:26:12.563 [http-nio-8080-exec-2] DEBUG [94d13390adfa4e65] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:26:12.564 [http-nio-8080-exec-2] DEBUG [94d13390adfa4e65] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:26:12.567 [http-nio-8080-exec-2] DEBUG [94d13390adfa4e65] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:12.676 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:12.676 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:12.676 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:12.677 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:12.678 [http-nio-8080-exec-9] DEBUG [c0995cfe3ca9462f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:12.678 [http-nio-8080-exec-9] DEBUG [c0995cfe3ca9462f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:12.680 [http-nio-8080-exec-9] DEBUG [c0995cfe3ca9462f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:12.680 [http-nio-8080-exec-9] DEBUG [c0995cfe3ca9462f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:12.681 [http-nio-8080-exec-9] DEBUG [c0995cfe3ca9462f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:12.698 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:26:12.699 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:12.699 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:17.677 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:17.677 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:17.678 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:17.679 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:17.679 [http-nio-8080-exec-4] DEBUG [d8579d539423489e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:17.680 [http-nio-8080-exec-4] DEBUG [d8579d539423489e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:17.682 [http-nio-8080-exec-4] DEBUG [d8579d539423489e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:17.682 [http-nio-8080-exec-4] DEBUG [d8579d539423489e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:17.684 [http-nio-8080-exec-4] DEBUG [d8579d539423489e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:23.183 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:23.183 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:23.184 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:23.184 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:23.185 [http-nio-8080-exec-5] DEBUG [74279442d03c4ce7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:23.185 [http-nio-8080-exec-5] DEBUG [74279442d03c4ce7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:23.186 [http-nio-8080-exec-5] DEBUG [74279442d03c4ce7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:23.186 [http-nio-8080-exec-5] DEBUG [74279442d03c4ce7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:23.187 [http-nio-8080-exec-5] DEBUG [74279442d03c4ce7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:28.183 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:28.183 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:28.183 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:28.184 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:28.184 [http-nio-8080-exec-8] DEBUG [26b38ffb59cc430c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:28.185 [http-nio-8080-exec-8] DEBUG [26b38ffb59cc430c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:28.186 [http-nio-8080-exec-8] DEBUG [26b38ffb59cc430c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:28.186 [http-nio-8080-exec-8] DEBUG [26b38ffb59cc430c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:28.187 [http-nio-8080-exec-8] DEBUG [26b38ffb59cc430c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:33.183 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:33.184 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:33.184 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:33.185 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:33.185 [http-nio-8080-exec-7] DEBUG [27405e966d7340b0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:33.186 [http-nio-8080-exec-7] DEBUG [27405e966d7340b0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:33.187 [http-nio-8080-exec-7] DEBUG [27405e966d7340b0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:33.187 [http-nio-8080-exec-7] DEBUG [27405e966d7340b0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:33.188 [http-nio-8080-exec-7] DEBUG [27405e966d7340b0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:38.183 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:38.183 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:38.184 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:38.184 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:38.185 [http-nio-8080-exec-6] DEBUG [35b9f495ec59455f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:38.185 [http-nio-8080-exec-6] DEBUG [35b9f495ec59455f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:38.186 [http-nio-8080-exec-6] DEBUG [35b9f495ec59455f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:38.187 [http-nio-8080-exec-6] DEBUG [35b9f495ec59455f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:38.187 [http-nio-8080-exec-6] DEBUG [35b9f495ec59455f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:26:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:26:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:26:41.605 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:26:43.184 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:43.184 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:43.184 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:43.185 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:43.185 [http-nio-8080-exec-10] DEBUG [85285639a52642bf] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:43.185 [http-nio-8080-exec-10] DEBUG [85285639a52642bf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:43.187 [http-nio-8080-exec-10] DEBUG [85285639a52642bf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:43.187 [http-nio-8080-exec-10] DEBUG [85285639a52642bf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:43.188 [http-nio-8080-exec-10] DEBUG [85285639a52642bf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:48.183 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:48.183 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:48.184 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:48.184 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:48.184 [http-nio-8080-exec-1] DEBUG [7265bde77e394f02] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:48.185 [http-nio-8080-exec-1] DEBUG [7265bde77e394f02] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:48.186 [http-nio-8080-exec-1] DEBUG [7265bde77e394f02] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:48.186 [http-nio-8080-exec-1] DEBUG [7265bde77e394f02] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:48.187 [http-nio-8080-exec-1] DEBUG [7265bde77e394f02] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:53.184 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:53.185 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:53.185 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:53.185 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:53.186 [http-nio-8080-exec-2] DEBUG [f89fb3be05c84bc1] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:53.186 [http-nio-8080-exec-2] DEBUG [f89fb3be05c84bc1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:53.188 [http-nio-8080-exec-2] DEBUG [f89fb3be05c84bc1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:53.189 [http-nio-8080-exec-2] DEBUG [f89fb3be05c84bc1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:53.190 [http-nio-8080-exec-2] DEBUG [f89fb3be05c84bc1] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:26:58.183 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:26:58.184 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:26:58.184 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:26:58.185 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:26:58.185 [http-nio-8080-exec-3] DEBUG [a2d8b04003854caf] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:26:58.185 [http-nio-8080-exec-3] DEBUG [a2d8b04003854caf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:26:58.186 [http-nio-8080-exec-3] DEBUG [a2d8b04003854caf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:26:58.187 [http-nio-8080-exec-3] DEBUG [a2d8b04003854caf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:26:58.188 [http-nio-8080-exec-3] DEBUG [a2d8b04003854caf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:03.185 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:03.186 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:03.186 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:03.187 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:03.187 [http-nio-8080-exec-4] DEBUG [fa3fb296e96e416e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:03.188 [http-nio-8080-exec-4] DEBUG [fa3fb296e96e416e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:03.189 [http-nio-8080-exec-4] DEBUG [fa3fb296e96e416e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:03.190 [http-nio-8080-exec-4] DEBUG [fa3fb296e96e416e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:03.191 [http-nio-8080-exec-4] DEBUG [fa3fb296e96e416e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:08.184 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:08.185 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:08.186 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:08.187 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:08.187 [http-nio-8080-exec-5] DEBUG [1c7e0a499d294650] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:08.188 [http-nio-8080-exec-5] DEBUG [1c7e0a499d294650] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:08.191 [http-nio-8080-exec-5] DEBUG [1c7e0a499d294650] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:08.191 [http-nio-8080-exec-5] DEBUG [1c7e0a499d294650] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:08.193 [http-nio-8080-exec-5] DEBUG [1c7e0a499d294650] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:27:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:27:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:27:11.616 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:27:13.183 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:13.184 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:13.184 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:13.185 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:13.185 [http-nio-8080-exec-8] DEBUG [43ec6483868747df] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:13.186 [http-nio-8080-exec-8] DEBUG [43ec6483868747df] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:13.187 [http-nio-8080-exec-8] DEBUG [43ec6483868747df] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:13.188 [http-nio-8080-exec-8] DEBUG [43ec6483868747df] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:13.189 [http-nio-8080-exec-8] DEBUG [43ec6483868747df] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:18.186 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:18.187 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:18.187 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:18.188 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:18.189 [http-nio-8080-exec-7] DEBUG [a4ff1173b75543da] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:18.190 [http-nio-8080-exec-7] DEBUG [a4ff1173b75543da] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:18.192 [http-nio-8080-exec-7] DEBUG [a4ff1173b75543da] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:18.192 [http-nio-8080-exec-7] DEBUG [a4ff1173b75543da] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:18.193 [http-nio-8080-exec-7] DEBUG [a4ff1173b75543da] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:22.675 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:22.676 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:22.676 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:22.677 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:22.677 [http-nio-8080-exec-6] DEBUG [49ff39d07d6345f7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:22.677 [http-nio-8080-exec-6] DEBUG [49ff39d07d6345f7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:22.678 [http-nio-8080-exec-6] DEBUG [49ff39d07d6345f7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:22.679 [http-nio-8080-exec-6] DEBUG [49ff39d07d6345f7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:22.680 [http-nio-8080-exec-6] DEBUG [49ff39d07d6345f7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:24.083 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-11-01 21:27:24.083 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:24.083 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:27.677 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:27.678 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:27.679 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:27.680 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:27.681 [http-nio-8080-exec-1] DEBUG [7af556c2747d4e4c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:27.681 [http-nio-8080-exec-1] DEBUG [7af556c2747d4e4c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:27.683 [http-nio-8080-exec-1] DEBUG [7af556c2747d4e4c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:27.683 [http-nio-8080-exec-1] DEBUG [7af556c2747d4e4c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:27.685 [http-nio-8080-exec-1] DEBUG [7af556c2747d4e4c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:32.677 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:32.678 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:32.679 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:32.680 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:32.680 [http-nio-8080-exec-2] DEBUG [ceae126191074eba] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:32.681 [http-nio-8080-exec-2] DEBUG [ceae126191074eba] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:32.683 [http-nio-8080-exec-2] DEBUG [ceae126191074eba] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:32.684 [http-nio-8080-exec-2] DEBUG [ceae126191074eba] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:32.685 [http-nio-8080-exec-2] DEBUG [ceae126191074eba] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:37.676 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:37.676 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:37.677 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:37.677 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:37.678 [http-nio-8080-exec-9] DEBUG [fedb52d457884b96] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:37.678 [http-nio-8080-exec-9] DEBUG [fedb52d457884b96] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:37.679 [http-nio-8080-exec-9] DEBUG [fedb52d457884b96] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:37.680 [http-nio-8080-exec-9] DEBUG [fedb52d457884b96] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:37.681 [http-nio-8080-exec-9] DEBUG [fedb52d457884b96] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:27:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:27:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:27:41.609 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:27:42.677 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:42.678 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:42.678 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:42.679 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:42.680 [http-nio-8080-exec-3] DEBUG [8189edeec7f64352] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:42.680 [http-nio-8080-exec-3] DEBUG [8189edeec7f64352] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:42.682 [http-nio-8080-exec-3] DEBUG [8189edeec7f64352] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:42.683 [http-nio-8080-exec-3] DEBUG [8189edeec7f64352] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:42.684 [http-nio-8080-exec-3] DEBUG [8189edeec7f64352] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:48.185 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:48.186 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:48.186 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:48.187 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:48.187 [http-nio-8080-exec-4] DEBUG [23f15307ebb84c51] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:48.188 [http-nio-8080-exec-4] DEBUG [23f15307ebb84c51] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:48.190 [http-nio-8080-exec-4] DEBUG [23f15307ebb84c51] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:48.190 [http-nio-8080-exec-4] DEBUG [23f15307ebb84c51] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:48.192 [http-nio-8080-exec-4] DEBUG [23f15307ebb84c51] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:53.185 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:53.186 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:53.186 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:53.186 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:53.187 [http-nio-8080-exec-5] DEBUG [2da790599a884efe] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:53.188 [http-nio-8080-exec-5] DEBUG [2da790599a884efe] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:53.189 [http-nio-8080-exec-5] DEBUG [2da790599a884efe] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:53.190 [http-nio-8080-exec-5] DEBUG [2da790599a884efe] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:53.191 [http-nio-8080-exec-5] DEBUG [2da790599a884efe] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:57.675 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:57.676 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:57.676 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:57.677 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:57.677 [http-nio-8080-exec-8] DEBUG [fbe09282d4c94fb9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:57.677 [http-nio-8080-exec-8] DEBUG [fbe09282d4c94fb9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:57.679 [http-nio-8080-exec-8] DEBUG [fbe09282d4c94fb9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:57.679 [http-nio-8080-exec-8] DEBUG [fbe09282d4c94fb9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:57.680 [http-nio-8080-exec-8] DEBUG [fbe09282d4c94fb9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:58.242 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:27:58.243 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:58.243 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:58.245 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:27:58.245 [http-nio-8080-exec-7] DEBUG [20b14eef8c3e4564] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:27:58.246 [http-nio-8080-exec-7] DEBUG [20b14eef8c3e4564] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:27:58.247 [http-nio-8080-exec-7] DEBUG [20b14eef8c3e4564] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:27:58.249 [http-nio-8080-exec-7] DEBUG [20b14eef8c3e4564] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:58.375 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-11-01 21:27:58.376 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:58.376 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:58.423 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:27:58.423 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:58.423 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:27:58.424 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:27:58.424 [http-nio-8080-exec-10] DEBUG [302aaaec9a8d4a38] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:27:58.425 [http-nio-8080-exec-10] DEBUG [302aaaec9a8d4a38] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:27:58.426 [http-nio-8080-exec-10] DEBUG [302aaaec9a8d4a38] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:27:58.427 [http-nio-8080-exec-10] DEBUG [302aaaec9a8d4a38] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:27:58.428 [http-nio-8080-exec-10] DEBUG [302aaaec9a8d4a38] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:27:58.484 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:27:58.485 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:27:58.485 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:03.421 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:03.422 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:03.422 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:03.422 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:03.423 [http-nio-8080-exec-2] DEBUG [cf94a984401e4511] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:03.423 [http-nio-8080-exec-2] DEBUG [cf94a984401e4511] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:03.424 [http-nio-8080-exec-2] DEBUG [cf94a984401e4511] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:03.424 [http-nio-8080-exec-2] DEBUG [cf94a984401e4511] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:03.425 [http-nio-8080-exec-2] DEBUG [cf94a984401e4511] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:09.183 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:09.183 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:09.183 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:09.184 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:09.184 [http-nio-8080-exec-9] DEBUG [88dad936adbb4231] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:09.184 [http-nio-8080-exec-9] DEBUG [88dad936adbb4231] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:09.185 [http-nio-8080-exec-9] DEBUG [88dad936adbb4231] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:09.186 [http-nio-8080-exec-9] DEBUG [88dad936adbb4231] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:09.186 [http-nio-8080-exec-9] DEBUG [88dad936adbb4231] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:28:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:28:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:28:11.748 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:28:14.183 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:14.184 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:14.184 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:14.184 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:14.185 [http-nio-8080-exec-3] DEBUG [e2f8f4cf3c064968] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:14.185 [http-nio-8080-exec-3] DEBUG [e2f8f4cf3c064968] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:14.186 [http-nio-8080-exec-3] DEBUG [e2f8f4cf3c064968] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:14.187 [http-nio-8080-exec-3] DEBUG [e2f8f4cf3c064968] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:14.187 [http-nio-8080-exec-3] DEBUG [e2f8f4cf3c064968] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:19.184 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:19.184 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:19.184 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:19.185 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:19.185 [http-nio-8080-exec-4] DEBUG [24836a123b9a464a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:19.186 [http-nio-8080-exec-4] DEBUG [24836a123b9a464a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:19.187 [http-nio-8080-exec-4] DEBUG [24836a123b9a464a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:19.187 [http-nio-8080-exec-4] DEBUG [24836a123b9a464a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:19.188 [http-nio-8080-exec-4] DEBUG [24836a123b9a464a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:24.184 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:24.185 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:24.185 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:24.185 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:24.186 [http-nio-8080-exec-5] DEBUG [fa59ef162bda49bc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:24.186 [http-nio-8080-exec-5] DEBUG [fa59ef162bda49bc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:24.188 [http-nio-8080-exec-5] DEBUG [fa59ef162bda49bc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:24.188 [http-nio-8080-exec-5] DEBUG [fa59ef162bda49bc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:24.190 [http-nio-8080-exec-5] DEBUG [fa59ef162bda49bc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:29.185 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:29.186 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:29.186 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:29.187 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:29.188 [http-nio-8080-exec-8] DEBUG [8793eeca80ce4f7b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:29.188 [http-nio-8080-exec-8] DEBUG [8793eeca80ce4f7b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:29.190 [http-nio-8080-exec-8] DEBUG [8793eeca80ce4f7b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:29.190 [http-nio-8080-exec-8] DEBUG [8793eeca80ce4f7b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:29.192 [http-nio-8080-exec-8] DEBUG [8793eeca80ce4f7b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:34.185 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:34.186 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:34.186 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:34.187 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:34.188 [http-nio-8080-exec-7] DEBUG [a5098b33da0841bd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:34.189 [http-nio-8080-exec-7] DEBUG [a5098b33da0841bd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:34.192 [http-nio-8080-exec-7] DEBUG [a5098b33da0841bd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:34.192 [http-nio-8080-exec-7] DEBUG [a5098b33da0841bd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:34.194 [http-nio-8080-exec-7] DEBUG [a5098b33da0841bd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:39.184 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:39.184 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:39.184 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:39.185 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:39.185 [http-nio-8080-exec-6] DEBUG [000b9072d05e4d63] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:39.185 [http-nio-8080-exec-6] DEBUG [000b9072d05e4d63] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:39.186 [http-nio-8080-exec-6] DEBUG [000b9072d05e4d63] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:39.186 [http-nio-8080-exec-6] DEBUG [000b9072d05e4d63] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:39.187 [http-nio-8080-exec-6] DEBUG [000b9072d05e4d63] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:28:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:28:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:28:43.010 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:28:44.185 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:44.185 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:44.186 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:44.187 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:44.187 [http-nio-8080-exec-10] DEBUG [affd19bd1ddb4b4c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:44.188 [http-nio-8080-exec-10] DEBUG [affd19bd1ddb4b4c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:44.190 [http-nio-8080-exec-10] DEBUG [affd19bd1ddb4b4c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:44.190 [http-nio-8080-exec-10] DEBUG [affd19bd1ddb4b4c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:44.191 [http-nio-8080-exec-10] DEBUG [affd19bd1ddb4b4c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:49.185 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:49.208 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:49.208 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:49.210 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:49.210 [http-nio-8080-exec-1] DEBUG [5297924114cc4381] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:49.212 [http-nio-8080-exec-1] DEBUG [5297924114cc4381] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:49.214 [http-nio-8080-exec-1] DEBUG [5297924114cc4381] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:49.215 [http-nio-8080-exec-1] DEBUG [5297924114cc4381] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:49.221 [http-nio-8080-exec-1] DEBUG [5297924114cc4381] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:54.184 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:54.184 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:54.185 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:54.185 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:54.186 [http-nio-8080-exec-2] DEBUG [cd96ecbaf8db4fd5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:54.186 [http-nio-8080-exec-2] DEBUG [cd96ecbaf8db4fd5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:54.188 [http-nio-8080-exec-2] DEBUG [cd96ecbaf8db4fd5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:54.188 [http-nio-8080-exec-2] DEBUG [cd96ecbaf8db4fd5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:54.189 [http-nio-8080-exec-2] DEBUG [cd96ecbaf8db4fd5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:28:59.185 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:28:59.186 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:28:59.186 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:28:59.187 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:28:59.188 [http-nio-8080-exec-9] DEBUG [648294639bce4d64] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:28:59.188 [http-nio-8080-exec-9] DEBUG [648294639bce4d64] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:28:59.190 [http-nio-8080-exec-9] DEBUG [648294639bce4d64] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:28:59.191 [http-nio-8080-exec-9] DEBUG [648294639bce4d64] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:28:59.192 [http-nio-8080-exec-9] DEBUG [648294639bce4d64] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:29:04.184 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:29:04.185 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:29:04.209 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:29:04.211 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:29:04.211 [http-nio-8080-exec-4] DEBUG [ce911492e9b14eed] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:29:04.212 [http-nio-8080-exec-4] DEBUG [ce911492e9b14eed] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:29:04.214 [http-nio-8080-exec-4] DEBUG [ce911492e9b14eed] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:29:04.216 [http-nio-8080-exec-4] DEBUG [ce911492e9b14eed] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:29:04.218 [http-nio-8080-exec-4] DEBUG [ce911492e9b14eed] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:29:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:29:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:29:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:29:12.153 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:29:16.601 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:29:16.602 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:29:16.602 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:29:16.603 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:29:16.604 [http-nio-8080-exec-5] DEBUG [5b35844eb56145c4] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:29:16.605 [http-nio-8080-exec-5] DEBUG [5b35844eb56145c4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:29:16.606 [http-nio-8080-exec-5] DEBUG [5b35844eb56145c4] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, application/xml;q=0.9, */*;q=0.8]
2025-11-01 21:29:16.612 [http-nio-8080-exec-5] DEBUG [5b35844eb56145c4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:29:17.212 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:29:17.212 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:29:17.213 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:29:17.213 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:29:17.214 [http-nio-8080-exec-8] DEBUG [370be618f004477b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:29:17.214 [http-nio-8080-exec-8] DEBUG [370be618f004477b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:29:17.215 [http-nio-8080-exec-8] DEBUG [370be618f004477b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:29:17.216 [http-nio-8080-exec-8] DEBUG [370be618f004477b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:29:17.217 [http-nio-8080-exec-8] DEBUG [370be618f004477b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:29:21.188 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:29:21.188 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:29:21.188 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:29:21.189 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:29:21.189 [http-nio-8080-exec-7] DEBUG [e9101f6f71b54e90] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:29:21.190 [http-nio-8080-exec-7] DEBUG [e9101f6f71b54e90] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:29:21.191 [http-nio-8080-exec-7] DEBUG [e9101f6f71b54e90] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:29:21.191 [http-nio-8080-exec-7] DEBUG [e9101f6f71b54e90] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:29:21.192 [http-nio-8080-exec-7] DEBUG [e9101f6f71b54e90] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:29:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:29:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:29:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:29:41.609 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:30:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:30:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:30:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:30:11.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:30:21.188 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:30:21.188 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:30:21.188 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:30:21.189 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:30:21.189 [http-nio-8080-exec-10] DEBUG [ea0e04e3a2a64736] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:30:21.190 [http-nio-8080-exec-10] DEBUG [ea0e04e3a2a64736] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:30:21.191 [http-nio-8080-exec-10] DEBUG [ea0e04e3a2a64736] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:30:21.191 [http-nio-8080-exec-10] DEBUG [ea0e04e3a2a64736] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:30:21.192 [http-nio-8080-exec-10] DEBUG [ea0e04e3a2a64736] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:30:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:30:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:30:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:30:43.873 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:31:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:31:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:31:11.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:31:11.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:31:21.186 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:31:21.187 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:31:21.188 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:31:21.189 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:31:21.189 [http-nio-8080-exec-1] DEBUG [dc1f2a0228474ddf] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:31:21.190 [http-nio-8080-exec-1] DEBUG [dc1f2a0228474ddf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:31:21.193 [http-nio-8080-exec-1] DEBUG [dc1f2a0228474ddf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:31:21.193 [http-nio-8080-exec-1] DEBUG [dc1f2a0228474ddf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:31:21.194 [http-nio-8080-exec-1] DEBUG [dc1f2a0228474ddf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:31:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:31:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:31:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:31:41.608 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:32:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:32:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:32:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:32:11.623 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:32:21.187 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:32:21.188 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:32:21.188 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:32:21.189 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:32:21.190 [http-nio-8080-exec-2] DEBUG [ee34a00f150f43b7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:32:21.191 [http-nio-8080-exec-2] DEBUG [ee34a00f150f43b7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:32:21.193 [http-nio-8080-exec-2] DEBUG [ee34a00f150f43b7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:32:21.194 [http-nio-8080-exec-2] DEBUG [ee34a00f150f43b7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:32:21.195 [http-nio-8080-exec-2] DEBUG [ee34a00f150f43b7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:32:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:32:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:32:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:32:42.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:33:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:33:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:33:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:33:11.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:33:21.187 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:33:21.188 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:33:21.188 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:33:21.189 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:33:21.190 [http-nio-8080-exec-3] DEBUG [7c7f50919ddc4928] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:33:21.191 [http-nio-8080-exec-3] DEBUG [7c7f50919ddc4928] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:33:21.192 [http-nio-8080-exec-3] DEBUG [7c7f50919ddc4928] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:33:21.193 [http-nio-8080-exec-3] DEBUG [7c7f50919ddc4928] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:33:21.194 [http-nio-8080-exec-3] DEBUG [7c7f50919ddc4928] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:33:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:33:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:33:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:33:41.649 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:34:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:34:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:34:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:34:11.619 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:34:21.187 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:34:21.188 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:34:21.188 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:34:21.189 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:34:21.190 [http-nio-8080-exec-9] DEBUG [fddeb0821d524b48] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:34:21.191 [http-nio-8080-exec-9] DEBUG [fddeb0821d524b48] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:34:21.194 [http-nio-8080-exec-9] DEBUG [fddeb0821d524b48] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:34:21.195 [http-nio-8080-exec-9] DEBUG [fddeb0821d524b48] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:34:21.197 [http-nio-8080-exec-9] DEBUG [fddeb0821d524b48] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:34:37.688 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-01 21:34:39.475 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 21:34:40.009 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-01 21:34:40.010 [http-nio-8080-exec-5] DEBUG [0fcb9afcb409411d] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-01 21:34:40.010 [http-nio-8080-exec-5] DEBUG [0fcb9afcb409411d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-01 21:34:40.789 [http-nio-8080-exec-5] DEBUG [0fcb9afcb409411d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@116640de]
2025-11-01 21:34:41.259 [http-nio-8080-exec-5] DEBUG [0fcb9afcb409411d] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 21:34:41.376 [http-nio-8080-exec-5] DEBUG [0fcb9afcb409411d] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-01 21:34:41.455 [http-nio-8080-exec-5] DEBUG [0fcb9afcb409411d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:34:41.455 [http-nio-8080-exec-5] DEBUG [0fcb9afcb409411d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@2a3632e3]
2025-11-01 21:34:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:34:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:34:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:34:41.482 [http-nio-8080-exec-5] DEBUG [0fcb9afcb409411d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:34:41.660 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:35:02.577 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:35:02.582 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 21:35:02.589 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 21:35:02.589 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-01 21:35:02.590 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 21:35:02.615 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@70e61d7c]
2025-11-01 21:35:02.770 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:35:02.866 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:35:03.009 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 21:35:03.069 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-01 21:35:03.074 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-01 21:35:03.507 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:35:03.636 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-01 21:35:03.860 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-01 21:35:03.880 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:03.881 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@7fd7ea8e]
2025-11-01 21:35:03.943 [http-nio-8080-exec-8] DEBUG [e0ab499d62af49eb] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-01 21:35:08.130 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:08.131 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:08.131 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:08.132 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:08.132 [http-nio-8080-exec-7] DEBUG [8efedeccd4d54a5c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:08.133 [http-nio-8080-exec-7] DEBUG [8efedeccd4d54a5c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:08.134 [http-nio-8080-exec-7] DEBUG [8efedeccd4d54a5c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:08.134 [http-nio-8080-exec-7] DEBUG [8efedeccd4d54a5c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:08.135 [http-nio-8080-exec-7] DEBUG [8efedeccd4d54a5c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:08.430 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:08.431 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:08.431 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:08.432 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:08.432 [http-nio-8080-exec-6] DEBUG [eb4fe34be1f34c95] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:08.433 [http-nio-8080-exec-6] DEBUG [eb4fe34be1f34c95] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:08.434 [http-nio-8080-exec-6] DEBUG [eb4fe34be1f34c95] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:08.434 [http-nio-8080-exec-6] DEBUG [eb4fe34be1f34c95] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:08.435 [http-nio-8080-exec-6] DEBUG [eb4fe34be1f34c95] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:35:11.470 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:35:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:35:12.400 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:35:13.422 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:13.423 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:13.423 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:13.424 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:13.425 [http-nio-8080-exec-10] DEBUG [2af0980831594967] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:13.425 [http-nio-8080-exec-10] DEBUG [2af0980831594967] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:13.427 [http-nio-8080-exec-10] DEBUG [2af0980831594967] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:13.428 [http-nio-8080-exec-10] DEBUG [2af0980831594967] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:13.429 [http-nio-8080-exec-10] DEBUG [2af0980831594967] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:18.421 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:18.422 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:18.422 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:18.422 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:18.422 [http-nio-8080-exec-1] DEBUG [63fc152e05204b2c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:18.423 [http-nio-8080-exec-1] DEBUG [63fc152e05204b2c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:18.424 [http-nio-8080-exec-1] DEBUG [63fc152e05204b2c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:18.424 [http-nio-8080-exec-1] DEBUG [63fc152e05204b2c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:18.424 [http-nio-8080-exec-1] DEBUG [63fc152e05204b2c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:23.421 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:23.422 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:23.422 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:23.423 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:23.423 [http-nio-8080-exec-2] DEBUG [40bbb3c6da244918] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:23.424 [http-nio-8080-exec-2] DEBUG [40bbb3c6da244918] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:23.425 [http-nio-8080-exec-2] DEBUG [40bbb3c6da244918] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:23.426 [http-nio-8080-exec-2] DEBUG [40bbb3c6da244918] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:23.427 [http-nio-8080-exec-2] DEBUG [40bbb3c6da244918] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:28.421 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:28.441 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:28.442 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:28.443 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:28.444 [http-nio-8080-exec-3] DEBUG [eed7b28e30864524] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:28.444 [http-nio-8080-exec-3] DEBUG [eed7b28e30864524] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:28.447 [http-nio-8080-exec-3] DEBUG [eed7b28e30864524] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:28.447 [http-nio-8080-exec-3] DEBUG [eed7b28e30864524] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:28.451 [http-nio-8080-exec-3] DEBUG [eed7b28e30864524] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:33.425 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:33.426 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:33.426 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:33.427 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:33.428 [http-nio-8080-exec-9] DEBUG [f038ae352c3a4adc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:33.429 [http-nio-8080-exec-9] DEBUG [f038ae352c3a4adc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:33.431 [http-nio-8080-exec-9] DEBUG [f038ae352c3a4adc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:33.432 [http-nio-8080-exec-9] DEBUG [f038ae352c3a4adc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:33.434 [http-nio-8080-exec-9] DEBUG [f038ae352c3a4adc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:38.421 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:38.421 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:38.421 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:38.422 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:38.422 [http-nio-8080-exec-4] DEBUG [a9b4892111134be3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:38.423 [http-nio-8080-exec-4] DEBUG [a9b4892111134be3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:38.424 [http-nio-8080-exec-4] DEBUG [a9b4892111134be3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:38.424 [http-nio-8080-exec-4] DEBUG [a9b4892111134be3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:38.425 [http-nio-8080-exec-4] DEBUG [a9b4892111134be3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:35:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:35:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:35:41.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:35:43.422 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:43.423 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:43.423 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:43.424 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:43.424 [http-nio-8080-exec-5] DEBUG [e63bf9abe35041e5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:43.425 [http-nio-8080-exec-5] DEBUG [e63bf9abe35041e5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:43.426 [http-nio-8080-exec-5] DEBUG [e63bf9abe35041e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:43.426 [http-nio-8080-exec-5] DEBUG [e63bf9abe35041e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:43.427 [http-nio-8080-exec-5] DEBUG [e63bf9abe35041e5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:49.184 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:49.185 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:49.185 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:49.185 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:49.186 [http-nio-8080-exec-8] DEBUG [fc9b20e395934544] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:49.186 [http-nio-8080-exec-8] DEBUG [fc9b20e395934544] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:49.187 [http-nio-8080-exec-8] DEBUG [fc9b20e395934544] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:49.187 [http-nio-8080-exec-8] DEBUG [fc9b20e395934544] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:49.188 [http-nio-8080-exec-8] DEBUG [fc9b20e395934544] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:54.245 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:54.246 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:54.246 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:54.247 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:54.247 [http-nio-8080-exec-7] DEBUG [2060caad4ea742c7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:54.248 [http-nio-8080-exec-7] DEBUG [2060caad4ea742c7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:54.250 [http-nio-8080-exec-7] DEBUG [2060caad4ea742c7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:54.250 [http-nio-8080-exec-7] DEBUG [2060caad4ea742c7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:54.251 [http-nio-8080-exec-7] DEBUG [2060caad4ea742c7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:35:59.182 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:35:59.183 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:35:59.183 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:35:59.184 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:35:59.184 [http-nio-8080-exec-6] DEBUG [83ddd4f508f841e6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:35:59.184 [http-nio-8080-exec-6] DEBUG [83ddd4f508f841e6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:35:59.185 [http-nio-8080-exec-6] DEBUG [83ddd4f508f841e6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:35:59.186 [http-nio-8080-exec-6] DEBUG [83ddd4f508f841e6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:35:59.187 [http-nio-8080-exec-6] DEBUG [83ddd4f508f841e6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:04.184 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:04.184 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:04.185 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:04.185 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:04.186 [http-nio-8080-exec-10] DEBUG [68e0d5d84fef4793] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:04.186 [http-nio-8080-exec-10] DEBUG [68e0d5d84fef4793] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:04.187 [http-nio-8080-exec-10] DEBUG [68e0d5d84fef4793] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:04.188 [http-nio-8080-exec-10] DEBUG [68e0d5d84fef4793] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:04.189 [http-nio-8080-exec-10] DEBUG [68e0d5d84fef4793] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:09.184 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:09.185 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:09.185 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:09.186 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:09.187 [http-nio-8080-exec-2] DEBUG [538f4d5a89874a8c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:09.187 [http-nio-8080-exec-2] DEBUG [538f4d5a89874a8c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:09.189 [http-nio-8080-exec-2] DEBUG [538f4d5a89874a8c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:09.190 [http-nio-8080-exec-2] DEBUG [538f4d5a89874a8c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:09.191 [http-nio-8080-exec-2] DEBUG [538f4d5a89874a8c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:36:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:36:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:36:11.629 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:36:14.183 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:14.184 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:14.184 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:14.184 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:14.185 [http-nio-8080-exec-3] DEBUG [3a9529dda0874596] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:14.185 [http-nio-8080-exec-3] DEBUG [3a9529dda0874596] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:14.186 [http-nio-8080-exec-3] DEBUG [3a9529dda0874596] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:14.186 [http-nio-8080-exec-3] DEBUG [3a9529dda0874596] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:14.187 [http-nio-8080-exec-3] DEBUG [3a9529dda0874596] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:19.184 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:19.184 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:19.185 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:19.186 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:19.186 [http-nio-8080-exec-9] DEBUG [ecb021908af54da7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:19.187 [http-nio-8080-exec-9] DEBUG [ecb021908af54da7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:19.188 [http-nio-8080-exec-9] DEBUG [ecb021908af54da7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:19.189 [http-nio-8080-exec-9] DEBUG [ecb021908af54da7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:19.190 [http-nio-8080-exec-9] DEBUG [ecb021908af54da7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:24.185 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:24.186 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:24.186 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:24.187 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:24.187 [http-nio-8080-exec-4] DEBUG [bf560e5420734d8d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:24.190 [http-nio-8080-exec-4] DEBUG [bf560e5420734d8d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:24.192 [http-nio-8080-exec-4] DEBUG [bf560e5420734d8d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:24.193 [http-nio-8080-exec-4] DEBUG [bf560e5420734d8d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:24.194 [http-nio-8080-exec-4] DEBUG [bf560e5420734d8d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:29.184 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:29.185 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:29.185 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:29.186 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:29.186 [http-nio-8080-exec-5] DEBUG [2b655394ba424d58] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:29.187 [http-nio-8080-exec-5] DEBUG [2b655394ba424d58] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:29.189 [http-nio-8080-exec-5] DEBUG [2b655394ba424d58] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:29.189 [http-nio-8080-exec-5] DEBUG [2b655394ba424d58] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:29.190 [http-nio-8080-exec-5] DEBUG [2b655394ba424d58] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:34.183 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:34.183 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:34.183 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:34.184 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:34.184 [http-nio-8080-exec-8] DEBUG [886168eef9824a17] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:34.184 [http-nio-8080-exec-8] DEBUG [886168eef9824a17] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:34.185 [http-nio-8080-exec-8] DEBUG [886168eef9824a17] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:34.186 [http-nio-8080-exec-8] DEBUG [886168eef9824a17] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:34.186 [http-nio-8080-exec-8] DEBUG [886168eef9824a17] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:39.183 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:39.183 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:39.183 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:39.184 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:39.184 [http-nio-8080-exec-7] DEBUG [3a0ee27c399445df] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:39.184 [http-nio-8080-exec-7] DEBUG [3a0ee27c399445df] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:39.186 [http-nio-8080-exec-7] DEBUG [3a0ee27c399445df] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:39.186 [http-nio-8080-exec-7] DEBUG [3a0ee27c399445df] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:39.187 [http-nio-8080-exec-7] DEBUG [3a0ee27c399445df] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:36:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:36:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:36:41.608 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:36:53.806 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:53.806 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:53.807 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:53.807 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:53.807 [http-nio-8080-exec-6] DEBUG [aa5df673ffc24d88] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:53.808 [http-nio-8080-exec-6] DEBUG [aa5df673ffc24d88] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:53.809 [http-nio-8080-exec-6] DEBUG [aa5df673ffc24d88] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:53.810 [http-nio-8080-exec-6] DEBUG [aa5df673ffc24d88] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:53.810 [http-nio-8080-exec-6] DEBUG [aa5df673ffc24d88] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:36:58.422 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:36:58.423 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:36:58.423 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:36:58.424 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:36:58.425 [http-nio-8080-exec-10] DEBUG [9383d7c1dbc648c4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:36:58.425 [http-nio-8080-exec-10] DEBUG [9383d7c1dbc648c4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:36:58.427 [http-nio-8080-exec-10] DEBUG [9383d7c1dbc648c4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:36:58.428 [http-nio-8080-exec-10] DEBUG [9383d7c1dbc648c4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:36:58.429 [http-nio-8080-exec-10] DEBUG [9383d7c1dbc648c4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:04.183 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:04.183 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:04.183 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:04.184 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:04.184 [http-nio-8080-exec-1] DEBUG [95f12c49bfa54e2a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:04.184 [http-nio-8080-exec-1] DEBUG [95f12c49bfa54e2a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:04.185 [http-nio-8080-exec-1] DEBUG [95f12c49bfa54e2a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:04.185 [http-nio-8080-exec-1] DEBUG [95f12c49bfa54e2a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:04.186 [http-nio-8080-exec-1] DEBUG [95f12c49bfa54e2a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:09.182 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:09.183 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:09.183 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:09.184 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:09.184 [http-nio-8080-exec-2] DEBUG [3442350cfc4a4ac4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:09.184 [http-nio-8080-exec-2] DEBUG [3442350cfc4a4ac4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:09.185 [http-nio-8080-exec-2] DEBUG [3442350cfc4a4ac4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:09.185 [http-nio-8080-exec-2] DEBUG [3442350cfc4a4ac4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:09.186 [http-nio-8080-exec-2] DEBUG [3442350cfc4a4ac4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:37:11.470 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:37:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:37:11.618 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:37:14.183 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:14.183 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:14.183 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:14.184 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:14.184 [http-nio-8080-exec-3] DEBUG [d57ab356d0cc4774] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:14.185 [http-nio-8080-exec-3] DEBUG [d57ab356d0cc4774] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:14.186 [http-nio-8080-exec-3] DEBUG [d57ab356d0cc4774] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:14.186 [http-nio-8080-exec-3] DEBUG [d57ab356d0cc4774] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:14.187 [http-nio-8080-exec-3] DEBUG [d57ab356d0cc4774] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:19.182 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:19.183 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:19.183 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:19.184 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:19.184 [http-nio-8080-exec-9] DEBUG [477e41ab7b5e4bbc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:19.184 [http-nio-8080-exec-9] DEBUG [477e41ab7b5e4bbc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:19.186 [http-nio-8080-exec-9] DEBUG [477e41ab7b5e4bbc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:19.186 [http-nio-8080-exec-9] DEBUG [477e41ab7b5e4bbc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:19.187 [http-nio-8080-exec-9] DEBUG [477e41ab7b5e4bbc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:24.183 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:24.183 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:24.183 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:24.184 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:24.184 [http-nio-8080-exec-4] DEBUG [d48aed897b624f39] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:24.184 [http-nio-8080-exec-4] DEBUG [d48aed897b624f39] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:24.185 [http-nio-8080-exec-4] DEBUG [d48aed897b624f39] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:24.185 [http-nio-8080-exec-4] DEBUG [d48aed897b624f39] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:24.186 [http-nio-8080-exec-4] DEBUG [d48aed897b624f39] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:29.182 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:29.183 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:29.183 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:29.184 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:29.184 [http-nio-8080-exec-5] DEBUG [17aad260d9154c92] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:29.185 [http-nio-8080-exec-5] DEBUG [17aad260d9154c92] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:29.186 [http-nio-8080-exec-5] DEBUG [17aad260d9154c92] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:29.186 [http-nio-8080-exec-5] DEBUG [17aad260d9154c92] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:29.187 [http-nio-8080-exec-5] DEBUG [17aad260d9154c92] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:34.183 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:34.183 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:34.183 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:34.184 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:34.184 [http-nio-8080-exec-8] DEBUG [a645004a93ae4ef8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:34.184 [http-nio-8080-exec-8] DEBUG [a645004a93ae4ef8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:34.186 [http-nio-8080-exec-8] DEBUG [a645004a93ae4ef8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:34.186 [http-nio-8080-exec-8] DEBUG [a645004a93ae4ef8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:34.187 [http-nio-8080-exec-8] DEBUG [a645004a93ae4ef8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:39.184 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:39.184 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:39.185 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:39.186 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:39.186 [http-nio-8080-exec-7] DEBUG [01be8f776c1a408d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:39.187 [http-nio-8080-exec-7] DEBUG [01be8f776c1a408d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:39.188 [http-nio-8080-exec-7] DEBUG [01be8f776c1a408d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:39.189 [http-nio-8080-exec-7] DEBUG [01be8f776c1a408d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:39.190 [http-nio-8080-exec-7] DEBUG [01be8f776c1a408d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:37:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:37:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:37:41.609 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:37:44.184 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:44.185 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:44.186 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:44.186 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:44.187 [http-nio-8080-exec-6] DEBUG [5c5a1d472c174416] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:44.187 [http-nio-8080-exec-6] DEBUG [5c5a1d472c174416] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:44.189 [http-nio-8080-exec-6] DEBUG [5c5a1d472c174416] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:44.190 [http-nio-8080-exec-6] DEBUG [5c5a1d472c174416] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:44.191 [http-nio-8080-exec-6] DEBUG [5c5a1d472c174416] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:49.184 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:49.185 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:49.186 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:49.186 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:49.187 [http-nio-8080-exec-10] DEBUG [5dd51e4838ce43f7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:49.187 [http-nio-8080-exec-10] DEBUG [5dd51e4838ce43f7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:49.189 [http-nio-8080-exec-10] DEBUG [5dd51e4838ce43f7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:49.189 [http-nio-8080-exec-10] DEBUG [5dd51e4838ce43f7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:49.191 [http-nio-8080-exec-10] DEBUG [5dd51e4838ce43f7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:37:54.184 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:37:54.185 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:37:54.185 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:37:54.186 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:37:54.187 [http-nio-8080-exec-1] DEBUG [d7994980f5ea424b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:37:54.187 [http-nio-8080-exec-1] DEBUG [d7994980f5ea424b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:37:54.189 [http-nio-8080-exec-1] DEBUG [d7994980f5ea424b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:37:54.189 [http-nio-8080-exec-1] DEBUG [d7994980f5ea424b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:37:54.191 [http-nio-8080-exec-1] DEBUG [d7994980f5ea424b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:38:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:38:11.470 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:38:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:38:11.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:38:17.419 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:38:17.423 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T00:19:13Z. Current time: 2025-11-02T00:38:17Z, a difference of 1144421 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-01 21:38:17.424 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:38:21.188 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:38:21.189 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:38:21.189 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:38:21.190 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:38:21.191 [http-nio-8080-exec-9] DEBUG [eb96dca3e14346c5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:38:21.192 [http-nio-8080-exec-9] DEBUG [eb96dca3e14346c5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:38:21.194 [http-nio-8080-exec-9] DEBUG [eb96dca3e14346c5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:38:21.195 [http-nio-8080-exec-9] DEBUG [eb96dca3e14346c5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=863.434925, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:38:21.197 [http-nio-8080-exec-9] DEBUG [eb96dca3e14346c5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:38:29.652 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:38:29.655 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T00:19:13Z. Current time: 2025-11-02T00:38:29Z, a difference of 1156655 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-01 21:38:29.656 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:38:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:38:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:38:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:38:41.712 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:38:55.514 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:38:55.518 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 21:38:55.525 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 21:38:55.526 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-01 21:38:55.526 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 21:38:55.527 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@49faeebe]
2025-11-01 21:38:55.529 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:38:55.530 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:38:55.587 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 21:38:55.590 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-01 21:38:55.592 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-01 21:38:55.629 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleEntityNotFoundException(EntityNotFoundException, WebRequest)
2025-11-01 21:38:55.641 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:38:55.642 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@8605485]
2025-11-01 21:38:55.644 [http-nio-8080-exec-5] WARN  [e9e0485d5c3b4d0c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.EntityNotFoundException: Produto no encontrado: 999]
2025-11-01 21:38:55.644 [http-nio-8080-exec-5] DEBUG [e9e0485d5c3b4d0c] o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-11-01 21:39:00.872 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:00.873 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:00.873 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:00.874 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:00.874 [http-nio-8080-exec-8] DEBUG [2f001e3f0aea4e4a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:00.874 [http-nio-8080-exec-8] DEBUG [2f001e3f0aea4e4a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:00.878 [http-nio-8080-exec-8] DEBUG [2f001e3f0aea4e4a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:00.878 [http-nio-8080-exec-8] DEBUG [2f001e3f0aea4e4a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:00.879 [http-nio-8080-exec-8] DEBUG [2f001e3f0aea4e4a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:03.422 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:03.423 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:03.424 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:03.425 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:03.425 [http-nio-8080-exec-7] DEBUG [9dd46563698a45c1] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:03.426 [http-nio-8080-exec-7] DEBUG [9dd46563698a45c1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:03.427 [http-nio-8080-exec-7] DEBUG [9dd46563698a45c1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:03.428 [http-nio-8080-exec-7] DEBUG [9dd46563698a45c1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:03.429 [http-nio-8080-exec-7] DEBUG [9dd46563698a45c1] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:08.422 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:08.423 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:08.424 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:08.425 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:08.425 [http-nio-8080-exec-6] DEBUG [6e104358289549c0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:08.426 [http-nio-8080-exec-6] DEBUG [6e104358289549c0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:08.427 [http-nio-8080-exec-6] DEBUG [6e104358289549c0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:08.428 [http-nio-8080-exec-6] DEBUG [6e104358289549c0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:08.429 [http-nio-8080-exec-6] DEBUG [6e104358289549c0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:39:11.471 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 21:39:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:39:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:39:12.172 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:39:13.422 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:13.423 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:13.424 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:13.424 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:13.425 [http-nio-8080-exec-10] DEBUG [b4aca2b1673d4877] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:13.425 [http-nio-8080-exec-10] DEBUG [b4aca2b1673d4877] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:13.427 [http-nio-8080-exec-10] DEBUG [b4aca2b1673d4877] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:13.427 [http-nio-8080-exec-10] DEBUG [b4aca2b1673d4877] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:13.428 [http-nio-8080-exec-10] DEBUG [b4aca2b1673d4877] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:18.421 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:18.421 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:18.421 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:18.422 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:18.422 [http-nio-8080-exec-1] DEBUG [a0777cbc2dac437a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:18.422 [http-nio-8080-exec-1] DEBUG [a0777cbc2dac437a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:18.423 [http-nio-8080-exec-1] DEBUG [a0777cbc2dac437a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:18.423 [http-nio-8080-exec-1] DEBUG [a0777cbc2dac437a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:18.424 [http-nio-8080-exec-1] DEBUG [a0777cbc2dac437a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:24.184 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:24.185 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:24.185 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:24.186 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:24.186 [http-nio-8080-exec-2] DEBUG [85621bd5a9f243e8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:24.186 [http-nio-8080-exec-2] DEBUG [85621bd5a9f243e8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:24.188 [http-nio-8080-exec-2] DEBUG [85621bd5a9f243e8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:24.188 [http-nio-8080-exec-2] DEBUG [85621bd5a9f243e8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:24.190 [http-nio-8080-exec-2] DEBUG [85621bd5a9f243e8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:29.183 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:29.184 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:29.184 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:29.184 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:29.185 [http-nio-8080-exec-3] DEBUG [49000808803443ab] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:29.185 [http-nio-8080-exec-3] DEBUG [49000808803443ab] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:29.186 [http-nio-8080-exec-3] DEBUG [49000808803443ab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:29.186 [http-nio-8080-exec-3] DEBUG [49000808803443ab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:29.187 [http-nio-8080-exec-3] DEBUG [49000808803443ab] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:34.184 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:34.185 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:34.186 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:34.187 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:34.187 [http-nio-8080-exec-9] DEBUG [d2ed3f46212c4f20] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:34.188 [http-nio-8080-exec-9] DEBUG [d2ed3f46212c4f20] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:34.190 [http-nio-8080-exec-9] DEBUG [d2ed3f46212c4f20] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:34.190 [http-nio-8080-exec-9] DEBUG [d2ed3f46212c4f20] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:34.192 [http-nio-8080-exec-9] DEBUG [d2ed3f46212c4f20] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:39.184 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:39.185 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:39.185 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:39.186 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:39.187 [http-nio-8080-exec-4] DEBUG [e72863aeb82446dc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:39.187 [http-nio-8080-exec-4] DEBUG [e72863aeb82446dc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:39.189 [http-nio-8080-exec-4] DEBUG [e72863aeb82446dc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:39.189 [http-nio-8080-exec-4] DEBUG [e72863aeb82446dc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:39.191 [http-nio-8080-exec-4] DEBUG [e72863aeb82446dc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:39:41.471 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 21:39:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:39:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:39:41.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:39:44.182 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:44.183 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:44.183 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:44.184 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:44.184 [http-nio-8080-exec-5] DEBUG [92c87876da0e4939] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:44.184 [http-nio-8080-exec-5] DEBUG [92c87876da0e4939] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:44.185 [http-nio-8080-exec-5] DEBUG [92c87876da0e4939] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:44.186 [http-nio-8080-exec-5] DEBUG [92c87876da0e4939] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:44.186 [http-nio-8080-exec-5] DEBUG [92c87876da0e4939] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:49.183 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:49.184 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:49.184 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:49.185 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:49.185 [http-nio-8080-exec-8] DEBUG [7dd87438de694906] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:49.185 [http-nio-8080-exec-8] DEBUG [7dd87438de694906] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:49.186 [http-nio-8080-exec-8] DEBUG [7dd87438de694906] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:49.187 [http-nio-8080-exec-8] DEBUG [7dd87438de694906] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:49.187 [http-nio-8080-exec-8] DEBUG [7dd87438de694906] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:54.184 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:54.184 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:54.185 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:54.185 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:54.186 [http-nio-8080-exec-7] DEBUG [8b6399f0efc04545] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:54.186 [http-nio-8080-exec-7] DEBUG [8b6399f0efc04545] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:54.189 [http-nio-8080-exec-7] DEBUG [8b6399f0efc04545] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:54.189 [http-nio-8080-exec-7] DEBUG [8b6399f0efc04545] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:54.190 [http-nio-8080-exec-7] DEBUG [8b6399f0efc04545] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:39:59.184 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:39:59.185 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:39:59.185 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:39:59.186 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:39:59.186 [http-nio-8080-exec-10] DEBUG [b4ae228ff6ca4f08] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:39:59.187 [http-nio-8080-exec-10] DEBUG [b4ae228ff6ca4f08] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:39:59.189 [http-nio-8080-exec-10] DEBUG [b4ae228ff6ca4f08] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:39:59.189 [http-nio-8080-exec-10] DEBUG [b4ae228ff6ca4f08] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:39:59.190 [http-nio-8080-exec-10] DEBUG [b4ae228ff6ca4f08] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:40:04.184 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:40:04.185 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:40:04.185 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:40:04.186 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:40:04.186 [http-nio-8080-exec-1] DEBUG [7ebf7375b5f94730] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:40:04.187 [http-nio-8080-exec-1] DEBUG [7ebf7375b5f94730] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:40:04.189 [http-nio-8080-exec-1] DEBUG [7ebf7375b5f94730] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:40:04.189 [http-nio-8080-exec-1] DEBUG [7ebf7375b5f94730] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:40:04.190 [http-nio-8080-exec-1] DEBUG [7ebf7375b5f94730] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:40:09.185 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:40:09.185 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:40:09.186 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:40:09.187 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:40:09.187 [http-nio-8080-exec-2] DEBUG [c34e41a6adc8431d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:40:09.188 [http-nio-8080-exec-2] DEBUG [c34e41a6adc8431d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:40:09.189 [http-nio-8080-exec-2] DEBUG [c34e41a6adc8431d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:40:09.190 [http-nio-8080-exec-2] DEBUG [c34e41a6adc8431d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:40:09.191 [http-nio-8080-exec-2] DEBUG [c34e41a6adc8431d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:40:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:40:11.470 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 21:40:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:40:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:40:11.837 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:40:14.184 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:40:14.185 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:40:14.185 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:40:14.186 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:40:14.186 [http-nio-8080-exec-3] DEBUG [73f4ffa229c54caf] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:40:14.187 [http-nio-8080-exec-3] DEBUG [73f4ffa229c54caf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:40:14.189 [http-nio-8080-exec-3] DEBUG [73f4ffa229c54caf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:40:14.189 [http-nio-8080-exec-3] DEBUG [73f4ffa229c54caf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:40:14.190 [http-nio-8080-exec-3] DEBUG [73f4ffa229c54caf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:40:19.184 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:40:19.185 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:40:19.185 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:40:19.186 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:40:19.187 [http-nio-8080-exec-9] DEBUG [3b838c3994744aee] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:40:19.187 [http-nio-8080-exec-9] DEBUG [3b838c3994744aee] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:40:19.189 [http-nio-8080-exec-9] DEBUG [3b838c3994744aee] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:40:19.189 [http-nio-8080-exec-9] DEBUG [3b838c3994744aee] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:40:19.190 [http-nio-8080-exec-9] DEBUG [3b838c3994744aee] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:40:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:40:41.470 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 21:40:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:40:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:40:41.946 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:41:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:41:11.470 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 21:41:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:41:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:41:11.610 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:41:20.185 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:41:20.185 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:41:20.186 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:41:20.186 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:41:20.186 [http-nio-8080-exec-5] DEBUG [73e97aa09b3c47b6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:41:20.186 [http-nio-8080-exec-5] DEBUG [73e97aa09b3c47b6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:41:20.188 [http-nio-8080-exec-5] DEBUG [73e97aa09b3c47b6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:41:20.188 [http-nio-8080-exec-5] DEBUG [73e97aa09b3c47b6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:41:20.189 [http-nio-8080-exec-5] DEBUG [73e97aa09b3c47b6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:41:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:41:41.470 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 21:41:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:41:41.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:41:41.607 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:42:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:42:11.470 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 21:42:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:42:11.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:42:11.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:42:21.184 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:42:21.185 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:42:21.185 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:42:21.185 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:42:21.186 [http-nio-8080-exec-7] DEBUG [00f1b0f903784a12] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:42:21.186 [http-nio-8080-exec-7] DEBUG [00f1b0f903784a12] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:42:21.187 [http-nio-8080-exec-7] DEBUG [00f1b0f903784a12] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:42:21.187 [http-nio-8080-exec-7] DEBUG [00f1b0f903784a12] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:42:21.188 [http-nio-8080-exec-7] DEBUG [00f1b0f903784a12] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:42:41.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:42:41.471 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 21:42:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:42:41.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:42:41.966 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:43:11.470 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:43:11.471 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 21:43:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:43:11.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:43:11.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:43:21.187 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:43:21.188 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:43:21.188 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:43:21.189 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:43:21.190 [http-nio-8080-exec-6] DEBUG [bebf162559b74b0a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:43:21.190 [http-nio-8080-exec-6] DEBUG [bebf162559b74b0a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:43:21.192 [http-nio-8080-exec-6] DEBUG [bebf162559b74b0a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:43:21.193 [http-nio-8080-exec-6] DEBUG [bebf162559b74b0a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=463.25769, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:43:21.194 [http-nio-8080-exec-6] DEBUG [bebf162559b74b0a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:43:29.888 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 96 class path changes (0 additions, 96 deletions, 0 modifications)
2025-11-01 21:43:30.059 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 21:43:30.061 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 21:43:30.207 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 21:43:30.208 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 21:43:30.235 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:43:30.257 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:43:30.276 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:43:30.278 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:43:30.279 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:43:30.280 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:43:30.281 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:43:30.355 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:43:30.357 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-01 21:43:30.360 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-01 21:43:42.290 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 448500 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:43:42.290 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:43:42.290 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:43:42.910 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:43:42.948 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 5 JPA repository interfaces.
2025-11-01 21:43:43.192 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:43:43.194 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:43:43.195 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:43:43.208 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:43:43.208 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 912 ms
2025-11-01 21:43:43.343 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:43:43.343 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:43:43.344 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:43:43.438 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:43:43.439 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-01 21:43:43.442 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn31: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:43:43.442 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-01 21:43:43.443 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:43:43.756 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:43:43.757 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:43:43.757 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:43:43.757 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:43:43.757 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:43:43.758 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:43:43.759 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:43:43.762 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:43:43.771 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:43:43.773 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:43:43.776 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:43:43.778 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:43:43.780 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:43:43.782 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:43:43.786 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:43:43.793 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:43:43.796 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:43:43.861 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:43:44.314 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:43:44.635 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:43:44.679 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:43:44.800 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 21:43:44.912 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:43:44.965 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:43:45.016 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:43:45.157 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 21:43:45.238 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 21:43:45.276 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 21:43:45.291 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:43:45.292 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.104 seconds (process running for 2926.616)
2025-11-01 21:43:45.293 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:43:45.294 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:43:45.298 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   EnvironmentEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpointWebExtension matched:
      - @ConditionalOnBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) found bean 'environmentEndpoint'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpointWebExtension; SearchStrategy: all) did not find any beans (OnBeanCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoContributorAutoConfiguration#buildInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) found a single bean 'buildProperties' (OnBeanCondition)

   InfoContributorAutoConfiguration#gitInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) found a single bean 'gitProperties'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.GitInfoContributor; SearchStrategy: all) did not find any beans (OnBeanCondition)

   InfoEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoEndpointAutoConfiguration#infoEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.InfoEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   LoggersEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   LoggersEndpointAutoConfiguration#loggersEndpoint matched:
      - Logging System enabled (LoggersEndpointAutoConfiguration.OnEnabledLoggingSystemCondition)
      - @ConditionalOnBean (types: org.springframework.boot.logging.LoggingSystem; SearchStrategy: all) found bean 'springBootLoggingSystem'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.logging.LoggersEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MetricsEndpointAutoConfiguration matched:
      - @ConditionalOnClass found required class 'io.micrometer.core.annotation.Timed' (OnClassCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   MetricsEndpointAutoConfiguration#metricsEndpoint matched:
      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean 'prometheusMeterRegistry'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.MetricsEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#buildProperties matched:
      - @ConditionalOnResource found location ${spring.info.build.location:classpath:META-INF/build-info.properties} (OnResourceCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#gitProperties matched:
      - GitResource found git info at classpath:git.properties (ProjectInfoAutoConfiguration.GitResourceAvailableCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration#prometheusEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.export.prometheus.PrometheusScrapeEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   JpaBaseConfiguration.JpaWebConfiguration:
      Did not match:
         - @ConditionalOnBooleanProperty (spring.jpa.open-in-view=true) found different value in property 'spring.jpa.open-in-view' (OnPropertyCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.web.servlet.config.annotation.WebMvcConfigurer' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' securityFilterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   UserDetailsServiceAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.security.authentication.AuthenticationManager,org.springframework.security.authentication.AuthenticationProvider,org.springframework.security.core.userdetails.UserDetailsService,org.springframework.security.authentication.AuthenticationManagerResolver,?; SearchStrategy: all) found beans of type 'org.springframework.security.authentication.AuthenticationManager' authenticationManager and found beans of type 'org.springframework.security.core.userdetails.UserDetailsService' authService (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.authentication.AuthenticationManager' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)
         - AnyNestedCondition 1 matched 2 did not; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.PasswordConfigured @ConditionalOnProperty (spring.security.user.password) did not find property 'spring.security.user.password'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.NameConfigured @ConditionalOnProperty (spring.security.user.name) did not find property 'spring.security.user.name'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.MissingAlternative @ConditionalOnMissingClass did not find unwanted classes 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository', 'org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector', 'org.springframework.security.saml2.provider.service.registration.RelyingPartyRegistrationRepository' (UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-01 21:43:45.860 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:44:15.291 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:44:15.292 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:44:15.292 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:44:17.191 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:44:19.857 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 21:44:19.859 [Thread-12] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 21:44:19.861 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 21:44:19.865 [Thread-12] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:44:19.866 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:44:19.868 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:44:19.869 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:44:19.870 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:44:19.871 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:44:19.872 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:44:19.873 [Thread-12] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:44:19.874 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-01 21:44:19.876 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-01 21:44:20.123 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 448500 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:44:20.124 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:44:20.126 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:44:20.574 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:44:20.609 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 5 JPA repository interfaces.
2025-11-01 21:44:20.852 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:44:20.853 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:44:20.853 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:44:20.864 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:44:20.864 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 735 ms
2025-11-01 21:44:21.045 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:44:21.046 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:44:21.046 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:44:21.136 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:44:21.137 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-01 21:44:21.140 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn41: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:44:21.140 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-01 21:44:21.141 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:44:21.347 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:44:21.348 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:44:21.348 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:44:21.348 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:44:21.349 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:44:21.349 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:44:21.349 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:44:21.352 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:44:21.355 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:44:21.358 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:44:21.360 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:44:21.362 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:44:21.363 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:44:21.367 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:44:21.369 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:44:21.372 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:44:21.374 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:44:21.378 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:44:21.855 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:44:22.264 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:44:22.335 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:44:22.572 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 21:44:22.764 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:44:22.865 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:44:22.938 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:44:23.093 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 21:44:23.176 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 21:44:23.220 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 21:44:23.234 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:44:23.236 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.182 seconds (process running for 2964.559)
2025-11-01 21:44:23.236 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:44:23.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:44:23.240 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 21:44:23.800 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:44:53.234 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:44:53.235 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:44:53.235 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:44:53.366 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:45:21.187 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 21:45:21.187 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 21:45:21.187 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 21:45:21.187 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 21:45:21.187 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 21:45:21.191 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@17102d60
2025-11-01 21:45:21.192 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2b5c96cb
2025-11-01 21:45:21.192 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 21:45:21.193 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-11-01 21:45:21.194 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:45:21.196 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:45:21.198 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:45:21.202 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:45:21.204 [http-nio-8080-exec-1] DEBUG [1b301894c2084245] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:45:21.205 [http-nio-8080-exec-1] DEBUG [1b301894c2084245] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:45:21.212 [http-nio-8080-exec-1] DEBUG [1b301894c2084245] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:45:21.213 [http-nio-8080-exec-1] DEBUG [1b301894c2084245] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:45:21.219 [http-nio-8080-exec-1] DEBUG [1b301894c2084245] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:45:23.234 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:45:23.234 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:45:23.235 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:45:23.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:45:24.365 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-11-01 21:45:24.368 [Thread-19] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 21:45:24.369 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 21:45:24.374 [Thread-19] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:45:24.374 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:45:24.378 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:45:24.379 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:45:24.382 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:45:24.383 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:45:24.384 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:45:24.385 [Thread-19] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:45:24.387 [Thread-19] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-01 21:45:24.388 [Thread-19] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-01 21:45:24.600 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 448500 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:45:24.601 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:45:24.601 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:45:25.088 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:45:25.119 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 5 JPA repository interfaces.
2025-11-01 21:45:25.378 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:45:25.379 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:45:25.380 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:45:25.397 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:45:25.398 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 795 ms
2025-11-01 21:45:25.699 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:45:25.700 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:45:25.700 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:45:25.814 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:45:25.815 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-01 21:45:25.818 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn51: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:45:25.818 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-01 21:45:25.819 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:45:25.988 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:45:25.989 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:45:25.989 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:45:25.989 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:45:25.989 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:45:25.990 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:45:25.991 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:45:25.993 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:45:25.995 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:45:25.998 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:45:26.000 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:45:26.002 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:45:26.004 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:45:26.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:45:26.008 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:45:26.011 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:45:26.013 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:45:26.018 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:45:26.507 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:45:26.840 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:45:26.903 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:45:27.076 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 21:45:27.184 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:45:27.240 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:45:27.309 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:45:27.461 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 21:45:27.550 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 21:45:27.594 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 21:45:27.609 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:45:27.610 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.058 seconds (process running for 3028.934)
2025-11-01 21:45:27.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:45:27.614 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 21:45:27.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:45:28.162 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:45:41.032 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 21:45:41.035 [Thread-23] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 21:45:41.036 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 21:45:41.040 [Thread-23] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:45:41.041 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:45:41.042 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:45:41.042 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:45:41.043 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:45:41.043 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:45:41.044 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:45:41.045 [Thread-23] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:45:41.045 [Thread-23] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-01 21:45:41.047 [Thread-23] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-01 21:45:41.234 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 448500 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:45:41.234 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:45:41.234 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:45:41.762 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:45:41.789 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-01 21:45:42.044 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:45:42.046 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:45:42.046 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:45:42.059 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:45:42.060 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 822 ms
2025-11-01 21:45:42.255 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:45:42.255 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:45:42.255 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:45:42.376 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:45:42.378 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-01 21:45:42.381 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn61: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:45:42.382 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-01 21:45:42.383 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:45:42.637 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:45:42.638 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:45:42.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:45:42.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:45:42.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:45:42.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:45:42.640 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:45:42.642 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:45:42.645 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:45:42.647 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:45:42.648 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:45:42.650 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:45:42.652 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:45:42.655 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:45:42.657 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:45:42.659 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:45:42.663 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:45:42.665 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:45:43.137 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:45:43.251 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@30f14c38] failed
2025-11-01 21:45:43.251 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:45:43.252 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:45:43.253 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:45:43.253 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:45:43.254 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:45:43.254 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:45:43.255 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:45:43.256 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:45:43.256 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-01 21:45:43.257 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-01 21:45:43.259 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-01 21:45:43.278 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-01 21:45:43.282 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@30f14c38] failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:384)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1334)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.NoClassDefFoundError: io/micrometer/tracing/Tracer
	at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3551)
	at java.base/java.lang.Class.getDeclaredConstructors(Class.java:2729)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:379)
	... 23 common frames omitted
Caused by: java.lang.ClassNotFoundException: io.micrometer.tracing.Tracer
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:536)
	at java.base/java.lang.Class.forName(Class.java:515)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 27 common frames omitted
2025-11-01 21:46:10.898 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 448500 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:46:10.898 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:46:10.898 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:46:11.289 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:46:11.314 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-01 21:46:11.506 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:46:11.507 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:46:11.507 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:46:11.520 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:46:11.520 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 620 ms
2025-11-01 21:46:11.654 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:46:11.654 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:46:11.654 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:46:11.741 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:46:11.742 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-01 21:46:11.744 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn71: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:46:11.744 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-01 21:46:11.745 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:46:11.910 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:46:11.911 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:46:11.913 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:46:11.914 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:46:11.914 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:46:11.915 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:46:11.916 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:46:11.920 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:46:11.922 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:46:11.926 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:46:11.929 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:46:11.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:46:11.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:46:11.939 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:46:11.949 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:46:11.952 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:46:11.954 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:46:11.958 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:46:12.378 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:46:12.490 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@50896da9] failed
2025-11-01 21:46:12.490 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:46:12.491 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:46:12.491 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:46:12.492 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:46:12.493 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:46:12.493 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:46:12.493 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:46:12.494 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:46:12.495 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-01 21:46:12.496 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-01 21:46:12.497 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-01 21:46:12.513 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-01 21:46:12.516 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@50896da9] failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:384)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1334)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.NoClassDefFoundError: io/micrometer/tracing/Tracer
	at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3551)
	at java.base/java.lang.Class.getDeclaredConstructors(Class.java:2729)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:379)
	... 23 common frames omitted
Caused by: java.lang.ClassNotFoundException: io.micrometer.tracing.Tracer
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:536)
	at java.base/java.lang.Class.forName(Class.java:515)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 27 common frames omitted
2025-11-01 21:46:18.997 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 448500 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:46:18.997 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:46:18.997 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:46:19.378 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:46:19.403 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 5 JPA repository interfaces.
2025-11-01 21:46:19.642 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:46:19.643 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:46:19.661 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:46:19.677 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:46:19.678 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 678 ms
2025-11-01 21:46:19.847 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:46:19.848 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:46:19.848 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:46:19.928 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:46:19.930 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-01 21:46:19.932 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn81: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:46:19.932 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-01 21:46:19.933 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:46:20.103 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:46:20.103 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:46:20.103 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:46:20.104 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:46:20.104 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:46:20.104 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:46:20.105 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:46:20.107 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:46:20.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:46:20.111 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:46:20.113 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:46:20.115 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:46:20.116 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:46:20.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:46:20.120 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:46:20.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:46:20.124 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:46:20.127 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:46:20.602 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:46:20.731 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@139eb9bb] failed
2025-11-01 21:46:20.732 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:46:20.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:46:20.733 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:46:20.734 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:46:20.734 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:46:20.734 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:46:20.735 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:46:20.736 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:46:20.736 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-01 21:46:20.736 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-01 21:46:20.737 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-01 21:46:20.753 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-01 21:46:20.757 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@139eb9bb] failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:384)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1334)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.NoClassDefFoundError: io/micrometer/tracing/Tracer
	at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3551)
	at java.base/java.lang.Class.getDeclaredConstructors(Class.java:2729)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:379)
	... 23 common frames omitted
Caused by: java.lang.ClassNotFoundException: io.micrometer.tracing.Tracer
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:536)
	at java.base/java.lang.Class.forName(Class.java:515)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 27 common frames omitted
2025-11-01 21:46:24.224 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 448500 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:46:24.224 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:46:24.224 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:46:24.720 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:46:24.750 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-01 21:46:24.996 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:46:24.997 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:46:24.998 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:46:25.008 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:46:25.009 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 782 ms
2025-11-01 21:46:25.128 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:46:25.129 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:46:25.129 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:46:25.223 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:46:25.224 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-11-01 21:46:25.225 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn91: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:46:25.226 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-11-01 21:46:25.226 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:46:25.432 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:46:25.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:46:25.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:46:25.435 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:46:25.435 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:46:25.436 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:46:25.436 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:46:25.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:46:25.440 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:46:25.443 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:46:25.444 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:46:25.447 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:46:25.450 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:46:25.453 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:46:25.455 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:46:25.457 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:46:25.461 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:46:25.464 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:46:26.071 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:46:26.202 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@e158d1e] failed
2025-11-01 21:46:26.204 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:46:26.204 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:46:26.205 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:46:26.206 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:46:26.206 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:46:26.207 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:46:26.207 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:46:26.209 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:46:26.209 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-11-01 21:46:26.211 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-11-01 21:46:26.212 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-01 21:46:26.229 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-01 21:46:26.233 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@e158d1e] failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:384)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1334)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.NoClassDefFoundError: io/micrometer/tracing/Tracer
	at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3551)
	at java.base/java.lang.Class.getDeclaredConstructors(Class.java:2729)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:379)
	... 23 common frames omitted
Caused by: java.lang.ClassNotFoundException: io.micrometer.tracing.Tracer
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:536)
	at java.base/java.lang.Class.forName(Class.java:515)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 27 common frames omitted
2025-11-01 21:46:27.712 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 448500 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:46:27.712 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:46:27.712 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:46:28.208 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:46:28.240 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 5 JPA repository interfaces.
2025-11-01 21:46:28.584 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:46:28.585 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:46:28.586 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:46:28.598 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:46:28.598 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 882 ms
2025-11-01 21:46:28.756 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:46:28.756 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:46:28.757 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:46:28.842 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:46:28.842 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-11-01 21:46:28.845 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn101: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:46:28.845 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-11-01 21:46:28.845 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:46:29.039 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:46:29.039 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:46:29.040 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:46:29.040 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:46:29.040 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:46:29.040 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:46:29.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:46:29.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:46:29.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:46:29.046 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:46:29.047 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:46:29.049 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:46:29.051 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:46:29.053 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:46:29.055 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:46:29.057 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:46:29.058 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:46:29.061 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:46:29.494 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:46:29.622 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@34bf9068] failed
2025-11-01 21:46:29.623 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:46:29.624 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:46:29.625 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:46:29.627 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:46:29.629 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:46:29.631 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:46:29.631 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:46:29.635 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:46:29.636 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-11-01 21:46:29.640 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-11-01 21:46:29.641 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-01 21:46:29.656 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-01 21:46:29.661 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tracingService': Resolution of declared constructors on bean Class [com.deliverytech.delivery.service.TracingService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@34bf9068] failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:384)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1334)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.NoClassDefFoundError: io/micrometer/tracing/Tracer
	at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3551)
	at java.base/java.lang.Class.getDeclaredConstructors(Class.java:2729)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:379)
	... 23 common frames omitted
Caused by: java.lang.ClassNotFoundException: io.micrometer.tracing.Tracer
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:536)
	at java.base/java.lang.Class.forName(Class.java:515)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 27 common frames omitted
2025-11-01 21:47:40.218 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 469459 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:47:40.220 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:47:40.221 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:47:40.443 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-01 21:47:40.443 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-01 21:47:45.041 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:47:45.553 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 304 ms. Found 5 JPA repository interfaces.
2025-11-01 21:47:48.890 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:47:48.942 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-01 21:47:48.946 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:47:48.946 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:47:49.037 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:47:49.038 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 8594 ms
2025-11-01 21:47:50.072 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:47:50.074 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:47:50.075 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:47:51.868 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:47:52.044 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-01 21:47:52.488 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:47:52.491 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-01 21:47:52.587 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:47:55.545 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:47:55.570 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:47:55.571 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:47:55.571 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:47:55.572 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:47:55.575 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:47:55.622 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:47:55.688 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:47:55.724 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:47:55.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:47:55.739 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:47:55.745 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:47:55.748 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:47:55.791 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:47:55.794 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:47:55.798 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:47:55.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:47:55.814 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:47:56.690 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-01 21:47:59.065 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:47:59.922 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:48:00.007 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:48:00.285 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 21:48:00.537 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:48:00.849 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:48:01.153 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:48:01.674 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 21:48:01.918 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 21:48:02.040 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-01 21:48:02.060 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 21:48:02.097 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 23.865 seconds (process running for 25.132)
2025-11-01 21:48:02.113 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:48:02.177 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:48:02.194 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:48:05.693 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:48:06.727 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-01 21:48:06.728 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-01 21:48:21.351 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 21:48:21.351 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 21:48:21.352 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 21:48:21.352 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 21:48:21.352 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 21:48:21.355 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7cb94649
2025-11-01 21:48:21.356 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@739291d
2025-11-01 21:48:21.357 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 21:48:21.358 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-01 21:48:21.444 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:48:21.469 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:48:21.476 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:48:21.489 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:48:21.493 [http-nio-8080-exec-1] DEBUG [165dc5d198734174] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:48:21.498 [http-nio-8080-exec-1] DEBUG [165dc5d198734174] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:48:21.534 [http-nio-8080-exec-1] DEBUG [165dc5d198734174] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:48:21.536 [http-nio-8080-exec-1] DEBUG [165dc5d198734174] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:48:21.579 [http-nio-8080-exec-1] DEBUG [165dc5d198734174] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:48:32.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:48:32.098 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:48:32.100 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:48:32.383 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:49:02.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:49:02.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:49:02.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:49:02.641 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:49:10.454 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:10.456 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:10.457 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:10.459 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:10.460 [http-nio-8080-exec-2] DEBUG [620e802b9a264dfb] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:10.461 [http-nio-8080-exec-2] DEBUG [620e802b9a264dfb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:10.464 [http-nio-8080-exec-2] DEBUG [620e802b9a264dfb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:10.465 [http-nio-8080-exec-2] DEBUG [620e802b9a264dfb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:10.467 [http-nio-8080-exec-2] DEBUG [620e802b9a264dfb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:12.654 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-01 21:49:12.655 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:12.656 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:12.657 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-01 21:49:12.658 [http-nio-8080-exec-3] DEBUG [1a051d706a764d79] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-01 21:49:12.661 [http-nio-8080-exec-3] DEBUG [1a051d706a764d79] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-01 21:49:12.781 [http-nio-8080-exec-3] DEBUG [1a051d706a764d79] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-01 21:49:13.202 [http-nio-8080-exec-3] DEBUG [1a051d706a764d79] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:13.409 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:13.411 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:13.411 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:13.413 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:13.415 [http-nio-8080-exec-4] DEBUG [b84db282d78f49c3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:13.416 [http-nio-8080-exec-4] DEBUG [b84db282d78f49c3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:13.418 [http-nio-8080-exec-4] DEBUG [b84db282d78f49c3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:13.418 [http-nio-8080-exec-4] DEBUG [b84db282d78f49c3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:13.420 [http-nio-8080-exec-4] DEBUG [b84db282d78f49c3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:13.466 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-01 21:49:13.468 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:13.469 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:18.407 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:18.409 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:18.410 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:18.412 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:18.412 [http-nio-8080-exec-5] DEBUG [1dc22f74a102448e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:18.413 [http-nio-8080-exec-5] DEBUG [1dc22f74a102448e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:18.415 [http-nio-8080-exec-5] DEBUG [1dc22f74a102448e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:18.416 [http-nio-8080-exec-5] DEBUG [1dc22f74a102448e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:18.417 [http-nio-8080-exec-5] DEBUG [1dc22f74a102448e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:23.407 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:23.408 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:23.409 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:23.412 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:23.414 [http-nio-8080-exec-8] DEBUG [1f25523703164c3a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:23.421 [http-nio-8080-exec-8] DEBUG [1f25523703164c3a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:23.424 [http-nio-8080-exec-8] DEBUG [1f25523703164c3a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:23.424 [http-nio-8080-exec-8] DEBUG [1f25523703164c3a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:23.425 [http-nio-8080-exec-8] DEBUG [1f25523703164c3a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:29.184 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:29.185 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:29.186 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:29.189 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:29.189 [http-nio-8080-exec-7] DEBUG [fef6228433494c5d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:29.190 [http-nio-8080-exec-7] DEBUG [fef6228433494c5d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:29.192 [http-nio-8080-exec-7] DEBUG [fef6228433494c5d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:29.192 [http-nio-8080-exec-7] DEBUG [fef6228433494c5d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:29.193 [http-nio-8080-exec-7] DEBUG [fef6228433494c5d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:32.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:49:32.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:49:32.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:49:32.276 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:49:34.189 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:34.190 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:34.190 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:34.192 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:34.193 [http-nio-8080-exec-9] DEBUG [b41b10ab22e443bf] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:34.193 [http-nio-8080-exec-9] DEBUG [b41b10ab22e443bf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:34.195 [http-nio-8080-exec-9] DEBUG [b41b10ab22e443bf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:34.195 [http-nio-8080-exec-9] DEBUG [b41b10ab22e443bf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:34.196 [http-nio-8080-exec-9] DEBUG [b41b10ab22e443bf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:39.185 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:39.186 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:39.187 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:39.189 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:39.189 [http-nio-8080-exec-10] DEBUG [18bdcd14fbd244c3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:39.190 [http-nio-8080-exec-10] DEBUG [18bdcd14fbd244c3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:39.192 [http-nio-8080-exec-10] DEBUG [18bdcd14fbd244c3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:39.192 [http-nio-8080-exec-10] DEBUG [18bdcd14fbd244c3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:39.193 [http-nio-8080-exec-10] DEBUG [18bdcd14fbd244c3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:44.184 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:44.185 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:44.185 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:44.187 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:44.187 [http-nio-8080-exec-1] DEBUG [95dd6a7a6bfa4069] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:44.188 [http-nio-8080-exec-1] DEBUG [95dd6a7a6bfa4069] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:44.189 [http-nio-8080-exec-1] DEBUG [95dd6a7a6bfa4069] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:44.189 [http-nio-8080-exec-1] DEBUG [95dd6a7a6bfa4069] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:44.190 [http-nio-8080-exec-1] DEBUG [95dd6a7a6bfa4069] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:49.184 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:49.186 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:49.187 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:49.188 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:49.189 [http-nio-8080-exec-2] DEBUG [1a6f2976e5e745fc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:49.190 [http-nio-8080-exec-2] DEBUG [1a6f2976e5e745fc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:49.192 [http-nio-8080-exec-2] DEBUG [1a6f2976e5e745fc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:49.192 [http-nio-8080-exec-2] DEBUG [1a6f2976e5e745fc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:49.194 [http-nio-8080-exec-2] DEBUG [1a6f2976e5e745fc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:54.184 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:54.185 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:54.185 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:54.187 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:54.187 [http-nio-8080-exec-3] DEBUG [a0be3063f2404cfb] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:54.188 [http-nio-8080-exec-3] DEBUG [a0be3063f2404cfb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:54.189 [http-nio-8080-exec-3] DEBUG [a0be3063f2404cfb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:54.189 [http-nio-8080-exec-3] DEBUG [a0be3063f2404cfb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:54.190 [http-nio-8080-exec-3] DEBUG [a0be3063f2404cfb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:49:59.185 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:49:59.186 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:49:59.187 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:49:59.189 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:49:59.189 [http-nio-8080-exec-4] DEBUG [96ad69df7e7c467f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:49:59.190 [http-nio-8080-exec-4] DEBUG [96ad69df7e7c467f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:49:59.192 [http-nio-8080-exec-4] DEBUG [96ad69df7e7c467f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:49:59.193 [http-nio-8080-exec-4] DEBUG [96ad69df7e7c467f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:49:59.194 [http-nio-8080-exec-4] DEBUG [96ad69df7e7c467f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:02.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:50:02.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:50:02.098 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:50:04.185 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:04.186 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:04.187 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:04.189 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:04.189 [http-nio-8080-exec-6] DEBUG [fc5ec675bc2d49c0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:04.190 [http-nio-8080-exec-6] DEBUG [fc5ec675bc2d49c0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:04.192 [http-nio-8080-exec-6] DEBUG [fc5ec675bc2d49c0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:04.192 [http-nio-8080-exec-6] DEBUG [fc5ec675bc2d49c0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:50:04.194 [http-nio-8080-exec-6] DEBUG [fc5ec675bc2d49c0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:05.115 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:50:09.184 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:09.186 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:09.186 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:09.188 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:09.188 [http-nio-8080-exec-5] DEBUG [c56e5e0dbfb24f99] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:09.189 [http-nio-8080-exec-5] DEBUG [c56e5e0dbfb24f99] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:09.190 [http-nio-8080-exec-5] DEBUG [c56e5e0dbfb24f99] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:09.191 [http-nio-8080-exec-5] DEBUG [c56e5e0dbfb24f99] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:50:09.192 [http-nio-8080-exec-5] DEBUG [c56e5e0dbfb24f99] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:14.184 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:14.186 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:14.186 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:14.188 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:14.188 [http-nio-8080-exec-7] DEBUG [3a57f6558fb24c0b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:14.189 [http-nio-8080-exec-7] DEBUG [3a57f6558fb24c0b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:14.191 [http-nio-8080-exec-7] DEBUG [3a57f6558fb24c0b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:14.192 [http-nio-8080-exec-7] DEBUG [3a57f6558fb24c0b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:50:14.193 [http-nio-8080-exec-7] DEBUG [3a57f6558fb24c0b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:17.172 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:50:17.443 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 21:50:17.537 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 21:50:17.537 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-01 21:50:17.538 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 21:50:17.605 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@e0075af]
2025-11-01 21:50:17.746 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:50:17.761 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:50:17.856 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 21:50:17.885 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-01 21:50:17.889 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-01 21:50:17.937 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:50:17.958 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-01 21:50:18.075 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-01 21:50:18.095 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:18.095 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@61f5f8]
2025-11-01 21:50:18.115 [http-nio-8080-exec-10] DEBUG [0b59e51a7e0d4543] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-01 21:50:19.185 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:19.185 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:19.186 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:19.187 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:19.187 [http-nio-8080-exec-1] DEBUG [0c12b50f01f84b29] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:19.188 [http-nio-8080-exec-1] DEBUG [0c12b50f01f84b29] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:19.189 [http-nio-8080-exec-1] DEBUG [0c12b50f01f84b29] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:19.190 [http-nio-8080-exec-1] DEBUG [0c12b50f01f84b29] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:50:19.191 [http-nio-8080-exec-1] DEBUG [0c12b50f01f84b29] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:23.408 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:23.410 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:23.410 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:23.413 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:23.413 [http-nio-8080-exec-2] DEBUG [ce746acc45434613] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:23.414 [http-nio-8080-exec-2] DEBUG [ce746acc45434613] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:23.418 [http-nio-8080-exec-2] DEBUG [ce746acc45434613] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:23.418 [http-nio-8080-exec-2] DEBUG [ce746acc45434613] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:50:23.421 [http-nio-8080-exec-2] DEBUG [ce746acc45434613] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:29.184 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:29.185 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:29.186 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:29.187 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:29.188 [http-nio-8080-exec-3] DEBUG [3f3607a2ee174333] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:29.188 [http-nio-8080-exec-3] DEBUG [3f3607a2ee174333] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:29.190 [http-nio-8080-exec-3] DEBUG [3f3607a2ee174333] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:29.190 [http-nio-8080-exec-3] DEBUG [3f3607a2ee174333] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:50:29.191 [http-nio-8080-exec-3] DEBUG [3f3607a2ee174333] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:32.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:50:32.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:50:32.098 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:50:32.589 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:50:34.184 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:34.185 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:34.186 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:34.187 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:34.188 [http-nio-8080-exec-4] DEBUG [0b709eef21014f12] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:34.188 [http-nio-8080-exec-4] DEBUG [0b709eef21014f12] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:34.190 [http-nio-8080-exec-4] DEBUG [0b709eef21014f12] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:34.191 [http-nio-8080-exec-4] DEBUG [0b709eef21014f12] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:50:34.192 [http-nio-8080-exec-4] DEBUG [0b709eef21014f12] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:39.184 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:39.185 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:39.186 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:39.187 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:39.188 [http-nio-8080-exec-6] DEBUG [43286cf92d294d3f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:39.188 [http-nio-8080-exec-6] DEBUG [43286cf92d294d3f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:39.189 [http-nio-8080-exec-6] DEBUG [43286cf92d294d3f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:39.190 [http-nio-8080-exec-6] DEBUG [43286cf92d294d3f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:50:39.192 [http-nio-8080-exec-6] DEBUG [43286cf92d294d3f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:44.184 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:44.184 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:44.185 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:44.186 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:44.186 [http-nio-8080-exec-5] DEBUG [a592d18cc70e4afe] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:44.187 [http-nio-8080-exec-5] DEBUG [a592d18cc70e4afe] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:44.188 [http-nio-8080-exec-5] DEBUG [a592d18cc70e4afe] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:44.188 [http-nio-8080-exec-5] DEBUG [a592d18cc70e4afe] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:50:44.189 [http-nio-8080-exec-5] DEBUG [a592d18cc70e4afe] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:49.183 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:49.184 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:49.184 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:49.185 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:49.186 [http-nio-8080-exec-8] DEBUG [611f91d2a1a142b8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:49.186 [http-nio-8080-exec-8] DEBUG [611f91d2a1a142b8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:49.187 [http-nio-8080-exec-8] DEBUG [611f91d2a1a142b8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:49.188 [http-nio-8080-exec-8] DEBUG [611f91d2a1a142b8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:50:49.189 [http-nio-8080-exec-8] DEBUG [611f91d2a1a142b8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:54.183 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:54.184 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:54.184 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:54.185 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:54.186 [http-nio-8080-exec-7] DEBUG [3ea0f7b12caa47c2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:54.186 [http-nio-8080-exec-7] DEBUG [3ea0f7b12caa47c2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:54.187 [http-nio-8080-exec-7] DEBUG [3ea0f7b12caa47c2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:54.187 [http-nio-8080-exec-7] DEBUG [3ea0f7b12caa47c2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:50:54.188 [http-nio-8080-exec-7] DEBUG [3ea0f7b12caa47c2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:50:59.186 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:50:59.187 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:50:59.188 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:50:59.189 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:50:59.190 [http-nio-8080-exec-9] DEBUG [34fd1c511da54163] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:50:59.190 [http-nio-8080-exec-9] DEBUG [34fd1c511da54163] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:50:59.192 [http-nio-8080-exec-9] DEBUG [34fd1c511da54163] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:50:59.192 [http-nio-8080-exec-9] DEBUG [34fd1c511da54163] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:50:59.193 [http-nio-8080-exec-9] DEBUG [34fd1c511da54163] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:51:02.094 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:51:02.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:51:02.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:51:02.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:51:04.183 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:51:04.184 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:51:04.184 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:51:04.185 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:51:04.185 [http-nio-8080-exec-10] DEBUG [b17fb7f9836e4a27] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:51:04.186 [http-nio-8080-exec-10] DEBUG [b17fb7f9836e4a27] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:51:04.187 [http-nio-8080-exec-10] DEBUG [b17fb7f9836e4a27] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:51:04.187 [http-nio-8080-exec-10] DEBUG [b17fb7f9836e4a27] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:51:04.188 [http-nio-8080-exec-10] DEBUG [b17fb7f9836e4a27] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:51:09.183 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:51:09.184 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:51:09.185 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:51:09.186 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:51:09.187 [http-nio-8080-exec-1] DEBUG [0c648a6c22a94e3d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:51:09.187 [http-nio-8080-exec-1] DEBUG [0c648a6c22a94e3d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:51:09.188 [http-nio-8080-exec-1] DEBUG [0c648a6c22a94e3d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:51:09.189 [http-nio-8080-exec-1] DEBUG [0c648a6c22a94e3d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:51:09.190 [http-nio-8080-exec-1] DEBUG [0c648a6c22a94e3d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:51:14.183 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:51:14.184 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:51:14.184 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:51:14.185 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:51:14.186 [http-nio-8080-exec-2] DEBUG [2dd6e105eb6d4fec] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:51:14.186 [http-nio-8080-exec-2] DEBUG [2dd6e105eb6d4fec] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:51:14.188 [http-nio-8080-exec-2] DEBUG [2dd6e105eb6d4fec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:51:14.188 [http-nio-8080-exec-2] DEBUG [2dd6e105eb6d4fec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:51:14.189 [http-nio-8080-exec-2] DEBUG [2dd6e105eb6d4fec] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:51:19.184 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:51:19.185 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:51:19.185 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:51:19.186 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:51:19.187 [http-nio-8080-exec-4] DEBUG [596f387395294838] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:51:19.187 [http-nio-8080-exec-4] DEBUG [596f387395294838] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:51:19.189 [http-nio-8080-exec-4] DEBUG [596f387395294838] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:51:19.189 [http-nio-8080-exec-4] DEBUG [596f387395294838] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:51:19.190 [http-nio-8080-exec-4] DEBUG [596f387395294838] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:51:24.184 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:51:24.185 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:51:24.185 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:51:24.186 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:51:24.186 [http-nio-8080-exec-6] DEBUG [d01638df86864385] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:51:24.187 [http-nio-8080-exec-6] DEBUG [d01638df86864385] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:51:24.188 [http-nio-8080-exec-6] DEBUG [d01638df86864385] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:51:24.189 [http-nio-8080-exec-6] DEBUG [d01638df86864385] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:51:24.190 [http-nio-8080-exec-6] DEBUG [d01638df86864385] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:51:32.094 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:51:32.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:51:32.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:51:32.269 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:52:02.094 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:52:02.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:52:02.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:52:02.240 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:52:21.188 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:52:21.190 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:52:21.191 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:52:21.193 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:52:21.194 [http-nio-8080-exec-5] DEBUG [0928fc175ac744c0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:52:21.195 [http-nio-8080-exec-5] DEBUG [0928fc175ac744c0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:52:21.198 [http-nio-8080-exec-5] DEBUG [0928fc175ac744c0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:52:21.198 [http-nio-8080-exec-5] DEBUG [0928fc175ac744c0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:52:21.201 [http-nio-8080-exec-5] DEBUG [0928fc175ac744c0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:52:32.094 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:52:32.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:52:32.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:52:32.253 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:53:02.094 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:53:02.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:53:02.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:53:04.488 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:53:21.185 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:53:21.186 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:53:21.187 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:53:21.188 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:53:21.189 [http-nio-8080-exec-8] DEBUG [765ea290f9354538] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:53:21.189 [http-nio-8080-exec-8] DEBUG [765ea290f9354538] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:53:21.190 [http-nio-8080-exec-8] DEBUG [765ea290f9354538] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:53:21.190 [http-nio-8080-exec-8] DEBUG [765ea290f9354538] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:53:21.192 [http-nio-8080-exec-8] DEBUG [765ea290f9354538] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:53:32.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:53:32.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:53:32.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:53:32.228 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:54:02.094 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:54:02.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:54:02.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:54:02.273 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:54:21.185 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:54:21.186 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:54:21.186 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:54:21.187 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:54:21.187 [http-nio-8080-exec-7] DEBUG [72d268be6b384330] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:54:21.188 [http-nio-8080-exec-7] DEBUG [72d268be6b384330] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:54:21.189 [http-nio-8080-exec-7] DEBUG [72d268be6b384330] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:54:21.189 [http-nio-8080-exec-7] DEBUG [72d268be6b384330] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:54:21.190 [http-nio-8080-exec-7] DEBUG [72d268be6b384330] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:54:32.094 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:54:32.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:54:32.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:54:32.449 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:55:02.094 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:55:02.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:55:02.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:55:04.035 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:55:21.188 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:55:21.188 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:55:21.189 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:55:21.190 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:55:21.190 [http-nio-8080-exec-9] DEBUG [073f6f8c19344d93] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:55:21.191 [http-nio-8080-exec-9] DEBUG [073f6f8c19344d93] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:55:21.192 [http-nio-8080-exec-9] DEBUG [073f6f8c19344d93] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:55:21.192 [http-nio-8080-exec-9] DEBUG [073f6f8c19344d93] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:55:21.194 [http-nio-8080-exec-9] DEBUG [073f6f8c19344d93] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:55:32.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:55:32.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:55:32.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:55:32.460 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:56:02.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:56:02.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:56:02.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:56:03.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:56:21.188 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:56:21.189 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:56:21.190 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:56:21.191 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:56:21.191 [http-nio-8080-exec-10] DEBUG [90cb5d680ed2499e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:56:21.192 [http-nio-8080-exec-10] DEBUG [90cb5d680ed2499e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:56:21.193 [http-nio-8080-exec-10] DEBUG [90cb5d680ed2499e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:56:21.194 [http-nio-8080-exec-10] DEBUG [90cb5d680ed2499e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=234.418251, receita_total=40.9, pedi (truncated)...]
2025-11-01 21:56:21.195 [http-nio-8080-exec-10] DEBUG [90cb5d680ed2499e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:56:32.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:56:32.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:56:32.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:56:32.230 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:56:50.173 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 97 class path changes (0 additions, 97 deletions, 0 modifications)
2025-11-01 21:56:50.182 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 21:56:50.183 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-01 21:56:50.189 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 21:56:50.189 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-01 21:56:50.208 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:56:50.210 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:56:50.214 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:56:50.224 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:56:50.226 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:56:50.228 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:56:50.233 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:56:50.248 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:56:50.250 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-01 21:56:50.254 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-01 21:56:57.244 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 469459 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:56:57.244 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:56:57.244 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:56:58.043 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:56:58.046 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-11-01 21:56:58.325 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:56:58.326 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:56:58.326 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:56:58.356 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:56:58.357 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1110 ms
2025-11-01 21:56:58.608 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:56:58.608 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:56:58.742 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:56:58.744 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-01 21:56:58.760 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:56:58.760 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-01 21:56:58.761 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:56:58.816 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:56:59.182 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 6 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:56:59.268 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:56:59.289 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:56:59.332 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:56:59.640 [restartedMain] WARN  [] o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ae438f77-b26f-4e46-915f-6e46415938b3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-01 21:56:59.642 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-01 21:56:59.700 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 21:56:59.757 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:56:59.809 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 21:56:59.820 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'Joo Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null)
2025-11-01 21:56:59.822 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:56:59.823 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 21:56:59.824 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-01 21:56:59.826 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-01 21:57:00.829 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-01 21:57:00.831 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-01 21:57:00.871 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-01 21:57:00.924 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'Joo Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'Joo Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:293)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 23 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "USUARIO" not found (this database is empty); SQL statement:
INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'Joo Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null) [42104-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7932)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7916)
	at org.h2.command.Parser.readTableOrView(Parser.java:7895)
	at org.h2.command.Parser.readTableOrView(Parser.java:7857)
	at org.h2.command.Parser.parseInsert(Parser.java:1521)
	at org.h2.command.Parser.parsePrepared(Parser.java:698)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:556)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 33 common frames omitted
2025-11-01 21:57:08.050 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 469459 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:57:08.051 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:57:08.052 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 21:57:09.110 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:57:09.179 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 5 JPA repository interfaces.
2025-11-01 21:57:09.745 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 21:57:09.750 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:57:09.750 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:57:09.769 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:57:09.769 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1710 ms
2025-11-01 21:57:10.215 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:57:10.220 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:57:10.220 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:57:10.376 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:57:10.378 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-01 21:57:10.381 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 21:57:10.381 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-01 21:57:10.382 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:57:11.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:57:11.116 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:57:11.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:57:11.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:57:11.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:57:11.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:57:11.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:57:11.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:57:11.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:57:11.130 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:57:11.133 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:57:11.138 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:57:11.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:57:11.151 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:57:11.155 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:57:11.162 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:57:11.178 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:57:11.182 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:57:12.224 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:57:13.040 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:57:13.124 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:57:13.402 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 21:57:13.619 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:57:13.717 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:57:13.820 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:57:14.108 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 21:57:14.261 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 21:57:14.329 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 21:57:14.379 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:57:14.379 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.405 seconds (process running for 577.414)
2025-11-01 21:57:14.383 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:57:14.397 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:57:14.404 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   EnvironmentEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpointWebExtension matched:
      - @ConditionalOnBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) found bean 'environmentEndpoint'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpointWebExtension; SearchStrategy: all) did not find any beans (OnBeanCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoContributorAutoConfiguration#buildInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) found a single bean 'buildProperties' (OnBeanCondition)

   InfoContributorAutoConfiguration#gitInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) found a single bean 'gitProperties'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.GitInfoContributor; SearchStrategy: all) did not find any beans (OnBeanCondition)

   InfoEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoEndpointAutoConfiguration#infoEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.InfoEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   LoggersEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   LoggersEndpointAutoConfiguration#loggersEndpoint matched:
      - Logging System enabled (LoggersEndpointAutoConfiguration.OnEnabledLoggingSystemCondition)
      - @ConditionalOnBean (types: org.springframework.boot.logging.LoggingSystem; SearchStrategy: all) found bean 'springBootLoggingSystem'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.logging.LoggersEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MetricsEndpointAutoConfiguration matched:
      - @ConditionalOnClass found required class 'io.micrometer.core.annotation.Timed' (OnClassCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   MetricsEndpointAutoConfiguration#metricsEndpoint matched:
      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean 'prometheusMeterRegistry'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.MetricsEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#buildProperties matched:
      - @ConditionalOnResource found location ${spring.info.build.location:classpath:META-INF/build-info.properties} (OnResourceCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#gitProperties matched:
      - GitResource found git info at classpath:git.properties (ProjectInfoAutoConfiguration.GitResourceAvailableCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration#prometheusEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.export.prometheus.PrometheusScrapeEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   JpaBaseConfiguration.JpaWebConfiguration:
      Did not match:
         - @ConditionalOnBooleanProperty (spring.jpa.open-in-view=true) found different value in property 'spring.jpa.open-in-view' (OnPropertyCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.web.servlet.config.annotation.WebMvcConfigurer' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' securityFilterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   UserDetailsServiceAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.security.authentication.AuthenticationManager,org.springframework.security.authentication.AuthenticationProvider,org.springframework.security.core.userdetails.UserDetailsService,org.springframework.security.authentication.AuthenticationManagerResolver,?; SearchStrategy: all) found beans of type 'org.springframework.security.authentication.AuthenticationManager' authenticationManager and found beans of type 'org.springframework.security.core.userdetails.UserDetailsService' authService (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.authentication.AuthenticationManager' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)
         - AnyNestedCondition 1 matched 2 did not; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.PasswordConfigured @ConditionalOnProperty (spring.security.user.password) did not find property 'spring.security.user.password'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.NameConfigured @ConditionalOnProperty (spring.security.user.name) did not find property 'spring.security.user.name'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.MissingAlternative @ConditionalOnMissingClass did not find unwanted classes 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository', 'org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector', 'org.springframework.security.saml2.provider.service.registration.RelyingPartyRegistrationRepository' (UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-01 21:57:15.079 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:57:16.102 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-01 21:57:16.102 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-01 21:57:21.188 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 21:57:21.234 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 21:57:21.234 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 21:57:21.234 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 21:57:21.234 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 21:57:21.236 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@41a17e04
2025-11-01 21:57:21.237 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4f510d01
2025-11-01 21:57:21.237 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 21:57:21.238 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-01 21:57:21.242 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:57:21.245 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:57:21.246 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:57:21.250 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:57:21.251 [http-nio-8080-exec-1] DEBUG [dd14664b3f5c411f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:57:21.260 [http-nio-8080-exec-1] DEBUG [dd14664b3f5c411f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:57:21.265 [http-nio-8080-exec-1] DEBUG [dd14664b3f5c411f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:57:21.266 [http-nio-8080-exec-1] DEBUG [dd14664b3f5c411f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:57:21.276 [http-nio-8080-exec-1] DEBUG [dd14664b3f5c411f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:57:34.043 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:57:34.045 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:57:34.046 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:57:34.047 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:57:34.050 [http-nio-8080-exec-2] DEBUG [ef1828398e0d4766] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:57:34.067 [http-nio-8080-exec-2] DEBUG [ef1828398e0d4766] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:57:34.069 [http-nio-8080-exec-2] DEBUG [ef1828398e0d4766] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:57:34.069 [http-nio-8080-exec-2] DEBUG [ef1828398e0d4766] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:57:34.078 [http-nio-8080-exec-2] DEBUG [ef1828398e0d4766] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:57:38.413 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:57:38.415 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:57:38.415 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:57:38.417 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:57:38.417 [http-nio-8080-exec-3] DEBUG [205af88490684e02] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:57:38.418 [http-nio-8080-exec-3] DEBUG [205af88490684e02] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:57:38.420 [http-nio-8080-exec-3] DEBUG [205af88490684e02] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:57:38.420 [http-nio-8080-exec-3] DEBUG [205af88490684e02] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 21:57:38.421 [http-nio-8080-exec-3] DEBUG [205af88490684e02] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:57:38.923 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:57:39.030 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 21:57:39.054 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 21:57:39.056 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-01 21:57:39.057 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 21:57:39.073 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@6e0e0ef8]
2025-11-01 21:57:39.211 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:57:39.214 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:57:39.261 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 21:57:39.269 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-01 21:57:39.277 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-01 21:57:39.294 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:57:39.304 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-01 21:57:39.330 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-01 21:57:39.343 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:57:39.348 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@5ecbf62e]
2025-11-01 21:57:39.365 [http-nio-8080-exec-5] DEBUG [4ad81b10473646dd] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-01 21:57:43.409 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:57:43.410 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:57:43.411 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:57:43.413 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:57:43.414 [http-nio-8080-exec-6] DEBUG [aed00c823fcf419a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:57:43.419 [http-nio-8080-exec-6] DEBUG [aed00c823fcf419a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:57:43.421 [http-nio-8080-exec-6] DEBUG [aed00c823fcf419a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:57:43.424 [http-nio-8080-exec-6] DEBUG [aed00c823fcf419a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:57:43.428 [http-nio-8080-exec-6] DEBUG [aed00c823fcf419a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:57:43.774 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:57:43.777 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:57:43.780 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:57:43.947 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@27f7db5a
2025-11-01 21:57:44.370 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:57:44.371 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:57:44.372 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:57:44.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:57:48.407 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:57:48.408 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:57:48.410 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:57:48.417 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:57:48.418 [http-nio-8080-exec-7] DEBUG [a688fe813a03403b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:57:48.418 [http-nio-8080-exec-7] DEBUG [a688fe813a03403b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:57:48.420 [http-nio-8080-exec-7] DEBUG [a688fe813a03403b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:57:48.420 [http-nio-8080-exec-7] DEBUG [a688fe813a03403b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:57:48.423 [http-nio-8080-exec-7] DEBUG [a688fe813a03403b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:57:49.213 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:57:49.403 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 171 ms. Found 5 JPA repository interfaces.
2025-11-01 21:57:52.490 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:57:52.602 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-01 21:57:53.322 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:57:53.328 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-01 21:57:53.396 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:57:53.409 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:57:53.410 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:57:53.411 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:57:53.412 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:57:53.413 [http-nio-8080-exec-8] DEBUG [0ed6906ca54c4d6f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:57:53.414 [http-nio-8080-exec-8] DEBUG [0ed6906ca54c4d6f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:57:53.415 [http-nio-8080-exec-8] DEBUG [0ed6906ca54c4d6f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:57:53.420 [http-nio-8080-exec-8] DEBUG [0ed6906ca54c4d6f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:57:53.422 [http-nio-8080-exec-8] DEBUG [0ed6906ca54c4d6f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:57:57.314 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:57:57.334 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:57:57.336 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:57:57.337 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:57:57.338 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:57:57.339 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:57:57.371 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:57:57.411 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:57:57.432 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:57:57.436 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:57:57.439 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:57:57.442 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:57:57.446 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:57:57.493 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:57:57.497 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:57:57.502 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:57:57.506 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:57:57.520 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:57:58.912 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-01 21:57:59.185 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:57:59.186 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:57:59.186 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:57:59.188 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:57:59.188 [http-nio-8080-exec-9] DEBUG [1c8c65eb83e24242] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:57:59.189 [http-nio-8080-exec-9] DEBUG [1c8c65eb83e24242] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:57:59.191 [http-nio-8080-exec-9] DEBUG [1c8c65eb83e24242] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:57:59.192 [http-nio-8080-exec-9] DEBUG [1c8c65eb83e24242] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:57:59.196 [http-nio-8080-exec-9] DEBUG [1c8c65eb83e24242] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:02.905 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:03.561 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:03.569 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:03.931 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:04.160 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:04.169 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:04.184 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:04.186 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:04.186 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:04.187 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:04.188 [http-nio-8080-exec-10] DEBUG [d999d90c70484bb6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:04.189 [http-nio-8080-exec-10] DEBUG [d999d90c70484bb6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:04.191 [http-nio-8080-exec-10] DEBUG [d999d90c70484bb6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:04.191 [http-nio-8080-exec-10] DEBUG [d999d90c70484bb6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:04.192 [http-nio-8080-exec-10] DEBUG [d999d90c70484bb6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:06.381 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:08.522 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:08.751 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:09.184 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:09.186 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:09.186 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:09.187 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:09.188 [http-nio-8080-exec-1] DEBUG [c8e64593f73a4d86] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:09.190 [http-nio-8080-exec-1] DEBUG [c8e64593f73a4d86] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:09.197 [http-nio-8080-exec-1] DEBUG [c8e64593f73a4d86] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:09.197 [http-nio-8080-exec-1] DEBUG [c8e64593f73a4d86] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:09.199 [http-nio-8080-exec-1] DEBUG [c8e64593f73a4d86] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:09.417 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:09.668 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:10.173 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:10.474 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:11.190 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:11.456 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:11.456 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:11.457 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:11.458 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:11.459 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:11.461 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-01 21:58:11.674 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 31.232 seconds (process running for 57.381)
2025-11-01 21:58:11.787 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:11.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:11.903 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:12.021 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-01 21:58:12.336 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, nome, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:12.439 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-01 21:58:12.512 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:12.535 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:12.580 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-01 21:58:12.620 [main] DEBUG [3c3e04c309a74f3d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-01 21:58:12.776 [main] DEBUG [3c3e04c309a74f3d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@2d695ec4]
2025-11-01 21:58:13.254 [main] DEBUG [3c3e04c309a74f3d] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 21:58:13.374 [main] DEBUG [3c3e04c309a74f3d] o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-11-01 21:58:13.379 [main] DEBUG [3c3e04c309a74f3d] o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2025-11-01 21:58:13.438 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:13.445 [main] DEBUG [3c3e04c309a74f3d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:13.447 [main] DEBUG [3c3e04c309a74f3d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Credenciais invlidas, status=401}]
2025-11-01 21:58:13.709 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@27f7db5a, started on Sat Nov 01 21:57:43 BRT 2025
2025-11-01 21:58:13.734 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:13.738 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:13.743 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:13.746 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:13.749 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:13.752 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:13.754 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:13.760 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-01 21:58:13.794 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-01 21:58:13.803 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:13.943 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:13.944 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:13.944 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:13.951 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2719a5c3
2025-11-01 21:58:14.185 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:14.186 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:14.187 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:14.188 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:14.189 [http-nio-8080-exec-2] DEBUG [94f994f9cf65445d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:14.189 [http-nio-8080-exec-2] DEBUG [94f994f9cf65445d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:14.191 [http-nio-8080-exec-2] DEBUG [94f994f9cf65445d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:14.191 [http-nio-8080-exec-2] DEBUG [94f994f9cf65445d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:14.196 [http-nio-8080-exec-2] DEBUG [94f994f9cf65445d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:14.370 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:14.371 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:14.372 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:15.323 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:15.388 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:15.805 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:15.813 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-01 21:58:15.828 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:15.829 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-01 21:58:15.831 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:16.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:16.236 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:16.237 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:16.238 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:16.238 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:16.239 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:16.246 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:16.248 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:16.253 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:16.260 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:16.266 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:16.275 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:16.285 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:16.289 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:16.300 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:16.311 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:16.316 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:16.320 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:16.324 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:16.618 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:16.656 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:16.662 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:16.670 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:16.679 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:16.688 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:16.897 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:17.353 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:17.386 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:17.538 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:17.612 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:17.716 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:17.761 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:17.974 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:18.058 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:18.060 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:18.060 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:18.060 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:18.060 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:18.063 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 21:58:18.169 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:18.170 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 4.367 seconds (process running for 63.877)
2025-11-01 21:58:18.176 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:18.178 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:18.217 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-01 21:58:18.239 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-11-01 21:58:18.242 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:18.254 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-11-01 21:58:18.256 [main] DEBUG [3d96d29f6c3a4456] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#getCurrentUser(Authentication)
2025-11-01 21:58:18.275 [main] DEBUG [3d96d29f6c3a4456] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:18.276 [main] DEBUG [3d96d29f6c3a4456] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Token invlido. Acesso negado.}]
2025-11-01 21:58:18.308 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2719a5c3, started on Sat Nov 01 21:58:13 BRT 2025
2025-11-01 21:58:18.637 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:18.648 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:18.648 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:18.656 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:18.659 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:18.661 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:18.663 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:18.669 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:18.677 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-01 21:58:18.685 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-01 21:58:18.692 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:18.827 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:18.828 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:18.828 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:18.832 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6ecc753c
2025-11-01 21:58:19.196 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:19.197 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:19.197 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:19.204 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:19.205 [http-nio-8080-exec-3] DEBUG [e74b7deed5f74748] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:19.206 [http-nio-8080-exec-3] DEBUG [e74b7deed5f74748] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:19.207 [http-nio-8080-exec-3] DEBUG [e74b7deed5f74748] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:19.207 [http-nio-8080-exec-3] DEBUG [e74b7deed5f74748] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:19.208 [http-nio-8080-exec-3] DEBUG [e74b7deed5f74748] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:20.020 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:20.088 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 65 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:20.427 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:20.429 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-01 21:58:20.434 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:20.435 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-01 21:58:20.436 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:20.754 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:20.755 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:20.755 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:20.756 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:20.756 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:20.757 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:20.760 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:20.775 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:20.778 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:20.785 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:20.789 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:20.798 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:20.812 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:20.817 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:20.821 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:20.832 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:20.835 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:20.840 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:21.163 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:21.229 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:21.236 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:21.244 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:21.251 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:21.257 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:21.443 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:21.774 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:21.798 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:21.944 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:22.041 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:22.146 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:22.202 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:22.431 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:22.502 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:22.503 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:22.503 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:22.503 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:22.503 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:22.506 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 3 ms
2025-11-01 21:58:22.558 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 3.867 seconds (process running for 68.266)
2025-11-01 21:58:22.572 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:22.573 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:22.575 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:22.588 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-01 21:58:22.676 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, nome, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:22.691 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-01 21:58:22.694 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:22.696 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:22.699 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-01 21:58:22.702 [main] DEBUG [1c7092f69e8a4338] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#register(RegisterRequest)
2025-11-01 21:58:22.719 [main] DEBUG [1c7092f69e8a4338] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@6a3edbbe]
2025-11-01 21:58:22.740 [main] DEBUG [1c7092f69e8a4338] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-01 21:58:22.750 [main] DEBUG [1c7092f69e8a4338] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:22.750 [main] DEBUG [1c7092f69e8a4338] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Email j est em uso}]
2025-11-01 21:58:22.764 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@6ecc753c, started on Sat Nov 01 21:58:18 BRT 2025
2025-11-01 21:58:23.001 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:23.007 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:23.008 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:23.010 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:23.012 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:23.014 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:23.016 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:23.018 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:23.020 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-01 21:58:23.022 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-01 21:58:23.037 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.controller.PedidoControllerIntegrationTest]: PedidoControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-01 21:58:23.079 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.controller.PedidoControllerIntegrationTest
2025-11-01 21:58:23.090 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:23.255 [main] INFO  [] c.d.d.c.PedidoControllerIntegrationTest - Starting PedidoControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:23.255 [main] DEBUG [] c.d.d.c.PedidoControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:23.255 [main] INFO  [] c.d.d.c.PedidoControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:23.258 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be85b91
2025-11-01 21:58:23.945 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:23.980 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:24.185 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:24.186 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:24.187 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:24.189 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:24.190 [http-nio-8080-exec-4] DEBUG [1a3a2fc3eb80497e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:24.191 [http-nio-8080-exec-4] DEBUG [1a3a2fc3eb80497e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:24.201 [http-nio-8080-exec-4] DEBUG [1a3a2fc3eb80497e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:24.202 [http-nio-8080-exec-4] DEBUG [1a3a2fc3eb80497e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:24.203 [http-nio-8080-exec-4] DEBUG [1a3a2fc3eb80497e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:24.287 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:24.289 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-01 21:58:24.300 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:24.300 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-01 21:58:24.301 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:24.538 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:24.539 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:24.544 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:24.544 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:24.545 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:24.545 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:24.546 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:24.550 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:24.553 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:24.559 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:24.562 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:24.565 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:24.568 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:24.572 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:24.576 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:24.579 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:24.583 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:24.587 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:24.828 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:24.869 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:24.874 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:24.882 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:24.889 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:24.899 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:25.049 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:25.356 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:25.399 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:25.555 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:25.647 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:25.734 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:25.784 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:26.078 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:26.151 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:26.151 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:26.152 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:26.152 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:26.152 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:26.154 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-01 21:58:26.195 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:26.195 [main] INFO  [] c.d.d.c.PedidoControllerIntegrationTest - Started PedidoControllerIntegrationTest in 3.106 seconds (process running for 71.903)
2025-11-01 21:58:26.196 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:26.201 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:26.244 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.251 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.257 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.296 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:58:26.299 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:26.303 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 21:58:26.304 [main] DEBUG [642764243aa94bdd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 21:58:26.319 [main] DEBUG [642764243aa94bdd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@6923f838]
2025-11-01 21:58:26.500 [main] DEBUG [642764243aa94bdd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:58:26.530 [main] DEBUG [642764243aa94bdd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:58:26.566 [main] DEBUG [642764243aa94bdd] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-01 21:58:26.585 [main] DEBUG [642764243aa94bdd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:26.586 [main] DEBUG [642764243aa94bdd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4356ac9e]
2025-11-01 21:58:26.590 [main] DEBUG [642764243aa94bdd] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.ClassCastException: class org.springframework.security.core.userdetails.User cannot be cast to class com.deliverytech.delivery.entity.Usuario (org.springframework.security.core.userdetails.User and com.deliverytech.delivery.entity.Usuario are in unnamed module of loader 'app')]
2025-11-01 21:58:26.611 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:26.666 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.670 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.681 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.691 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:58:26.694 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:26.699 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 21:58:26.700 [main] DEBUG [9c66f3e365984048] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 21:58:26.703 [main] DEBUG [9c66f3e365984048] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@44a15c81]
2025-11-01 21:58:26.745 [main] DEBUG [9c66f3e365984048] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-01 21:58:26.747 [main] DEBUG [9c66f3e365984048] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:26.753 [main] DEBUG [9c66f3e365984048] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@22819b6f]
2025-11-01 21:58:26.762 [main] DEBUG [9c66f3e365984048] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.PedidoResponseDTO>> com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO) with 7 errors: [Field error in object 'pedidoDTO' on field 'cep': rejected value [null]; codes [ValidCEP.pedidoDTO.cep,ValidCEP.cep,ValidCEP.java.lang.String,ValidCEP]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.cep,cep]; arguments []; default message [cep]]; default message [CEP deve ter formato vlido (00000-000 ou 00000000)]] [Field error in object 'pedidoDTO' on field 'cep': rejected value [null]; codes [NotBlank.pedidoDTO.cep,NotBlank.cep,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.cep,cep]; arguments []; default message [cep]]; default message [CEP  obrigatrio]] [Field error in object 'pedidoDTO' on field 'itens': rejected value [[]]; codes [NotEmpty.pedidoDTO.itens,NotEmpty.itens,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.itens,itens]; arguments []; default message [itens]]; default message [Pedido deve ter pelo menos um item]] [Field error in object 'pedidoDTO' on field 'formaPagamento': rejected value [null]; codes [NotBlank.pedidoDTO.formaPagamento,NotBlank.formaPagamento,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.formaPagamento,formaPagamento]; arguments []; default message [formaPagamento]]; default message [Forma de pagamento  obrigatria]] [Field error in object 'pedidoDTO' on field 'enderecoEntrega': rejected value [null]; codes [NotBlank.pedidoDTO.enderecoEntrega,NotBlank.enderecoEntrega,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.enderecoEntrega,enderecoEntrega]; arguments []; default message [enderecoEntrega]]; default message [Endereo de entrega  obrigatrio]] [Field error in object 'pedidoDTO' on field 'restauranteId': rejected value [null]; codes [NotNull.pedidoDTO.restauranteId,NotNull.restauranteId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.restauranteId,restauranteId]; arguments []; default message [restauranteId]]; default message [Restaurante ID  obrigatrio]] [Field error in object 'pedidoDTO' on field 'clienteId': rejected value [null]; codes [NotNull.pedidoDTO.clienteId,NotNull.clienteId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.clienteId,clienteId]; arguments []; default message [clienteId]]; default message [Cliente ID  obrigatrio]] ]
2025-11-01 21:58:26.798 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.804 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.809 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.816 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.829 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:58:26.836 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:26.844 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 21:58:26.846 [main] DEBUG [f49b7682c2e844f9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 21:58:26.848 [main] DEBUG [f49b7682c2e844f9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@36f70068]
2025-11-01 21:58:26.859 [main] DEBUG [f49b7682c2e844f9] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:58:26.863 [main] DEBUG [f49b7682c2e844f9] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:58:26.892 [main] DEBUG [f49b7682c2e844f9] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-01 21:58:26.895 [main] DEBUG [f49b7682c2e844f9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:26.895 [main] DEBUG [f49b7682c2e844f9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@678546fc]
2025-11-01 21:58:26.896 [main] DEBUG [f49b7682c2e844f9] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.ClassCastException: class org.springframework.security.core.userdetails.User cannot be cast to class com.deliverytech.delivery.entity.Usuario (org.springframework.security.core.userdetails.User and com.deliverytech.delivery.entity.Usuario are in unnamed module of loader 'app')]
2025-11-01 21:58:26.948 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.968 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:26.980 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:27.046 [main] DEBUG [] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-01 21:58:27.064 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:58:27.067 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:27.070 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 21:58:27.072 [main] DEBUG [37a7466979e04329] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 21:58:27.074 [main] DEBUG [37a7466979e04329] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@7d46d0de]
2025-11-01 21:58:27.075 [main] DEBUG [37a7466979e04329] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:58:27.077 [main] DEBUG [37a7466979e04329] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:58:27.080 [main] DEBUG [37a7466979e04329] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-01 21:58:27.081 [main] DEBUG [37a7466979e04329] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:27.082 [main] DEBUG [37a7466979e04329] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@463cb6dc]
2025-11-01 21:58:27.083 [main] DEBUG [37a7466979e04329] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.ClassCastException: class org.springframework.security.core.userdetails.User cannot be cast to class com.deliverytech.delivery.entity.Usuario (org.springframework.security.core.userdetails.User and com.deliverytech.delivery.entity.Usuario are in unnamed module of loader 'app')]
2025-11-01 21:58:27.114 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:27.119 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:27.124 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:27.130 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:27.134 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:27.140 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 21:58:27.142 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:27.144 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 21:58:27.145 [main] DEBUG [6cf13f04cc804476] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 21:58:27.147 [main] DEBUG [6cf13f04cc804476] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@3431c09f]
2025-11-01 21:58:27.149 [main] DEBUG [6cf13f04cc804476] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:58:27.151 [main] DEBUG [6cf13f04cc804476] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 21:58:27.155 [main] DEBUG [6cf13f04cc804476] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-01 21:58:27.156 [main] DEBUG [6cf13f04cc804476] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:27.156 [main] DEBUG [6cf13f04cc804476] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4214711a]
2025-11-01 21:58:27.157 [main] DEBUG [6cf13f04cc804476] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.ClassCastException: class org.springframework.security.core.userdetails.User cannot be cast to class com.deliverytech.delivery.entity.Usuario (org.springframework.security.core.userdetails.User and com.deliverytech.delivery.entity.Usuario are in unnamed module of loader 'app')]
2025-11-01 21:58:27.179 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.controller.ClienteControllerIntegrationTest]: ClienteControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-01 21:58:27.191 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.controller.ClienteControllerIntegrationTest
2025-11-01 21:58:27.199 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:27.257 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:27.257 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:27.257 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:27.260 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@49645271
2025-11-01 21:58:27.878 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:27.922 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:28.239 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:28.240 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-01 21:58:28.242 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:28.242 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-01 21:58:28.243 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:28.443 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:28.445 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:28.446 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:28.448 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:28.450 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:28.452 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:28.454 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:28.457 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:28.460 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:28.464 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:28.467 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:28.469 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:28.472 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:28.476 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:28.482 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:28.488 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:28.492 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:28.496 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:28.801 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:28.836 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:28.841 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:28.848 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:28.856 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:28.862 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:29.024 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:29.187 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:29.188 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:29.188 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:29.189 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:29.190 [http-nio-8080-exec-5] DEBUG [250293d9b91c4b2c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:29.190 [http-nio-8080-exec-5] DEBUG [250293d9b91c4b2c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:29.192 [http-nio-8080-exec-5] DEBUG [250293d9b91c4b2c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:29.192 [http-nio-8080-exec-5] DEBUG [250293d9b91c4b2c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:29.193 [http-nio-8080-exec-5] DEBUG [250293d9b91c4b2c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:29.406 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:29.445 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:29.626 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:29.688 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:29.749 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:29.787 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:29.936 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:30.006 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:30.007 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:30.008 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:30.008 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:30.008 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:30.011 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-01 21:58:30.076 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.878 seconds (process running for 75.784)
2025-11-01 21:58:30.078 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:30.079 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:30.081 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:30.097 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:30.114 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 21:58:30.143 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 21:58:30.151 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:30.160 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing DELETE /api/clientes/2
2025-11-01 21:58:30.162 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:30.166 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured DELETE /api/clientes/2
2025-11-01 21:58:30.168 [main] DEBUG [2be7408745af46ce] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#ativarDesativarCliente(Long)
2025-11-01 21:58:30.176 [main] DEBUG [2be7408745af46ce] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.ativarDesativarCliente(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:30.184 [main] DEBUG [2be7408745af46ce] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.ativarDesativarCliente(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:30.235 [main] DEBUG [2be7408745af46ce] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 21:58:30.345 [main] DEBUG [2be7408745af46ce] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Cliente */update cliente 
    set
        ativo=?,
        cpf=?,
        email=?,
        endereco=?,
        nome=?,
        telefone=? 
    where
        id=?
2025-11-01 21:58:30.350 [main] DEBUG [2be7408745af46ce] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:30.351 [main] DEBUG [2be7408745af46ce] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-11-01 21:58:30.359 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 21:58:30.366 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@49645271, started on Sat Nov 01 21:58:27 BRT 2025
2025-11-01 21:58:30.517 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:30.524 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:30.525 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:30.528 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:30.530 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:30.531 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:30.533 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:30.534 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:30.536 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-01 21:58:30.561 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-01 21:58:30.567 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:30.646 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:30.647 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:30.647 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:30.650 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@27494cfb
2025-11-01 21:58:31.317 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:31.378 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:31.697 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:31.699 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-01 21:58:31.704 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:31.705 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-01 21:58:31.706 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:31.968 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:31.969 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:31.969 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:31.970 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:31.970 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:31.970 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:31.971 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:31.984 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:31.987 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:31.990 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:32.000 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:32.003 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:32.006 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:32.018 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:32.021 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:32.024 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:32.027 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:32.069 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:32.373 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:32.428 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:32.433 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:32.439 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:32.446 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:32.451 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:32.719 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:33.098 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:33.137 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:33.366 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:33.422 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:33.487 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:33.516 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:33.681 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:33.736 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:33.736 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:33.736 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:33.736 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:33.736 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:33.738 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 21:58:33.790 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:33.790 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 3.224 seconds (process running for 79.498)
2025-11-01 21:58:33.791 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:33.794 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:33.820 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:33.826 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 21:58:33.840 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 21:58:33.873 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/clientes
2025-11-01 21:58:33.877 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:33.894 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/clientes
2025-11-01 21:58:33.895 [main] DEBUG [2bea519fa9ba4b57] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#cadastrarCliente(ClienteDTO)
2025-11-01 21:58:33.902 [main] DEBUG [2bea519fa9ba4b57] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.ClienteDTO@678027f1]
2025-11-01 21:58:33.976 [main] DEBUG [2bea519fa9ba4b57] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.cadastrarCliente(com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:33.979 [main] DEBUG [2bea519fa9ba4b57] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.cadastrarCliente(com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:33.991 [main] DEBUG [2bea519fa9ba4b57] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id 
    from
        cliente c1_0 
    where
        c1_0.email=? 
    fetch
        first ? rows only
2025-11-01 21:58:33.998 [main] DEBUG [2bea519fa9ba4b57] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id 
    from
        cliente c1_0 
    where
        c1_0.cpf=? 
    fetch
        first ? rows only
2025-11-01 21:58:34.004 [main] DEBUG [2bea519fa9ba4b57] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:34.028 [main] DEBUG [2bea519fa9ba4b57] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:34.029 [main] DEBUG [2bea519fa9ba4b57] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@7ed61999]
2025-11-01 21:58:34.097 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@27494cfb, started on Sat Nov 01 21:58:30 BRT 2025
2025-11-01 21:58:34.183 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:34.184 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:34.185 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:34.186 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:34.187 [http-nio-8080-exec-6] DEBUG [c4112db0f7d84f50] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:34.187 [http-nio-8080-exec-6] DEBUG [c4112db0f7d84f50] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:34.188 [http-nio-8080-exec-6] DEBUG [c4112db0f7d84f50] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:34.189 [http-nio-8080-exec-6] DEBUG [c4112db0f7d84f50] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:34.194 [http-nio-8080-exec-6] DEBUG [c4112db0f7d84f50] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:34.687 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:34.690 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:34.690 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:34.692 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:34.694 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:34.696 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:34.698 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:34.700 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:34.701 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-01 21:58:34.704 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-01 21:58:34.710 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:34.777 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:34.778 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:34.778 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:34.780 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6bbe6824
2025-11-01 21:58:35.280 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:35.315 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:35.531 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:35.533 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-01 21:58:35.537 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:35.537 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-01 21:58:35.538 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:35.792 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:35.794 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:35.794 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:35.797 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:35.798 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:35.798 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:35.799 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:35.804 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:35.808 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:35.811 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:35.815 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:35.817 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:35.820 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:35.822 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:35.824 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:35.827 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:35.832 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:35.837 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:36.030 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:36.061 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:36.068 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:36.073 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:36.081 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:36.087 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:36.295 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:36.606 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:36.638 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:36.773 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:36.832 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:36.892 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:36.930 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:37.044 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:37.108 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:37.109 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:37.109 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:37.110 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:37.110 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:37.112 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-01 21:58:37.145 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:37.145 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.435 seconds (process running for 82.853)
2025-11-01 21:58:37.146 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:37.156 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:37.162 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:37.165 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 21:58:37.168 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 21:58:37.178 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:37.185 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/clientes/2
2025-11-01 21:58:37.187 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:37.190 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/clientes/2
2025-11-01 21:58:37.192 [main] DEBUG [26241ae32b4849d9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#buscarPorId(Long)
2025-11-01 21:58:37.196 [main] DEBUG [26241ae32b4849d9] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:37.210 [main] DEBUG [26241ae32b4849d9] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:37.231 [main] DEBUG [26241ae32b4849d9] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 21:58:37.258 [main] DEBUG [26241ae32b4849d9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:37.258 [main] DEBUG [26241ae32b4849d9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@42aeb6b]
2025-11-01 21:58:37.291 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@6bbe6824, started on Sat Nov 01 21:58:34 BRT 2025
2025-11-01 21:58:37.666 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:37.670 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:37.670 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:37.672 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:37.673 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:37.674 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:37.675 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:37.676 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:37.677 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-01 21:58:37.678 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-01 21:58:37.682 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:37.740 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:37.740 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:37.741 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:37.743 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1bc08d8c
2025-11-01 21:58:38.245 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:38.272 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:38.471 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:38.472 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-01 21:58:38.473 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn70: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:38.474 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-01 21:58:38.475 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:38.620 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:38.622 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:38.622 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:38.623 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:38.623 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:38.624 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:38.625 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:38.628 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:38.632 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:38.635 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:38.638 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:38.641 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:38.644 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:38.647 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:38.650 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:38.654 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:38.657 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:38.661 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:38.877 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:38.917 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:38.926 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:38.937 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:38.951 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:38.957 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:39.147 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:39.183 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:39.184 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:39.185 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:39.186 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:39.186 [http-nio-8080-exec-7] DEBUG [6bea724c2a924674] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:39.187 [http-nio-8080-exec-7] DEBUG [6bea724c2a924674] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:39.188 [http-nio-8080-exec-7] DEBUG [6bea724c2a924674] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:39.189 [http-nio-8080-exec-7] DEBUG [6bea724c2a924674] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:39.190 [http-nio-8080-exec-7] DEBUG [6bea724c2a924674] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:39.436 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:39.468 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:39.591 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:39.679 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:39.776 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:39.818 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:39.982 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:40.051 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:40.051 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:40.051 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:40.051 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:40.051 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:40.053 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-01 21:58:40.095 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.413 seconds (process running for 85.803)
2025-11-01 21:58:40.102 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:40.104 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:40.105 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:40.123 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:40.125 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 21:58:40.129 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 21:58:40.134 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:40.143 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing PUT /api/clientes/2
2025-11-01 21:58:40.145 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:40.148 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured PUT /api/clientes/2
2025-11-01 21:58:40.149 [main] DEBUG [22e676b052194d1c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#atualizarCliente(Long, ClienteDTO)
2025-11-01 21:58:40.169 [main] DEBUG [22e676b052194d1c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.ClienteDTO@2cddca16]
2025-11-01 21:58:40.201 [main] DEBUG [22e676b052194d1c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.atualizarCliente(java.lang.Long,com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:40.205 [main] DEBUG [22e676b052194d1c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.atualizarCliente(java.lang.Long,com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:40.218 [main] DEBUG [22e676b052194d1c] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 21:58:40.242 [main] DEBUG [22e676b052194d1c] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Cliente */update cliente 
    set
        ativo=?,
        cpf=?,
        email=?,
        endereco=?,
        nome=?,
        telefone=? 
    where
        id=?
2025-11-01 21:58:40.267 [main] DEBUG [22e676b052194d1c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:40.267 [main] DEBUG [22e676b052194d1c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@bc225e2]
2025-11-01 21:58:40.327 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@1bc08d8c, started on Sat Nov 01 21:58:37 BRT 2025
2025-11-01 21:58:41.713 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:41.717 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:41.718 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:41.720 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:41.721 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:41.723 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:41.725 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:41.726 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:41.728 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-01 21:58:41.731 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-01 21:58:41.736 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:41.797 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:41.797 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:41.797 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:41.800 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@25638bfd
2025-11-01 21:58:42.325 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:42.346 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:42.548 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:42.549 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-11-01 21:58:42.551 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn80: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:42.551 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-11-01 21:58:42.552 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:42.712 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:42.713 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:42.714 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:42.714 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:42.715 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:42.716 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:42.717 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:42.721 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:42.724 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:42.727 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:42.729 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:42.732 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:42.734 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:42.737 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:42.739 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:42.742 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:42.744 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:42.746 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:42.975 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:43.008 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:43.014 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:43.023 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:43.032 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:43.037 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:43.210 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:43.470 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:43.501 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:43.629 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:43.712 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:43.803 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:43.845 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:44.022 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:44.100 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:44.100 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:44.100 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:44.100 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:44.101 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:44.103 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 21:58:44.147 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.41 seconds (process running for 89.854)
2025-11-01 21:58:44.160 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:44.162 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:44.163 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:44.167 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:44.170 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 21:58:44.176 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 21:58:44.180 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:44.185 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:44.186 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:44.187 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:44.188 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:44.188 [http-nio-8080-exec-9] DEBUG [1ecdc7f7b5174d69] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:44.187 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/clientes
2025-11-01 21:58:44.189 [http-nio-8080-exec-9] DEBUG [1ecdc7f7b5174d69] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:44.190 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:44.190 [http-nio-8080-exec-9] DEBUG [1ecdc7f7b5174d69] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:44.191 [http-nio-8080-exec-9] DEBUG [1ecdc7f7b5174d69] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:44.192 [http-nio-8080-exec-9] DEBUG [1ecdc7f7b5174d69] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:44.195 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/clientes
2025-11-01 21:58:44.196 [main] DEBUG [45b3eb9ba6f448dc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#listarClientes(Pageable)
2025-11-01 21:58:44.205 [main] DEBUG [45b3eb9ba6f448dc] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.listarClientes(org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:44.209 [main] DEBUG [45b3eb9ba6f448dc] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.listarClientes(org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:44.231 [main] DEBUG [45b3eb9ba6f448dc] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.ativo 
    fetch
        first ? rows only
2025-11-01 21:58:44.276 [main] DEBUG [45b3eb9ba6f448dc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:44.277 [main] DEBUG [45b3eb9ba6f448dc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.PagedResponseWrapper@17c05341]
2025-11-01 21:58:44.309 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@25638bfd, started on Sat Nov 01 21:58:41 BRT 2025
2025-11-01 21:58:44.370 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:44.371 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:44.371 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:44.506 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:44.742 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:44.745 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:44.745 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:44.747 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:44.748 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:44.749 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:44.750 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:44.750 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:44.752 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-11-01 21:58:44.753 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-11-01 21:58:44.757 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:44.804 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:44.805 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:44.805 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:44.807 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4e859e
2025-11-01 21:58:45.397 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:45.428 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:45.611 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:45.612 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-11-01 21:58:45.614 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn90: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:45.615 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-11-01 21:58:45.616 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:45.831 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:45.832 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:45.832 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:45.833 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:45.834 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:45.836 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:45.838 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:45.843 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:45.847 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:45.853 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:45.858 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:45.869 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:45.873 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:45.884 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:45.889 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:45.893 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:45.900 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:45.906 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:46.144 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:46.187 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:46.191 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:46.197 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:46.201 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:46.206 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:46.348 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:46.581 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:46.602 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:46.746 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:46.790 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:46.842 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:46.868 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:46.989 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:47.055 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:47.055 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:47.055 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:47.055 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:47.055 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:47.059 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 4 ms
2025-11-01 21:58:47.129 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:47.130 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.373 seconds (process running for 92.838)
2025-11-01 21:58:47.130 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:47.132 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:47.183 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:47.190 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 21:58:47.195 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 21:58:47.203 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/clientes/999
2025-11-01 21:58:47.205 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:47.209 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/clientes/999
2025-11-01 21:58:47.211 [main] DEBUG [c70d06e943c1496d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#buscarPorId(Long)
2025-11-01 21:58:47.216 [main] DEBUG [c70d06e943c1496d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:47.219 [main] DEBUG [c70d06e943c1496d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-01 21:58:47.229 [main] DEBUG [c70d06e943c1496d] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 21:58:47.233 [main] DEBUG [c70d06e943c1496d] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleEntityNotFoundException(EntityNotFoundException, WebRequest)
2025-11-01 21:58:47.259 [main] DEBUG [c70d06e943c1496d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:47.260 [main] DEBUG [c70d06e943c1496d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@22e99481]
2025-11-01 21:58:47.261 [main] DEBUG [c70d06e943c1496d] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.EntityNotFoundException: Cliente no encontrado com ID: 999]
2025-11-01 21:58:47.291 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@4e859e, started on Sat Nov 01 21:58:44 BRT 2025
2025-11-01 21:58:48.578 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:48.581 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:48.582 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:48.583 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:48.585 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:48.586 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:48.587 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:48.588 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:48.589 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-11-01 21:58:48.591 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-11-01 21:58:48.596 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:48.647 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:48.648 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:48.648 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:48.650 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@27b3627
2025-11-01 21:58:48.980 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:49.004 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:49.187 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:49.187 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:49.187 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:49.188 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:49.189 [http-nio-8080-exec-10] DEBUG [1221214b4ac84224] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:49.189 [http-nio-8080-exec-10] DEBUG [1221214b4ac84224] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:49.191 [http-nio-8080-exec-10] DEBUG [1221214b4ac84224] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:49.191 [http-nio-8080-exec-10] DEBUG [1221214b4ac84224] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:49.197 [http-nio-8080-exec-10] DEBUG [1221214b4ac84224] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:49.245 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:49.246 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-11-01 21:58:49.248 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn100: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:49.248 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-11-01 21:58:49.249 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:49.392 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:49.393 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:49.393 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:49.394 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:49.394 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:49.394 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:49.395 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:49.399 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:49.402 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:49.406 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:49.409 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:49.412 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:49.415 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:49.427 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:49.438 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:49.443 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:49.448 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:49.453 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:49.654 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:49.713 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:49.725 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:49.733 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:49.747 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:49.757 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:49.951 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:50.329 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:50.359 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:50.559 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:50.646 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:50.735 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:50.777 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:50.971 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:51.083 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:51.083 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:51.084 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:51.084 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-01 21:58:51.084 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-01 21:58:51.085 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-01 21:58:51.135 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:51.135 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.539 seconds (process running for 96.843)
2025-11-01 21:58:51.136 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:51.138 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:51.157 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:51.159 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-01 21:58:51.163 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-01 21:58:51.172 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/clientes
2025-11-01 21:58:51.174 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:51.180 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/clientes
2025-11-01 21:58:51.181 [main] DEBUG [5dfc0f35b60845cf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#cadastrarCliente(ClienteDTO)
2025-11-01 21:58:51.190 [main] DEBUG [5dfc0f35b60845cf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.ClienteDTO@3c98a7f2]
2025-11-01 21:58:51.217 [main] DEBUG [5dfc0f35b60845cf] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-01 21:58:51.237 [main] DEBUG [5dfc0f35b60845cf] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:51.238 [main] DEBUG [5dfc0f35b60845cf] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@26ff1d5]
2025-11-01 21:58:51.246 [main] DEBUG [5dfc0f35b60845cf] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.ClienteResponseDTO>> com.deliverytech.delivery.controller.ClienteController.cadastrarCliente(com.deliverytech.delivery.dto.ClienteDTO) with 6 errors: [Field error in object 'clienteDTO' on field 'telefone': rejected value [null]; codes [NotBlank.clienteDTO.telefone,NotBlank.telefone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.telefone,telefone]; arguments []; default message [telefone]]; default message [Telefone  obrigatrio]] [Field error in object 'clienteDTO' on field 'nome': rejected value []; codes [NotBlank.clienteDTO.nome,NotBlank.nome,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.nome,nome]; arguments []; default message [nome]]; default message [Nome  obrigatrio]] [Field error in object 'clienteDTO' on field 'endereco': rejected value [null]; codes [NotBlank.clienteDTO.endereco,NotBlank.endereco,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.endereco,endereco]; arguments []; default message [endereco]]; default message [Endereo  obrigatrio]] [Field error in object 'clienteDTO' on field 'nome': rejected value []; codes [Size.clienteDTO.nome,Size.nome,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.nome,nome]; arguments []; default message [nome],100,2]; default message [Nome deve ter entre 2 e 100 caracteres]] [Field error in object 'clienteDTO' on field 'cpf': rejected value [null]; codes [NotBlank.clienteDTO.cpf,NotBlank.cpf,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.cpf,cpf]; arguments []; default message [cpf]]; default message [CPF  obrigatrio]] [Field error in object 'clienteDTO' on field 'email': rejected value [email-invalido]; codes [Email.clienteDTO.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@f6db575,.*]; default message [Email deve ter formato vlido]] ]
2025-11-01 21:58:51.267 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@27b3627, started on Sat Nov 01 21:58:48 BRT 2025
2025-11-01 21:58:53.248 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:53.252 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:53.254 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:53.255 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:53.257 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:53.258 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:53.259 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:53.260 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:53.262 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-11-01 21:58:53.264 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-11-01 21:58:53.281 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.integration.SwaggerIntegrationTest]: SwaggerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-01 21:58:53.292 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.integration.SwaggerIntegrationTest
2025-11-01 21:58:53.314 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-01 21:58:53.421 [main] INFO  [] c.d.d.i.SwaggerIntegrationTest - Starting SwaggerIntegrationTest using Java 21.0.9 with PID 473837 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 21:58:53.421 [main] DEBUG [] c.d.d.i.SwaggerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 21:58:53.421 [main] INFO  [] c.d.d.i.SwaggerIntegrationTest - The following 1 profile is active: "test"
2025-11-01 21:58:53.823 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 21:58:53.848 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 5 JPA repository interfaces.
2025-11-01 21:58:54.184 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:58:54.185 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:54.186 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:54.187 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:58:54.187 [http-nio-8080-exec-1] DEBUG [4b1e7c48aff34b84] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:58:54.188 [http-nio-8080-exec-1] DEBUG [4b1e7c48aff34b84] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:58:54.190 [http-nio-8080-exec-1] DEBUG [4b1e7c48aff34b84] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:58:54.190 [http-nio-8080-exec-1] DEBUG [4b1e7c48aff34b84] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:58:54.191 [http-nio-8080-exec-1] DEBUG [4b1e7c48aff34b84] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:58:54.364 [main] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-11-01 21:58:54.422 [main] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2025-11-01 21:58:54.427 [main] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 21:58:54.428 [main] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 21:58:55.671 [main] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 21:58:55.673 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2248 ms
2025-11-01 21:58:56.074 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 21:58:56.076 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 21:58:56.077 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 21:58:56.194 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:56.195 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-01 21:58:56.196 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:56.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:56.209 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 21:58:56.210 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-11-01 21:58:56.213 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn110: url=jdbc:h2:mem:testdb user=SA
2025-11-01 21:58:56.214 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-11-01 21:58:56.215 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 21:58:56.333 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:58:56.341 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:58:56.341 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:58:56.342 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:58:56.342 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:58:56.342 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:58:56.342 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:58:56.343 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 21:58:56.347 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 21:58:56.350 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 21:58:56.352 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 21:58:56.355 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 21:58:56.357 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 21:58:56.359 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 21:58:56.362 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 21:58:56.365 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 21:58:56.367 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:56.370 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 21:58:56.373 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:58:56.525 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-01 21:58:56.532 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-01 21:58:56.536 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-01 21:58:56.543 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:56.549 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:56.553 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 21:58:56.687 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 21:58:56.877 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 21:58:56.908 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 21:58:57.006 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-01 21:58:57.053 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 21:58:57.109 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 21:58:57.145 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 21:58:57.281 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-01 21:58:57.382 [main] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-1"]
2025-11-01 21:58:57.516 [main] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 33547 (http) with context path '/'
2025-11-01 21:58:57.547 [main] INFO  [] c.d.d.i.SwaggerIntegrationTest - Started SwaggerIntegrationTest in 4.233 seconds (process running for 103.254)
2025-11-01 21:58:57.550 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:58:57.551 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:58:57.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:57.594 [main] DEBUG [] o.s.web.client.RestTemplate - HTTP GET http://localhost:33547/api-docs
2025-11-01 21:58:57.594 [main] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:58:57.968 [http-nio-auto-1-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 21:58:57.968 [http-nio-auto-1-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 21:58:57.969 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 21:58:57.969 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 21:58:57.969 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 21:58:57.970 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5af12aa0
2025-11-01 21:58:57.971 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6c8f6fc1
2025-11-01 21:58:57.973 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 21:58:57.973 [http-nio-auto-1-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-01 21:58:57.991 [http-nio-auto-1-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-11-01 21:58:57.993 [http-nio-auto-1-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:58:57.994 [http-nio-auto-1-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:58:58.018 [http-nio-auto-1-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-11-01 21:58:58.021 [http-nio-auto-1-exec-1] DEBUG [1467b930cec54371] o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-11-01 21:58:58.022 [http-nio-auto-1-exec-1] DEBUG [1467b930cec54371] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-01 21:58:58.086 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:59:03.279 [http-nio-auto-1-exec-1] INFO  [1467b930cec54371] o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 5198 ms
2025-11-01 21:59:03.477 [http-nio-auto-1-exec-1] DEBUG [1467b930cec54371] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [text/plain, application/json, application/yaml, application/*+json, */*] and supported [application/json]
2025-11-01 21:59:03.507 [http-nio-auto-1-exec-1] DEBUG [1467b930cec54371] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-01 21:59:03.515 [http-nio-auto-1-exec-1] DEBUG [1467b930cec54371] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:59:03.585 [main] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:59:03.586 [main] DEBUG [] o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2025-11-01 21:59:03.628 [main] DEBUG [] o.s.web.client.RestTemplate - HTTP GET http://localhost:33547/api-docs
2025-11-01 21:59:03.629 [main] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:59:03.655 [http-nio-auto-1-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-11-01 21:59:03.657 [http-nio-auto-1-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:59:03.660 [http-nio-auto-1-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:59:03.662 [http-nio-auto-1-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-11-01 21:59:03.663 [http-nio-auto-1-exec-3] DEBUG [c7a1c395f3d244bf] o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-11-01 21:59:03.664 [http-nio-auto-1-exec-3] DEBUG [c7a1c395f3d244bf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-01 21:59:03.666 [http-nio-auto-1-exec-3] DEBUG [c7a1c395f3d244bf] o.s.api.AbstractOpenApiResource - Fetching openApi document from cache
2025-11-01 21:59:03.748 [http-nio-auto-1-exec-3] DEBUG [c7a1c395f3d244bf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [text/plain, application/json, application/yaml, application/*+json, */*] and supported [application/json]
2025-11-01 21:59:03.757 [http-nio-auto-1-exec-3] DEBUG [c7a1c395f3d244bf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-01 21:59:03.762 [http-nio-auto-1-exec-3] DEBUG [c7a1c395f3d244bf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:59:03.772 [main] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:59:03.773 [main] DEBUG [] o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2025-11-01 21:59:03.810 [main] DEBUG [] o.s.web.client.RestTemplate - HTTP GET http://localhost:33547/swagger-ui.html
2025-11-01 21:59:03.812 [main] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:59:03.849 [http-nio-auto-1-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui.html
2025-11-01 21:59:03.851 [http-nio-auto-1-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:59:03.851 [http-nio-auto-1-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:59:03.854 [http-nio-auto-1-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui.html
2025-11-01 21:59:03.854 [http-nio-auto-1-exec-2] DEBUG [09ff2aaaebff4913] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui.html", parameters={}
2025-11-01 21:59:03.855 [http-nio-auto-1-exec-2] DEBUG [09ff2aaaebff4913] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerWelcomeWebMvc#redirectToUi(HttpServletRequest)
2025-11-01 21:59:03.882 [http-nio-auto-1-exec-2] DEBUG [09ff2aaaebff4913] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [text/plain, application/json, application/yaml, application/*+json, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:59:03.882 [http-nio-auto-1-exec-2] DEBUG [09ff2aaaebff4913] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-11-01 21:59:03.883 [http-nio-auto-1-exec-2] DEBUG [09ff2aaaebff4913] o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-11-01 21:59:03.910 [http-nio-auto-1-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-11-01 21:59:03.911 [http-nio-auto-1-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:59:03.912 [http-nio-auto-1-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:59:03.914 [http-nio-auto-1-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-11-01 21:59:03.915 [http-nio-auto-1-exec-4] DEBUG [44d8c729bc3248a8] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-11-01 21:59:03.917 [http-nio-auto-1-exec-4] DEBUG [44d8c729bc3248a8] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-01 21:59:03.960 [http-nio-auto-1-exec-4] DEBUG [44d8c729bc3248a8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:59:03.965 [main] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:59:03.966 [main] DEBUG [] o.s.web.client.RestTemplate - Reading to [java.lang.String] as "text/html"
2025-11-01 21:59:07.101 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@6be85b91, started on Sat Nov 01 21:58:23 BRT 2025
2025-11-01 21:59:07.117 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:59:07.118 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:59:07.133 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:59:07.135 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:59:07.136 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:59:07.137 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:59:07.138 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:59:07.147 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-01 21:59:07.166 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-01 21:59:07.213 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 21:59:07.229 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 21:59:07.918 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 21:59:07.919 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 21:59:07.920 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 21:59:07.920 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 21:59:07.920 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 21:59:07.921 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 21:59:07.921 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 21:59:07.922 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-11-01 21:59:07.923 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-11-01 21:59:14.370 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:59:14.372 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:59:14.373 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:59:14.578 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 21:59:21.186 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 21:59:21.188 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 21:59:21.188 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 21:59:21.190 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 21:59:21.191 [http-nio-8080-exec-2] DEBUG [cc151d7940964840] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 21:59:21.192 [http-nio-8080-exec-2] DEBUG [cc151d7940964840] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 21:59:21.195 [http-nio-8080-exec-2] DEBUG [cc151d7940964840] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 21:59:21.196 [http-nio-8080-exec-2] DEBUG [cc151d7940964840] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 21:59:21.197 [http-nio-8080-exec-2] DEBUG [cc151d7940964840] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 21:59:44.370 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 21:59:44.371 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 21:59:44.372 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 21:59:45.275 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:00:14.370 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:00:14.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:00:14.563 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:00:16.474 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:00:21.186 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:00:21.188 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:00:21.188 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:00:21.190 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:00:21.190 [http-nio-8080-exec-3] DEBUG [87c6abc7142748fb] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:00:21.191 [http-nio-8080-exec-3] DEBUG [87c6abc7142748fb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:00:21.192 [http-nio-8080-exec-3] DEBUG [87c6abc7142748fb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:00:21.193 [http-nio-8080-exec-3] DEBUG [87c6abc7142748fb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=70.560863, receita_total=40.9, pedid (truncated)...]
2025-11-01 22:00:21.194 [http-nio-8080-exec-3] DEBUG [87c6abc7142748fb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:00:44.370 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:00:44.371 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:00:44.371 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:00:45.474 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:01:05.867 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-01 22:01:05.870 [Thread-12] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 22:01:05.871 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 22:01:05.878 [Thread-12] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 22:01:05.878 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 22:01:05.881 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 22:01:05.882 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 22:01:05.883 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 22:01:05.884 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 22:01:05.885 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 22:01:05.887 [Thread-12] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 22:01:05.888 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-01 22:01:05.891 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-01 22:01:06.509 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 469459 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 22:01:06.510 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 22:01:06.510 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 22:01:07.668 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 22:01:07.698 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-01 22:01:07.958 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 22:01:07.961 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 22:01:07.961 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 22:01:07.974 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 22:01:07.974 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1460 ms
2025-11-01 22:01:08.212 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 22:01:08.213 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 22:01:08.213 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 22:01:08.312 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 22:01:08.313 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-01 22:01:08.316 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 22:01:08.316 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-01 22:01:08.317 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 22:01:08.613 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 22:01:08.614 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 22:01:08.614 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 22:01:08.615 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 22:01:08.615 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 22:01:08.615 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 22:01:08.616 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 22:01:08.620 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 22:01:08.622 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 22:01:08.624 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 22:01:08.626 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 22:01:08.628 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 22:01:08.630 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 22:01:08.632 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 22:01:08.634 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 22:01:08.636 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 22:01:08.640 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 22:01:08.642 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 22:01:09.054 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 22:01:09.344 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 22:01:09.379 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 22:01:09.519 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 22:01:09.621 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 22:01:09.696 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 22:01:09.744 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 22:01:09.907 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 22:01:09.984 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 22:01:10.026 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 22:01:10.043 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:01:10.044 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.64 seconds (process running for 813.079)
2025-11-01 22:01:10.045 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:01:10.046 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:01:10.047 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 22:01:10.763 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:01:11.769 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-01 22:01:11.769 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-01 22:01:19.839 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 22:01:19.841 [Thread-19] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 22:01:19.842 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 22:01:19.847 [Thread-19] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 22:01:19.847 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 22:01:19.848 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 22:01:19.849 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 22:01:19.849 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 22:01:19.850 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 22:01:19.850 [Thread-19] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 22:01:19.852 [Thread-19] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 22:01:19.852 [Thread-19] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-01 22:01:19.853 [Thread-19] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-01 22:01:21.084 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 469459 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 22:01:21.084 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 22:01:21.084 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 22:01:21.604 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 22:01:21.634 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-01 22:01:21.931 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 22:01:21.932 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 22:01:21.933 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 22:01:21.946 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 22:01:21.946 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 859 ms
2025-11-01 22:01:22.223 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 22:01:22.224 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 22:01:22.225 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 22:01:22.420 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 22:01:22.422 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-01 22:01:22.426 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 22:01:22.426 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-01 22:01:22.428 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 22:01:22.660 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 22:01:22.661 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 22:01:22.661 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 22:01:22.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 22:01:22.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 22:01:22.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 22:01:22.664 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 22:01:22.667 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 22:01:22.669 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 22:01:22.676 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 22:01:22.685 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 22:01:22.689 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 22:01:22.691 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 22:01:22.693 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 22:01:22.695 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 22:01:22.698 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 22:01:22.700 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 22:01:22.703 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 22:01:23.167 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 22:01:23.516 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 22:01:23.556 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 22:01:23.706 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 22:01:23.828 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 22:01:23.898 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 22:01:23.980 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 22:01:24.219 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 22:01:24.292 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 22:01:24.323 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 22:01:24.338 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:01:24.339 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.315 seconds (process running for 827.374)
2025-11-01 22:01:24.340 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:01:24.341 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:01:24.342 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 22:01:24.794 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:01:25.799 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-01 22:01:25.799 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-01 22:01:54.338 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:01:54.339 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:01:54.340 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:01:54.821 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:02:21.189 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 22:02:21.189 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 22:02:21.190 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 22:02:21.190 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 22:02:21.190 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 22:02:21.192 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5e3ccc7b
2025-11-01 22:02:21.193 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4b627001
2025-11-01 22:02:21.193 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 22:02:21.193 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-01 22:02:21.195 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:02:21.197 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:02:21.198 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:02:21.199 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:02:21.200 [http-nio-8080-exec-1] DEBUG [bfc84b0b86674c32] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:02:21.201 [http-nio-8080-exec-1] DEBUG [bfc84b0b86674c32] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:02:21.205 [http-nio-8080-exec-1] DEBUG [bfc84b0b86674c32] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:02:21.205 [http-nio-8080-exec-1] DEBUG [bfc84b0b86674c32] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-01 22:02:21.208 [http-nio-8080-exec-1] DEBUG [bfc84b0b86674c32] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:02:24.338 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:02:24.339 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:02:24.340 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:02:24.655 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:02:31.015 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 22:02:31.017 [Thread-23] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 22:02:31.019 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 22:02:31.023 [Thread-23] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 22:02:31.023 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 22:02:31.024 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 22:02:31.025 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 22:02:31.026 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 22:02:31.026 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 22:02:31.027 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 22:02:31.028 [Thread-23] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 22:02:31.029 [Thread-23] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-01 22:02:31.030 [Thread-23] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-01 22:02:32.028 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 469459 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 22:02:32.029 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 22:02:32.029 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 22:02:32.593 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 22:02:32.618 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-01 22:02:32.899 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 22:02:32.900 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 22:02:32.900 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 22:02:32.915 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 22:02:32.915 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 883 ms
2025-11-01 22:02:33.167 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 22:02:33.167 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 22:02:33.167 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 22:02:33.321 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 22:02:33.322 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-01 22:02:33.325 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 22:02:33.326 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-01 22:02:33.326 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 22:02:33.745 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 22:02:33.746 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 22:02:33.747 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 22:02:33.747 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 22:02:33.747 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 22:02:33.747 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 22:02:33.754 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 22:02:33.764 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 22:02:33.766 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 22:02:33.769 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 22:02:33.770 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 22:02:33.772 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 22:02:33.774 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 22:02:33.776 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 22:02:33.777 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 22:02:33.778 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 22:02:33.780 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 22:02:33.782 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 22:02:34.280 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 22:02:34.582 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 22:02:34.621 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 22:02:34.781 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 22:02:34.887 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 22:02:34.933 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 22:02:34.979 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 22:02:35.107 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 22:02:35.184 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 22:02:35.216 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 22:02:35.231 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:02:35.231 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.236 seconds (process running for 898.266)
2025-11-01 22:02:35.232 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:02:35.233 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:02:35.236 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 22:02:36.196 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-01 22:02:36.360 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Servio externo (Gateway de Pagamento) no est disponvel (Status: DOWN)
2025-11-01 22:02:37.364 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-01 22:02:37.364 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-01 22:02:42.625 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-01 22:02:42.627 [Thread-27] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-01 22:02:42.630 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-01 22:02:42.635 [Thread-27] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 22:02:42.635 [Thread-27] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 22:02:42.639 [Thread-27] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 22:02:42.645 [Thread-27] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 22:02:42.646 [Thread-27] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 22:02:42.656 [Thread-27] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 22:02:42.657 [Thread-27] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 22:02:42.659 [Thread-27] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-01 22:02:42.660 [Thread-27] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-01 22:02:42.672 [Thread-27] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-01 22:02:43.690 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 469459 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-01 22:02:43.691 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-01 22:02:43.691 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-01 22:02:44.208 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-01 22:02:44.240 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 5 JPA repository interfaces.
2025-11-01 22:02:44.718 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-01 22:02:44.719 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-01 22:02:44.720 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-01 22:02:44.737 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-01 22:02:44.737 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1043 ms
2025-11-01 22:02:45.023 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-01 22:02:45.024 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-01 22:02:45.024 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-01 22:02:45.146 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-01 22:02:45.147 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-01 22:02:45.155 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn70: url=jdbc:h2:mem:deliverydb user=SA
2025-11-01 22:02:45.155 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-01 22:02:45.156 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-01 22:02:45.326 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-01 22:02:45.326 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-01 22:02:45.326 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-01 22:02:45.327 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-01 22:02:45.327 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-01 22:02:45.327 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-01 22:02:45.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-01 22:02:45.330 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-01 22:02:45.333 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-01 22:02:45.335 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-01 22:02:45.336 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-01 22:02:45.338 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-01 22:02:45.340 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-01 22:02:45.342 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-01 22:02:45.344 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-01 22:02:45.345 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 22:02:45.347 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-01 22:02:45.351 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-01 22:02:45.881 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-01 22:02:46.201 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 51 mappings in 'requestMappingHandlerMapping'
2025-11-01 22:02:46.253 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-01 22:02:46.454 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-01 22:02:46.651 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-01 22:02:46.738 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-01 22:02:46.832 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-01 22:02:47.088 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-01 22:02:47.209 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-01 22:02:47.268 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-01 22:02:47.286 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:02:47.288 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.718 seconds (process running for 910.323)
2025-11-01 22:02:47.290 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:02:47.293 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:02:47.298 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-01 22:02:47.690 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:02:48.697 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-01 22:02:48.697 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-01 22:03:17.156 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-01 22:03:17.156 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-01 22:03:17.156 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-01 22:03:17.156 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-01 22:03:17.156 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-01 22:03:17.159 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7680050e
2025-11-01 22:03:17.161 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@62ae9882
2025-11-01 22:03:17.161 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-01 22:03:17.161 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-01 22:03:17.163 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 22:03:17.216 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 22:03:17.232 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 22:03:17.233 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-01 22:03:17.233 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 22:03:17.247 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@694ae0f3]
2025-11-01 22:03:17.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:03:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:03:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:03:17.296 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 22:03:17.299 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 22:03:17.425 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:03:17.429 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 22:03:17.432 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-01 22:03:17.436 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-01 22:03:17.445 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-01 22:03:17.448 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-01 22:03:17.462 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-01 22:03:17.474 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:17.474 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@5c1fd607]
2025-11-01 22:03:17.485 [http-nio-8080-exec-2] DEBUG [9779298f5f1447a8] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-01 22:03:21.186 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:03:21.187 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:03:21.187 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:03:21.189 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:03:21.190 [http-nio-8080-exec-3] DEBUG [6f491b33b1294b55] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:03:21.191 [http-nio-8080-exec-3] DEBUG [6f491b33b1294b55] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:03:21.194 [http-nio-8080-exec-3] DEBUG [6f491b33b1294b55] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:21.198 [http-nio-8080-exec-3] DEBUG [6f491b33b1294b55] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:03:21.201 [http-nio-8080-exec-3] DEBUG [6f491b33b1294b55] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:03:26.022 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:03:26.023 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:03:26.023 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:03:26.024 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:03:26.025 [http-nio-8080-exec-4] DEBUG [a1e652caaec24691] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:03:26.025 [http-nio-8080-exec-4] DEBUG [a1e652caaec24691] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:03:26.027 [http-nio-8080-exec-4] DEBUG [a1e652caaec24691] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:26.027 [http-nio-8080-exec-4] DEBUG [a1e652caaec24691] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:03:26.028 [http-nio-8080-exec-4] DEBUG [a1e652caaec24691] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:03:37.485 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:03:37.487 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:03:37.488 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:03:37.490 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:03:37.490 [http-nio-8080-exec-5] DEBUG [d92543c9ca1d4c69] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:03:37.492 [http-nio-8080-exec-5] DEBUG [d92543c9ca1d4c69] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:03:37.496 [http-nio-8080-exec-5] DEBUG [d92543c9ca1d4c69] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:37.496 [http-nio-8080-exec-5] DEBUG [d92543c9ca1d4c69] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:03:37.499 [http-nio-8080-exec-5] DEBUG [d92543c9ca1d4c69] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:03:38.347 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:03:38.348 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:03:38.348 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:03:38.350 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:03:38.350 [http-nio-8080-exec-6] DEBUG [c35237ee9fc244e5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:03:38.352 [http-nio-8080-exec-6] DEBUG [c35237ee9fc244e5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:03:38.354 [http-nio-8080-exec-6] DEBUG [c35237ee9fc244e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:38.354 [http-nio-8080-exec-6] DEBUG [c35237ee9fc244e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:03:38.356 [http-nio-8080-exec-6] DEBUG [c35237ee9fc244e5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:03:39.444 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:03:39.446 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:03:39.447 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:03:39.449 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:03:39.450 [http-nio-8080-exec-7] DEBUG [bc12af520edd421d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:03:39.452 [http-nio-8080-exec-7] DEBUG [bc12af520edd421d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:03:39.456 [http-nio-8080-exec-7] DEBUG [bc12af520edd421d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:39.457 [http-nio-8080-exec-7] DEBUG [bc12af520edd421d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:03:39.460 [http-nio-8080-exec-7] DEBUG [bc12af520edd421d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:03:44.185 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:03:44.186 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:03:44.186 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:03:44.188 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:03:44.188 [http-nio-8080-exec-8] DEBUG [69e903825d3e4b03] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:03:44.189 [http-nio-8080-exec-8] DEBUG [69e903825d3e4b03] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:03:44.190 [http-nio-8080-exec-8] DEBUG [69e903825d3e4b03] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:44.191 [http-nio-8080-exec-8] DEBUG [69e903825d3e4b03] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:03:44.192 [http-nio-8080-exec-8] DEBUG [69e903825d3e4b03] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:03:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:03:47.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:03:47.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:03:48.358 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:03:49.185 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:03:49.187 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:03:49.187 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:03:49.189 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:03:49.190 [http-nio-8080-exec-9] DEBUG [767653bfce82479c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:03:49.191 [http-nio-8080-exec-9] DEBUG [767653bfce82479c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:03:49.193 [http-nio-8080-exec-9] DEBUG [767653bfce82479c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:49.194 [http-nio-8080-exec-9] DEBUG [767653bfce82479c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:03:49.197 [http-nio-8080-exec-9] DEBUG [767653bfce82479c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:03:54.185 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:03:54.186 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:03:54.187 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:03:54.188 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:03:54.189 [http-nio-8080-exec-10] DEBUG [1e44e733a8a74b87] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:03:54.191 [http-nio-8080-exec-10] DEBUG [1e44e733a8a74b87] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:03:54.194 [http-nio-8080-exec-10] DEBUG [1e44e733a8a74b87] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:54.194 [http-nio-8080-exec-10] DEBUG [1e44e733a8a74b87] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:03:54.195 [http-nio-8080-exec-10] DEBUG [1e44e733a8a74b87] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:03:59.185 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:03:59.186 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:03:59.186 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:03:59.188 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:03:59.188 [http-nio-8080-exec-1] DEBUG [5965ee56caef479d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:03:59.189 [http-nio-8080-exec-1] DEBUG [5965ee56caef479d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:03:59.191 [http-nio-8080-exec-1] DEBUG [5965ee56caef479d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:03:59.191 [http-nio-8080-exec-1] DEBUG [5965ee56caef479d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:03:59.194 [http-nio-8080-exec-1] DEBUG [5965ee56caef479d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:04:04.185 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:04:04.186 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:04:04.186 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:04:04.187 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:04:04.188 [http-nio-8080-exec-2] DEBUG [01f2f4c10b574e9f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:04:04.188 [http-nio-8080-exec-2] DEBUG [01f2f4c10b574e9f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:04:04.189 [http-nio-8080-exec-2] DEBUG [01f2f4c10b574e9f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:04:04.190 [http-nio-8080-exec-2] DEBUG [01f2f4c10b574e9f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:04:04.191 [http-nio-8080-exec-2] DEBUG [01f2f4c10b574e9f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:04:09.183 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:04:09.184 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:04:09.184 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:04:09.186 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:04:09.186 [http-nio-8080-exec-3] DEBUG [6d84b58d4e1642ae] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:04:09.186 [http-nio-8080-exec-3] DEBUG [6d84b58d4e1642ae] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:04:09.188 [http-nio-8080-exec-3] DEBUG [6d84b58d4e1642ae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:04:09.189 [http-nio-8080-exec-3] DEBUG [6d84b58d4e1642ae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:04:09.191 [http-nio-8080-exec-3] DEBUG [6d84b58d4e1642ae] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:04:14.185 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:04:14.186 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:04:14.186 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:04:14.188 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:04:14.188 [http-nio-8080-exec-4] DEBUG [2c37b86be1fa4ef5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:04:14.189 [http-nio-8080-exec-4] DEBUG [2c37b86be1fa4ef5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:04:14.191 [http-nio-8080-exec-4] DEBUG [2c37b86be1fa4ef5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:04:14.191 [http-nio-8080-exec-4] DEBUG [2c37b86be1fa4ef5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:04:14.193 [http-nio-8080-exec-4] DEBUG [2c37b86be1fa4ef5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:04:17.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:04:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:04:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:04:18.621 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:04:19.185 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:04:19.187 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:04:19.188 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:04:19.189 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:04:19.190 [http-nio-8080-exec-6] DEBUG [17e545fc2beb4ec0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:04:19.191 [http-nio-8080-exec-6] DEBUG [17e545fc2beb4ec0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:04:19.193 [http-nio-8080-exec-6] DEBUG [17e545fc2beb4ec0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:04:19.193 [http-nio-8080-exec-6] DEBUG [17e545fc2beb4ec0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:04:19.195 [http-nio-8080-exec-6] DEBUG [17e545fc2beb4ec0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:04:24.183 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:04:24.184 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:04:24.184 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:04:24.185 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:04:24.185 [http-nio-8080-exec-7] DEBUG [41ca3659526f467c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:04:24.186 [http-nio-8080-exec-7] DEBUG [41ca3659526f467c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:04:24.187 [http-nio-8080-exec-7] DEBUG [41ca3659526f467c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:04:24.187 [http-nio-8080-exec-7] DEBUG [41ca3659526f467c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:04:24.188 [http-nio-8080-exec-7] DEBUG [41ca3659526f467c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:04:29.184 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:04:29.185 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:04:29.185 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:04:29.186 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:04:29.187 [http-nio-8080-exec-8] DEBUG [d5f563f2dd7f462f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:04:29.187 [http-nio-8080-exec-8] DEBUG [d5f563f2dd7f462f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:04:29.188 [http-nio-8080-exec-8] DEBUG [d5f563f2dd7f462f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:04:29.189 [http-nio-8080-exec-8] DEBUG [d5f563f2dd7f462f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:04:29.190 [http-nio-8080-exec-8] DEBUG [d5f563f2dd7f462f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:04:34.185 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:04:34.186 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:04:34.186 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:04:34.187 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:04:34.187 [http-nio-8080-exec-9] DEBUG [58f736bef41a4dac] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:04:34.188 [http-nio-8080-exec-9] DEBUG [58f736bef41a4dac] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:04:34.189 [http-nio-8080-exec-9] DEBUG [58f736bef41a4dac] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:04:34.189 [http-nio-8080-exec-9] DEBUG [58f736bef41a4dac] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:04:34.190 [http-nio-8080-exec-9] DEBUG [58f736bef41a4dac] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:04:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:04:47.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:04:47.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:04:47.436 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:05:17.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:05:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:05:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:05:17.425 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:05:21.184 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:05:21.185 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:05:21.186 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:05:21.187 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:05:21.188 [http-nio-8080-exec-10] DEBUG [8f01dcf55f3e4896] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:05:21.189 [http-nio-8080-exec-10] DEBUG [8f01dcf55f3e4896] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:05:21.190 [http-nio-8080-exec-10] DEBUG [8f01dcf55f3e4896] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:05:21.190 [http-nio-8080-exec-10] DEBUG [8f01dcf55f3e4896] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=146.583985, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:05:21.191 [http-nio-8080-exec-10] DEBUG [8f01dcf55f3e4896] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:05:43.119 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-01 22:05:43.160 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 22:05:43.167 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-01 22:05:43.168 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-01 22:05:43.168 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-01 22:05:43.169 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@47459cb1]
2025-11-01 22:05:43.171 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 22:05:43.172 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-01 22:05:43.174 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-01 22:05:43.176 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-01 22:05:43.179 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-01 22:05:43.409 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleEntityNotFoundException(EntityNotFoundException, WebRequest)
2025-11-01 22:05:43.502 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:05:43.503 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@669ed39f]
2025-11-01 22:05:43.505 [http-nio-8080-exec-2] WARN  [8f1a88a264a946b9] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.EntityNotFoundException: Produto no encontrado: 999]
2025-11-01 22:05:43.505 [http-nio-8080-exec-2] DEBUG [8f1a88a264a946b9] o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-11-01 22:05:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:05:47.286 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:05:47.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:05:47.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:05:47.782 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:06:17.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:06:17.286 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:06:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:06:17.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:06:17.432 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:06:21.187 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:06:21.188 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:06:21.188 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:06:21.189 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:06:21.190 [http-nio-8080-exec-3] DEBUG [36dfd9e4fb554396] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:06:21.190 [http-nio-8080-exec-3] DEBUG [36dfd9e4fb554396] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:06:21.195 [http-nio-8080-exec-3] DEBUG [36dfd9e4fb554396] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:06:21.196 [http-nio-8080-exec-3] DEBUG [36dfd9e4fb554396] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=77.0957595, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:06:21.197 [http-nio-8080-exec-3] DEBUG [36dfd9e4fb554396] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:06:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:06:47.285 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:06:47.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:06:47.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:06:47.421 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:07:17.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:07:17.381 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:07:17.382 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:07:17.383 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:07:18.075 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:07:21.186 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:07:21.187 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:07:21.187 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:07:21.188 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:07:21.188 [http-nio-8080-exec-5] DEBUG [68e890ea930a4d5a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:07:21.189 [http-nio-8080-exec-5] DEBUG [68e890ea930a4d5a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:07:21.190 [http-nio-8080-exec-5] DEBUG [68e890ea930a4d5a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:07:21.190 [http-nio-8080-exec-5] DEBUG [68e890ea930a4d5a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=77.0957595, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:07:21.191 [http-nio-8080-exec-5] DEBUG [68e890ea930a4d5a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:07:22.597 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-01 22:07:22.625 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 22:07:22.631 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-01 22:07:22.631 [http-nio-8080-exec-7] DEBUG [1a23d6dd4867493f] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-01 22:07:22.632 [http-nio-8080-exec-7] DEBUG [1a23d6dd4867493f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-01 22:07:22.635 [http-nio-8080-exec-7] DEBUG [1a23d6dd4867493f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@5997972f]
2025-11-01 22:07:23.105 [http-nio-8080-exec-7] DEBUG [1a23d6dd4867493f] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 22:07:23.224 [http-nio-8080-exec-7] DEBUG [1a23d6dd4867493f] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-01 22:07:23.465 [http-nio-8080-exec-7] DEBUG [1a23d6dd4867493f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:07:23.465 [http-nio-8080-exec-7] DEBUG [1a23d6dd4867493f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@61d6085e]
2025-11-01 22:07:23.550 [http-nio-8080-exec-7] DEBUG [1a23d6dd4867493f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:07:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:07:47.286 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:07:47.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:07:47.288 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:07:48.131 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:08:04.720 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-01 22:08:04.738 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-01 22:08:04.761 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/prometheus
2025-11-01 22:08:04.762 [http-nio-8080-exec-8] DEBUG [59dc5994f4cf4de6] o.s.web.servlet.DispatcherServlet - GET "/actuator/prometheus", parameters={}
2025-11-01 22:08:04.798 [http-nio-8080-exec-8] DEBUG [59dc5994f4cf4de6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{email=admin@delivery.com, senha=123456}]
2025-11-01 22:08:05.642 [http-nio-8080-exec-8] DEBUG [59dc5994f4cf4de6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Found 'Content-Type:text/plain;version=0.0.4;charset=utf-8' in response
2025-11-01 22:08:05.654 [http-nio-8080-exec-8] DEBUG [59dc5994f4cf4de6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{35, 32, 72, 69, 76, 80, 32, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 95, 114, 101, 97, 1 (truncated)...]
2025-11-01 22:08:05.655 [http-nio-8080-exec-8] DEBUG [59dc5994f4cf4de6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:08:17.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:08:17.302 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:08:17.302 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:08:17.303 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:08:17.516 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:08:21.196 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:08:21.197 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:08:21.197 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:08:21.198 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:08:21.199 [http-nio-8080-exec-9] DEBUG [58c38a364e9046ff] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:08:21.199 [http-nio-8080-exec-9] DEBUG [58c38a364e9046ff] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:08:21.200 [http-nio-8080-exec-9] DEBUG [58c38a364e9046ff] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:08:21.200 [http-nio-8080-exec-9] DEBUG [58c38a364e9046ff] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=77.0957595, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:08:21.201 [http-nio-8080-exec-9] DEBUG [58c38a364e9046ff] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:08:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:08:47.286 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:08:47.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:08:47.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:08:49.246 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:09:17.286 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:09:17.312 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:09:17.313 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:09:17.314 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:09:17.889 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:09:21.185 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:09:21.186 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:09:21.186 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:09:21.187 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:09:21.187 [http-nio-8080-exec-1] DEBUG [23a3c9c7905b4255] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:09:21.187 [http-nio-8080-exec-1] DEBUG [23a3c9c7905b4255] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:09:21.189 [http-nio-8080-exec-1] DEBUG [23a3c9c7905b4255] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:09:21.189 [http-nio-8080-exec-1] DEBUG [23a3c9c7905b4255] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=77.0957595, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:09:21.398 [http-nio-8080-exec-1] DEBUG [23a3c9c7905b4255] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:09:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:09:47.286 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:09:47.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:09:47.288 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:09:47.420 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:10:17.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:10:17.286 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:10:17.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:10:17.288 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:10:17.424 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:10:21.184 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:10:21.185 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:10:21.185 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:10:21.186 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:10:21.186 [http-nio-8080-exec-2] DEBUG [17c828a2172d4508] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:10:21.186 [http-nio-8080-exec-2] DEBUG [17c828a2172d4508] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:10:21.188 [http-nio-8080-exec-2] DEBUG [17c828a2172d4508] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:10:21.188 [http-nio-8080-exec-2] DEBUG [17c828a2172d4508] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=77.0957595, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:10:21.189 [http-nio-8080-exec-2] DEBUG [17c828a2172d4508] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:10:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:10:47.353 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:10:47.354 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:10:47.354 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:10:47.572 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:11:17.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:11:17.285 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:11:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:11:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:11:19.189 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:11:21.457 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:11:21.764 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:11:21.764 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:11:21.766 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:11:21.766 [http-nio-8080-exec-4] DEBUG [83caaed35ab54cbd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:11:21.767 [http-nio-8080-exec-4] DEBUG [83caaed35ab54cbd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:11:21.769 [http-nio-8080-exec-4] DEBUG [83caaed35ab54cbd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:11:21.769 [http-nio-8080-exec-4] DEBUG [83caaed35ab54cbd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=77.0957595, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:11:21.771 [http-nio-8080-exec-4] DEBUG [83caaed35ab54cbd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:11:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:11:47.298 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:11:47.299 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:11:47.300 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:11:47.442 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:12:17.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:12:17.285 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:12:17.286 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:12:17.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:12:17.462 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-01 22:12:21.184 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-01 22:12:21.185 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-01 22:12:21.185 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-01 22:12:21.186 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-01 22:12:21.187 [http-nio-8080-exec-5] DEBUG [798820d5447c49cd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-01 22:12:21.187 [http-nio-8080-exec-5] DEBUG [798820d5447c49cd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-01 22:12:21.189 [http-nio-8080-exec-5] DEBUG [798820d5447c49cd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-01 22:12:21.189 [http-nio-8080-exec-5] DEBUG [798820d5447c49cd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=77.0957595, receita_total=40.9, pedi (truncated)...]
2025-11-01 22:12:21.190 [http-nio-8080-exec-5] DEBUG [798820d5447c49cd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-01 22:12:47.285 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando mtricas e sade do sistema...
2025-11-01 22:12:47.617 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-01 22:12:47.617 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-01 22:12:47.618 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-01 22:12:48.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
