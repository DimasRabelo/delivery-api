2025-11-07 05:21:56.807 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 5539 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 05:21:56.839 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 05:21:56.843 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-07 05:21:56.988 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5edf2821
2025-11-07 05:22:00.578 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:22:00.583 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 05:22:01.089 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 474 ms. Found 9 JPA repository interfaces.
2025-11-07 05:22:01.147 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:22:01.150 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 05:22:01.211 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:01.221 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:01.222 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:01.224 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:01.225 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:01.226 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:01.228 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:01.229 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:01.230 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:01.231 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 0 Redis repository interfaces.
2025-11-07 05:22:04.035 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 05:22:04.092 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 05:22:04.479 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-11-07 05:22:04.485 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 05:22:04.543 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 05:22:06.709 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:22:06.715 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:22:06.715 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:22:06.716 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:22:06.716 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:22:06.717 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:22:06.717 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:22:06.718 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:22:06.718 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:22:06.719 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:22:06.727 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 05:22:06.742 [main] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:22:06.755 [main] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:22:06.764 [main] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:22:06.767 [main] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 05:22:06.772 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 05:22:06.777 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 05:22:06.787 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 05:22:06.795 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:22:06.810 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 05:22:06.816 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 05:22:06.843 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 05:22:06.847 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 05:22:06.857 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 05:22:06.864 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 05:22:06.869 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 05:22:06.874 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 05:22:06.879 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 05:22:06.882 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 05:22:06.886 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 05:22:06.897 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 05:22:06.903 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:22:06.910 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:22:06.914 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 05:22:06.924 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:22:08.173 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 05:22:09.941 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-07 05:22:10.195 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-07 05:22:10.212 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0
2025-11-07 05:22:10.224 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-07 05:22:10.230 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-07 05:22:10.507 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:10.569 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (cpf, nome, telefone, id) 
    values
        (?, ?, ?, ?)
2025-11-07 05:22:10.577 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:10.697 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:10.704 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:10.708 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco_id, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:10.720 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco_base, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:12.395 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 05:22:13.664 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 05:22:14.008 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 05:22:15.490 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-07 05:22:15.769 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 05:22:16.239 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 05:22:16.438 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 05:22:17.362 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-07 05:22:17.612 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 05:22:17.613 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 05:22:17.615 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 05:22:17.619 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-07 05:22:17.621 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-07 05:22:17.625 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 4 ms
2025-11-07 05:22:17.953 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 22.52 seconds (process running for 25.924)
2025-11-07 05:22:18.015 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:22:18.073 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:22:18.103 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:22:20.643 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0
2025-11-07 05:22:20.680 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-07 05:22:20.742 [main] DEBUG [] org.hibernate.SQL - 
    select
        go1_0.produto_id,
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome 
    from
        grupo_opcional go1_0 
    where
        go1_0.produto_id=?
2025-11-07 05:22:20.777 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Produto */delete 
    from
        produto 
    where
        id=?
2025-11-07 05:22:20.793 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-07 05:22:20.813 [main] DEBUG [] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 05:22:20.839 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Restaurante */delete 
    from
        restaurante 
    where
        id=?
2025-11-07 05:22:20.860 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Endereco */delete 
    from
        endereco 
    where
        id=?
2025-11-07 05:22:20.866 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-07 05:22:20.871 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 05:22:20.877 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 05:22:20.883 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.cliente_id=?
2025-11-07 05:22:20.901 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:22:20.917 [main] DEBUG [] org.hibernate.SQL - 
    select
        e1_0.usuario_id,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua 
    from
        endereco e1_0 
    where
        e1_0.usuario_id=?
2025-11-07 05:22:20.937 [main] DEBUG [] org.hibernate.SQL - 
    select
        e1_0.usuario_id,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua 
    from
        endereco e1_0 
    where
        e1_0.usuario_id=?
2025-11-07 05:22:20.953 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-07 05:22:20.959 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Endereco */delete 
    from
        endereco 
    where
        id=?
2025-11-07 05:22:20.963 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Usuario */delete 
    from
        usuario 
    where
        id=?
2025-11-07 05:22:20.966 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Usuario */delete 
    from
        usuario 
    where
        id=?
2025-11-07 05:22:20.980 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0
2025-11-07 05:22:21.003 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-07 05:22:21.173 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 05:22:21.203 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:22:21.211 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:22:21.230 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 05:22:21.243 [main] DEBUG [bc34c2a4c9bd4fd9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 05:22:21.338 [main] DEBUG [bc34c2a4c9bd4fd9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@156eb4cf]
2025-11-07 05:22:21.557 [main] DEBUG [bc34c2a4c9bd4fd9] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 05:22:21.575 [main] DEBUG [bc34c2a4c9bd4fd9] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 05:22:21.705 [main] DEBUG [bc34c2a4c9bd4fd9] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:21.727 [main] DEBUG [bc34c2a4c9bd4fd9] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone,
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        cliente c1_0 
    left join
        pedido p1_0 
            on c1_0.id=p1_0.cliente_id 
    where
        c1_0.id=?
2025-11-07 05:22:21.742 [main] DEBUG [bc34c2a4c9bd4fd9] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 05:22:21.772 [main] DEBUG [bc34c2a4c9bd4fd9] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 05:22:21.803 [main] DEBUG [bc34c2a4c9bd4fd9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 05:22:21.806 [main] DEBUG [bc34c2a4c9bd4fd9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@7c6edbd2]
2025-11-07 05:22:21.820 [main] DEBUG [bc34c2a4c9bd4fd9] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.orm.ObjectOptimisticLockingFailureException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.deliverytech.delivery.entity.Cliente#3]]
2025-11-07 05:22:21.859 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5edf2821, started on Fri Nov 07 05:21:56 BRT 2025
2025-11-07 05:22:21.909 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:22:21.911 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:22:21.918 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:22:21.921 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:22:21.924 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:22:21.925 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:22:21.927 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:22:21.933 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:22:21.935 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:22:21.940 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:22:21.942 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:22:21.950 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 05:22:21.955 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 05:22:22.006 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-07 05:22:22.229 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 5539 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 05:22:22.230 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 05:22:22.233 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-07 05:22:22.237 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@37539d92
2025-11-07 05:22:23.227 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:22:23.227 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 05:22:23.299 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 65 ms. Found 9 JPA repository interfaces.
2025-11-07 05:22:23.307 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:22:23.309 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 05:22:23.331 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:23.333 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:23.334 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:23.335 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:23.337 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:23.338 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:23.339 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:23.340 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:23.342 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:22:23.343 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
2025-11-07 05:22:23.759 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 05:22:23.761 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-07 05:22:23.768 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-11-07 05:22:23.768 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-07 05:22:23.769 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 05:22:24.147 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:22:24.157 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:22:24.159 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:22:24.160 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:22:24.161 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:22:24.162 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:22:24.172 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:22:24.173 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:22:24.174 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:22:24.174 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:22:24.175 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 05:22:24.189 [main] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:22:24.192 [main] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:22:24.196 [main] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:22:24.198 [main] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 05:22:24.206 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 05:22:24.209 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 05:22:24.212 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 05:22:24.215 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:22:24.219 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 05:22:24.229 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 05:22:24.232 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 05:22:24.242 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 05:22:24.245 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 05:22:24.249 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 05:22:24.252 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 05:22:24.255 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 05:22:24.268 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 05:22:24.271 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 05:22:24.274 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 05:22:24.288 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 05:22:24.292 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:22:24.295 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:22:24.298 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 05:22:24.302 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:22:24.969 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-07 05:22:25.005 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-07 05:22:25.010 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0
2025-11-07 05:22:25.017 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-07 05:22:25.027 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-07 05:22:25.196 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:25.203 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (cpf, nome, telefone, id) 
    values
        (?, ?, ?, ?)
2025-11-07 05:22:25.206 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:25.348 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:25.354 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:25.359 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco_id, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:25.373 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco_base, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 05:22:25.696 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 05:22:26.259 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 05:22:26.323 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 05:22:26.598 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-07 05:22:26.723 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 05:22:26.871 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 05:22:26.936 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 05:22:27.367 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-07 05:22:27.476 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 05:22:27.480 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 05:22:27.481 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 05:22:27.481 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-07 05:22:27.482 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-07 05:22:27.488 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-07 05:22:27.641 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 5.635 seconds (process running for 35.613)
2025-11-07 05:22:27.641 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@37539d92, started on Fri Nov 07 05:22:22 BRT 2025
2025-11-07 05:22:27.773 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:22:27.774 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:22:27.776 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:22:27.784 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:22:27.794 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0
2025-11-07 05:22:27.795 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:22:27.797 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:22:27.798 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:22:27.799 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:22:27.820 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-07 05:22:27.822 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:22:27.823 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:22:27.824 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:22:27.823 [main] DEBUG [] org.hibernate.SQL - 
    select
        go1_0.produto_id,
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome 
    from
        grupo_opcional go1_0 
    where
        go1_0.produto_id=?
2025-11-07 05:22:27.830 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-07 05:22:27.847 [main] WARN  [] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42104, SQLState: 42S04
2025-11-07 05:22:27.848 [main] ERROR [] o.h.e.jdbc.spi.SqlExceptionHelper - Table "GRUPO_OPCIONAL" not found (this database is empty); SQL statement:
select go1_0.produto_id,go1_0.id,go1_0.max_selecao,go1_0.min_selecao,go1_0.nome from grupo_opcional go1_0 where go1_0.produto_id=? [42104-232]
2025-11-07 05:22:27.856 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-07 05:37:55.825 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 10768 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 05:37:55.827 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 05:37:55.828 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 05:37:55.907 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-07 05:37:55.908 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-07 05:37:57.721 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:37:57.723 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 05:37:57.990 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 255 ms. Found 9 JPA repository interfaces.
2025-11-07 05:37:58.021 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:37:58.026 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 05:37:58.070 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:37:58.079 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:37:58.081 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:37:58.089 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:37:58.090 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:37:58.090 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:37:58.091 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:37:58.092 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:37:58.092 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:37:58.093 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 0 Redis repository interfaces.
2025-11-07 05:37:59.097 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 05:37:59.130 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 05:37:59.134 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 05:37:59.135 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 05:37:59.195 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 05:37:59.196 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3287 ms
2025-11-07 05:37:59.927 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 05:37:59.930 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 05:37:59.930 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 05:38:00.935 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 05:38:00.993 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 05:38:01.252 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 05:38:01.255 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 05:38:01.305 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 05:38:02.806 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:38:02.811 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:38:02.811 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:38:02.812 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:38:02.812 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:38:02.813 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:38:02.815 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:38:02.815 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:38:02.816 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:38:02.816 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:38:02.824 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 05:38:02.836 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:38:02.848 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:38:02.856 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:38:02.859 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 05:38:02.862 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 05:38:02.866 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 05:38:02.877 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 05:38:02.880 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:38:02.884 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 05:38:02.890 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 05:38:02.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 05:38:02.924 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 05:38:02.927 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 05:38:02.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 05:38:02.941 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 05:38:02.946 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 05:38:02.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 05:38:02.963 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 05:38:02.972 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 05:38:02.980 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 05:38:02.991 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:38:02.999 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:38:03.002 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 05:38:03.019 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:38:04.021 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 05:38:05.721 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 05:38:06.439 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 05:38:06.516 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 05:38:06.772 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 05:38:06.931 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 05:38:07.069 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 05:38:07.218 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 05:38:07.762 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 05:38:07.783 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO restaurante (id, nome, endereco, telefone, categoria, ativo, taxa_entrega) VALUES (1, 'Pizza Palace', 'Rua das Pizzas, 123', '(11) 1234-5678', 'Italiana', true, 5.00), (2, 'Burger King', 'Av. dos Hambúrgueres, 456', '(11) 8765-4321', 'Fast Food', true, 3.50)
2025-11-07 05:38:07.790 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:38:07.792 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:38:07.796 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:38:07.798 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:38:07.800 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:38:07.802 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:38:07.803 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:38:07.808 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:38:07.810 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:38:07.811 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:38:07.813 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:38:07.820 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 05:38:07.822 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 05:38:07.826 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 05:38:08.844 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-07 05:38:08.850 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-07 05:38:08.891 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 05:38:08.918 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO restaurante (id, nome, endereco, telefone, categoria, ativo, taxa_entrega) VALUES (1, 'Pizza Palace', 'Rua das Pizzas, 123', '(11) 1234-5678', 'Italiana', true, 5.00), (2, 'Burger King', 'Av. dos Hambúrgueres, 456', '(11) 8765-4321', 'Fast Food', true, 3.50)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO restaurante (id, nome, endereco, telefone, categoria, ativo, taxa_entrega) VALUES (1, 'Pizza Palace', 'Rua das Pizzas, 123', '(11) 1234-5678', 'Italiana', true, 5.00), (2, 'Burger King', 'Av. dos Hambúrgueres, 456', '(11) 8765-4321', 'Fast Food', true, 3.50)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:293)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 23 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Column "ENDERECO" not found; SQL statement:
INSERT INTO restaurante (id, nome, endereco, telefone, categoria, ativo, taxa_entrega) VALUES (1, 'Pizza Palace', 'Rua das Pizzas, 123', '(11) 1234-5678', 'Italiana', true, 5.00), (2, 'Burger King', 'Av. dos Hambúrgueres, 456', '(11) 8765-4321', 'Fast Food', true, 3.50) [42122-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.table.Table.getColumn(Table.java:786)
	at org.h2.command.Parser.parseColumn(Parser.java:1171)
	at org.h2.command.Parser.parseColumnList(Parser.java:1156)
	at org.h2.command.Parser.parseInsert(Parser.java:1530)
	at org.h2.command.Parser.parsePrepared(Parser.java:698)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:556)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 33 common frames omitted
2025-11-07 05:44:47.006 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 05:44:47.008 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 05:44:47.009 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 05:44:47.080 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-07 05:44:47.081 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-07 05:44:48.814 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:44:48.816 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 05:44:49.034 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 205 ms. Found 9 JPA repository interfaces.
2025-11-07 05:44:49.059 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:44:49.060 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 05:44:49.088 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:44:49.090 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:44:49.091 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:44:49.091 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:44:49.092 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:44:49.092 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:44:49.093 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:44:49.094 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:44:49.097 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:44:49.097 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
2025-11-07 05:44:50.104 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 05:44:50.121 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 05:44:50.125 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 05:44:50.126 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 05:44:50.181 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 05:44:50.183 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3100 ms
2025-11-07 05:44:50.826 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 05:44:50.828 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 05:44:50.828 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 05:44:51.638 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 05:44:51.677 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 05:44:51.912 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 05:44:51.915 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 05:44:51.950 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 05:44:53.364 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:44:53.369 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:44:53.370 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:44:53.370 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:44:53.371 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:44:53.371 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:44:53.372 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:44:53.372 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:44:53.372 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:44:53.373 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:44:53.380 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 05:44:53.391 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:44:53.398 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:44:53.407 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:44:53.410 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 05:44:53.412 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 05:44:53.419 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 05:44:53.424 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 05:44:53.427 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:44:53.429 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 05:44:53.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 05:44:53.454 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 05:44:53.457 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 05:44:53.460 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 05:44:53.463 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 05:44:53.465 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 05:44:53.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 05:44:53.471 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 05:44:53.476 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 05:44:53.480 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 05:44:53.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 05:44:53.488 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:44:53.490 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:44:53.493 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 05:44:53.502 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:44:54.192 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 05:44:55.854 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 05:44:56.498 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 05:44:56.569 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 05:44:56.816 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 05:44:56.978 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 05:44:57.084 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 05:44:57.220 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 05:44:57.791 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 05:44:57.936 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 05:44:58.023 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 05:44:58.035 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 05:44:58.073 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 11.789 seconds (process running for 12.336)
2025-11-07 05:44:58.084 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:44:58.127 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:44:58.144 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:44:59.625 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:45:00.659 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 05:45:00.660 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 05:45:13.103 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console
2025-11-07 05:45:13.120 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:13.125 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:13.144 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console
2025-11-07 05:45:13.167 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/
2025-11-07 05:45:13.168 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:13.169 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:13.172 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/
2025-11-07 05:45:13.274 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:45:13.275 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:13.276 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:13.277 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:45:13.334 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:13.335 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:13.336 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:13.337 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:13.392 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 05:45:13.394 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:13.395 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:13.397 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 05:45:13.522 [http-nio-8080-exec-6] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 05:45:13.524 [http-nio-8080-exec-6] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 05:45:13.528 [http-nio-8080-exec-6] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 05:45:13.528 [http-nio-8080-exec-6] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 05:45:13.528 [http-nio-8080-exec-6] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 05:45:13.531 [http-nio-8080-exec-6] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7626b922
2025-11-07 05:45:13.533 [http-nio-8080-exec-6] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@71576cab
2025-11-07 05:45:13.533 [http-nio-8080-exec-6] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 05:45:13.533 [http-nio-8080-exec-6] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-11-07 05:45:13.536 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 05:45:13.538 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:13.541 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:15.669 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:15.673 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:15.674 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:15.682 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:16.124 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 05:45:16.127 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:16.128 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:45:28.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:45:28.072 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:45:28.120 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.122 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.123 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.125 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.328 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.329 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.331 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.334 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.341 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.342 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.333 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.344 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.348 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.349 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.344 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.350 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.352 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.352 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:45:28.355 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.355 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.356 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:45:28.353 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.359 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.361 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:28.486 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 05:45:28.488 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 05:45:28.490 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.490 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 05:45:28.490 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.496 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 05:45:28.499 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 05:45:28.516 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.520 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.502 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 05:45:28.517 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.523 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.519 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.525 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.528 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.528 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.530 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 05:45:28.531 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 05:45:28.532 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 05:45:28.532 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.535 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.537 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 05:45:28.538 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 05:45:28.539 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 05:45:28.542 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 05:45:28.543 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.544 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.562 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 05:45:28.590 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 05:45:28.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.594 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 05:45:28.597 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 05:45:28.599 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.600 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.602 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 05:45:28.605 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 05:45:28.606 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.607 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.609 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 05:45:28.689 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 05:45:28.690 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.691 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.693 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 05:45:28.750 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 05:45:28.753 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 05:45:28.753 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 05:45:28.754 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.754 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.754 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.755 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 05:45:28.757 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.756 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 05:45:28.767 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.768 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.768 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.768 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 05:45:28.769 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 05:45:28.757 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 05:45:28.759 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.773 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 05:45:28.762 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 05:45:28.773 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.774 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.764 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.775 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.777 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 05:45:28.781 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 05:45:28.790 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 05:45:28.791 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.791 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.793 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 05:45:28.816 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 05:45:28.823 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.825 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.818 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 05:45:28.828 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.840 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.842 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 05:45:28.829 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 05:45:28.835 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 05:45:28.845 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.845 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.846 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 05:45:28.835 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 05:45:28.850 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.850 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.837 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 05:45:28.852 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.852 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.853 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 05:45:28.843 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 05:45:28.856 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.856 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.858 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 05:45:28.859 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 05:45:28.886 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 05:45:28.888 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.890 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:28.893 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 05:45:28.914 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 05:45:28.915 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:28.915 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:29.251 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:45:44.149 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:44.152 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:44.152 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:44.154 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:45:44.220 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:45:44.222 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:44.223 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:44.225 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:45:44.247 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 05:45:44.248 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:45:44.248 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:45:44.249 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 05:45:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:45:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:45:58.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:46:00.404 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:46:00.407 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:46:00.408 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:46:00.410 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:46:00.457 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:46:00.458 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:46:00.458 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:46:00.459 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:46:00.462 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 05:46:00.464 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:46:00.465 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:46:00.466 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 05:46:20.139 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:46:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:46:28.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:46:28.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:46:29.445 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:46:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:46:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:46:58.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:47:03.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:47:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:47:28.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:47:28.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:47:28.642 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:47:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:47:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:47:58.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:47:58.862 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:48:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:48:28.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:48:28.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:48:28.240 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:48:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:48:58.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:48:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:48:58.855 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:49:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:49:28.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:49:28.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:49:34.313 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:49:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:49:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:49:58.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:49:58.251 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:50:06.889 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:50:06.892 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:50:06.893 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:50:06.895 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:50:06.937 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 05:50:06.938 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:50:06.938 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:50:06.938 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:50:06.938 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:50:06.938 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:50:06.941 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:50:06.941 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 05:50:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:50:28.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:50:28.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:50:28.782 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:50:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:50:58.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:50:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:51:01.592 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:51:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:51:28.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:51:28.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:51:28.729 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:51:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:51:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:51:58.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:52:11.519 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:52:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:52:28.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:52:28.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:52:29.719 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:52:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:52:58.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:52:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:52:58.367 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:53:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:53:28.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:53:28.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:53:34.689 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:53:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:53:58.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:53:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:54:01.242 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:54:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:54:28.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:54:28.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:54:28.351 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:54:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:54:58.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:54:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:55:01.619 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:55:28.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:55:28.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:55:28.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:55:28.461 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:55:58.067 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:55:58.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:55:58.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:56:13.391 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:56:26.035 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 05:56:26.048 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 05:56:26.049 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 05:56:26.051 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 05:56:26.052 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 05:56:26.080 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:56:26.082 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:56:26.086 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:56:26.089 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:56:26.092 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:56:26.097 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:56:26.099 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:56:26.101 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:56:26.103 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:56:26.104 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:56:26.106 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:56:26.115 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 05:56:26.117 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 05:56:26.120 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 05:56:27.153 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 05:56:27.153 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 05:56:27.153 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 05:56:27.816 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:56:27.816 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 05:56:27.860 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 9 JPA repository interfaces.
2025-11-07 05:56:27.867 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:56:27.867 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 05:56:27.875 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:27.876 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:27.876 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:27.877 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:27.877 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:27.877 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:27.877 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:27.878 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:27.878 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:27.878 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-07 05:56:28.258 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 05:56:28.261 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 05:56:28.261 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 05:56:28.261 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 05:56:28.277 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 05:56:28.277 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1120 ms
2025-11-07 05:56:28.572 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 05:56:28.573 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 05:56:28.573 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 05:56:28.749 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 05:56:28.751 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-07 05:56:28.754 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn11: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 05:56:28.754 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-07 05:56:28.755 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 05:56:29.284 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:56:29.286 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:56:29.287 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:56:29.289 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:56:29.292 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:56:29.299 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:56:29.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:56:29.304 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:56:29.310 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:56:29.312 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:56:29.314 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 05:56:29.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:56:29.337 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:56:29.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:56:29.353 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 05:56:29.363 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 05:56:29.382 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 05:56:29.399 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 05:56:29.409 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:56:29.425 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 05:56:29.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 05:56:29.447 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 05:56:29.460 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 05:56:29.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 05:56:29.479 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 05:56:29.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 05:56:29.494 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 05:56:29.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 05:56:29.515 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 05:56:29.524 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 05:56:29.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 05:56:29.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:56:29.539 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:56:29.547 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 05:56:29.552 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:56:30.325 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 05:56:30.744 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 05:56:30.799 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 05:56:30.969 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 05:56:31.113 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 05:56:31.191 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 05:56:31.261 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 05:56:31.635 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 05:56:31.740 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 05:56:31.785 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 05:56:31.788 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 05:56:31.803 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:56:31.805 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.737 seconds (process running for 706.068)
2025-11-07 05:56:31.808 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:56:31.809 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:56:31.816 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 05:56:32.229 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:56:33.235 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 05:56:33.235 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 05:56:35.157 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (1 addition, 1 deletion, 1 modification)
2025-11-07 05:56:35.165 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 05:56:35.167 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 05:56:35.170 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 05:56:35.172 [Thread-7] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 05:56:35.183 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:56:35.185 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:56:35.190 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:56:35.196 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:56:35.206 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:56:35.208 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:56:35.209 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:56:35.211 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:56:35.215 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:56:35.217 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:56:35.218 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:56:35.220 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 05:56:35.221 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-07 05:56:35.223 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-07 05:56:35.459 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 05:56:35.460 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 05:56:35.460 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 05:56:35.939 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:56:35.939 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 05:56:35.977 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 9 JPA repository interfaces.
2025-11-07 05:56:35.982 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:56:35.982 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 05:56:35.992 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:35.993 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:35.993 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:35.993 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:35.993 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:35.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:35.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:35.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:35.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:56:35.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-11-07 05:56:36.275 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 05:56:36.276 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 05:56:36.277 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 05:56:36.277 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 05:56:36.296 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 05:56:36.296 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 832 ms
2025-11-07 05:56:36.566 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 05:56:36.566 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 05:56:36.566 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 05:56:36.727 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 05:56:36.729 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-07 05:56:36.732 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn21: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 05:56:36.732 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-07 05:56:36.733 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 05:56:37.061 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:56:37.063 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:56:37.065 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:56:37.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:56:37.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:56:37.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:56:37.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:56:37.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:56:37.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:56:37.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:56:37.074 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 05:56:37.087 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:56:37.097 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:56:37.106 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:56:37.107 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 05:56:37.107 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 05:56:37.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 05:56:37.111 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 05:56:37.114 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:56:37.119 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 05:56:37.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 05:56:37.124 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 05:56:37.128 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 05:56:37.133 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 05:56:37.139 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 05:56:37.150 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 05:56:37.154 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 05:56:37.157 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 05:56:37.160 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 05:56:37.163 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 05:56:37.165 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 05:56:37.169 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:56:37.173 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:56:37.184 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 05:56:37.188 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:56:37.883 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 05:56:38.217 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 05:56:38.272 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 05:56:38.426 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 05:56:38.579 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 05:56:38.639 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 05:56:38.710 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 05:56:39.035 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 05:56:39.148 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 05:56:39.190 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 05:56:39.193 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 05:56:39.208 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:56:39.209 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.814 seconds (process running for 713.472)
2025-11-07 05:56:39.210 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:56:39.211 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:56:39.215 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 05:56:52.551 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:56:52.554 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:56:52.556 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:56:52.566 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=9ed27c41d1fe078a1e45180fda156a60
2025-11-07 05:56:52.642 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:56:52.644 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:56:52.645 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:56:52.647 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:56:52.670 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=4e1a11cee464552f5022c015deec8826
2025-11-07 05:56:52.674 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:56:52.676 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:56:52.677 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=4e1a11cee464552f5022c015deec8826
2025-11-07 05:56:52.724 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 05:56:52.728 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:56:52.730 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:56:52.738 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 05:56:52.758 [http-nio-8080-exec-5] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 05:56:52.758 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 05:56:52.758 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 05:56:52.759 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 05:56:52.759 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 05:56:52.761 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3596df4d
2025-11-07 05:56:52.762 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@257eacc8
2025-11-07 05:56:52.762 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 05:56:52.762 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-07 05:56:52.765 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 05:56:52.774 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:56:52.775 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:56:53.573 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 05:56:53.573 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 24 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 05:56:54.248 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=4e1a11cee464552f5022c015deec8826
2025-11-07 05:56:54.252 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:56:54.253 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:56:54.256 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=4e1a11cee464552f5022c015deec8826
2025-11-07 05:56:54.659 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 05:56:54.660 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:56:54.660 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:02.084 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:57:09.208 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:57:09.210 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:57:09.212 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:57:09.943 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:57:13.781 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 05:57:13.784 [Thread-12] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 05:57:13.784 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 05:57:13.786 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 05:57:13.786 [Thread-12] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 05:57:13.794 [Thread-12] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:57:13.794 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:57:13.796 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:57:13.798 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:57:13.799 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:57:13.800 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:57:13.800 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:57:13.801 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:57:13.802 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:57:13.803 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:57:13.804 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:57:13.806 [Thread-12] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 05:57:13.807 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-07 05:57:13.809 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-07 05:57:14.844 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 05:57:14.845 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 05:57:14.845 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 05:57:15.412 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:57:15.412 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 05:57:15.448 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 9 JPA repository interfaces.
2025-11-07 05:57:15.452 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 05:57:15.452 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 05:57:15.459 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:57:15.460 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:57:15.460 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:57:15.461 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:57:15.461 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:57:15.461 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:57:15.461 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:57:15.462 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:57:15.462 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 05:57:15.462 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-07 05:57:15.721 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 05:57:15.722 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 05:57:15.722 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 05:57:15.722 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 05:57:15.735 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 05:57:15.736 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 888 ms
2025-11-07 05:57:16.054 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 05:57:16.054 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 05:57:16.054 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 05:57:16.218 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 05:57:16.219 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-07 05:57:16.232 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn31: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 05:57:16.232 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-07 05:57:16.233 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 05:57:16.497 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 05:57:16.498 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 05:57:16.498 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 05:57:16.498 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 05:57:16.499 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 05:57:16.499 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 05:57:16.499 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 05:57:16.499 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 05:57:16.500 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 05:57:16.500 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 05:57:16.500 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 05:57:16.502 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:57:16.503 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:57:16.505 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:57:16.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 05:57:16.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 05:57:16.508 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 05:57:16.510 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 05:57:16.513 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 05:57:16.515 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 05:57:16.516 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 05:57:16.518 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 05:57:16.520 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 05:57:16.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 05:57:16.527 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 05:57:16.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 05:57:16.534 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 05:57:16.536 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 05:57:16.538 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 05:57:16.540 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 05:57:16.542 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 05:57:16.547 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:57:16.549 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 05:57:16.552 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 05:57:16.555 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 05:57:17.172 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 05:57:17.520 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 05:57:17.578 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 05:57:17.742 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 05:57:17.901 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 05:57:17.998 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 05:57:18.078 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 05:57:18.409 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 05:57:18.502 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 05:57:18.539 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 05:57:18.543 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 05:57:18.559 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:57:18.560 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.793 seconds (process running for 752.823)
2025-11-07 05:57:18.562 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:57:18.564 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:57:18.565 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 05:57:19.698 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:57:20.703 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 05:57:20.703 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 05:57:28.491 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=4e1a11cee464552f5022c015deec8826
2025-11-07 05:57:28.493 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:28.495 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:28.501 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=4e1a11cee464552f5022c015deec8826
2025-11-07 05:57:28.552 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:57:28.555 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:28.555 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:28.558 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:57:28.588 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:28.590 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:28.590 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:28.594 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:28.638 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 05:57:28.639 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:28.640 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:28.642 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 05:57:28.666 [http-nio-8080-exec-5] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 05:57:28.667 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 05:57:28.667 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 05:57:28.668 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 05:57:28.668 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 05:57:28.672 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4f349a9e
2025-11-07 05:57:28.673 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7535f58a
2025-11-07 05:57:28.674 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 05:57:28.675 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-11-07 05:57:28.679 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 05:57:28.680 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:28.682 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.082 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.084 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.084 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.087 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.142 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.145 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.145 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.146 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.147 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.147 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.147 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.151 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.173 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.174 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.174 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.176 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.193 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.194 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.194 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.195 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:30.302 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 05:57:30.304 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.306 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 05:57:30.312 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.314 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 05:57:30.313 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.314 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 05:57:30.317 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.318 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 05:57:30.317 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.317 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.323 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.323 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.325 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 05:57:30.326 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 05:57:30.328 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 05:57:30.349 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 05:57:30.349 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.349 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.351 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 05:57:30.362 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 05:57:30.362 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.363 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.364 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 05:57:30.376 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 05:57:30.377 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.377 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.378 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 05:57:30.383 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 05:57:30.384 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.384 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.385 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 05:57:30.385 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 05:57:30.387 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.387 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.389 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 05:57:30.408 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 05:57:30.409 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.409 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.410 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 05:57:30.415 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 05:57:30.417 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.424 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.425 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 05:57:30.481 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 05:57:30.482 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.482 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.485 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 05:57:30.490 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.491 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.491 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 05:57:30.485 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 05:57:30.494 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.494 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.494 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 05:57:30.486 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 05:57:30.496 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.496 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.487 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 05:57:30.488 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 05:57:30.498 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 05:57:30.498 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 05:57:30.499 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.499 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.500 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 05:57:30.504 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.505 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.505 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 05:57:30.512 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 05:57:30.512 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.513 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.514 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 05:57:30.515 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.516 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.516 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 05:57:30.517 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 05:57:30.529 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 05:57:30.530 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.531 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.532 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 05:57:30.543 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 05:57:30.544 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.544 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.545 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 05:57:30.547 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 05:57:30.547 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 05:57:30.548 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.548 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.549 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 05:57:30.548 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.550 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.553 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 05:57:30.574 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 05:57:30.575 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.576 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.576 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 05:57:30.577 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 05:57:30.577 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.579 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:30.580 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 05:57:30.611 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 05:57:30.612 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:30.613 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:33.604 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:33.606 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:33.606 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:33.608 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:33.649 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 05:57:33.651 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:33.656 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:33.658 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 05:57:39.671 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:39.672 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:39.673 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:39.674 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:39.703 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:57:39.704 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:39.704 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:39.705 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:57:46.474 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:46.476 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:46.477 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:46.478 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:46.499 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 05:57:46.505 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:46.506 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:46.508 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 05:57:48.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:57:48.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:57:48.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:57:50.042 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:57:51.924 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:51.925 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:51.925 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:51.926 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:57:51.955 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:57:51.956 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:57:51.957 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:57:51.958 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:58:18.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:58:18.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:58:18.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:58:20.600 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:58:21.584 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:21.585 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:21.586 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:21.587 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:21.637 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:58:21.637 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:21.638 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:21.639 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:58:21.651 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 05:58:21.652 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:21.653 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:21.653 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 05:58:24.884 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:24.885 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:24.885 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:24.887 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:28.450 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:28.451 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:28.452 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:28.453 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:31.543 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:31.544 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:31.544 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:31.546 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:31.585 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:58:31.586 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:31.588 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:31.590 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:58:31.604 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 05:58:31.605 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:31.606 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:31.608 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 05:58:35.964 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:35.965 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:35.965 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:35.966 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:40.664 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:40.665 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:40.666 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:40.666 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:46.362 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:46.363 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:46.363 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:46.365 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:46.418 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 05:58:46.420 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:46.420 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:46.421 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 05:58:46.422 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 05:58:46.423 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:46.424 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:46.425 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 05:58:48.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:58:48.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:58:48.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:58:50.586 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:58:51.616 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:58:51.617 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 05:58:51.618 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 05:58:51.619 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 05:59:18.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:59:18.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:59:18.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:59:31.683 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 05:59:48.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 05:59:48.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 05:59:48.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 05:59:59.073 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:00:18.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:00:18.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:00:18.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:00:24.075 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:00:24.078 [Thread-16] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:00:24.078 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:00:24.079 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:00:24.079 [Thread-16] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:00:37.901 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:00:37.907 [Thread-16] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:00:37.907 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:00:37.909 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:00:37.911 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:00:37.912 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:00:37.913 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:00:37.913 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:00:37.914 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:00:37.915 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:00:37.916 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:00:37.917 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:00:37.918 [Thread-16] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:00:37.919 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-07 06:00:37.921 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-07 06:00:39.025 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:00:39.025 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:00:39.025 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:00:39.493 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:00:39.493 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:00:39.526 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 9 JPA repository interfaces.
2025-11-07 06:00:39.530 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:00:39.530 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:00:39.537 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:00:39.537 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:00:39.538 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:00:39.538 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:00:39.538 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:00:39.538 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:00:39.539 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:00:39.539 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:00:39.539 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:00:39.539 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 06:00:39.798 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:00:39.799 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:00:39.800 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:00:39.800 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:00:39.818 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:00:39.818 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 791 ms
2025-11-07 06:00:40.194 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:00:40.195 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:00:40.195 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:00:40.361 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:00:40.363 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-07 06:00:40.365 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn42: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:00:40.365 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-07 06:00:40.366 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:00:40.587 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:00:40.587 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:00:40.587 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:00:40.587 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:00:40.588 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:00:40.588 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:00:40.588 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:00:40.588 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:00:40.588 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:00:40.589 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:00:40.589 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:00:40.591 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:00:40.595 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:00:40.597 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:00:40.598 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:00:40.599 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:00:40.600 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:00:40.601 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:00:40.602 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:00:40.604 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:00:40.606 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:00:40.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:00:40.610 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:00:40.612 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:00:40.614 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:00:40.616 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:00:40.617 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:00:40.619 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:00:40.620 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:00:40.622 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:00:40.623 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:00:40.624 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:00:40.626 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:00:40.628 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:00:40.630 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:00:41.178 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:00:41.479 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:00:41.528 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:00:41.697 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:00:41.859 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:00:41.930 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:00:42.023 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:00:42.368 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:00:42.462 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:00:42.503 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:00:42.505 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:00:42.526 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:00:42.528 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:00:42.528 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.549 seconds (process running for 956.791)
2025-11-07 06:00:42.529 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:00:42.535 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:00:46.601 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 06:00:46.603 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:46.604 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:46.607 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=6de9ba124d5dfd3a16899f49d289b651
2025-11-07 06:00:46.649 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 06:00:46.650 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:46.650 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:46.651 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 06:00:46.674 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:46.675 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:46.675 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:46.676 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:46.714 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 06:00:46.714 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:46.715 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:46.716 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 06:00:46.757 [http-nio-8080-exec-5] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 06:00:46.757 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 06:00:46.757 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 06:00:46.757 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 06:00:46.757 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 06:00:46.763 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6a47b954
2025-11-07 06:00:46.765 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@57a8b86d
2025-11-07 06:00:46.765 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 06:00:46.765 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-11-07 06:00:46.767 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 06:00:46.767 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:46.768 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:47.612 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:00:47.612 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 24 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:00:48.050 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.051 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.052 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.053 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.140 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.141 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.141 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.142 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.144 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.144 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.145 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.145 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.150 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.151 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.151 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.154 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.157 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.158 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.158 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.159 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:48.219 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 06:00:48.222 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.222 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.224 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 06:00:48.269 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 06:00:48.270 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.270 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.271 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 06:00:48.296 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 06:00:48.297 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.297 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.299 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 06:00:48.302 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 06:00:48.303 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.303 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.303 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 06:00:48.303 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 06:00:48.304 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.305 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.305 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.305 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.306 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 06:00:48.305 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 06:00:48.307 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 06:00:48.324 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 06:00:48.325 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.325 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.328 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 06:00:48.346 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 06:00:48.350 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.352 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.349 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 06:00:48.356 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.357 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.358 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 06:00:48.358 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.359 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.360 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 06:00:48.361 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 06:00:48.362 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 06:00:48.361 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 06:00:48.362 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.365 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.368 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 06:00:48.405 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 06:00:48.405 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.405 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.406 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 06:00:48.429 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 06:00:48.434 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.436 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.429 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 06:00:48.438 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.439 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.432 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 06:00:48.433 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 06:00:48.441 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.433 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 06:00:48.434 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 06:00:48.441 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.442 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 06:00:48.445 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.446 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.447 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.448 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 06:00:48.446 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.448 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.449 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 06:00:48.446 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.453 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 06:00:48.454 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 06:00:48.446 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 06:00:48.455 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.456 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.452 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 06:00:48.457 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 06:00:48.482 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 06:00:48.483 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.484 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.485 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 06:00:48.522 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 06:00:48.520 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 06:00:48.523 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.524 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.525 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.527 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 06:00:48.526 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.529 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 06:00:48.544 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 06:00:48.545 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.546 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.547 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 06:00:48.544 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 06:00:48.549 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.550 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.545 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 06:00:48.552 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.553 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:48.554 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 06:00:48.552 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 06:00:48.590 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 06:00:48.591 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:48.591 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:51.484 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:51.484 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:51.485 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:51.485 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:51.505 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 06:00:51.506 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:51.506 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:51.507 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 06:00:56.334 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:56.335 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:56.335 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:56.336 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:00:56.377 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 06:00:56.378 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:00:56.379 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:00:56.380 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 06:01:02.916 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:01:02.916 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:01:02.917 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:01:02.917 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:01:02.937 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 06:01:02.938 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:01:02.938 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:01:02.939 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 06:01:08.076 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:01:08.076 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:01:08.077 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:01:08.077 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 06:01:08.107 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 06:01:08.108 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:01:08.108 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:01:08.110 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 06:01:20.006 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:01:20.009 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:01:20.010 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:01:20.010 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:01:39.249 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:01:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:01:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:01:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:01:53.900 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:02:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:02:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:02:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:02:12.665 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:02:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:02:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:02:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:02:44.898 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:03:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:03:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:03:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:03:13.617 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:03:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:03:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:03:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:03:43.120 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:04:12.526 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:04:12.528 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:04:12.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:04:12.865 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:04:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:04:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:04:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:04:42.824 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:05:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:05:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:05:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:05:13.718 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:05:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:05:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:05:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:05:42.659 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:06:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:06:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:06:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:06:13.378 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:06:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:06:42.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:06:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:06:45.249 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:07:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:07:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:07:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:07:12.984 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:07:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:07:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:07:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:07:45.936 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:08:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:08:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:08:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:08:12.698 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:08:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:08:42.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:08:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:08:42.687 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:09:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:09:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:09:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:09:13.619 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:09:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:09:42.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:09:42.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:09:44.790 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:10:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:10:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:10:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:10:13.822 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:10:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:10:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:10:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:10:43.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:11:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:11:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:11:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:11:36.134 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:11:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:11:42.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:11:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:11:52.734 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:12:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:12:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:12:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:12:15.152 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:12:26.373 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 06:12:26.677 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-05T22:40:58Z. Current time: 2025-11-07T09:12:26Z, a difference of 124288675 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 06:12:26.678 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:12:26.679 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 06:12:26.684 [http-nio-8080-exec-10] DEBUG [d764b2ff1ffe4bc4] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 06:12:26.687 [http-nio-8080-exec-10] DEBUG [d764b2ff1ffe4bc4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 06:12:26.761 [http-nio-8080-exec-10] DEBUG [d764b2ff1ffe4bc4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@37fb9ff3]
2025-11-07 06:12:27.127 [http-nio-8080-exec-10] DEBUG [d764b2ff1ffe4bc4] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:12:27.177 [http-nio-8080-exec-10] DEBUG [d764b2ff1ffe4bc4] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:12:27.326 [http-nio-8080-exec-10] DEBUG [d764b2ff1ffe4bc4] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 06:12:27.379 [http-nio-8080-exec-10] DEBUG [d764b2ff1ffe4bc4] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:12:27.382 [http-nio-8080-exec-10] DEBUG [d764b2ff1ffe4bc4] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@11101a52]
2025-11-07 06:12:27.416 [http-nio-8080-exec-10] DEBUG [d764b2ff1ffe4bc4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 06:12:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:12:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:12:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:12:44.482 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:13:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:13:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:13:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:13:13.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:13:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:13:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:13:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:13:45.306 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:14:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:14:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:14:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:14:13.397 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:14:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:14:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:14:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:14:54.468 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:15:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:15:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:15:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:15:34.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:15:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:15:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:15:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:15:44.233 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 06:15:44.283 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 06:16:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:16:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:16:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:16:14.586 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:16:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:16:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:16:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:16:44.287 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:17:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:17:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:17:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:17:12.659 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:17:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:17:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:17:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:17:44.884 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:18:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:18:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:18:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:18:13.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:18:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:18:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:18:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:18:44.743 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:19:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:19:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:19:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:19:28.686 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:19:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:19:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:19:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:19:56.455 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:20:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:20:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:20:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:20:13.494 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:20:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:20:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:20:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:20:42.662 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:21:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:21:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:21:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:21:16.500 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:21:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:21:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:21:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:21:43.118 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:22:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:22:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:22:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:22:13.845 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:22:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:22:42.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:22:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:22:44.138 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:22:56.280 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /enderecos/meus
2025-11-07 06:22:56.280 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:22:56.281 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:23:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:23:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:23:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:23:13.497 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:23:24.444 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 06:23:24.449 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:23:24.453 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:23:24.461 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 06:23:24.463 [http-nio-8080-exec-8] DEBUG [1d2ffe55d32c4bcf] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 06:23:24.464 [http-nio-8080-exec-8] DEBUG [1d2ffe55d32c4bcf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 06:23:24.465 [http-nio-8080-exec-8] DEBUG [1d2ffe55d32c4bcf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@40a0fea6]
2025-11-07 06:23:24.472 [http-nio-8080-exec-8] DEBUG [1d2ffe55d32c4bcf] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:23:24.480 [http-nio-8080-exec-8] DEBUG [1d2ffe55d32c4bcf] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:23:24.606 [http-nio-8080-exec-8] DEBUG [1d2ffe55d32c4bcf] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 06:23:24.609 [http-nio-8080-exec-8] DEBUG [1d2ffe55d32c4bcf] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:23:24.610 [http-nio-8080-exec-8] DEBUG [1d2ffe55d32c4bcf] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@4653547]
2025-11-07 06:23:24.611 [http-nio-8080-exec-8] DEBUG [1d2ffe55d32c4bcf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 06:23:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:23:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:23:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:23:43.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:23:45.559 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /enderecos/meus
2025-11-07 06:23:45.564 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:23:45.566 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:23:45.571 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /enderecos/meus
2025-11-07 06:23:45.571 [http-nio-8080-exec-3] DEBUG [8f3932cd48ea4fe2] o.s.web.servlet.DispatcherServlet - GET "/enderecos/meus", parameters={}
2025-11-07 06:23:45.572 [http-nio-8080-exec-3] DEBUG [8f3932cd48ea4fe2] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-07 06:23:45.655 [http-nio-8080-exec-3] DEBUG [8f3932cd48ea4fe2] o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-11-07 06:23:45.658 [http-nio-8080-exec-3] DEBUG [8f3932cd48ea4fe2] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 06:23:45.670 [http-nio-8080-exec-3] DEBUG [8f3932cd48ea4fe2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:23:45.671 [http-nio-8080-exec-3] DEBUG [8f3932cd48ea4fe2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@48b5f905]
2025-11-07 06:23:45.681 [http-nio-8080-exec-3] WARN  [8f3932cd48ea4fe2] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource enderecos/meus.]
2025-11-07 06:23:45.682 [http-nio-8080-exec-3] DEBUG [8f3932cd48ea4fe2] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 06:24:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:24:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:24:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:24:13.594 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:24:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:24:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:24:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:24:42.860 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:25:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:25:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:25:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:25:13.493 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:25:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:25:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:25:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:25:57.504 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:26:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:26:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:26:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:26:19.652 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:26:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:26:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:26:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:26:43.368 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:27:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:27:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:27:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:27:14.486 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:27:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:27:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:27:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:27:42.923 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:28:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:28:12.549 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:28:12.550 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:28:14.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:28:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:28:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:28:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:28:43.592 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:29:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:29:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:29:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:29:25.252 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:29:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:29:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:29:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:29:43.168 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:30:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:30:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:30:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:30:47.076 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:30:47.077 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:30:47.078 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:30:47.078 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:30:50.870 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:31:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:31:12.644 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:31:12.645 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:31:12.775 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:31:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:31:42.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:31:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:31:44.840 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:32:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:32:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:32:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:32:15.007 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:32:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:32:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:32:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:32:56.165 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:33:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:33:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:33:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:33:13.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:33:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:33:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:33:42.528 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:33:43.192 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:34:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:34:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:34:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:34:13.586 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:34:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:34:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:34:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:34:45.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:35:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:35:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:35:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:35:13.217 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:35:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:35:42.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:35:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:35:45.568 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:36:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:36:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:36:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:36:13.600 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:36:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:36:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:36:42.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:36:42.820 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:37:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:37:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:37:12.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:37:29.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:37:42.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:37:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:37:42.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:37:42.705 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:38:12.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:38:12.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:38:12.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:38:14.826 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:38:28.684 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-11-07 06:38:28.686 [Thread-20] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:38:28.687 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:28.688 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:38:28.688 [Thread-20] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:28.694 [Thread-20] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:38:28.695 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:38:28.697 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:38:28.697 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:38:28.698 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:38:28.698 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:38:28.699 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:38:28.699 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:38:28.700 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:38:28.700 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:38:28.701 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:38:28.702 [Thread-20] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:38:28.702 [Thread-20] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-07 06:38:28.704 [Thread-20] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-07 06:38:29.446 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:38:29.446 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:38:29.446 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:38:30.132 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:38:30.133 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:38:30.173 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 9 JPA repository interfaces.
2025-11-07 06:38:30.178 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:38:30.178 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:38:30.188 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:30.188 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:30.188 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:30.189 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:30.189 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:30.190 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:30.191 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:30.192 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:30.193 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:30.194 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-11-07 06:38:30.538 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:38:30.541 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:30.542 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:38:30.542 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:38:30.562 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:38:30.562 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1113 ms
2025-11-07 06:38:30.847 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:38:30.848 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:38:30.848 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:38:31.030 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:38:31.032 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-07 06:38:31.034 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn63: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:38:31.035 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-07 06:38:31.035 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:38:31.294 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:38:31.296 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:38:31.296 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:38:31.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:38:31.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:38:31.298 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:38:31.298 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:38:31.299 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:38:31.299 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:38:31.299 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:38:31.300 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:38:31.302 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:38:31.304 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:38:31.306 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:38:31.308 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:38:31.309 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:38:31.311 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:38:31.313 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:38:31.315 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:38:31.318 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:38:31.320 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:38:31.322 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:38:31.326 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:38:31.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:38:31.334 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:38:31.336 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:38:31.342 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:38:31.349 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:38:31.357 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:38:31.365 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:38:31.373 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:38:31.380 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:38:31.387 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:38:31.395 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:38:31.402 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:38:32.204 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:38:33.220 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:38:33.381 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:38:33.705 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:38:33.847 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:38:33.926 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:38:34.058 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:38:34.512 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:38:34.664 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:38:34.726 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:34.734 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:38:34.756 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:38:34.757 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.363 seconds (process running for 3229.02)
2025-11-07 06:38:34.758 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:38:34.760 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:38:34.762 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:38:35.424 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:38:36.073 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:38:36.076 [Thread-24] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:38:36.077 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:36.078 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:38:36.079 [Thread-24] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:36.084 [Thread-24] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:38:36.084 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:38:36.086 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:38:36.086 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:38:36.087 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:38:36.088 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:38:36.088 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:38:36.088 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:38:36.089 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:38:36.089 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:38:36.090 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:38:36.091 [Thread-24] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:38:36.092 [Thread-24] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-07 06:38:36.094 [Thread-24] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-07 06:38:36.636 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:38:36.636 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:38:36.636 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:38:37.131 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:38:37.132 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:38:37.176 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 9 JPA repository interfaces.
2025-11-07 06:38:37.181 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:38:37.181 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:38:37.191 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:37.191 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:37.191 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:37.192 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:37.192 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:37.192 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:37.193 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:37.193 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:37.194 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:37.194 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-11-07 06:38:37.501 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:38:37.502 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:37.502 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:38:37.502 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:38:37.515 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:38:37.515 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 877 ms
2025-11-07 06:38:37.788 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:38:37.788 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:38:37.789 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:38:38.000 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:38:38.001 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-07 06:38:38.004 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn73: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:38:38.005 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-07 06:38:38.005 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:38:38.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:38:38.262 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:38:38.262 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:38:38.262 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:38:38.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:38:38.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:38:38.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:38:38.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:38:38.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:38:38.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:38:38.264 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:38:38.266 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:38:38.268 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:38:38.269 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:38:38.270 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:38:38.271 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:38:38.272 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:38:38.274 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:38:38.275 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:38:38.276 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:38:38.277 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:38:38.279 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:38:38.281 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:38:38.282 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:38:38.284 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:38:38.286 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:38:38.287 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:38:38.289 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:38:38.290 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:38:38.292 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:38:38.294 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:38:38.296 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:38:38.298 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:38:38.299 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:38:38.301 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:38:38.860 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:38:39.190 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:38:39.244 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:38:39.391 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:38:39.530 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:38:39.591 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:38:39.658 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:38:40.010 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:38:40.116 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:38:40.162 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:40.184 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:38:40.201 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:38:40.202 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.611 seconds (process running for 3234.466)
2025-11-07 06:38:40.203 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:38:40.204 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:38:40.208 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:38:40.636 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:38:41.641 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:38:41.641 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:38:57.017 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-11-07 06:38:57.020 [Thread-28] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:38:57.021 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:57.022 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:38:57.023 [Thread-28] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:57.029 [Thread-28] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:38:57.030 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:38:57.030 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:38:57.031 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:38:57.031 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:38:57.031 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:38:57.032 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:38:57.032 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:38:57.033 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:38:57.033 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:38:57.034 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:38:57.035 [Thread-28] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:38:57.036 [Thread-28] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-07 06:38:57.037 [Thread-28] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-07 06:38:57.889 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:38:57.890 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:38:57.890 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:38:58.679 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:38:58.679 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:38:58.718 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 9 JPA repository interfaces.
2025-11-07 06:38:58.725 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:38:58.725 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:38:58.735 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:58.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:58.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:58.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:58.737 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:58.737 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:58.737 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:58.737 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:58.738 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:38:58.738 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-11-07 06:38:59.216 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:38:59.217 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:38:59.217 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:38:59.217 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:38:59.232 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:38:59.232 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1340 ms
2025-11-07 06:38:59.493 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:38:59.493 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:38:59.493 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:38:59.732 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:38:59.734 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-07 06:38:59.737 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn83: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:38:59.737 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-07 06:38:59.738 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:39:00.028 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:39:00.028 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:39:00.028 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:39:00.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:39:00.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:39:00.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:39:00.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:39:00.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:39:00.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:39:00.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:39:00.030 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:39:00.032 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:00.035 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:00.036 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:00.037 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:39:00.038 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:39:00.038 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:39:00.039 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:39:00.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:00.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:39:00.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:39:00.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:39:00.046 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:39:00.047 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:39:00.049 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:39:00.052 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:39:00.054 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:39:00.056 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:39:00.059 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:39:00.060 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:39:00.062 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:39:00.062 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:39:00.064 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:39:00.065 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:39:00.068 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:39:00.725 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:39:01.104 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:39:01.162 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:39:01.432 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:39:01.576 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:39:01.637 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:39:01.712 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:39:02.094 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:39:02.210 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:39:02.254 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:02.258 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:39:02.276 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:39:02.277 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.428 seconds (process running for 3256.541)
2025-11-07 06:39:02.278 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:39:02.279 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:39:02.287 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:39:03.327 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:39:04.331 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:39:04.331 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:39:05.639 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:39:05.646 [Thread-32] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:39:05.647 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:05.649 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:39:05.650 [Thread-32] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:05.661 [Thread-32] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:39:05.663 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:39:05.666 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:39:05.668 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:39:05.669 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:39:05.670 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:39:05.671 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:39:05.671 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:39:05.672 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:39:05.672 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:39:05.673 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:39:05.674 [Thread-32] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:39:05.675 [Thread-32] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-07 06:39:05.677 [Thread-32] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-07 06:39:06.708 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:39:06.708 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:39:06.708 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:39:07.346 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:39:07.346 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:39:07.384 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 9 JPA repository interfaces.
2025-11-07 06:39:07.388 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:39:07.389 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:39:07.396 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:07.396 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:07.396 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:07.396 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:07.397 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:07.397 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:07.397 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:07.397 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:07.398 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:07.398 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 06:39:07.716 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:39:07.717 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:07.718 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:39:07.718 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:39:07.732 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:39:07.732 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1020 ms
2025-11-07 06:39:07.977 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:39:07.978 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:39:07.978 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:39:08.148 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:39:08.149 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-11-07 06:39:08.152 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn93: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:39:08.152 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-11-07 06:39:08.153 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:39:08.441 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:39:08.441 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:39:08.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:39:08.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:39:08.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:39:08.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:39:08.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:39:08.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:39:08.443 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:39:08.443 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:39:08.443 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:39:08.445 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:08.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:08.448 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:08.450 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:39:08.452 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:39:08.454 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:39:08.456 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:39:08.457 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:08.459 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:39:08.460 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:39:08.462 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:39:08.464 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:39:08.466 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:39:08.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:39:08.470 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:39:08.472 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:39:08.475 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:39:08.477 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:39:08.479 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:39:08.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:39:08.484 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:39:08.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:39:08.488 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:39:08.500 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:39:09.032 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:39:09.354 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:39:09.444 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:39:09.640 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:39:09.800 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:39:09.861 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:39:09.933 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:39:10.294 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:39:10.409 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:39:10.454 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:10.457 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:39:10.484 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:39:10.485 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.857 seconds (process running for 3264.749)
2025-11-07 06:39:10.485 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:39:10.486 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:39:10.489 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:39:12.108 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:39:13.111 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:39:13.112 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:39:27.914 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-11-07 06:39:27.916 [Thread-36] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:39:27.917 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:27.918 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:39:27.919 [Thread-36] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:27.924 [Thread-36] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:39:27.924 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:39:27.925 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:39:27.926 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:39:27.926 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:39:27.926 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:39:27.927 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:39:27.927 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:39:27.927 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:39:27.928 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:39:27.928 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:39:27.929 [Thread-36] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:39:27.930 [Thread-36] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-11-07 06:39:27.931 [Thread-36] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-11-07 06:39:28.404 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:39:28.405 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:39:28.405 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:39:28.971 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:39:28.971 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:39:29.007 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 9 JPA repository interfaces.
2025-11-07 06:39:29.011 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:39:29.011 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:39:29.020 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:29.021 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:29.021 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:29.021 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:29.021 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:29.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:29.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:29.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:29.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:29.023 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-07 06:39:29.280 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:39:29.281 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:29.281 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:39:29.281 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:39:29.297 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:39:29.297 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 890 ms
2025-11-07 06:39:29.570 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:39:29.570 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:39:29.570 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:39:29.730 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:39:29.731 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-11-07 06:39:29.734 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn103: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:39:29.734 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-11-07 06:39:29.735 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:39:29.983 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:39:29.984 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:39:29.984 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:39:29.984 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:39:29.984 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:39:29.984 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:39:29.984 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:39:29.985 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:39:29.985 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:39:29.985 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:39:29.985 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:39:29.987 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:29.989 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:29.990 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:29.992 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:39:29.993 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:39:29.994 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:39:29.995 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:39:29.996 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:29.998 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:39:30.009 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:39:30.011 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:39:30.012 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:39:30.014 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:39:30.015 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:39:30.016 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:39:30.017 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:39:30.018 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:39:30.020 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:39:30.022 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:39:30.024 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:39:30.025 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:39:30.026 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:39:30.028 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:39:30.030 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:39:30.750 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:39:31.176 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:39:31.255 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:39:31.454 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:39:31.605 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:39:31.670 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:39:31.736 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:39:32.162 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:39:32.273 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:39:32.313 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:32.315 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:39:32.335 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:39:32.336 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:39:32.337 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.967 seconds (process running for 3286.6)
2025-11-07 06:39:32.337 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:39:32.342 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:39:32.930 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:39:33.933 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:39:33.934 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:39:37.704 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:39:37.706 [Thread-40] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:39:37.706 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:37.707 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:39:37.708 [Thread-40] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:37.712 [Thread-40] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:39:37.712 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:39:37.713 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:39:37.713 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:39:37.714 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:39:37.714 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:39:37.715 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:39:37.715 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:39:37.716 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:39:37.716 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:39:37.717 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:39:37.718 [Thread-40] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:39:37.718 [Thread-40] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-11-07 06:39:37.719 [Thread-40] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-11-07 06:39:38.158 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:39:38.158 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:39:38.158 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:39:38.606 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:39:38.606 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:39:38.642 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 9 JPA repository interfaces.
2025-11-07 06:39:38.646 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:39:38.646 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:39:38.654 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:38.655 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:38.655 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:38.655 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:38.656 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:38.656 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:38.656 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:38.656 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:38.657 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:39:38.657 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-07 06:39:38.891 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:39:38.892 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:38.892 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:39:38.892 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:39:38.905 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:39:38.905 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 745 ms
2025-11-07 06:39:39.143 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:39:39.143 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:39:39.143 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:39:39.286 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:39:39.287 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-11-07 06:39:39.289 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn113: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:39:39.290 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-11-07 06:39:39.290 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:39:39.570 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:39:39.571 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:39:39.571 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:39:39.572 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:39:39.572 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:39:39.573 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:39:39.573 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:39:39.573 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:39:39.574 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:39:39.574 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:39:39.575 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:39:39.576 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:39.578 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:39.579 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:39.580 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:39:39.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:39:39.582 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:39:39.584 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:39:39.585 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:39:39.587 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:39:39.588 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:39:39.589 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:39:39.590 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:39:39.592 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:39:39.593 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:39:39.595 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:39:39.596 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:39:39.597 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:39:39.598 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:39:39.600 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:39:39.601 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:39:39.602 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:39:39.603 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:39:39.604 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:39:39.605 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:39:40.742 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:39:41.380 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:39:41.486 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:39:41.792 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:39:42.082 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:39:42.161 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:39:42.233 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:39:42.608 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:39:42.721 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:39:42.761 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:39:42.764 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:39:42.780 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:39:42.781 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.662 seconds (process running for 3297.044)
2025-11-07 06:39:42.782 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:39:42.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:39:42.785 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:39:51.950 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:39:52.953 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:39:52.953 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:40:12.779 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:40:12.780 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:40:12.781 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:40:13.045 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:40:42.779 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:40:42.780 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:40:42.781 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:40:52.172 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:41:12.779 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:41:12.780 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:41:12.780 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:41:13.144 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:41:42.779 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:41:42.780 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:41:42.781 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:41:44.214 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:42:03.949 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:42:03.952 [Thread-44] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:42:03.953 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:42:03.955 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:42:03.955 [Thread-44] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:42:03.962 [Thread-44] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:42:03.963 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:42:03.964 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:42:03.965 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:42:03.965 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:42:03.966 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:42:03.966 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:42:03.966 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:42:03.967 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:42:03.970 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:42:03.970 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:42:03.972 [Thread-44] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:42:03.972 [Thread-44] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-11-07 06:42:03.975 [Thread-44] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-11-07 06:42:05.364 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:42:05.364 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:42:05.364 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:42:06.034 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:42:06.034 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:42:06.072 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 9 JPA repository interfaces.
2025-11-07 06:42:06.076 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:42:06.076 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:42:06.084 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:06.084 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:06.084 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:06.085 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:06.085 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:06.085 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:06.085 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:06.085 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:06.085 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:06.085 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 06:42:06.358 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:42:06.359 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:42:06.359 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:42:06.359 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:42:06.373 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:42:06.373 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1006 ms
2025-11-07 06:42:06.606 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:42:06.607 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:42:06.607 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:42:06.772 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:42:06.773 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-11-07 06:42:06.776 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn123: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:42:06.776 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-11-07 06:42:06.777 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:42:07.005 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:42:07.005 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:42:07.005 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:42:07.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:42:07.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:42:07.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:42:07.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:42:07.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:42:07.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:42:07.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:42:07.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:42:07.009 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:42:07.010 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:42:07.011 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:42:07.012 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:42:07.015 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:42:07.016 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:42:07.018 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:42:07.019 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:42:07.020 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:42:07.021 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:42:07.022 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:42:07.022 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:42:07.023 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:42:07.024 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:42:07.025 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:42:07.025 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:42:07.026 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:42:07.026 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:42:07.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:42:07.028 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:42:07.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:42:07.030 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:42:07.031 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:42:07.032 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:42:07.605 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:42:07.930 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:42:07.980 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:42:08.121 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:42:08.281 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:42:08.349 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:42:08.413 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:42:08.745 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:42:08.841 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:42:08.876 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:42:08.878 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:42:08.892 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:42:08.893 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.572 seconds (process running for 3443.157)
2025-11-07 06:42:08.894 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:42:08.898 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:42:08.899 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:42:10.937 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:42:11.960 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:42:11.960 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:42:37.409 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:42:37.482 [Thread-48] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:42:37.483 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:42:37.483 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:42:37.484 [Thread-48] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:42:37.489 [Thread-48] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:42:37.489 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:42:37.490 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:42:37.491 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:42:37.491 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:42:37.492 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:42:37.492 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:42:37.492 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:42:37.493 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:42:37.493 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:42:37.493 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:42:37.495 [Thread-48] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:42:37.496 [Thread-48] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-11-07 06:42:37.497 [Thread-48] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-11-07 06:42:38.254 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:42:38.254 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:42:38.254 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:42:38.874 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:42:38.875 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:42:38.912 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 9 JPA repository interfaces.
2025-11-07 06:42:38.916 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:42:38.916 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:42:38.923 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:38.923 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:38.923 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:38.923 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:38.924 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:38.924 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:38.924 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:38.925 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:38.925 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:42:38.925 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 06:42:39.165 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:42:39.166 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:42:39.166 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:42:39.167 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:42:39.183 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:42:39.183 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 924 ms
2025-11-07 06:42:39.446 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:42:39.446 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:42:39.446 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:42:39.592 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:42:39.593 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Starting...
2025-11-07 06:42:39.595 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-13 - Added connection conn133: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:42:39.596 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Start completed.
2025-11-07 06:42:39.596 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:42:39.820 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:42:39.820 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:42:39.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:42:39.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:42:39.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:42:39.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:42:39.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:42:39.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:42:39.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:42:39.822 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:42:39.822 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:42:39.823 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:42:39.824 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:42:39.825 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:42:39.825 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:42:39.826 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:42:39.827 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:42:39.828 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:42:39.829 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:42:39.831 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:42:39.832 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:42:39.833 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:42:39.834 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:42:39.835 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:42:39.836 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:42:39.837 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:42:39.838 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:42:39.839 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:42:39.840 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:42:39.841 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:42:39.842 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:42:39.843 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:42:39.844 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:42:39.845 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:42:39.847 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:42:40.427 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:42:40.853 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:42:40.909 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:42:41.095 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:42:41.395 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:42:41.552 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:42:41.681 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:42:42.402 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:42:42.670 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:42:42.717 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:42:42.727 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:42:42.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:42:42.745 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.547 seconds (process running for 3477.008)
2025-11-07 06:42:42.748 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:42:42.750 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:42:42.752 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:42:43.310 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:42:44.313 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:42:44.313 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:43:12.743 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:43:12.744 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:43:12.744 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:43:15.009 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:43:30.352 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:43:30.356 [Thread-52] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:43:30.385 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:43:30.387 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:43:30.393 [Thread-52] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:43:30.403 [Thread-52] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:43:30.404 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:43:30.407 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:43:30.414 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:43:30.418 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:43:30.421 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:43:30.442 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:43:30.460 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:43:30.468 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:43:30.473 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:43:30.477 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:43:30.487 [Thread-52] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:43:30.492 [Thread-52] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-11-07 06:43:30.505 [Thread-52] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
2025-11-07 06:43:31.638 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 12990 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:43:31.638 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:43:31.638 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:43:32.105 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:43:32.105 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:43:32.135 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 9 JPA repository interfaces.
2025-11-07 06:43:32.138 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:43:32.139 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:43:32.145 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:43:32.146 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:43:32.146 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:43:32.146 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:43:32.146 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:43:32.147 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:43:32.147 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:43:32.147 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:43:32.147 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:43:32.147 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 06:43:32.402 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:43:32.403 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:43:32.403 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:43:32.403 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:43:32.417 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:43:32.417 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 776 ms
2025-11-07 06:43:32.641 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:43:32.641 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:43:32.641 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:43:32.792 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:43:32.794 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Starting...
2025-11-07 06:43:32.796 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-14 - Added connection conn143: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:43:32.796 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Start completed.
2025-11-07 06:43:32.797 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:43:33.040 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:43:33.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:43:33.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:43:33.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:43:33.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:43:33.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:43:33.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:43:33.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:43:33.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:43:33.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:43:33.046 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:43:33.047 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:43:33.049 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:43:33.051 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:43:33.053 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:43:33.055 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:43:33.064 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:43:33.075 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:43:33.076 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:43:33.080 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:43:33.084 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:43:33.086 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:43:33.086 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:43:33.087 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:43:33.088 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:43:33.089 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:43:33.090 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:43:33.091 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:43:33.092 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:43:33.093 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:43:33.095 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:43:33.097 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:43:33.098 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:43:33.099 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:43:33.102 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:43:34.500 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:43:35.016 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:43:35.112 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:43:35.302 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:43:35.495 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:43:35.599 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:43:35.715 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:43:36.137 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:43:36.255 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:43:36.297 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:43:36.301 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:43:36.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:43:36.320 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.722 seconds (process running for 3530.584)
2025-11-07 06:43:36.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:43:36.322 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:43:36.326 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:43:44.004 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:43:45.009 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:43:45.010 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:43:58.691 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 06:43:58.691 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 06:43:58.692 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 06:43:58.692 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 06:43:58.692 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 06:43:58.694 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3093349a
2025-11-07 06:43:58.695 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@74e873c7
2025-11-07 06:43:58.695 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 06:43:58.695 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 06:43:58.697 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 06:43:58.763 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:43:58.765 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:43:58.784 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 06:43:58.785 [http-nio-8080-exec-2] DEBUG [2abe6f5407f54174] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 06:43:58.791 [http-nio-8080-exec-2] DEBUG [2abe6f5407f54174] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 06:43:58.796 [http-nio-8080-exec-2] DEBUG [2abe6f5407f54174] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@255802d]
2025-11-07 06:43:58.922 [http-nio-8080-exec-2] DEBUG [2abe6f5407f54174] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:43:58.924 [http-nio-8080-exec-2] DEBUG [2abe6f5407f54174] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:43:59.046 [http-nio-8080-exec-2] DEBUG [2abe6f5407f54174] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 06:43:59.058 [http-nio-8080-exec-2] DEBUG [2abe6f5407f54174] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:43:59.059 [http-nio-8080-exec-2] DEBUG [2abe6f5407f54174] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@3e2aa08a]
2025-11-07 06:43:59.068 [http-nio-8080-exec-2] DEBUG [2abe6f5407f54174] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 06:44:06.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:44:06.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:44:06.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:44:07.865 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:44:36.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:44:36.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:44:36.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:44:36.478 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:44:40.544 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /enderecos/meus
2025-11-07 06:44:40.552 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:44:40.554 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:44:40.569 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /enderecos/meus
2025-11-07 06:44:40.570 [http-nio-8080-exec-3] DEBUG [8605d8ba4bfb40dc] o.s.web.servlet.DispatcherServlet - GET "/enderecos/meus", parameters={}
2025-11-07 06:44:40.571 [http-nio-8080-exec-3] DEBUG [8605d8ba4bfb40dc] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-07 06:44:40.575 [http-nio-8080-exec-3] DEBUG [8605d8ba4bfb40dc] o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-11-07 06:44:40.581 [http-nio-8080-exec-3] DEBUG [8605d8ba4bfb40dc] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 06:44:40.596 [http-nio-8080-exec-3] DEBUG [8605d8ba4bfb40dc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:44:40.598 [http-nio-8080-exec-3] DEBUG [8605d8ba4bfb40dc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@1cf36c6f]
2025-11-07 06:44:40.602 [http-nio-8080-exec-3] WARN  [8605d8ba4bfb40dc] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource enderecos/meus.]
2025-11-07 06:44:40.602 [http-nio-8080-exec-3] DEBUG [8605d8ba4bfb40dc] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 06:45:06.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:45:06.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:45:06.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:45:19.061 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:45:20.205 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /enderecos/meus
2025-11-07 06:45:20.212 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:45:20.214 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:45:20.222 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /enderecos/meus
2025-11-07 06:45:20.223 [http-nio-8080-exec-5] DEBUG [242bd51c5032426a] o.s.web.servlet.DispatcherServlet - GET "/enderecos/meus", parameters={}
2025-11-07 06:45:20.225 [http-nio-8080-exec-5] DEBUG [242bd51c5032426a] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-07 06:45:20.227 [http-nio-8080-exec-5] DEBUG [242bd51c5032426a] o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-11-07 06:45:20.229 [http-nio-8080-exec-5] DEBUG [242bd51c5032426a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 06:45:20.231 [http-nio-8080-exec-5] DEBUG [242bd51c5032426a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:45:20.232 [http-nio-8080-exec-5] DEBUG [242bd51c5032426a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@13b0983]
2025-11-07 06:45:20.233 [http-nio-8080-exec-5] WARN  [242bd51c5032426a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource enderecos/meus.]
2025-11-07 06:45:20.234 [http-nio-8080-exec-5] DEBUG [242bd51c5032426a] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 06:45:36.318 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:45:36.319 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:45:36.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:45:37.327 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:46:06.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:46:06.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:46:06.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:46:08.964 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:46:36.318 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:46:36.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:46:36.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:46:36.456 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:46:49.522 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:46:49.524 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:46:49.531 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:46:49.532 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:46:49.533 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:46:49.533 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:46:49.534 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:46:49.534 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:46:49.535 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:46:49.535 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:46:49.536 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:46:49.536 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:46:49.536 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:46:49.538 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:46:49.538 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown initiated...
2025-11-07 06:46:49.539 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown completed.
2025-11-07 06:47:27.521 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 36445 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:47:27.524 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:47:27.526 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:47:27.609 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-07 06:47:27.610 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-07 06:47:29.443 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:47:29.445 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:47:29.678 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 221 ms. Found 9 JPA repository interfaces.
2025-11-07 06:47:29.699 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:47:29.702 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:47:29.726 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:47:29.728 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:47:29.729 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:47:29.730 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:47:29.731 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:47:29.731 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:47:29.732 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:47:29.733 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:47:29.733 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:47:29.733 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
2025-11-07 06:47:30.816 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:47:30.834 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:47:30.837 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:47:30.838 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:47:30.906 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:47:30.908 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3297 ms
2025-11-07 06:47:31.634 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:47:31.635 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:47:31.635 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:47:32.559 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:47:32.599 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 06:47:32.834 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:47:32.837 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 06:47:32.876 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:47:34.427 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:47:34.432 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:47:34.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:47:34.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:47:34.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:47:34.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:47:34.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:47:34.435 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:47:34.435 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:47:34.436 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:47:34.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:47:34.454 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:47:34.464 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:47:34.471 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:47:34.474 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:47:34.476 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:47:34.480 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:47:34.485 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:47:34.488 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:47:34.492 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:47:34.499 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:47:34.521 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:47:34.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:47:34.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:47:34.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:47:34.540 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:47:34.546 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:47:34.553 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:47:34.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:47:34.565 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:47:34.571 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:47:34.576 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:47:34.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:47:34.584 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:47:34.593 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:47:35.406 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 06:47:37.128 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:47:37.813 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:47:37.896 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:47:38.175 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:47:38.357 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:47:38.477 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:47:38.622 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:47:39.254 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:47:39.468 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:47:39.563 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:47:39.578 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:47:39.617 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 12.888 seconds (process running for 13.65)
2025-11-07 06:47:39.631 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:47:39.674 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:47:39.693 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:47:42.132 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:47:43.198 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:47:43.199 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:48:05.125 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 06:48:05.125 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 06:48:05.126 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 06:48:05.126 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 06:48:05.126 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 06:48:05.128 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@69f7e775
2025-11-07 06:48:05.129 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@24b666e0
2025-11-07 06:48:05.129 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 06:48:05.129 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-07 06:48:05.171 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 06:48:05.549 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:48:05.687 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:48:05.795 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 06:48:05.799 [http-nio-8080-exec-2] DEBUG [6d081eaea73444d0] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 06:48:05.802 [http-nio-8080-exec-2] DEBUG [6d081eaea73444d0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 06:48:05.879 [http-nio-8080-exec-2] DEBUG [6d081eaea73444d0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@24dfb5d2]
2025-11-07 06:48:06.046 [http-nio-8080-exec-2] DEBUG [6d081eaea73444d0] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:48:06.048 [http-nio-8080-exec-2] DEBUG [6d081eaea73444d0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:48:06.173 [http-nio-8080-exec-2] DEBUG [6d081eaea73444d0] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 06:48:06.225 [http-nio-8080-exec-2] DEBUG [6d081eaea73444d0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:48:06.226 [http-nio-8080-exec-2] DEBUG [6d081eaea73444d0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@d709fc6]
2025-11-07 06:48:06.247 [http-nio-8080-exec-2] DEBUG [6d081eaea73444d0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 06:48:09.611 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:48:09.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:48:09.615 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:48:09.922 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:48:31.213 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /enderecos/meus
2025-11-07 06:48:31.222 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:48:31.224 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:48:31.237 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /enderecos/meus
2025-11-07 06:48:31.239 [http-nio-8080-exec-3] DEBUG [a7fc7cc1fa26435f] o.s.web.servlet.DispatcherServlet - GET "/enderecos/meus", parameters={}
2025-11-07 06:48:31.257 [http-nio-8080-exec-3] DEBUG [a7fc7cc1fa26435f] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-07 06:48:31.303 [http-nio-8080-exec-3] DEBUG [a7fc7cc1fa26435f] o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-11-07 06:48:31.305 [http-nio-8080-exec-3] DEBUG [a7fc7cc1fa26435f] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 06:48:31.325 [http-nio-8080-exec-3] DEBUG [a7fc7cc1fa26435f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:48:31.326 [http-nio-8080-exec-3] DEBUG [a7fc7cc1fa26435f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@103933d6]
2025-11-07 06:48:31.332 [http-nio-8080-exec-3] WARN  [a7fc7cc1fa26435f] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource enderecos/meus.]
2025-11-07 06:48:31.333 [http-nio-8080-exec-3] DEBUG [a7fc7cc1fa26435f] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 06:48:39.611 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:48:39.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:48:39.616 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:48:40.121 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:49:09.611 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:49:09.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:49:09.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:49:10.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:49:39.611 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:49:39.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:49:39.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:49:48.194 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:50:09.611 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:50:09.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:50:09.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:50:10.091 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:50:39.611 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:50:39.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:50:39.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:50:43.256 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:50:44.596 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 06:50:44.602 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:50:44.603 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:50:44.612 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 06:50:44.613 [http-nio-8080-exec-5] DEBUG [1cf605f223b94258] o.s.web.servlet.DispatcherServlet - GET "/api/enderecos/meus", parameters={}
2025-11-07 06:50:44.614 [http-nio-8080-exec-5] DEBUG [1cf605f223b94258] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-07 06:50:44.617 [http-nio-8080-exec-5] DEBUG [1cf605f223b94258] o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-11-07 06:50:44.618 [http-nio-8080-exec-5] DEBUG [1cf605f223b94258] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 06:50:44.622 [http-nio-8080-exec-5] DEBUG [1cf605f223b94258] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:50:44.623 [http-nio-8080-exec-5] DEBUG [1cf605f223b94258] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@156a7b4d]
2025-11-07 06:50:44.624 [http-nio-8080-exec-5] WARN  [1cf605f223b94258] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/enderecos/meus.]
2025-11-07 06:50:44.625 [http-nio-8080-exec-5] DEBUG [1cf605f223b94258] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 06:51:09.611 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:51:09.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:51:09.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:51:14.379 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:51:39.611 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:51:39.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:51:39.615 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:51:42.365 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:52:09.611 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:52:09.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:52:09.615 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:52:10.504 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:52:30.771 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:52:30.776 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:52:30.798 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:52:30.799 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:52:30.802 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:52:30.804 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:52:30.806 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:52:30.807 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:52:30.808 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:52:30.810 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:52:30.811 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:52:30.813 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:52:30.814 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:52:30.823 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:52:30.825 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 06:52:30.828 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 06:52:49.724 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 38672 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:52:49.725 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:52:49.726 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:52:49.799 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-07 06:52:49.801 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-07 06:52:51.677 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:52:51.679 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:52:51.900 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 208 ms. Found 9 JPA repository interfaces.
2025-11-07 06:52:51.923 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:52:51.925 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:52:51.951 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:52:51.953 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:52:51.954 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:52:51.954 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:52:51.955 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:52:51.955 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:52:51.956 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:52:51.956 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:52:51.956 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:52:51.957 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.
2025-11-07 06:52:52.902 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:52:52.921 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:52:52.925 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:52:52.925 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:52:52.982 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:52:52.984 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3181 ms
2025-11-07 06:52:53.664 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:52:53.666 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:52:53.666 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:52:54.509 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:52:54.550 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 06:52:54.777 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:52:54.780 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 06:52:54.828 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:52:56.325 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:52:56.330 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:52:56.331 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:52:56.331 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:52:56.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:52:56.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:52:56.333 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:52:56.333 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:52:56.334 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:52:56.334 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:52:56.342 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:52:56.379 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:52:56.389 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:52:56.396 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:52:56.398 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:52:56.401 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:52:56.406 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:52:56.410 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:52:56.413 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:52:56.417 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:52:56.423 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:52:56.439 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:52:56.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:52:56.444 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:52:56.447 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:52:56.452 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:52:56.456 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:52:56.458 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:52:56.461 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:52:56.463 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:52:56.466 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:52:56.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:52:56.473 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:52:56.475 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:52:56.485 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:52:57.172 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 06:52:58.714 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:52:59.360 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:52:59.449 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:52:59.766 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:53:00.043 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:53:00.169 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:53:00.312 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:53:01.001 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:53:01.182 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:53:01.273 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:53:01.287 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:53:01.324 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 12.334 seconds (process running for 13.119)
2025-11-07 06:53:01.339 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:53:01.392 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:53:01.414 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:53:18.793 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:53:19.832 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:53:19.834 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:53:31.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:53:31.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:53:31.322 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:53:31.675 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:53:34.686 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 06:53:34.687 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 06:53:34.687 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 06:53:34.688 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 06:53:34.688 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 06:53:34.691 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@27d6a450
2025-11-07 06:53:34.693 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6995bfe8
2025-11-07 06:53:34.693 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 06:53:34.694 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-11-07 06:53:34.722 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 06:53:35.009 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:53:35.070 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:53:35.177 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 06:53:35.185 [http-nio-8080-exec-2] DEBUG [9f06f7556a28454f] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 06:53:35.189 [http-nio-8080-exec-2] DEBUG [9f06f7556a28454f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 06:53:35.285 [http-nio-8080-exec-2] DEBUG [9f06f7556a28454f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@36e0f6e2]
2025-11-07 06:53:35.490 [http-nio-8080-exec-2] DEBUG [9f06f7556a28454f] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:53:35.493 [http-nio-8080-exec-2] DEBUG [9f06f7556a28454f] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:53:35.661 [http-nio-8080-exec-2] DEBUG [9f06f7556a28454f] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 06:53:35.759 [http-nio-8080-exec-2] DEBUG [9f06f7556a28454f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:53:35.761 [http-nio-8080-exec-2] DEBUG [9f06f7556a28454f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@183c73e5]
2025-11-07 06:53:35.796 [http-nio-8080-exec-2] DEBUG [9f06f7556a28454f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 06:53:53.060 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 06:53:53.067 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 06:53:53.069 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 06:53:53.079 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 06:53:53.080 [http-nio-8080-exec-3] DEBUG [d3c15f4fb4b349f1] o.s.web.servlet.DispatcherServlet - GET "/api/enderecos/meus", parameters={}
2025-11-07 06:53:53.082 [http-nio-8080-exec-3] DEBUG [d3c15f4fb4b349f1] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-07 06:53:53.086 [http-nio-8080-exec-3] DEBUG [d3c15f4fb4b349f1] o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-11-07 06:53:53.090 [http-nio-8080-exec-3] DEBUG [d3c15f4fb4b349f1] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 06:53:53.115 [http-nio-8080-exec-3] DEBUG [d3c15f4fb4b349f1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 06:53:53.116 [http-nio-8080-exec-3] DEBUG [d3c15f4fb4b349f1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@65400321]
2025-11-07 06:53:53.119 [http-nio-8080-exec-3] WARN  [d3c15f4fb4b349f1] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/enderecos/meus.]
2025-11-07 06:53:53.120 [http-nio-8080-exec-3] DEBUG [d3c15f4fb4b349f1] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 06:54:01.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:54:01.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:54:01.322 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:54:05.657 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:54:31.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:54:31.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:54:31.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:54:33.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:55:01.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:55:01.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:55:01.322 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:55:01.658 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:55:31.319 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:55:31.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:55:31.322 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:55:32.601 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:55:48.566 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:55:48.577 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:55:48.580 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:55:48.585 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:55:48.587 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:55:48.632 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:55:48.639 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:55:48.646 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:55:48.654 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:55:48.659 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:55:48.663 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:55:48.678 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:55:48.688 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:55:48.693 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:55:48.706 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:55:48.716 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:55:48.744 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:55:48.749 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 06:55:48.763 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 06:55:49.396 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 38672 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:55:49.397 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:55:49.397 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:55:50.166 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:55:50.166 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:55:50.218 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 9 JPA repository interfaces.
2025-11-07 06:55:50.223 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:55:50.223 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:55:50.231 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:55:50.232 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:55:50.232 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:55:50.233 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:55:50.233 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:55:50.233 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:55:50.234 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:55:50.234 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:55:50.234 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:55:50.234 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-07 06:55:50.866 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:55:50.874 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:55:50.875 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:55:50.876 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:55:50.906 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:55:50.907 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1496 ms
2025-11-07 06:55:51.483 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:55:51.484 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:55:51.484 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:55:51.675 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:55:51.676 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-07 06:55:51.679 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:55:51.679 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-07 06:55:51.680 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:55:52.030 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:55:52.031 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:55:52.031 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:55:52.032 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:55:52.032 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:55:52.032 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:55:52.032 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:55:52.033 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:55:52.033 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:55:52.033 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:55:52.034 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:55:52.036 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:55:52.038 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:55:52.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:55:52.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:55:52.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:55:52.047 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:55:52.054 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:55:52.056 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:55:52.062 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:55:52.065 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:55:52.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:55:52.070 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:55:52.073 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:55:52.075 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:55:52.077 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:55:52.079 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:55:52.081 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:55:52.083 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:55:52.086 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:55:52.088 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:55:52.090 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:55:52.092 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:55:52.094 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:55:52.096 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:55:52.713 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:55:53.190 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:55:53.247 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:55:53.412 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:55:53.547 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:55:53.616 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:55:53.680 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:55:54.026 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:55:54.131 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:55:54.174 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:55:54.177 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:55:54.194 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.993 seconds (process running for 185.989)
2025-11-07 06:55:54.194 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:55:54.196 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:55:54.200 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:55:54.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:55:55.543 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:55:55.546 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:55:55.547 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:55:55.548 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:55:55.548 [Thread-7] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:13.122 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:56:13.147 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:56:13.147 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:56:13.150 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:56:13.151 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:56:13.155 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:56:13.168 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:56:13.199 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:56:13.202 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:56:13.205 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:56:13.207 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:56:13.211 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:56:13.217 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:56:13.219 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-07 06:56:13.229 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-07 06:56:14.462 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 38672 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:56:14.463 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:56:14.464 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:56:15.427 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:56:15.428 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:56:15.473 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 9 JPA repository interfaces.
2025-11-07 06:56:15.478 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:56:15.478 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:56:15.486 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:15.486 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:15.487 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:15.487 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:15.487 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:15.487 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:15.488 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:15.488 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:15.488 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:15.488 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 06:56:15.845 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:56:15.846 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:15.846 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:56:15.846 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:56:15.860 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:56:15.860 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1390 ms
2025-11-07 06:56:16.122 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:56:16.123 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:56:16.123 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:56:16.258 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:56:16.259 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-07 06:56:16.262 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:56:16.262 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-07 06:56:16.263 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:56:16.527 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:56:16.527 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:56:16.527 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:56:16.527 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:56:16.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:56:16.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:56:16.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:56:16.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:56:16.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:56:16.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:56:16.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:56:16.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:16.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:16.534 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:16.536 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:56:16.538 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:56:16.539 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:56:16.541 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:56:16.543 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:16.545 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:56:16.547 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:56:16.550 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:56:16.552 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:56:16.554 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:56:16.556 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:56:16.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:56:16.560 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:56:16.563 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:56:16.565 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:56:16.567 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:56:16.573 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:56:16.576 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:56:16.578 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:56:16.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:56:16.584 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:56:17.611 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:56:18.279 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:56:18.406 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:56:18.797 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:56:19.222 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:56:19.358 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:56:19.443 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:56:19.930 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:56:20.064 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:56:20.105 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:20.108 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:56:20.125 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:56:20.125 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.74 seconds (process running for 211.92)
2025-11-07 06:56:20.127 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:56:20.128 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:56:20.132 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:56:20.532 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:56:21.480 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-07 06:56:21.483 [Thread-12] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:56:21.484 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:21.485 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:56:21.486 [Thread-12] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:21.491 [Thread-12] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:56:21.491 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:56:21.493 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:56:21.494 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:56:21.495 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:56:21.496 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:56:21.496 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:56:21.497 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:56:21.498 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:56:21.498 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:56:21.499 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:56:21.501 [Thread-12] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:56:21.501 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-07 06:56:21.503 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-07 06:56:21.763 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 38672 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:56:21.763 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:56:21.764 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:56:22.300 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:56:22.300 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:56:22.336 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 9 JPA repository interfaces.
2025-11-07 06:56:22.342 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:56:22.342 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:56:22.351 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:22.352 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:22.352 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:22.352 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:22.353 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:22.353 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:22.353 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:22.353 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:22.354 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:22.354 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-07 06:56:22.470 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.annotation.AnnotationFormatError: Duplicate annotation interface org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity in class com.deliverytech.delivery.config.SecurityConfig
2025-11-07 06:56:22.493 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 06:56:22.514 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
java.lang.annotation.AnnotationFormatError: Duplicate annotation interface org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity in class com.deliverytech.delivery.config.SecurityConfig
	at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:126)
	at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:73)
	at java.base/java.lang.Class.createAnnotationData(Class.java:4248)
	at java.base/java.lang.Class.annotationData(Class.java:4237)
	at java.base/java.lang.Class.getDeclaredAnnotations(Class.java:4204)
	at org.springframework.core.annotation.AnnotationsScanner.getDeclaredAnnotations(AnnotationsScanner.java:446)
	at org.springframework.core.annotation.AnnotationsScanner.isKnownEmpty(AnnotationsScanner.java:486)
	at org.springframework.core.annotation.TypeMappedAnnotations.from(TypeMappedAnnotations.java:259)
	at org.springframework.core.annotation.MergedAnnotations.from(MergedAnnotations.java:374)
	at org.springframework.core.annotation.MergedAnnotations.from(MergedAnnotations.java:362)
	at org.springframework.core.annotation.MergedAnnotations.from(MergedAnnotations.java:342)
	at org.springframework.core.annotation.MergedAnnotations.from(MergedAnnotations.java:324)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAnnotationOnBean(DefaultListableBeanFactory.java:821)
	at org.springframework.boot.sql.init.dependency.AnnotationDependsOnDatabaseInitializationDetector.detect(AnnotationDependsOnDatabaseInitializationDetector.java:36)
	at org.springframework.boot.sql.init.dependency.DatabaseInitializationDependencyConfigurer$DependsOnDatabaseInitializationPostProcessor.detectDependsOnInitializationBeanNames(DatabaseInitializationDependencyConfigurer.java:152)
	at org.springframework.boot.sql.init.dependency.DatabaseInitializationDependencyConfigurer$DependsOnDatabaseInitializationPostProcessor.postProcessBeanFactory(DatabaseInitializationDependencyConfigurer.java:115)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2025-11-07 06:56:29.050 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 38672 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:56:29.051 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:56:29.051 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:56:29.877 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:56:29.877 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:56:29.914 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 9 JPA repository interfaces.
2025-11-07 06:56:29.920 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:56:29.920 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:56:29.927 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:29.928 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:29.928 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:29.928 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:29.928 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:29.928 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:29.929 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:29.929 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:29.929 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:29.929 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 06:56:30.192 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:56:30.193 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:30.194 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:56:30.194 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:56:30.206 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:56:30.207 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1152 ms
2025-11-07 06:56:30.425 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:56:30.425 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:56:30.425 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:56:30.579 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:56:30.580 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-07 06:56:30.583 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:56:30.583 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-07 06:56:30.584 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:56:30.863 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:56:30.863 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:56:30.864 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:56:30.864 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:56:30.865 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:56:30.865 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:56:30.866 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:56:30.867 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:56:30.867 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:56:30.868 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:56:30.870 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:56:30.872 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:30.875 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:30.877 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:30.879 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:56:30.887 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:56:30.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:56:30.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:56:30.899 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:30.903 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:56:30.905 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:56:30.906 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:56:30.909 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:56:30.911 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:56:30.913 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:56:30.914 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:56:30.916 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:56:30.924 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:56:30.926 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:56:30.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:56:30.936 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:56:30.938 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:56:30.940 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:56:30.942 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:56:30.944 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:56:31.545 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:56:31.873 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:56:31.925 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:56:32.078 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:56:32.221 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:56:32.281 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:56:32.349 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:56:32.795 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:56:32.902 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:56:32.943 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:32.946 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:56:32.960 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:56:32.961 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.0 seconds (process running for 224.756)
2025-11-07 06:56:32.962 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:56:32.963 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:56:32.965 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:56:34.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:56:35.099 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:56:35.100 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:56:40.344 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:56:40.413 [Thread-16] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:56:40.414 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:40.419 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:56:40.420 [Thread-16] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:40.427 [Thread-16] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:56:40.428 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:56:40.431 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:56:40.436 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:56:40.444 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:56:40.448 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:56:40.452 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:56:40.454 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:56:40.468 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:56:40.468 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:56:40.469 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:56:40.473 [Thread-16] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:56:40.474 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-07 06:56:40.489 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-07 06:56:41.403 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 38672 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:56:41.410 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:56:41.411 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:56:42.065 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:56:42.066 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:56:42.099 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 9 JPA repository interfaces.
2025-11-07 06:56:42.102 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:56:42.103 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:56:42.110 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:42.111 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:42.111 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:42.111 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:42.111 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:42.112 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:42.112 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:42.112 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:42.112 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:56:42.112 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 06:56:42.413 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:56:42.414 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:42.414 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:56:42.414 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:56:42.427 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:56:42.428 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1010 ms
2025-11-07 06:56:42.728 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:56:42.728 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:56:42.728 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:56:42.877 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:56:42.878 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-07 06:56:42.881 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:56:42.881 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-07 06:56:42.882 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:56:43.165 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:56:43.166 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:56:43.166 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:56:43.166 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:56:43.166 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:56:43.166 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:56:43.167 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:56:43.167 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:56:43.167 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:56:43.167 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:56:43.168 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:56:43.169 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:43.170 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:43.172 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:43.174 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:56:43.175 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:56:43.177 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:56:43.178 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:56:43.180 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:56:43.181 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:56:43.182 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:56:43.183 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:56:43.185 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:56:43.186 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:56:43.188 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:56:43.190 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:56:43.192 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:56:43.194 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:56:43.196 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:56:43.197 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:56:43.198 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:56:43.200 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:56:43.202 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:56:43.204 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:56:43.206 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:56:43.816 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:56:44.154 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:56:44.217 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:56:44.473 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:56:44.728 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:56:44.808 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:56:44.886 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:56:45.298 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:56:45.454 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:56:45.498 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:56:45.503 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:56:45.523 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:56:45.524 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.227 seconds (process running for 237.319)
2025-11-07 06:56:45.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:56:45.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:56:45.531 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 06:56:46.059 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:56:47.067 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 06:56:47.067 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 06:57:15.522 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:57:15.523 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:57:15.524 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:57:16.425 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:57:45.522 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:57:45.544 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:57:45.545 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:57:53.757 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:58:15.522 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:58:15.523 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:58:15.524 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:58:26.772 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 06:58:26.772 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 06:58:26.772 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 06:58:26.772 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 06:58:26.772 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 06:58:26.774 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@51ec6913
2025-11-07 06:58:26.775 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@67b2162b
2025-11-07 06:58:26.775 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 06:58:26.775 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 06:58:26.777 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 06:58:26.780 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 06:58:26.781 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 06:58:34.780 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:58:45.522 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:58:45.524 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:58:45.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:58:45.976 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:59:15.522 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:59:15.523 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:59:15.523 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:59:16.347 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:59:45.522 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:59:45.523 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:59:45.523 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:59:45.958 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 06:59:53.836 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 06:59:53.839 [Thread-23] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 06:59:53.840 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:59:53.841 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 06:59:53.841 [Thread-23] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 06:59:53.850 [Thread-23] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:59:53.851 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:59:53.853 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:59:53.853 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:59:53.854 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:59:53.855 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:59:53.856 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:59:53.857 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:59:53.857 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:59:53.858 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:59:53.859 [Thread-23] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:59:53.862 [Thread-23] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 06:59:53.865 [Thread-23] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-07 06:59:53.868 [Thread-23] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-07 06:59:54.607 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 38672 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 06:59:54.608 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 06:59:54.608 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 06:59:55.645 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:59:55.645 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 06:59:55.701 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 53 ms. Found 9 JPA repository interfaces.
2025-11-07 06:59:55.711 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 06:59:55.712 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 06:59:55.725 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:59:55.726 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:59:55.728 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:59:55.729 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:59:55.735 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:59:55.735 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:59:55.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:59:55.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:59:55.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 06:59:55.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2025-11-07 06:59:56.193 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 06:59:56.197 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 06:59:56.197 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 06:59:56.197 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 06:59:56.217 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 06:59:56.217 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1600 ms
2025-11-07 06:59:56.560 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 06:59:56.560 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 06:59:56.560 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 06:59:56.748 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 06:59:56.750 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-07 06:59:56.753 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 06:59:56.753 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-07 06:59:56.754 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 06:59:57.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 06:59:57.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 06:59:57.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 06:59:57.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 06:59:57.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 06:59:57.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 06:59:57.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 06:59:57.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 06:59:57.046 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 06:59:57.046 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 06:59:57.046 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 06:59:57.049 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:59:57.051 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:59:57.052 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:59:57.053 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 06:59:57.054 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 06:59:57.055 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 06:59:57.056 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 06:59:57.057 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 06:59:57.059 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 06:59:57.060 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 06:59:57.061 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 06:59:57.063 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 06:59:57.065 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 06:59:57.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 06:59:57.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 06:59:57.071 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 06:59:57.073 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 06:59:57.074 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 06:59:57.076 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 06:59:57.080 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 06:59:57.085 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:59:57.087 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 06:59:57.089 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 06:59:57.092 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 06:59:57.819 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 06:59:58.215 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 06:59:58.276 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 06:59:58.721 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 06:59:58.893 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 06:59:58.978 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 06:59:59.060 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 06:59:59.534 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 06:59:59.693 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 06:59:59.742 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 06:59:59.744 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 06:59:59.761 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 06:59:59.763 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 06:59:59.764 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.237 seconds (process running for 431.559)
2025-11-07 06:59:59.765 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 06:59:59.772 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 07:00:01.372 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:00:02.376 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 07:00:02.376 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 07:00:29.760 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:00:29.761 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:00:29.762 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:00:30.271 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:00:59.760 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:00:59.761 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:00:59.762 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:01:03.735 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:01:29.761 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:01:29.763 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:01:29.764 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:01:32.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:01:36.141 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 07:01:36.142 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 07:01:36.150 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:01:36.150 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:01:36.151 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:01:36.151 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:01:36.152 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:01:36.152 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:01:36.153 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:01:36.153 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:01:36.154 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:01:36.154 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:01:36.154 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:01:36.156 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 07:01:36.156 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-07 07:01:36.158 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-07 07:02:03.744 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 42879 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 07:02:03.746 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 07:02:03.748 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 07:02:03.828 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-07 07:02:03.828 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-07 07:02:05.997 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:02:06.000 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 07:02:06.251 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 233 ms. Found 9 JPA repository interfaces.
2025-11-07 07:02:06.276 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:02:06.278 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 07:02:06.302 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:02:06.304 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:02:06.305 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:02:06.306 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:02:06.306 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:02:06.307 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:02:06.308 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:02:06.308 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:02:06.309 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:02:06.309 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.
2025-11-07 07:02:07.506 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 07:02:07.527 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 07:02:07.531 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 07:02:07.532 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 07:02:07.658 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 07:02:07.659 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3829 ms
2025-11-07 07:02:08.529 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 07:02:08.530 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 07:02:08.531 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 07:02:09.534 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 07:02:09.594 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 07:02:09.950 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 07:02:09.953 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 07:02:10.012 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 07:02:11.736 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:02:11.741 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:02:11.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:02:11.743 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:02:11.743 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:02:11.744 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:02:11.744 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:02:11.744 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:02:11.745 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:02:11.746 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:02:11.753 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 07:02:11.765 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:02:11.774 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:02:11.781 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:02:11.783 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 07:02:11.786 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 07:02:11.790 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 07:02:11.795 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 07:02:11.798 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:02:11.825 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 07:02:11.830 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 07:02:11.848 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 07:02:11.852 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 07:02:11.855 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 07:02:11.857 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 07:02:11.860 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 07:02:11.863 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 07:02:11.867 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 07:02:11.872 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 07:02:11.876 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 07:02:11.880 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 07:02:11.883 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:02:11.890 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:02:11.893 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 07:02:11.903 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:02:12.690 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 07:02:14.479 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 07:02:15.162 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 07:02:15.266 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 07:02:15.546 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 07:02:15.772 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 07:02:15.940 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 07:02:16.101 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 07:02:16.831 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 07:02:17.074 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 07:02:17.168 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 07:02:17.378 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 07:02:17.418 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 14.48 seconds (process running for 15.2)
2025-11-07 07:02:17.430 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:02:17.468 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:02:17.487 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:02:19.331 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:02:20.385 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 07:02:20.386 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 07:02:47.415 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:02:47.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:02:47.419 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:02:47.971 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:03:17.415 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:03:17.416 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:03:17.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:03:18.576 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:03:47.415 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:03:47.416 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:03:47.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:03:48.216 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:04:17.415 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:04:17.426 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:04:17.427 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:04:17.562 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:04:47.415 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:04:47.416 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:04:47.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:04:47.609 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:05:17.415 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:05:17.416 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:05:17.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:05:18.050 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:05:47.416 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:05:47.432 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:05:47.434 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:05:49.578 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:06:17.415 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:06:17.416 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:06:17.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:06:29.399 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:06:47.415 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:06:47.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:06:47.418 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:06:48.245 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:07:17.415 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:07:17.416 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:07:17.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:07:18.485 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:07:38.420 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 07:07:38.425 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 07:07:38.591 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:07:38.592 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:07:38.595 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:07:38.597 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:07:38.598 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:07:38.599 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:07:38.600 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:07:38.601 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:07:38.602 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:07:38.603 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:07:38.605 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:07:38.726 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 07:07:38.728 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 07:07:38.730 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 07:17:01.804 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Starting EnderecoControllerIntegrationTest using Java 21.0.9 with PID 47893 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 07:17:01.814 [main] DEBUG [] c.d.d.i.EnderecoControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 07:17:01.818 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - No active profile set, falling back to 1 default profile: "default"
2025-11-07 07:17:01.910 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1179fc8c
2025-11-07 07:17:07.470 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:17:07.474 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 07:17:07.958 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 465 ms. Found 9 JPA repository interfaces.
2025-11-07 07:17:08.003 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:17:08.007 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 07:17:08.097 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:17:08.099 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:17:08.100 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:17:08.101 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:17:08.102 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:17:08.103 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:17:08.104 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:17:08.106 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:17:08.107 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:17:08.108 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
2025-11-07 07:17:12.768 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 07:17:12.902 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 07:17:13.874 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 07:17:13.882 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 07:17:13.974 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 07:17:17.857 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:17:17.868 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:17:17.869 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:17:17.870 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:17:17.870 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:17:17.871 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:17:17.872 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:17:17.873 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:17:17.874 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:17:17.874 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:17:17.908 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 07:17:17.959 [main] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:17:17.970 [main] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:17:17.983 [main] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:17:17.986 [main] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 07:17:17.989 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 07:17:17.996 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 07:17:18.002 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 07:17:18.006 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:17:18.024 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 07:17:18.033 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 07:17:18.073 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 07:17:18.078 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 07:17:18.081 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 07:17:18.084 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 07:17:18.089 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 07:17:18.093 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 07:17:18.097 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 07:17:18.103 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 07:17:18.106 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 07:17:18.111 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 07:17:18.116 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:17:18.120 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:17:18.124 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 07:17:18.141 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:17:19.514 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 07:17:23.853 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 07:17:26.357 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-07 07:17:26.662 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 07:17:27.109 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-07 07:17:27.281 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 07:17:27.651 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 07:17:27.932 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 07:17:28.974 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 07:17:29.347 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 07:17:29.348 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 07:17:29.348 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 07:17:29.350 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-07 07:17:29.351 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-07 07:17:29.353 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-07 07:17:29.554 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Started EnderecoControllerIntegrationTest in 30.202 seconds (process running for 34.937)
2025-11-07 07:17:29.578 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:17:29.618 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:17:29.692 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:17:30.872 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:17:31.205 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:17:32.975 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:17:33.021 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:17:33.039 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:17:33.081 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:17:33.095 [main] DEBUG [25606d458a954bfe] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-07 07:17:33.128 [main] DEBUG [25606d458a954bfe] o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-11-07 07:17:33.152 [main] DEBUG [25606d458a954bfe] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 07:17:33.251 [main] DEBUG [25606d458a954bfe] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:17:33.256 [main] DEBUG [25606d458a954bfe] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@d6db29]
2025-11-07 07:17:33.302 [main] DEBUG [25606d458a954bfe] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/enderecos/meus.]
2025-11-07 07:17:33.401 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:17:33.404 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:17:33.419 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:17:33.421 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:17:33.425 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:17:33.427 [main] DEBUG [3ec46029058b46cf] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-07 07:17:33.430 [main] DEBUG [3ec46029058b46cf] o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-11-07 07:17:33.432 [main] DEBUG [3ec46029058b46cf] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 07:17:33.432 [main] DEBUG [3ec46029058b46cf] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:17:33.433 [main] DEBUG [3ec46029058b46cf] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@315ff164]
2025-11-07 07:17:33.434 [main] DEBUG [3ec46029058b46cf] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/enderecos/meus.]
2025-11-07 07:17:33.483 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:17:33.485 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:17:33.488 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:17:33.532 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:17:33.538 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:17:33.554 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/enderecos
2025-11-07 07:17:33.557 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:17:33.560 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/enderecos
2025-11-07 07:17:33.563 [main] DEBUG [c283e49b19db44e2] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-07 07:17:33.567 [main] DEBUG [c283e49b19db44e2] o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-11-07 07:17:33.568 [main] DEBUG [c283e49b19db44e2] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 07:17:33.569 [main] DEBUG [c283e49b19db44e2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:17:33.571 [main] DEBUG [c283e49b19db44e2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6203668a]
2025-11-07 07:17:33.573 [main] DEBUG [c283e49b19db44e2] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/enderecos.]
2025-11-07 07:17:33.845 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@1179fc8c, started on Fri Nov 07 07:17:01 BRT 2025
2025-11-07 07:17:34.363 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:17:34.365 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:17:34.371 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:17:34.374 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:17:34.378 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:17:34.380 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:17:34.384 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:17:34.386 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:17:34.389 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:17:34.391 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:17:34.393 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:17:34.400 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 07:17:34.406 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 07:20:44.693 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Starting EnderecoControllerIntegrationTest using Java 21.0.9 with PID 50326 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 07:20:44.702 [main] DEBUG [] c.d.d.i.EnderecoControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 07:20:44.705 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - No active profile set, falling back to 1 default profile: "default"
2025-11-07 07:20:44.855 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1179fc8c
2025-11-07 07:20:52.317 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:20:52.327 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 07:20:53.047 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 684 ms. Found 9 JPA repository interfaces.
2025-11-07 07:20:53.130 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:20:53.136 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 07:20:53.228 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:20:53.231 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:20:53.232 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:20:53.233 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:20:53.234 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:20:53.241 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:20:53.243 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:20:53.244 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:20:53.246 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:20:53.247 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 52 ms. Found 0 Redis repository interfaces.
2025-11-07 07:20:58.572 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 07:20:58.758 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 07:20:59.804 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 07:20:59.810 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 07:20:59.961 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 07:21:04.073 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:21:04.087 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:21:04.088 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:21:04.089 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:21:04.090 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:21:04.090 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:21:04.091 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:21:04.092 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:21:04.092 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:21:04.093 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:21:04.105 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 07:21:04.134 [main] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:21:04.143 [main] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:21:04.171 [main] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:21:04.174 [main] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 07:21:04.176 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 07:21:04.181 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 07:21:04.187 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 07:21:04.190 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:21:04.194 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 07:21:04.200 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 07:21:04.220 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 07:21:04.223 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 07:21:04.226 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 07:21:04.228 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 07:21:04.230 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 07:21:04.233 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 07:21:04.237 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 07:21:04.240 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 07:21:04.242 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 07:21:04.246 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 07:21:04.250 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:21:04.254 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:21:04.258 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 07:21:04.271 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:21:06.116 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 07:21:09.816 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 07:21:11.901 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 07:21:12.122 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 07:21:12.646 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-07 07:21:12.911 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 07:21:13.325 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 07:21:13.658 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 07:21:15.007 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 07:21:15.437 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 07:21:15.438 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 07:21:15.438 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 07:21:15.440 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-07 07:21:15.440 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-07 07:21:15.442 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-07 07:21:15.602 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Started EnderecoControllerIntegrationTest in 33.197 seconds (process running for 38.532)
2025-11-07 07:21:15.630 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:21:15.655 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:21:15.672 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:21:16.128 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:21:16.263 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:21:17.007 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:21:17.622 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:21:17.659 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:21:17.679 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:21:17.694 [main] DEBUG [1bc1167554cf450c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 07:21:17.725 [main] DEBUG [1bc1167554cf450c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:21:17.761 [main] DEBUG [1bc1167554cf450c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@2d27e5bb and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENTE')]
2025-11-07 07:21:17.767 [main] DEBUG [1bc1167554cf450c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 07:21:17.866 [main] DEBUG [1bc1167554cf450c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:21:17.869 [main] DEBUG [1bc1167554cf450c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4b6fe2a1]
2025-11-07 07:21:17.893 [main] DEBUG [1bc1167554cf450c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 07:21:17.961 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:21:17.965 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:21:17.983 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:21:17.986 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:21:17.989 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:21:17.991 [main] DEBUG [f782e145707845fc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 07:21:17.994 [main] DEBUG [f782e145707845fc] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:21:17.997 [main] DEBUG [f782e145707845fc] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:21:18.080 [main] DEBUG [f782e145707845fc] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    left join
        usuario u1_0 
            on u1_0.id=e1_0.usuario_id 
    where
        u1_0.id=?
2025-11-07 07:21:18.191 [main] DEBUG [f782e145707845fc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:21:18.192 [main] DEBUG [f782e145707845fc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.deliverytech.delivery.dto.EnderecoDTO@f89fc49]]
2025-11-07 07:21:18.421 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:21:18.423 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:21:18.425 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:21:18.469 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:21:18.472 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:21:18.485 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/enderecos
2025-11-07 07:21:18.487 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:21:18.491 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/enderecos
2025-11-07 07:21:18.496 [main] DEBUG [9cb5c9bfcb034a51] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#adicionarNovoEndereco(EnderecoDTO)
2025-11-07 07:21:18.632 [main] DEBUG [9cb5c9bfcb034a51] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.EnderecoDTO@7b391a6b]
2025-11-07 07:21:18.800 [main] DEBUG [9cb5c9bfcb034a51] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:21:18.802 [main] DEBUG [9cb5c9bfcb034a51] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:21:18.867 [main] DEBUG [9cb5c9bfcb034a51] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:21:18.892 [main] WARN  [9cb5c9bfcb034a51] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-07 07:21:18.892 [main] ERROR [9cb5c9bfcb034a51] o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:1 */ 'SP', NULL, NULL, '01001000', CAST(1 AS BIGINT), CAST(4 AS BIGINT), '123', 'Restaurante Pizza Palace', 'Centro', 'CidadePizza', NULL, 'Rua das Pizzas')"; SQL statement:
/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]
2025-11-07 07:21:18.912 [main] DEBUG [9cb5c9bfcb034a51] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 07:21:18.914 [main] DEBUG [9cb5c9bfcb034a51] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:21:18.915 [main] DEBUG [9cb5c9bfcb034a51] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@55452411]
2025-11-07 07:21:18.918 [main] DEBUG [9cb5c9bfcb034a51] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:1 */ 'SP', NULL, NULL, '01001000', CAST(1 AS BIGINT), CAST(4 AS BIGINT), '123', 'Restaurante Pizza Palace', 'Centro', 'CidadePizza', NULL, 'Rua das Pizzas')"; SQL statement:<EOL>/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]] [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; SQL [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; constraint [PRIMARY KEY]]
2025-11-07 07:21:19.046 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@1179fc8c, started on Fri Nov 07 07:20:44 BRT 2025
2025-11-07 07:21:19.519 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:21:19.521 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:21:19.526 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:21:19.529 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:21:19.532 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:21:19.534 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:21:19.536 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:21:19.539 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:21:19.541 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:21:19.543 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:21:19.545 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:21:19.551 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 07:21:19.556 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 07:38:32.276 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Starting EnderecoControllerIntegrationTest using Java 21.0.9 with PID 55294 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 07:38:32.279 [main] DEBUG [] c.d.d.i.EnderecoControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 07:38:32.282 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - No active profile set, falling back to 1 default profile: "default"
2025-11-07 07:38:32.383 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1179fc8c
2025-11-07 07:38:37.622 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:38:37.628 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 07:38:38.345 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 686 ms. Found 9 JPA repository interfaces.
2025-11-07 07:38:38.464 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:38:38.473 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 07:38:38.582 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:38:38.587 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:38:38.589 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:38:38.590 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:38:38.592 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:38:38.594 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:38:38.596 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:38:38.598 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:38:38.599 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:38:38.601 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 57 ms. Found 0 Redis repository interfaces.
2025-11-07 07:38:43.221 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 07:38:43.376 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 07:38:44.292 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 07:38:44.297 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 07:38:44.400 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 07:38:48.331 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:38:48.341 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:38:48.342 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:38:48.343 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:38:48.343 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:38:48.344 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:38:48.344 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:38:48.345 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:38:48.345 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:38:48.346 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:38:48.359 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 07:38:48.380 [main] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:38:48.393 [main] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:38:48.403 [main] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:38:48.406 [main] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 07:38:48.408 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 07:38:48.414 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 07:38:48.420 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 07:38:48.423 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:38:48.426 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 07:38:48.432 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 07:38:48.454 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 07:38:48.459 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 07:38:48.463 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 07:38:48.466 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 07:38:48.473 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 07:38:48.477 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 07:38:48.480 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 07:38:48.482 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 07:38:48.485 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 07:38:48.488 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 07:38:48.492 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:38:48.495 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:38:48.498 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 07:38:48.509 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:38:49.879 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 07:38:52.974 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 07:38:54.565 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 07:38:54.752 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 07:38:55.223 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-07 07:38:55.436 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 07:38:55.776 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 07:38:56.004 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 07:38:56.927 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 07:38:57.177 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 07:38:57.178 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 07:38:57.178 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 07:38:57.180 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-07 07:38:57.180 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-07 07:38:57.182 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-07 07:38:57.355 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:38:57.357 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Started EnderecoControllerIntegrationTest in 27.345 seconds (process running for 32.972)
2025-11-07 07:38:57.380 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:38:57.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:38:57.880 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:38:57.991 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:38:58.692 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:38:59.082 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:38:59.106 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:38:59.120 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:38:59.131 [main] DEBUG [09f074f92e4b495f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 07:38:59.169 [main] DEBUG [09f074f92e4b495f] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:38:59.198 [main] DEBUG [09f074f92e4b495f] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@10188b26 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENTE')]
2025-11-07 07:38:59.204 [main] DEBUG [09f074f92e4b495f] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 07:38:59.306 [main] DEBUG [09f074f92e4b495f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:38:59.312 [main] DEBUG [09f074f92e4b495f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@2de73991]
2025-11-07 07:38:59.364 [main] DEBUG [09f074f92e4b495f] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 07:38:59.434 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:38:59.437 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:38:59.453 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:38:59.456 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:38:59.459 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:38:59.461 [main] DEBUG [d6ad6e84bb19431a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 07:38:59.462 [main] DEBUG [d6ad6e84bb19431a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:38:59.465 [main] DEBUG [d6ad6e84bb19431a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:38:59.515 [main] DEBUG [d6ad6e84bb19431a] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    left join
        usuario u1_0 
            on u1_0.id=e1_0.usuario_id 
    where
        u1_0.id=?
2025-11-07 07:38:59.584 [main] DEBUG [d6ad6e84bb19431a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:38:59.585 [main] DEBUG [d6ad6e84bb19431a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.deliverytech.delivery.dto.EnderecoDTO@72ec4d21]]
2025-11-07 07:38:59.753 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:38:59.755 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:38:59.758 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:38:59.793 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:38:59.796 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:38:59.817 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/enderecos
2025-11-07 07:38:59.822 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:38:59.833 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/enderecos
2025-11-07 07:38:59.838 [main] DEBUG [2186eabf506a464d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#adicionarNovoEndereco(EnderecoDTO)
2025-11-07 07:38:59.973 [main] DEBUG [2186eabf506a464d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.EnderecoDTO@1bad5250]
2025-11-07 07:39:00.089 [main] DEBUG [2186eabf506a464d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:39:00.092 [main] DEBUG [2186eabf506a464d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:39:00.168 [main] DEBUG [2186eabf506a464d] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:39:00.185 [main] WARN  [2186eabf506a464d] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-07 07:39:00.185 [main] ERROR [2186eabf506a464d] o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:1 */ 'SP', NULL, NULL, '01001000', CAST(1 AS BIGINT), CAST(4 AS BIGINT), '123', 'Restaurante Pizza Palace', 'Centro', 'CidadePizza', NULL, 'Rua das Pizzas')"; SQL statement:
/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]
2025-11-07 07:39:00.206 [main] DEBUG [2186eabf506a464d] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 07:39:00.208 [main] DEBUG [2186eabf506a464d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:39:00.208 [main] DEBUG [2186eabf506a464d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@140b31cd]
2025-11-07 07:39:00.211 [main] DEBUG [2186eabf506a464d] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:1 */ 'SP', NULL, NULL, '01001000', CAST(1 AS BIGINT), CAST(4 AS BIGINT), '123', 'Restaurante Pizza Palace', 'Centro', 'CidadePizza', NULL, 'Rua das Pizzas')"; SQL statement:<EOL>/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]] [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; SQL [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; constraint [PRIMARY KEY]]
2025-11-07 07:39:00.317 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@1179fc8c, started on Fri Nov 07 07:38:32 BRT 2025
2025-11-07 07:39:00.788 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:39:00.790 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:39:00.795 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:39:00.798 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:39:00.801 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:39:00.803 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:39:00.805 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:39:00.808 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:39:00.811 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:39:00.813 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:39:00.815 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:39:00.821 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 07:39:00.825 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 07:40:07.676 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Starting EnderecoControllerIntegrationTest using Java 21.0.9 with PID 55964 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 07:40:07.680 [main] DEBUG [] c.d.d.i.EnderecoControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 07:40:07.691 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - No active profile set, falling back to 1 default profile: "default"
2025-11-07 07:40:07.816 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@15dd5ac2
2025-11-07 07:40:13.514 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:40:13.520 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 07:40:14.241 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 678 ms. Found 9 JPA repository interfaces.
2025-11-07 07:40:14.285 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:40:14.287 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 07:40:14.344 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:40:14.347 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:40:14.348 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:40:14.349 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:40:14.350 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:40:14.351 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:40:14.352 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:40:14.353 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:40:14.354 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:40:14.354 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 0 Redis repository interfaces.
2025-11-07 07:40:18.265 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 07:40:18.330 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 07:40:18.838 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 07:40:18.846 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 07:40:18.905 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 07:40:22.233 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:40:22.262 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:40:22.266 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:40:22.272 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:40:22.272 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:40:22.273 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:40:22.273 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:40:22.274 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:40:22.275 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:40:22.278 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:40:22.288 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 07:40:22.313 [main] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:40:22.331 [main] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:40:22.341 [main] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:40:22.346 [main] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 07:40:22.349 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 07:40:22.354 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 07:40:22.364 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 07:40:22.367 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:40:22.371 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 07:40:22.385 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 07:40:22.423 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 07:40:22.433 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 07:40:22.438 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 07:40:22.447 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 07:40:22.454 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 07:40:22.471 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 07:40:22.483 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 07:40:22.501 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 07:40:22.511 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 07:40:22.519 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 07:40:22.531 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:40:22.548 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:40:22.552 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 07:40:22.581 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:40:24.233 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 07:40:27.800 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 07:40:29.493 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 07:40:29.655 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 07:40:30.589 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-07 07:40:30.850 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 07:40:31.220 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 07:40:31.555 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 07:40:32.720 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 07:40:33.005 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 07:40:33.009 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 07:40:33.011 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 07:40:33.019 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-07 07:40:33.038 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-07 07:40:33.045 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 4 ms
2025-11-07 07:40:33.339 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Started EnderecoControllerIntegrationTest in 27.261 seconds (process running for 30.508)
2025-11-07 07:40:33.360 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:40:33.383 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:40:33.416 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:40:33.867 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:40:33.978 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:40:35.184 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:40:35.228 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:40:35.279 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:40:35.301 [main] DEBUG [45f354062ec84c90] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 07:40:35.385 [main] DEBUG [45f354062ec84c90] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:40:35.456 [main] DEBUG [45f354062ec84c90] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@7fd5109 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENTE')]
2025-11-07 07:40:35.478 [main] DEBUG [45f354062ec84c90] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 07:40:35.591 [main] DEBUG [45f354062ec84c90] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:40:35.594 [main] DEBUG [45f354062ec84c90] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@5bf0779d]
2025-11-07 07:40:35.625 [main] DEBUG [45f354062ec84c90] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 07:40:35.793 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:40:35.817 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:40:35.866 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:40:35.869 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:40:35.872 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:40:35.891 [main] DEBUG [3ada0f3a20364c7c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 07:40:35.893 [main] DEBUG [3ada0f3a20364c7c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:40:35.896 [main] DEBUG [3ada0f3a20364c7c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:40:35.968 [main] DEBUG [3ada0f3a20364c7c] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    left join
        usuario u1_0 
            on u1_0.id=e1_0.usuario_id 
    where
        u1_0.id=?
2025-11-07 07:40:36.090 [main] DEBUG [3ada0f3a20364c7c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:40:36.091 [main] DEBUG [3ada0f3a20364c7c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.deliverytech.delivery.dto.EnderecoDTO@4468aa66]]
2025-11-07 07:40:36.375 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:40:36.387 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:40:36.389 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:40:36.449 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:40:36.460 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:40:36.487 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/enderecos
2025-11-07 07:40:36.491 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:40:36.495 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/enderecos
2025-11-07 07:40:36.499 [main] DEBUG [4d4db5c04e1c4a36] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#adicionarNovoEndereco(EnderecoDTO)
2025-11-07 07:40:36.572 [main] DEBUG [4d4db5c04e1c4a36] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.EnderecoDTO@2a590e2f]
2025-11-07 07:40:36.787 [main] DEBUG [4d4db5c04e1c4a36] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:40:36.795 [main] DEBUG [4d4db5c04e1c4a36] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:40:36.892 [main] DEBUG [4d4db5c04e1c4a36] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:40:36.907 [main] WARN  [4d4db5c04e1c4a36] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-07 07:40:36.909 [main] ERROR [4d4db5c04e1c4a36] o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:1 */ 'SP', NULL, NULL, '01001000', CAST(1 AS BIGINT), CAST(4 AS BIGINT), '123', 'Restaurante Pizza Palace', 'Centro', 'CidadePizza', NULL, 'Rua das Pizzas')"; SQL statement:
/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]
2025-11-07 07:40:36.925 [main] DEBUG [4d4db5c04e1c4a36] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 07:40:36.928 [main] DEBUG [4d4db5c04e1c4a36] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:40:36.929 [main] DEBUG [4d4db5c04e1c4a36] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@1bafc65f]
2025-11-07 07:40:36.938 [main] DEBUG [4d4db5c04e1c4a36] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:1 */ 'SP', NULL, NULL, '01001000', CAST(1 AS BIGINT), CAST(4 AS BIGINT), '123', 'Restaurante Pizza Palace', 'Centro', 'CidadePizza', NULL, 'Rua das Pizzas')"; SQL statement:<EOL>/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]] [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; SQL [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; constraint [PRIMARY KEY]]
2025-11-07 07:40:37.008 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@15dd5ac2, started on Fri Nov 07 07:40:07 BRT 2025
2025-11-07 07:40:37.271 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:40:37.302 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:40:37.304 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:40:37.308 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:40:37.311 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:40:37.314 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:40:37.316 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:40:37.318 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:40:37.320 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:40:37.323 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:40:37.325 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:40:37.327 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:40:37.346 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 07:40:37.354 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 07:47:48.376 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Starting EnderecoControllerIntegrationTest using Java 21.0.9 with PID 61707 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 07:47:48.393 [main] DEBUG [] c.d.d.i.EnderecoControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 07:47:48.398 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-07 07:47:48.738 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2211b44f
2025-11-07 07:47:55.282 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:47:55.288 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 07:47:55.860 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 546 ms. Found 9 JPA repository interfaces.
2025-11-07 07:47:55.917 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:47:55.922 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 07:47:55.980 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:47:55.984 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:47:55.986 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:47:55.988 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:47:55.989 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:47:55.991 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:47:55.993 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:47:55.995 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:47:55.998 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:47:55.999 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 0 Redis repository interfaces.
2025-11-07 07:48:00.885 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 07:48:01.015 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 07:48:02.221 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-11-07 07:48:02.233 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 07:48:02.510 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 07:48:07.000 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:48:07.015 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:48:07.016 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:48:07.017 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:48:07.018 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:48:07.018 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:48:07.019 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:48:07.020 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:48:07.021 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:48:07.022 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:48:07.038 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 07:48:07.071 [main] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:48:07.090 [main] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:48:07.110 [main] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:48:07.122 [main] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 07:48:07.129 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 07:48:07.141 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 07:48:07.152 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 07:48:07.161 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:48:07.173 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 07:48:07.201 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 07:48:07.290 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 07:48:07.371 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 07:48:07.405 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 07:48:07.430 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 07:48:07.435 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 07:48:07.535 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 07:48:07.546 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 07:48:07.552 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 07:48:07.558 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 07:48:07.580 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 07:48:07.622 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:48:07.626 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:48:07.638 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 07:48:07.703 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:48:09.373 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 07:48:12.200 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-07 07:48:12.484 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-07 07:48:12.501 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0
2025-11-07 07:48:12.507 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-07 07:48:12.515 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-07 07:48:12.841 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 07:48:13.149 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (cpf, nome, telefone, id) 
    values
        (?, ?, ?, ?)
2025-11-07 07:48:13.185 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:48:13.357 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 07:48:13.366 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:48:13.371 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco_id, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:48:13.389 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco_base, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:48:15.049 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 07:48:16.873 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 07:48:17.120 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 07:48:18.801 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-07 07:48:19.104 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 07:48:19.528 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 07:48:19.938 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 07:48:21.460 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-07 07:48:21.802 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 07:48:21.802 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 07:48:21.802 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 07:48:21.804 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-07 07:48:21.805 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-07 07:48:21.808 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-07 07:48:22.039 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Started EnderecoControllerIntegrationTest in 36.6 seconds (process running for 41.434)
2025-11-07 07:48:22.146 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:48:22.185 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:48:22.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:48:22.462 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:48:22.469 [main] WARN  [] o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener] for test method [void com.deliverytech.delivery.integration.EnderecoControllerIntegrationTest.deveRetornarStatus403_QuandoLogadoComoRestaurante() throws java.lang.Exception] and test instance [com.deliverytech.delivery.integration.EnderecoControllerIntegrationTest@6cfa4b1e]
java.lang.IllegalStateException: Unable to create SecurityContext using @org.springframework.security.test.context.support.WithUserDetails(setupBefore=TEST_METHOD, userDetailsServiceBeanName="", value="pizza@palace.com")
	at org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener.lambda$createTestSecurityContext$1(WithSecurityContextTestExecutionListener.java:143)
	at org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener.beforeTestMethod(WithSecurityContextTestExecutionListener.java:90)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:236)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:165)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:201)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:201)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:164)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.security.core.userdetails.UsernameNotFoundException: Usuário não encontrado: pizza@palace.com
	at com.deliverytech.delivery.service.auth.AuthService.lambda$loadUserByUsername$0(AuthService.java:46)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.deliverytech.delivery.service.auth.AuthService.loadUserByUsername(AuthService.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724)
	at com.deliverytech.delivery.service.auth.AuthService$$SpringCGLIB$$1.loadUserByUsername(<generated>)
	at org.springframework.security.test.context.support.WithUserDetailsSecurityContextFactory.createSecurityContext(WithUserDetailsSecurityContextFactory.java:68)
	at org.springframework.security.test.context.support.WithUserDetailsSecurityContextFactory.createSecurityContext(WithUserDetailsSecurityContextFactory.java:43)
	at org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener.lambda$createTestSecurityContext$1(WithSecurityContextTestExecutionListener.java:140)
	... 62 common frames omitted
2025-11-07 07:48:23.771 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:48:23.774 [main] WARN  [] o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener] for test method [void com.deliverytech.delivery.integration.EnderecoControllerIntegrationTest.deveRetornarStatus200EEnderecos_QuandoLogadoComoCliente() throws java.lang.Exception] and test instance [com.deliverytech.delivery.integration.EnderecoControllerIntegrationTest@3bd35fc3]
java.lang.IllegalStateException: Unable to create SecurityContext using @org.springframework.security.test.context.support.WithUserDetails(setupBefore=TEST_METHOD, userDetailsServiceBeanName="", value="joao@email.com")
	at org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener.lambda$createTestSecurityContext$1(WithSecurityContextTestExecutionListener.java:143)
	at org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener.beforeTestMethod(WithSecurityContextTestExecutionListener.java:90)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:236)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:165)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:201)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:201)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:164)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.security.core.userdetails.UsernameNotFoundException: Usuário não encontrado: joao@email.com
	at com.deliverytech.delivery.service.auth.AuthService.lambda$loadUserByUsername$0(AuthService.java:46)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.deliverytech.delivery.service.auth.AuthService.loadUserByUsername(AuthService.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724)
	at com.deliverytech.delivery.service.auth.AuthService$$SpringCGLIB$$1.loadUserByUsername(<generated>)
	at org.springframework.security.test.context.support.WithUserDetailsSecurityContextFactory.createSecurityContext(WithUserDetailsSecurityContextFactory.java:68)
	at org.springframework.security.test.context.support.WithUserDetailsSecurityContextFactory.createSecurityContext(WithUserDetailsSecurityContextFactory.java:43)
	at org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener.lambda$createTestSecurityContext$1(WithSecurityContextTestExecutionListener.java:140)
	... 62 common frames omitted
2025-11-07 07:48:23.890 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:48:24.013 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:48:24.029 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:48:24.174 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:48:24.179 [main] WARN  [] o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener] for test method [void com.deliverytech.delivery.integration.EnderecoControllerIntegrationTest.deveRetornarStatus201_AoCriarEnderecoComoCliente() throws java.lang.Exception] and test instance [com.deliverytech.delivery.integration.EnderecoControllerIntegrationTest@4fc7baa4]
java.lang.IllegalStateException: Unable to create SecurityContext using @org.springframework.security.test.context.support.WithUserDetails(setupBefore=TEST_METHOD, userDetailsServiceBeanName="", value="joao@email.com")
	at org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener.lambda$createTestSecurityContext$1(WithSecurityContextTestExecutionListener.java:143)
	at org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener.beforeTestMethod(WithSecurityContextTestExecutionListener.java:90)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:236)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:165)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:201)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:201)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:164)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.security.core.userdetails.UsernameNotFoundException: Usuário não encontrado: joao@email.com
	at com.deliverytech.delivery.service.auth.AuthService.lambda$loadUserByUsername$0(AuthService.java:46)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.deliverytech.delivery.service.auth.AuthService.loadUserByUsername(AuthService.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724)
	at com.deliverytech.delivery.service.auth.AuthService$$SpringCGLIB$$1.loadUserByUsername(<generated>)
	at org.springframework.security.test.context.support.WithUserDetailsSecurityContextFactory.createSecurityContext(WithUserDetailsSecurityContextFactory.java:68)
	at org.springframework.security.test.context.support.WithUserDetailsSecurityContextFactory.createSecurityContext(WithUserDetailsSecurityContextFactory.java:43)
	at org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener.lambda$createTestSecurityContext$1(WithSecurityContextTestExecutionListener.java:140)
	... 62 common frames omitted
2025-11-07 07:48:24.338 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2211b44f, started on Fri Nov 07 07:47:48 BRT 2025
2025-11-07 07:48:24.808 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:48:24.864 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:48:24.866 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:48:24.871 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:48:24.873 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:48:24.875 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:48:24.876 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:48:24.878 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:48:24.880 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:48:24.882 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:48:24.883 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:48:24.885 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:48:24.890 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 07:48:24.895 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 07:51:45.713 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Starting EnderecoControllerIntegrationTest using Java 21.0.9 with PID 65379 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 07:51:45.717 [main] DEBUG [] c.d.d.i.EnderecoControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 07:51:45.719 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-07 07:51:45.807 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2211b44f
2025-11-07 07:51:52.932 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:51:52.937 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 07:51:54.259 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1286 ms. Found 9 JPA repository interfaces.
2025-11-07 07:51:54.327 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:51:54.331 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 07:51:54.432 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:51:54.440 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:51:54.444 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:51:54.455 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:51:54.459 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:51:54.460 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:51:54.468 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:51:54.470 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:51:54.479 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:51:54.489 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 98 ms. Found 0 Redis repository interfaces.
2025-11-07 07:51:58.214 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 07:51:58.340 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 07:51:59.716 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-11-07 07:51:59.733 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 07:51:59.901 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 07:52:04.945 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:52:04.954 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:52:04.955 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:52:04.955 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:52:04.956 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:52:04.957 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:52:04.957 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:52:04.958 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:52:04.958 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:52:04.958 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:52:04.968 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 07:52:04.983 [main] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:52:04.992 [main] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:52:05.004 [main] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:52:05.008 [main] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 07:52:05.010 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 07:52:05.014 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 07:52:05.019 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 07:52:05.021 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:52:05.026 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 07:52:05.035 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 07:52:05.076 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 07:52:05.096 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 07:52:05.111 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 07:52:05.132 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 07:52:05.156 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 07:52:05.163 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 07:52:05.167 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 07:52:05.180 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 07:52:05.193 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 07:52:05.201 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 07:52:05.217 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:52:05.221 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:52:05.226 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 07:52:05.246 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:52:06.937 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 07:52:09.274 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-07 07:52:09.564 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-07 07:52:09.577 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0
2025-11-07 07:52:09.584 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-07 07:52:09.590 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-07 07:52:09.898 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 07:52:09.954 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (cpf, nome, telefone, id) 
    values
        (?, ?, ?, ?)
2025-11-07 07:52:09.962 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:52:10.069 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 07:52:10.076 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:52:10.081 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco_id, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:52:10.096 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco_base, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:52:12.101 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 07:52:14.430 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 07:52:14.705 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 07:52:15.838 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-07 07:52:16.185 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 07:52:16.816 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 07:52:17.151 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 07:52:18.135 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-07 07:52:18.369 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 07:52:18.370 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 07:52:18.371 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 07:52:18.374 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-07 07:52:18.375 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-07 07:52:18.378 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-07 07:52:18.561 [main] INFO  [] c.d.d.i.EnderecoControllerIntegrationTest - Started EnderecoControllerIntegrationTest in 35.402 seconds (process running for 41.075)
2025-11-07 07:52:18.594 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:52:18.628 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:52:18.642 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:52:18.860 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:52:18.882 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:52:20.446 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:52:20.545 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:52:20.590 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:52:20.615 [main] DEBUG [535009c51e244ed7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 07:52:20.650 [main] DEBUG [535009c51e244ed7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:52:20.696 [main] DEBUG [535009c51e244ed7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@226c7787 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENTE')]
2025-11-07 07:52:20.705 [main] DEBUG [535009c51e244ed7] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 07:52:20.846 [main] DEBUG [535009c51e244ed7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:52:20.850 [main] DEBUG [535009c51e244ed7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6a41bd82]
2025-11-07 07:52:20.881 [main] DEBUG [535009c51e244ed7] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 07:52:20.963 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:52:20.966 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:52:20.984 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:52:20.987 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:52:20.990 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:52:20.992 [main] DEBUG [d3a610cde9e44f31] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 07:52:20.995 [main] DEBUG [d3a610cde9e44f31] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:52:20.998 [main] DEBUG [d3a610cde9e44f31] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:52:21.008 [main] DEBUG [d3a610cde9e44f31] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    left join
        usuario u1_0 
            on u1_0.id=e1_0.usuario_id 
    where
        u1_0.id=?
2025-11-07 07:52:21.100 [main] DEBUG [d3a610cde9e44f31] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:52:21.101 [main] DEBUG [d3a610cde9e44f31] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.deliverytech.delivery.dto.EnderecoDTO@12a33a8e]]
2025-11-07 07:52:21.329 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:52:21.335 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:52:21.337 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:52:21.367 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:52:21.370 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:52:21.385 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/enderecos
2025-11-07 07:52:21.388 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:52:21.391 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/enderecos
2025-11-07 07:52:21.396 [main] DEBUG [a3216d49280947f8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#adicionarNovoEndereco(EnderecoDTO)
2025-11-07 07:52:21.538 [main] DEBUG [a3216d49280947f8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.EnderecoDTO@24549b57]
2025-11-07 07:52:21.621 [main] DEBUG [a3216d49280947f8] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:52:21.625 [main] DEBUG [a3216d49280947f8] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:52:21.685 [main] DEBUG [a3216d49280947f8] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 07:52:21.705 [main] DEBUG [a3216d49280947f8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:52:21.711 [main] DEBUG [a3216d49280947f8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.EnderecoDTO@19b3daf4]
2025-11-07 07:52:22.183 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2211b44f, started on Fri Nov 07 07:51:45 BRT 2025
2025-11-07 07:52:37.622 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:52:37.716 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:52:37.718 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:52:37.722 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:52:37.725 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:52:37.727 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:52:37.730 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:52:37.732 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:52:37.734 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:52:37.737 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:52:37.739 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:52:37.741 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:52:37.746 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 07:52:37.753 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 07:58:10.689 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 70802 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 07:58:10.691 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 07:58:10.692 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 07:58:10.776 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-07 07:58:10.777 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-07 07:58:13.531 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:58:13.534 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 07:58:13.799 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 248 ms. Found 9 JPA repository interfaces.
2025-11-07 07:58:13.826 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 07:58:13.828 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 07:58:13.854 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:58:13.857 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:58:13.858 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:58:13.858 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:58:13.859 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:58:13.859 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:58:13.860 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:58:13.860 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:58:13.862 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 07:58:13.863 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2025-11-07 07:58:15.489 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 07:58:15.507 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 07:58:15.512 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 07:58:15.513 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 07:58:15.595 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 07:58:15.597 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4818 ms
2025-11-07 07:58:16.520 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 07:58:16.521 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 07:58:16.522 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 07:58:17.489 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 07:58:17.530 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 07:58:17.760 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 07:58:17.763 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 07:58:17.809 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 07:58:19.361 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 07:58:19.366 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 07:58:19.366 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 07:58:19.366 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 07:58:19.367 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 07:58:19.367 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 07:58:19.368 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 07:58:19.368 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 07:58:19.369 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 07:58:19.369 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 07:58:19.376 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 07:58:19.387 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:58:19.396 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:58:19.405 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:58:19.412 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 07:58:19.415 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 07:58:19.420 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 07:58:19.430 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 07:58:19.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 07:58:19.436 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 07:58:19.445 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 07:58:19.466 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 07:58:19.470 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 07:58:19.475 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 07:58:19.477 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 07:58:19.482 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 07:58:19.485 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 07:58:19.489 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 07:58:19.491 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 07:58:19.493 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 07:58:19.498 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 07:58:19.501 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:58:19.520 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 07:58:19.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 07:58:19.534 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 07:58:20.650 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 07:58:22.688 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 07:58:23.472 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 07:58:23.599 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 07:58:24.104 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 07:58:24.304 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 07:58:24.522 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 07:58:24.738 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 07:58:25.395 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 07:58:25.621 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 07:58:25.707 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 07:58:25.742 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 07:58:25.774 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 16.269 seconds (process running for 17.273)
2025-11-07 07:58:25.786 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:58:25.814 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:58:25.832 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:58:28.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:58:29.298 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 07:58:29.299 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 07:58:49.072 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 07:58:49.156 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:49.167 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:49.205 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=d22aa3dc0e911e6d9171a00370ac7b7d
2025-11-07 07:58:50.049 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 07:58:50.053 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:50.063 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:50.072 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 07:58:50.432 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:50.434 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:50.435 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:50.437 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:51.109 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 07:58:51.111 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:51.112 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:51.114 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 07:58:51.650 [http-nio-8080-exec-5] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 07:58:51.659 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 07:58:51.661 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 07:58:51.664 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 07:58:51.666 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 07:58:51.673 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4262b1de
2025-11-07 07:58:51.690 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@471403ee
2025-11-07 07:58:51.692 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 07:58:51.698 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 37 ms
2025-11-07 07:58:51.707 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 07:58:51.710 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:51.710 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:53.288 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.291 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:53.293 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:53.297 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.732 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.736 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:53.740 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:53.744 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.753 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.757 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.759 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:53.759 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:53.761 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:53.762 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.763 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.772 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:53.774 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:53.776 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.796 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:53.799 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 07:58:53.882 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 07:58:53.883 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:53.884 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:53.886 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 07:58:53.903 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 07:58:53.905 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:53.907 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:53.911 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 07:58:53.939 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 07:58:53.988 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:53.989 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:53.990 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 07:58:53.994 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 07:58:53.995 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:53.996 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.000 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 07:58:54.002 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.002 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 07:58:54.009 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.010 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.010 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.012 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 07:58:54.006 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 07:58:54.011 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 07:58:54.069 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 07:58:54.072 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 07:58:54.078 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.078 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.079 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.080 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.080 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 07:58:54.081 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 07:58:54.125 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 07:58:54.126 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.127 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.132 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 07:58:54.137 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 07:58:54.139 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.139 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.140 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 07:58:54.373 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 07:58:54.374 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.374 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.375 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 07:58:54.490 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 07:58:54.491 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.492 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.495 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 07:58:54.522 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 07:58:54.523 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.524 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.525 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 07:58:54.525 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 07:58:54.526 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.526 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 07:58:54.526 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.528 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.529 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.529 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 07:58:54.531 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 07:58:54.540 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 07:58:54.541 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.542 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.545 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 07:58:54.561 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 07:58:54.564 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.566 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.573 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 07:58:54.582 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 07:58:54.586 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 07:58:54.586 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 07:58:54.587 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.587 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.588 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.588 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 07:58:54.589 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.590 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.591 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.594 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 07:58:54.594 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 07:58:54.598 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 07:58:54.600 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.600 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.602 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 07:58:54.621 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 07:58:54.622 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.623 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.624 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 07:58:54.630 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 07:58:54.631 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.631 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.634 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 07:58:54.645 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 07:58:54.645 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 07:58:54.647 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.647 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.648 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.649 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 07:58:54.651 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:54.658 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 07:58:54.727 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 07:58:54.728 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 07:58:54.728 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:58:55.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:58:55.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:58:55.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:58:57.293 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:59:09.521 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 07:59:09.695 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T10:59:09Z, a difference of 402694 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 07:59:09.696 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 07:59:09.697 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 07:59:09.699 [http-nio-8080-exec-10] DEBUG [88aee2e82e3b4743] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 07:59:09.702 [http-nio-8080-exec-10] DEBUG [88aee2e82e3b4743] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 07:59:09.903 [http-nio-8080-exec-10] DEBUG [88aee2e82e3b4743] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@1e6bb18a]
2025-11-07 07:59:10.266 [http-nio-8080-exec-10] DEBUG [88aee2e82e3b4743] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:59:10.308 [http-nio-8080-exec-10] DEBUG [88aee2e82e3b4743] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:59:10.464 [http-nio-8080-exec-10] DEBUG [88aee2e82e3b4743] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 07:59:10.515 [http-nio-8080-exec-10] DEBUG [88aee2e82e3b4743] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:59:10.516 [http-nio-8080-exec-10] DEBUG [88aee2e82e3b4743] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@74793c87]
2025-11-07 07:59:10.534 [http-nio-8080-exec-10] DEBUG [88aee2e82e3b4743] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 07:59:25.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:59:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:59:25.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:59:44.003 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 07:59:44.010 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 07:59:44.012 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 07:59:44.030 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 07:59:44.031 [http-nio-8080-exec-8] DEBUG [38ec03f8038d415c] o.s.web.servlet.DispatcherServlet - GET "/api/enderecos/meus", parameters={}
2025-11-07 07:59:44.032 [http-nio-8080-exec-8] DEBUG [38ec03f8038d415c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 07:59:44.034 [http-nio-8080-exec-8] DEBUG [38ec03f8038d415c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:59:44.055 [http-nio-8080-exec-8] DEBUG [38ec03f8038d415c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 07:59:44.064 [http-nio-8080-exec-8] DEBUG [38ec03f8038d415c] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    left join
        usuario u1_0 
            on u1_0.id=e1_0.usuario_id 
    where
        u1_0.id=?
2025-11-07 07:59:44.113 [http-nio-8080-exec-8] DEBUG [38ec03f8038d415c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 07:59:44.113 [http-nio-8080-exec-8] DEBUG [38ec03f8038d415c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.deliverytech.delivery.dto.EnderecoDTO@82e5e5b]]
2025-11-07 07:59:44.119 [http-nio-8080-exec-8] DEBUG [38ec03f8038d415c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 07:59:45.712 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 07:59:55.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 07:59:55.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 07:59:55.774 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 07:59:58.563 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:00:25.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:00:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:00:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:00:27.129 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:00:55.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:00:55.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:00:55.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:01:25.355 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:01:25.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:01:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:01:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:01:28.645 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:01:55.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:01:55.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:01:55.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:01:57.306 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:02:13.828 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/enderecos
2025-11-07 08:02:13.839 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:02:13.842 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:02:13.853 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/enderecos
2025-11-07 08:02:13.854 [http-nio-8080-exec-5] DEBUG [259a753351d74714] o.s.web.servlet.DispatcherServlet - POST "/api/enderecos", parameters={}
2025-11-07 08:02:13.854 [http-nio-8080-exec-5] DEBUG [259a753351d74714] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#adicionarNovoEndereco(EnderecoDTO)
2025-11-07 08:02:13.858 [http-nio-8080-exec-5] DEBUG [259a753351d74714] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.EnderecoDTO@6727bfbb]
2025-11-07 08:02:13.892 [http-nio-8080-exec-5] DEBUG [259a753351d74714] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 08:02:13.894 [http-nio-8080-exec-5] DEBUG [259a753351d74714] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 08:02:13.947 [http-nio-8080-exec-5] DEBUG [259a753351d74714] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:02:13.958 [http-nio-8080-exec-5] DEBUG [259a753351d74714] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:02:14.026 [http-nio-8080-exec-5] DEBUG [259a753351d74714] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 08:02:14.044 [http-nio-8080-exec-5] WARN  [259a753351d74714] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-07 08:02:14.044 [http-nio-8080-exec-5] ERROR [259a753351d74714] o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:1 */ 'SP', NULL, NULL, '01001000', CAST(1 AS BIGINT), CAST(4 AS BIGINT), '123', 'Restaurante Pizza Palace', 'Centro', 'CidadePizza', NULL, 'Rua das Pizzas')"; SQL statement:
/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]
2025-11-07 08:02:14.066 [http-nio-8080-exec-5] DEBUG [259a753351d74714] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 08:02:14.111 [http-nio-8080-exec-5] DEBUG [259a753351d74714] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:02:14.112 [http-nio-8080-exec-5] DEBUG [259a753351d74714] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@2b7541cb]
2025-11-07 08:02:14.117 [http-nio-8080-exec-5] WARN  [259a753351d74714] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:1 */ 'SP', NULL, NULL, '01001000', CAST(1 AS BIGINT), CAST(4 AS BIGINT), '123', 'Restaurante Pizza Palace', 'Centro', 'CidadePizza', NULL, 'Rua das Pizzas')"; SQL statement:<EOL>/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]] [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; SQL [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; constraint [PRIMARY KEY]]
2025-11-07 08:02:14.117 [http-nio-8080-exec-5] DEBUG [259a753351d74714] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 08:02:25.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:02:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:02:25.774 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:02:30.917 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:02:48.503 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/enderecos
2025-11-07 08:02:48.523 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:02:48.534 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:02:48.606 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/enderecos
2025-11-07 08:02:48.618 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] o.s.web.servlet.DispatcherServlet - POST "/api/enderecos", parameters={}
2025-11-07 08:02:48.632 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#adicionarNovoEndereco(EnderecoDTO)
2025-11-07 08:02:48.634 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.EnderecoDTO@4b96d078]
2025-11-07 08:02:48.635 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 08:02:48.660 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 08:02:48.664 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:02:48.670 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:02:48.678 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 08:02:48.680 [http-nio-8080-exec-8] WARN  [cfaeda55f92d4dcb] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-07 08:02:48.680 [http-nio-8080-exec-8] ERROR [cfaeda55f92d4dcb] o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:2 */ 'SP', NULL, NULL, '04538133', CAST(2 AS BIGINT), CAST(5 AS BIGINT), '456', 'Restaurante Burger King', 'BairroLanche', 'CidadeBurger', NULL, U&'Av. dos Hamb\\00fargueres')"; SQL statement:
/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]
2025-11-07 08:02:48.683 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 08:02:48.684 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:02:48.685 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4f57b390]
2025-11-07 08:02:48.691 [http-nio-8080-exec-8] WARN  [cfaeda55f92d4dcb] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.ENDERECO(ID) ( /* key:2 */ 'SP', NULL, NULL, '04538133', CAST(2 AS BIGINT), CAST(5 AS BIGINT), '456', 'Restaurante Burger King', 'BairroLanche', 'CidadeBurger', NULL, U&'Av. dos Hamb\\00fargueres')"; SQL statement:<EOL>/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero [23505-232]] [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; SQL [/* insert for com.deliverytech.delivery.entity.Endereco */insert into endereco (apelido,bairro,cep,cidade,complemento,estado,latitude,longitude,numero,rua,usuario_id,id) values (?,?,?,?,?,?,?,?,?,?,?,default)]; constraint [PRIMARY KEY]]
2025-11-07 08:02:48.692 [http-nio-8080-exec-8] DEBUG [cfaeda55f92d4dcb] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 08:02:55.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:02:55.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:02:55.775 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:02:59.330 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:03:25.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:03:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:03:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:03:33.098 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:03:55.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:03:55.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:03:55.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:04:08.544 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:04:25.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:04:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:04:25.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:04:36.929 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:04:55.771 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:04:55.774 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:04:55.775 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:04:57.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:05:15.444 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 08:05:15.472 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 08:05:15.486 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:05:15.497 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 08:05:15.503 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 08:05:15.540 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:05:15.543 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:05:15.553 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:05:15.561 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:05:15.574 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:05:15.579 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:05:15.593 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:05:15.602 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:05:15.605 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:05:15.607 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:05:15.609 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:05:15.656 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:05:15.674 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 08:05:15.681 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 08:05:17.270 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 70802 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:05:17.270 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:05:17.270 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:05:18.042 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:05:18.042 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:05:18.092 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 9 JPA repository interfaces.
2025-11-07 08:05:18.096 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:05:18.096 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:05:18.105 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:18.105 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:18.105 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:18.106 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:18.106 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:18.106 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:18.106 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:18.107 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:18.107 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:18.107 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-07 08:05:18.390 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:05:18.392 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:05:18.392 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:05:18.392 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:05:18.409 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:05:18.409 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1129 ms
2025-11-07 08:05:18.736 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:05:18.737 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:05:18.737 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:05:18.892 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:05:18.893 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-07 08:05:18.897 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn11: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:05:18.897 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-07 08:05:18.898 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:05:19.462 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:05:19.463 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:05:19.463 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:05:19.463 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:05:19.463 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:05:19.466 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:05:19.467 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:05:19.467 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:05:19.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:05:19.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:05:19.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:05:19.474 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:05:19.477 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:05:19.478 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:05:19.480 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:05:19.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:05:19.483 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:05:19.489 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:05:19.493 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:05:19.495 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:05:19.497 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:05:19.500 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:05:19.503 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:05:19.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:05:19.508 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:05:19.511 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:05:19.514 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:05:19.517 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:05:19.520 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:05:19.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:05:19.525 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:05:19.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:05:19.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:05:19.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:05:19.537 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:05:20.252 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 08:05:20.767 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 08:05:20.877 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 08:05:21.279 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 08:05:21.528 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 08:05:21.618 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 08:05:21.708 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 08:05:22.541 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 08:05:22.689 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 08:05:22.748 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 08:05:22.753 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 08:05:22.774 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:05:22.775 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.65 seconds (process running for 434.274)
2025-11-07 08:05:22.777 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:05:22.779 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:05:22.785 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 08:05:24.097 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 08:05:24.099 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 08:05:24.100 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:05:24.101 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 08:05:24.101 [Thread-7] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 08:05:24.824 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:05:24.834 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:05:24.835 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:05:24.836 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:05:24.837 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:05:24.838 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:05:24.839 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:05:24.839 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:05:24.840 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:05:24.841 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:05:24.842 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:05:24.843 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:05:24.846 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:05:24.847 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-07 08:05:24.852 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-07 08:05:26.045 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 70802 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:05:26.066 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:05:26.067 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:05:26.880 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:05:26.882 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:05:27.071 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 177 ms. Found 9 JPA repository interfaces.
2025-11-07 08:05:27.095 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:05:27.095 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:05:27.107 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:27.107 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:27.108 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:27.108 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:27.108 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:27.108 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:27.109 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:27.109 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:27.109 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:05:27.109 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-11-07 08:05:27.803 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:05:27.806 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:05:27.806 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:05:27.807 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:05:27.842 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:05:27.843 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1774 ms
2025-11-07 08:05:28.257 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:05:28.259 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:05:28.260 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:05:28.440 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:05:28.442 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-07 08:05:28.445 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn21: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:05:28.445 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-07 08:05:28.446 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:05:28.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:05:28.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:05:28.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:05:28.822 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:05:28.822 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:05:28.822 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:05:28.822 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:05:28.823 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:05:28.823 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:05:28.823 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:05:28.824 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:05:28.826 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:05:28.828 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:05:28.829 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:05:28.831 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:05:28.831 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:05:28.833 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:05:28.835 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:05:28.837 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:05:28.838 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:05:28.840 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:05:28.842 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:05:28.844 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:05:28.846 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:05:28.848 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:05:28.850 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:05:28.852 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:05:28.854 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:05:28.856 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:05:28.858 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:05:28.859 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:05:28.861 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:05:28.863 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:05:28.864 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:05:28.868 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:05:29.578 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 08:05:30.355 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 08:05:30.436 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 08:05:30.756 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 08:05:31.094 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 08:05:31.367 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 08:05:31.682 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 08:05:32.316 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 08:05:32.461 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 08:05:32.518 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 08:05:32.528 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 08:05:32.560 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.576 seconds (process running for 444.06)
2025-11-07 08:05:32.569 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 08:05:32.571 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:05:32.573 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:05:32.574 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:05:34.540 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:05:35.545 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 08:05:35.545 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 08:05:36.614 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 08:05:36.614 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 08:05:36.615 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 08:05:36.615 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 08:05:36.615 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 08:05:36.617 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7121a46
2025-11-07 08:05:36.618 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@436131b3
2025-11-07 08:05:36.618 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 08:05:36.619 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-07 08:05:36.623 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/enderecos
2025-11-07 08:05:36.705 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:05:36.707 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:05:36.720 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/enderecos
2025-11-07 08:05:36.721 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] o.s.web.servlet.DispatcherServlet - POST "/api/enderecos", parameters={}
2025-11-07 08:05:36.721 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#adicionarNovoEndereco(EnderecoDTO)
2025-11-07 08:05:36.728 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.EnderecoDTO@14491563]
2025-11-07 08:05:36.740 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 08:05:36.744 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 08:05:36.749 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:05:36.751 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:05:36.765 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 08:05:36.823 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:05:36.824 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.EnderecoDTO@5f23d84a]
2025-11-07 08:05:36.833 [http-nio-8080-exec-1] DEBUG [fe46a80120374812] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 08:06:02.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:06:02.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:06:02.562 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:06:03.057 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:06:32.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:06:32.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:06:32.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:06:33.623 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:06:43.727 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 08:06:43.729 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 08:06:43.729 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 08:06:46.953 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 08:06:46.954 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 08:06:46.955 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 08:07:02.559 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:07:02.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:07:02.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:07:02.963 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:07:32.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:07:32.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:07:32.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:07:34.218 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:08:02.560 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:08:02.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:08:02.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:08:02.818 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:08:32.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:08:32.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:08:32.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:08:32.886 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:09:02.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:09:02.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:09:02.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:09:03.210 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:09:32.559 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:09:32.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:09:32.561 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:09:32.755 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:10:02.559 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:10:02.565 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:10:02.568 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:10:11.240 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:10:32.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:10:32.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:10:32.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:10:43.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:11:02.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:11:02.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:11:02.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:11:03.678 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:11:32.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:11:32.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:11:32.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:11:33.387 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:12:02.558 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:12:02.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:12:02.560 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:12:12.064 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 08:12:12.068 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 08:12:14.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:12:14.074 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:12:14.075 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:12:14.078 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:12:14.082 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:12:14.092 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:12:14.093 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:12:14.094 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:12:14.097 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:12:14.107 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:12:14.124 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:12:14.134 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:12:14.149 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:12:14.201 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-07 08:12:14.219 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-07 08:12:46.797 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:12:46.803 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:12:46.805 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:12:47.024 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-07 08:12:47.025 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-07 08:12:52.486 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:12:52.501 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:12:53.253 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 709 ms. Found 9 JPA repository interfaces.
2025-11-07 08:12:53.348 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:12:53.354 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:12:53.430 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:12:53.437 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:12:53.438 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:12:53.441 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:12:53.441 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:12:53.442 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:12:53.447 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:12:53.449 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:12:53.450 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:12:53.452 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 0 Redis repository interfaces.
2025-11-07 08:12:55.222 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:12:55.238 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:12:55.242 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:12:55.243 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:12:55.301 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:12:55.302 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 8260 ms
2025-11-07 08:12:57.013 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:12:57.014 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:12:57.015 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:12:59.023 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:12:59.128 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-07 08:12:59.755 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:12:59.759 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-07 08:12:59.934 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:13:02.792 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:13:02.796 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:13:02.797 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:13:02.797 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:13:02.798 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:13:02.798 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:13:02.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:13:02.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:13:02.802 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:13:02.803 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:13:02.824 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:13:02.872 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:13:02.899 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:13:02.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:13:02.936 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:13:02.956 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:13:02.962 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:13:02.967 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:13:02.980 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:13:02.993 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:13:03.000 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:13:03.211 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:13:03.222 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:13:03.239 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:13:03.270 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:13:03.281 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:13:03.284 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:13:03.287 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:13:03.294 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:13:03.298 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:13:03.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:13:03.311 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:13:03.315 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:13:03.318 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:13:03.330 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:13:05.407 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-07 08:13:07.778 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 08:13:08.822 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 08:13:08.950 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 08:13:09.533 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 08:13:09.735 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 08:13:09.899 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 08:13:10.303 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 08:13:11.873 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 08:13:12.510 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 08:13:12.770 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 08:13:12.818 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 08:13:12.905 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 28.069 seconds (process running for 29.189)
2025-11-07 08:13:12.951 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:13:13.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:13:13.113 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:13:16.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:13:17.521 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 08:13:17.521 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 08:13:42.879 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:13:42.881 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:13:42.882 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:13:43.683 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:14:12.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:14:12.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:14:12.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:14:18.454 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:14:32.843 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 08:14:32.845 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 08:14:32.852 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 08:14:32.852 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 08:14:32.853 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 08:14:32.857 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@218dda80
2025-11-07 08:14:32.867 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1c440a9e
2025-11-07 08:14:32.868 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 08:14:32.868 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 16 ms
2025-11-07 08:14:32.930 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 08:14:33.176 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T11:14:33Z, a difference of 1326167 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 08:14:33.185 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 08:14:33.257 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 08:14:33.283 [http-nio-8080-exec-2] DEBUG [989bb365eacb42b6] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 08:14:33.287 [http-nio-8080-exec-2] DEBUG [989bb365eacb42b6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 08:14:33.400 [http-nio-8080-exec-2] DEBUG [989bb365eacb42b6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@18ec2589]
2025-11-07 08:14:34.029 [http-nio-8080-exec-2] DEBUG [989bb365eacb42b6] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:14:34.097 [http-nio-8080-exec-2] DEBUG [989bb365eacb42b6] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:14:34.321 [http-nio-8080-exec-2] DEBUG [989bb365eacb42b6] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 08:14:34.389 [http-nio-8080-exec-2] DEBUG [989bb365eacb42b6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:14:34.392 [http-nio-8080-exec-2] DEBUG [989bb365eacb42b6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@49dd1ba]
2025-11-07 08:14:34.437 [http-nio-8080-exec-2] DEBUG [989bb365eacb42b6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 08:14:42.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:14:42.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:14:42.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:14:55.394 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 08:14:55.404 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:14:55.406 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:14:55.419 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 08:14:55.420 [http-nio-8080-exec-3] DEBUG [eeab43e11b3144bb] o.s.web.servlet.DispatcherServlet - GET "/api/enderecos/meus", parameters={}
2025-11-07 08:14:55.421 [http-nio-8080-exec-3] DEBUG [eeab43e11b3144bb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 08:14:55.423 [http-nio-8080-exec-3] DEBUG [eeab43e11b3144bb] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 08:14:55.449 [http-nio-8080-exec-3] DEBUG [eeab43e11b3144bb] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 08:14:55.456 [http-nio-8080-exec-3] DEBUG [eeab43e11b3144bb] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    left join
        usuario u1_0 
            on u1_0.id=e1_0.usuario_id 
    where
        u1_0.id=?
2025-11-07 08:14:55.562 [http-nio-8080-exec-3] DEBUG [eeab43e11b3144bb] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:14:55.564 [http-nio-8080-exec-3] DEBUG [eeab43e11b3144bb] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.deliverytech.delivery.dto.EnderecoDTO@274328b1]]
2025-11-07 08:14:55.599 [http-nio-8080-exec-3] DEBUG [eeab43e11b3144bb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 08:14:59.413 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:15:12.876 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:15:12.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:15:12.879 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:15:25.998 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:15:42.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:15:42.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:15:42.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:15:43.722 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:16:02.381 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:16:02.383 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 08:16:02.384 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 08:16:12.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:16:12.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:16:12.879 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:16:13.111 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:16:35.712 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:16:35.719 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:16:35.721 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:16:35.738 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:16:35.739 [http-nio-8080-exec-7] DEBUG [3b2c2f346e734c63] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:16:35.740 [http-nio-8080-exec-7] DEBUG [3b2c2f346e734c63] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:16:35.780 [http-nio-8080-exec-7] DEBUG [3b2c2f346e734c63] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@47f0d7eb]
2025-11-07 08:16:35.958 [http-nio-8080-exec-7] DEBUG [3b2c2f346e734c63] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-07 08:16:35.970 [http-nio-8080-exec-7] DEBUG [3b2c2f346e734c63] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:16:35.971 [http-nio-8080-exec-7] DEBUG [3b2c2f346e734c63] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@72268b60]
2025-11-07 08:16:35.980 [http-nio-8080-exec-7] WARN  [3b2c2f346e734c63] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.PedidoResponseDTO>> com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO): [Field error in object 'pedidoDTO' on field 'itens[0].precoUnitario': rejected value [null]; codes [NotNull.pedidoDTO.itens[0].precoUnitario,NotNull.pedidoDTO.itens.precoUnitario,NotNull.itens[0].precoUnitario,NotNull.itens.precoUnitario,NotNull.precoUnitario,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.itens[0].precoUnitario,itens[0].precoUnitario]; arguments []; default message [itens[0].precoUnitario]]; default message [Preço unitário é obrigatório]] ]
2025-11-07 08:16:35.980 [http-nio-8080-exec-7] DEBUG [3b2c2f346e734c63] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 08:16:42.876 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:16:42.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:16:42.881 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:16:44.341 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:17:12.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:17:12.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:17:12.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:17:20.379 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:17:42.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:17:42.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:17:42.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:17:44.681 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:18:12.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:18:12.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:18:12.879 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:18:34.854 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:18:42.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:18:42.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:18:42.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:18:43.109 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:19:12.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:19:12.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:19:12.879 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:19:14.194 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:19:42.887 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:19:42.888 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:19:42.889 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:19:43.037 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:20:12.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:20:12.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:20:12.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:20:18.600 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:20:42.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:20:42.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:20:42.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:20:46.670 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:21:12.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:21:12.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:21:12.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:21:31.012 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:21:42.875 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:21:42.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:21:42.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:21:43.185 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:22:09.530 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 8 class path changes (0 additions, 0 deletions, 8 modifications)
2025-11-07 08:22:09.549 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 08:22:09.550 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:22:09.552 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 08:22:09.556 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 08:22:09.586 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:22:09.591 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:22:09.596 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:22:09.599 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:22:09.602 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:22:09.605 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:22:09.616 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:22:09.618 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:22:09.625 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:22:09.629 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:22:09.632 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:22:09.687 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:22:09.694 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-07 08:22:09.748 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-07 08:22:11.037 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:22:11.038 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:22:11.038 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:22:12.030 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:22:12.030 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:22:12.096 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 9 JPA repository interfaces.
2025-11-07 08:22:12.108 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:22:12.109 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:22:12.136 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:22:12.136 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:22:12.137 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:22:12.138 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:22:12.139 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:22:12.140 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:22:12.142 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:22:12.143 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:22:12.144 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:22:12.144 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 0 Redis repository interfaces.
2025-11-07 08:22:12.572 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:22:12.575 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:22:12.575 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:22:12.575 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:22:12.591 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:22:12.591 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1544 ms
2025-11-07 08:22:12.902 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:22:12.903 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:22:12.903 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:22:13.132 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:22:13.135 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-07 08:22:13.138 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:22:13.139 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-07 08:22:13.141 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:22:13.544 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:22:13.545 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:22:13.545 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:22:13.545 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:22:13.546 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:22:13.546 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:22:13.547 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:22:13.547 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:22:13.547 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:22:13.547 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:22:13.548 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:22:13.550 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:22:13.552 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:22:13.554 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:22:13.555 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:22:13.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:22:13.560 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:22:13.562 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:22:13.564 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:22:13.566 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:22:13.576 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:22:13.577 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:22:13.579 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:22:13.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:22:13.583 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:22:13.586 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:22:13.589 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:22:13.593 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:22:13.595 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:22:13.596 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:22:13.599 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:22:13.602 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:22:13.604 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:22:13.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:22:13.612 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:22:14.485 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 08:22:14.933 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 08:22:15.147 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 08:22:15.659 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 08:22:16.337 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 08:22:16.490 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 08:22:16.708 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 08:22:17.764 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 08:22:17.914 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 08:22:17.958 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 08:22:17.961 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 08:22:17.977 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:22:17.978 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 7.082 seconds (process running for 574.262)
2025-11-07 08:22:17.979 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:22:17.980 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:22:17.983 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 08:22:19.881 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:22:20.904 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 08:22:20.904 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 08:22:47.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:22:47.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:22:47.979 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:22:48.545 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:23:02.246 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 08:23:02.246 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 08:23:02.247 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 08:23:02.247 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 08:23:02.247 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 08:23:02.256 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@504be2c2
2025-11-07 08:23:02.259 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5bb06f00
2025-11-07 08:23:02.259 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 08:23:02.260 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 14 ms
2025-11-07 08:23:02.262 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:23:02.344 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:23:02.347 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:23:02.363 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:23:02.364 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:23:02.365 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:23:02.378 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@414fb93f]
2025-11-07 08:23:02.441 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:23:02.448 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:23:02.542 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:23:02.545 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:23:02.549 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 08:23:02.557 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 08:23:02.569 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 08:23:02.573 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id=?
2025-11-07 08:23:02.579 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 08:23:02.584 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id=?
2025-11-07 08:23:02.586 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 08:23:02.639 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 08:23:02.663 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 08:23:02.666 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 08:23:02.670 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 08:23:02.751 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 08:23:02.772 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:23:02.773 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@30883f0b]
2025-11-07 08:23:02.789 [http-nio-8080-exec-2] DEBUG [43ff3d58071246eb] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 08:23:17.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:23:17.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:23:17.979 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:23:18.250 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:23:47.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:23:47.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:23:47.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:23:49.227 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:24:17.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:24:17.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:24:17.979 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:24:18.135 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:24:38.017 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:24:38.035 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:24:38.043 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:24:38.072 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:24:38.072 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:24:38.073 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:24:38.075 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@1b964e03]
2025-11-07 08:24:38.083 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:24:38.088 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:24:38.096 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:24:38.108 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:24:38.121 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 08:24:38.136 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 08:24:38.142 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 08:24:38.145 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id=?
2025-11-07 08:24:38.147 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 08:24:38.150 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 08:24:38.153 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 08:24:38.163 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 08:24:38.176 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 08:24:38.183 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:24:38.184 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@636a5041]
2025-11-07 08:24:38.192 [http-nio-8080-exec-4] DEBUG [88fd48c6f65240d7] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 08:24:47.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:24:47.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:24:47.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:24:51.812 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:24:51.817 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:24:51.839 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:24:51.868 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:24:51.869 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:24:51.872 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:24:51.875 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@612306ee]
2025-11-07 08:24:51.886 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:24:51.890 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:24:51.903 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:24:51.904 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:24:51.909 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 08:24:51.923 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 08:24:51.925 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 08:24:51.934 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id=?
2025-11-07 08:24:51.937 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 08:24:51.953 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 08:24:51.958 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 08:24:51.979 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 08:24:52.030 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 08:24:52.066 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:24:52.070 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@58019560]
2025-11-07 08:24:52.076 [http-nio-8080-exec-6] DEBUG [b8fbdc894f164658] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 08:24:52.470 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:25:17.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:25:17.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:25:17.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:25:25.729 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:25:47.938 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:25:47.946 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:25:47.948 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:25:47.978 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:25:47.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:25:47.999 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:25:47.994 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:25:48.004 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:25:48.005 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:25:48.010 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@3a2f5527]
2025-11-07 08:25:48.013 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:25:48.017 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:25:48.037 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:25:48.049 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:25:48.074 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 08:25:48.086 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 08:25:48.094 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 08:25:48.118 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id=?
2025-11-07 08:25:48.126 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 08:25:48.130 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 08:25:48.152 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 08:25:48.154 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 08:25:48.173 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 08:25:48.179 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:25:48.183 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@1158fd90]
2025-11-07 08:25:48.189 [http-nio-8080-exec-7] DEBUG [00c858f6f8914dbe] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 08:25:55.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:26:17.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:26:17.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:26:17.979 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:26:19.203 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:26:47.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:26:47.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:26:47.980 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:27:00.572 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:27:17.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:27:17.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:27:17.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:27:29.398 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:27:47.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:27:47.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:27:47.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:28:03.780 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:28:17.977 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:28:17.979 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:28:17.981 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:28:21.101 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 08:28:21.121 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 08:28:21.128 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:28:21.139 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 08:28:21.140 [Thread-7] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 08:28:27.234 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:28:27.246 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:28:27.250 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:28:27.282 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:28:27.296 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:28:27.321 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:28:27.332 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:28:27.353 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:28:27.372 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:28:27.457 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:28:27.471 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:28:27.479 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:28:27.489 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:28:27.493 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-07 08:28:27.644 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-07 08:28:28.616 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:28:28.616 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:28:28.616 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:28:29.935 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:28:29.935 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:28:29.979 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 9 JPA repository interfaces.
2025-11-07 08:28:29.989 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:28:29.990 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:28:29.998 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:29.998 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:29.998 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:29.998 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:29.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:29.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:29.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:29.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:29.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:29.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-07 08:28:30.435 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:28:30.440 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:28:30.440 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:28:30.441 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:28:30.460 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:28:30.460 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1830 ms
2025-11-07 08:28:31.068 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:28:31.069 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:28:31.069 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:28:31.289 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:28:31.290 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-07 08:28:31.293 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:28:31.293 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-07 08:28:31.294 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:28:31.551 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:28:31.551 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:28:31.551 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:28:31.552 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:28:31.552 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:28:31.552 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:28:31.553 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:28:31.553 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:28:31.553 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:28:31.553 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:28:31.554 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:28:31.556 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:31.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:31.560 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:31.561 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:28:31.562 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:28:31.564 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:28:31.566 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:28:31.567 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:31.569 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:28:31.570 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:28:31.572 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:28:31.574 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:28:31.576 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:28:31.577 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:28:31.579 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:28:31.590 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:28:31.601 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:28:31.605 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:28:31.612 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:28:31.618 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:28:31.627 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:28:31.630 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:28:31.652 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:28:31.663 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:28:32.286 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
2025-11-07 08:28:32.288 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:28:32.288 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:28:32.291 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:28:32.293 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:28:32.293 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:28:32.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:28:32.298 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:28:32.303 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:28:32.311 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:28:32.312 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:28:32.315 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:28:32.317 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:28:32.318 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-07 08:28:32.322 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-07 08:28:33.331 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-07 08:28:33.332 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-07 08:28:33.410 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 08:28:33.509 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1760)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 25 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:123)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1351)
	... 36 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Syntax error, insert "Finally" to complete TryStatement
	Syntax error on token "catch", Identifier expected
	usuarioIdLog cannot be resolved to a variable
	Syntax error on token "finally", delete this token
	sample cannot be resolved to a variable
	Syntax error on token "}", delete this token
	The method findByProdutoId(Long) is undefined for the type GrupoOpcionalRepository

	at com.deliverytech.delivery.service.impl.PedidoServiceImpl.<init>(PedidoServiceImpl.java:207)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 38 common frames omitted
2025-11-07 08:28:35.503 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:28:35.503 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:28:35.503 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:28:36.485 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:28:36.486 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:28:36.551 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 9 JPA repository interfaces.
2025-11-07 08:28:36.559 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:28:36.559 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:28:36.570 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:36.571 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:36.571 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:36.571 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:36.572 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:36.572 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:36.573 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:36.573 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:36.573 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:36.573 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-11-07 08:28:36.868 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:28:36.870 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:28:36.871 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:28:36.871 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:28:36.884 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:28:36.884 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1378 ms
2025-11-07 08:28:37.316 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:28:37.317 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:28:37.317 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:28:37.648 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:28:37.649 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-07 08:28:37.652 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:28:37.652 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-07 08:28:37.653 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:28:38.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:28:38.146 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:28:38.147 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:28:38.148 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:28:38.148 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:28:38.148 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:28:38.148 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:28:38.149 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:28:38.149 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:28:38.149 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:28:38.150 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:28:38.153 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:38.155 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:38.157 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:38.158 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:28:38.159 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:28:38.161 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:28:38.166 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:28:38.167 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:38.169 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:28:38.171 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:28:38.173 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:28:38.175 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:28:38.177 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:28:38.179 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:28:38.181 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:28:38.183 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:28:38.184 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:28:38.186 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:28:38.187 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:28:38.189 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:28:38.191 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:28:38.197 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:28:38.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:28:38.203 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:28:38.578 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
2025-11-07 08:28:38.579 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:28:38.579 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:28:38.580 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:28:38.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:28:38.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:28:38.582 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:28:38.582 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:28:38.583 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:28:38.584 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:28:38.585 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:28:38.585 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:28:38.586 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:28:38.587 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-07 08:28:38.587 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-07 08:28:39.596 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-07 08:28:39.597 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-07 08:28:39.612 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 08:28:39.616 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1760)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 25 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:123)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1351)
	... 36 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Syntax error, insert "Finally" to complete TryStatement
	Syntax error on token "catch", Identifier expected
	usuarioIdLog cannot be resolved to a variable
	Syntax error on token "finally", delete this token
	sample cannot be resolved to a variable
	Syntax error on token "}", delete this token
	The method findByProdutoId(Long) is undefined for the type GrupoOpcionalRepository
	Syntax error on token "}", delete this token

	at com.deliverytech.delivery.service.impl.PedidoServiceImpl.<init>(PedidoServiceImpl.java:207)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 38 common frames omitted
2025-11-07 08:28:56.177 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:28:56.177 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:28:56.177 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:28:56.979 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:28:56.979 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:28:57.024 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 9 JPA repository interfaces.
2025-11-07 08:28:57.028 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:28:57.028 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:28:57.036 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:57.037 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:57.037 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:57.037 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:57.037 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:57.038 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:57.038 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:57.038 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:57.038 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:28:57.039 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-07 08:28:57.470 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:28:57.471 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:28:57.471 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:28:57.471 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:28:57.485 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:28:57.485 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1305 ms
2025-11-07 08:28:57.769 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:28:57.772 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:28:57.772 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:28:58.074 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:28:58.076 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-07 08:28:58.078 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:28:58.079 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-07 08:28:58.079 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:28:58.386 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:28:58.387 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:28:58.388 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:28:58.388 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:28:58.388 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:28:58.389 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:28:58.389 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:28:58.390 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:28:58.391 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:28:58.391 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:28:58.392 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:28:58.394 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:58.396 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:58.398 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:58.399 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:28:58.401 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:28:58.402 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:28:58.405 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:28:58.406 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:28:58.409 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:28:58.412 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:28:58.414 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:28:58.417 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:28:58.418 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:28:58.420 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:28:58.422 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:28:58.425 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:28:58.428 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:28:58.430 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:28:58.441 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:28:58.444 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:28:58.445 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:28:58.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:28:58.449 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:28:58.452 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:28:58.872 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
2025-11-07 08:28:58.872 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:28:58.872 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:28:58.873 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:28:58.873 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:28:58.874 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:28:58.875 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:28:58.875 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:28:58.875 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:28:58.876 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:28:58.876 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:28:58.877 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:28:58.878 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:28:58.878 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-07 08:28:58.880 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-07 08:28:59.882 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-07 08:28:59.883 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-07 08:28:59.898 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 08:28:59.902 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1760)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 25 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:123)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1351)
	... 36 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Syntax error, insert "Finally" to complete TryStatement
	Syntax error on token "catch", Identifier expected
	usuarioIdLog cannot be resolved to a variable
	Syntax error on token "finally", delete this token
	sample cannot be resolved to a variable
	Syntax error on token "}", delete this token
	The method findByProdutoId(Long) is undefined for the type GrupoOpcionalRepository

	at com.deliverytech.delivery.service.impl.PedidoServiceImpl.<init>(PedidoServiceImpl.java:207)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 38 common frames omitted
2025-11-07 08:29:23.485 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:29:23.485 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:29:23.485 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:29:24.216 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:29:24.224 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:29:24.354 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 124 ms. Found 9 JPA repository interfaces.
2025-11-07 08:29:24.361 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:29:24.362 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:29:24.375 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:24.377 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:24.380 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:24.381 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:24.383 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:24.384 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:24.385 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:24.386 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:24.386 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:24.391 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
2025-11-07 08:29:24.925 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:29:24.926 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:29:24.926 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:29:24.927 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:29:24.943 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:29:24.944 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1456 ms
2025-11-07 08:29:25.262 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:29:25.262 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:29:25.262 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:29:25.462 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:29:25.464 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-07 08:29:25.469 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:29:25.469 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-07 08:29:25.470 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:29:25.856 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:29:25.868 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:29:25.869 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:29:25.869 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:29:25.870 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:29:25.870 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:29:25.875 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:29:25.876 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:29:25.877 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:29:25.877 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:29:25.878 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:29:25.908 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:29:25.917 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:29:25.919 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:29:25.920 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:29:25.921 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:29:25.929 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:29:25.943 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:29:25.953 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:29:25.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:29:25.973 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:29:25.975 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:29:26.000 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:29:26.008 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:29:26.016 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:29:26.018 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:29:26.028 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:29:26.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:29:26.053 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:29:26.061 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:29:26.076 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:29:26.085 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:29:26.089 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:29:26.105 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:29:26.114 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:29:28.532 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
2025-11-07 08:29:28.533 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:29:28.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:29:28.538 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:29:28.552 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:29:28.554 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:29:28.555 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:29:28.556 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:29:28.557 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:29:28.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:29:28.559 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:29:28.560 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:29:28.564 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:29:28.565 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-07 08:29:28.596 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-07 08:29:29.692 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-07 08:29:29.694 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-07 08:29:29.744 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 08:29:29.749 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1760)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 25 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:123)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1351)
	... 36 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Syntax error, insert "Finally" to complete TryStatement
	Syntax error on token "catch", Identifier expected
	usuarioIdLog cannot be resolved to a variable
	Syntax error on token "finally", delete this token
	sample cannot be resolved to a variable
	Syntax error on token "}", delete this token
	The method findByProdutoId(Long) is undefined for the type GrupoOpcionalRepository
	Syntax error, insert "}" to complete ClassBody

	at com.deliverytech.delivery.service.impl.PedidoServiceImpl.<init>(PedidoServiceImpl.java:207)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 38 common frames omitted
2025-11-07 08:29:31.206 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:29:31.206 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:29:31.207 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:29:31.839 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:29:31.839 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:29:31.891 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 9 JPA repository interfaces.
2025-11-07 08:29:31.896 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:29:31.897 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:29:31.909 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:31.910 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:31.911 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:31.911 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:31.912 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:31.914 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:31.916 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:31.917 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:31.918 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:29:31.918 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
2025-11-07 08:29:32.701 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:29:32.709 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:29:32.710 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:29:32.711 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:29:32.757 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:29:32.758 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1549 ms
2025-11-07 08:29:33.568 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:29:33.570 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:29:33.571 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:29:33.875 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:29:33.876 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-07 08:29:33.879 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:29:33.879 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-07 08:29:33.880 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:29:34.188 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:29:34.188 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:29:34.188 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:29:34.188 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:29:34.189 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:29:34.189 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:29:34.189 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:29:34.189 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:29:34.189 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:29:34.189 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:29:34.190 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:29:34.192 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:29:34.193 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:29:34.194 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:29:34.196 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:29:34.197 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:29:34.198 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:29:34.200 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:29:34.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:29:34.202 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:29:34.203 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:29:34.205 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:29:34.206 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:29:34.208 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:29:34.210 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:29:34.211 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:29:34.213 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:29:34.214 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:29:34.216 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:29:34.217 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:29:34.219 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:29:34.220 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:29:34.222 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:29:34.223 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:29:34.226 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:29:34.560 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
2025-11-07 08:29:34.560 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:29:34.560 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:29:34.561 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:29:34.562 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:29:34.562 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:29:34.563 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:29:34.563 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:29:34.563 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:29:34.564 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:29:34.564 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:29:34.564 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:29:34.565 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:29:34.566 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-07 08:29:34.570 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-07 08:29:35.573 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-07 08:29:35.574 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-07 08:29:35.589 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 08:29:35.594 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1760)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 25 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:123)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1351)
	... 36 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Syntax error, insert "Finally" to complete TryStatement
	Syntax error on token "catch", Identifier expected
	usuarioIdLog cannot be resolved to a variable
	Syntax error on token "finally", delete this token
	sample cannot be resolved to a variable
	Syntax error on token "}", delete this token
	The method findByProdutoId(Long) is undefined for the type GrupoOpcionalRepository

	at com.deliverytech.delivery.service.impl.PedidoServiceImpl.<init>(PedidoServiceImpl.java:207)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 38 common frames omitted
2025-11-07 08:31:37.100 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:31:37.100 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:31:37.100 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:31:38.109 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:31:38.109 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:31:38.181 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 69 ms. Found 9 JPA repository interfaces.
2025-11-07 08:31:38.207 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:31:38.209 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:31:38.251 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:31:38.252 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:31:38.253 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:31:38.261 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:31:38.264 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:31:38.297 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:31:38.306 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:31:38.309 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:31:38.312 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:31:38.315 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 104 ms. Found 0 Redis repository interfaces.
2025-11-07 08:31:38.796 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:31:38.800 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:31:38.800 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:31:38.801 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:31:38.815 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:31:38.815 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1711 ms
2025-11-07 08:31:39.108 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:31:39.109 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:31:39.109 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:31:39.302 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:31:39.303 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-07 08:31:39.306 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn70: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:31:39.306 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-07 08:31:39.308 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:31:39.522 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:31:39.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:31:39.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:31:39.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:31:39.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:31:39.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:31:39.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:31:39.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:31:39.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:31:39.524 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:31:39.524 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:31:39.525 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:31:39.526 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:31:39.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:31:39.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:31:39.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:31:39.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:31:39.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:31:39.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:31:39.537 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:31:39.539 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:31:39.540 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:31:39.541 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:31:39.542 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:31:39.544 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:31:39.545 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:31:39.546 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:31:39.547 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:31:39.548 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:31:39.550 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:31:39.552 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:31:39.553 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:31:39.554 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:31:39.555 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:31:39.557 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:31:40.392 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 08:31:41.268 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 08:31:41.333 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 08:31:41.816 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 08:31:42.454 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 08:31:42.881 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 08:31:43.334 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 08:31:43.950 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 08:31:44.066 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 08:31:44.109 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 08:31:44.112 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 08:31:44.129 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:31:44.129 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 7.094 seconds (process running for 1140.414)
2025-11-07 08:31:44.131 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:31:44.134 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 08:31:44.136 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:31:46.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:31:47.008 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 08:31:47.008 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 08:32:14.128 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:32:14.129 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:32:14.130 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:32:16.396 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:32:44.129 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:32:44.130 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:32:44.132 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:32:44.292 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:33:01.948 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 08:33:01.952 [Thread-12] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 08:33:01.964 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:33:01.966 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 08:33:01.966 [Thread-12] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 08:33:01.974 [Thread-12] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:33:01.974 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:33:01.976 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:33:01.978 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:33:01.981 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:33:01.984 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:33:01.986 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:33:01.988 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:33:01.992 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:33:01.994 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:33:01.998 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:33:02.005 [Thread-12] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:33:02.008 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-07 08:33:02.014 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-07 08:33:02.496 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:33:02.496 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:33:02.497 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:33:04.045 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:33:04.045 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:33:04.091 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.NoClassDefFoundError: List
2025-11-07 08:33:04.141 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 08:33:04.151 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
java.lang.NoClassDefFoundError: List
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3580)
	at java.base/java.lang.Class.privateGetPublicMethods(Class.java:3605)
	at java.base/java.lang.Class.getMethods(Class.java:2187)
	at org.springframework.data.util.ReactiveWrappers.usesReactiveType(ReactiveWrappers.java:141)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.isReactiveRepository(AbstractRepositoryMetadata.java:135)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.useRepositoryConfiguration(RepositoryConfigurationExtensionSupport.java:344)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:98)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:170)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:401)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:400)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:430)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:290)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: List
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:536)
	at java.base/java.lang.Class.forName(Class.java:515)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 31 common frames omitted
2025-11-07 08:33:05.659 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:33:05.660 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:33:05.660 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:33:06.446 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:33:06.447 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:33:06.474 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.NoClassDefFoundError: List
2025-11-07 08:33:06.492 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 08:33:06.498 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
java.lang.NoClassDefFoundError: List
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3580)
	at java.base/java.lang.Class.privateGetPublicMethods(Class.java:3605)
	at java.base/java.lang.Class.getMethods(Class.java:2187)
	at org.springframework.data.util.ReactiveWrappers.usesReactiveType(ReactiveWrappers.java:141)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.isReactiveRepository(AbstractRepositoryMetadata.java:135)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.useRepositoryConfiguration(RepositoryConfigurationExtensionSupport.java:344)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:98)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:170)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:401)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:400)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:430)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:290)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: List
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:536)
	at java.base/java.lang.Class.forName(Class.java:515)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 31 common frames omitted
2025-11-07 08:33:20.114 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:33:20.114 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:33:20.115 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:33:21.039 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:33:21.042 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:33:21.128 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 81 ms. Found 9 JPA repository interfaces.
2025-11-07 08:33:21.140 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:33:21.140 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:33:21.161 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:33:21.162 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:33:21.162 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:33:21.163 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:33:21.163 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:33:21.163 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:33:21.164 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:33:21.164 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:33:21.164 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:33:21.164 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2025-11-07 08:33:21.875 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:33:21.876 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:33:21.877 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:33:21.877 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:33:21.892 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:33:21.892 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1770 ms
2025-11-07 08:33:22.253 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:33:22.253 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:33:22.253 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:33:22.557 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:33:22.558 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-11-07 08:33:22.562 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn80: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:33:22.562 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-11-07 08:33:22.563 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:33:22.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:33:22.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:33:22.899 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:33:22.899 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:33:22.900 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:33:22.900 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:33:22.900 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:33:22.901 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:33:22.901 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:33:22.902 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:33:22.903 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:33:22.908 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:33:22.913 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:33:22.915 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:33:22.917 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:33:22.920 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:33:22.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:33:22.928 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:33:22.933 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:33:22.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:33:22.937 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:33:22.940 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:33:22.945 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:33:22.949 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:33:22.957 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:33:22.959 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:33:22.962 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:33:22.976 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:33:22.984 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:33:22.993 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:33:22.996 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:33:23.004 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:33:23.013 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:33:23.018 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:33:23.025 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:33:24.612 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 08:33:25.397 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 08:33:25.514 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 08:33:25.823 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 08:33:26.053 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 08:33:26.120 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 08:33:26.265 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 08:33:26.660 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 08:33:26.880 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 08:33:26.950 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 08:33:26.961 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 08:33:26.998 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 7.002 seconds (process running for 1243.282)
2025-11-07 08:33:27.005 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 08:33:27.017 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:33:27.020 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:33:27.022 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:33:28.731 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:33:29.737 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 08:33:29.738 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 08:33:37.926 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 08:33:37.927 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 08:33:37.927 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 08:33:37.927 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 08:33:37.927 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 08:33:37.929 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@232000db
2025-11-07 08:33:37.930 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@12bbbbf8
2025-11-07 08:33:37.930 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 08:33:37.930 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 08:33:37.932 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:33:38.032 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:33:38.037 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:33:38.098 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:33:38.108 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:33:38.115 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:33:38.195 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@6fbed65e]
2025-11-07 08:33:38.362 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:33:38.387 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:33:38.459 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:33:38.461 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:33:38.464 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 08:33:38.481 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 08:33:38.492 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 08:33:38.550 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?)
2025-11-07 08:33:38.562 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 08:33:38.575 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 08:33:38.681 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleBusinessException(BusinessException, WebRequest)
2025-11-07 08:33:38.754 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:33:38.755 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@539caa1c]
2025-11-07 08:33:38.766 [http-nio-8080-exec-1] WARN  [cf428ee88d814523] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.BusinessException: Seleção obrigatória para 'Escolha a Borda'. Mínimo: 1, Enviado: 0]
2025-11-07 08:33:38.775 [http-nio-8080-exec-1] DEBUG [cf428ee88d814523] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 08:33:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:33:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:33:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:33:56.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:33:57.750 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:34:26.991 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:34:26.992 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:34:26.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:34:26.994 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:34:29.518 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:34:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:34:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:34:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:34:56.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:34:57.994 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:35:26.991 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:35:26.992 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:35:26.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:35:26.995 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:35:38.592 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:35:56.991 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:35:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:35:56.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:35:56.994 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:35:57.280 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:36:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:36:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:36:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:36:26.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:36:28.025 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:36:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:36:56.992 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:36:56.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:36:56.995 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:36:57.372 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:37:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:37:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:37:26.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:37:26.995 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:37:27.370 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:37:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:37:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:37:56.991 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:37:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:37:58.013 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:38:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:38:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:38:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:38:26.994 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:38:34.332 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:38:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:38:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:38:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:38:56.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:38:57.815 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:39:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:39:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:39:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:39:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:39:27.816 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:39:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:39:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:39:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:39:56.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:39:57.831 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:40:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:40:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:40:26.991 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:40:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:40:28.704 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:40:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:40:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:40:56.991 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:40:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:40:58.449 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:41:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:41:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:41:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:41:26.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:41:27.313 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:41:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:41:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:41:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:41:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:41:58.078 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:42:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:42:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:42:27.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:42:27.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:42:29.233 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:42:48.856 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 08:42:48.863 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T11:42:48Z, a difference of 3021861 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 08:42:48.863 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 08:42:48.866 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 08:42:48.867 [http-nio-8080-exec-5] DEBUG [a78c9169325249f5] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 08:42:48.874 [http-nio-8080-exec-5] DEBUG [a78c9169325249f5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 08:42:48.886 [http-nio-8080-exec-5] DEBUG [a78c9169325249f5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@6341a0dc]
2025-11-07 08:42:49.040 [http-nio-8080-exec-5] DEBUG [a78c9169325249f5] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:42:49.042 [http-nio-8080-exec-5] DEBUG [a78c9169325249f5] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:42:49.163 [http-nio-8080-exec-5] DEBUG [a78c9169325249f5] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 08:42:49.174 [http-nio-8080-exec-5] DEBUG [a78c9169325249f5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:42:49.175 [http-nio-8080-exec-5] DEBUG [a78c9169325249f5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@7ab6c077]
2025-11-07 08:42:49.188 [http-nio-8080-exec-5] DEBUG [a78c9169325249f5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 08:42:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:42:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:42:56.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:42:57.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:43:06.187 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:43:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:43:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:43:26.991 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:43:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:43:27.095 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:43:27.102 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:43:27.103 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:43:27.113 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:43:27.114 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:43:27.114 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:43:27.117 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@1358de36]
2025-11-07 08:43:27.150 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:43:27.151 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:43:27.163 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:43:27.164 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:43:27.166 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 08:43:27.169 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 08:43:27.175 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleBusinessException(BusinessException, WebRequest)
2025-11-07 08:43:27.176 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:43:27.177 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@41301d9c]
2025-11-07 08:43:27.181 [http-nio-8080-exec-4] WARN  [c92fdb9c93f64f42] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.BusinessException: Endereço de entrega inválido. Pertence a outro usuário.]
2025-11-07 08:43:27.181 [http-nio-8080-exec-4] DEBUG [c92fdb9c93f64f42] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 08:43:37.271 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:43:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:43:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:43:56.991 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:43:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:43:57.941 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:43:57.947 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:43:57.949 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:43:57.961 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:43:57.962 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:43:57.962 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:43:57.966 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@145691ba]
2025-11-07 08:43:57.968 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:43:57.969 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:43:57.974 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:43:57.978 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:43:57.984 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 08:43:57.988 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 08:43:57.994 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 08:43:58.003 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?, ?)
2025-11-07 08:43:58.006 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 08:43:58.012 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 08:43:58.044 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 08:43:58.051 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 08:43:58.058 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 08:43:58.062 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 08:43:58.162 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 08:43:58.171 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:43:58.174 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@7e8f0a4d]
2025-11-07 08:43:58.190 [http-nio-8080-exec-8] DEBUG [9c50ba8a1c724fa7] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 08:43:59.662 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:44:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:44:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 66,67% (Limite: 5,00%)
2025-11-07 08:44:26.991 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:44:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:44:27.988 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:44:56.991 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:44:56.992 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 66,67% (Limite: 5,00%)
2025-11-07 08:44:56.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:44:56.994 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:44:58.595 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:45:23.039 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:45:23.045 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:45:23.047 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:45:23.052 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:45:23.053 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:45:23.054 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:45:23.056 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@2dabcf10]
2025-11-07 08:45:23.058 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:45:23.059 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:45:23.063 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:45:23.064 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:45:23.067 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 08:45:23.069 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 08:45:23.071 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 08:45:23.079 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?, ?)
2025-11-07 08:45:23.081 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 08:45:23.085 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 08:45:23.090 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 08:45:23.095 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 08:45:23.098 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 08:45:23.100 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 08:45:23.113 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 08:45:23.115 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:45:23.116 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@58bf2d85]
2025-11-07 08:45:23.118 [http-nio-8080-exec-10] DEBUG [313e8eb1e30b48f1] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 08:45:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:45:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-07 08:45:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:45:26.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:45:42.840 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:45:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:45:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-07 08:45:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:45:56.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:46:01.091 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:46:26.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:46:26.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-07 08:46:26.991 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:46:26.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:46:29.410 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:46:56.990 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:46:56.991 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 50,00% (Limite: 5,00%)
2025-11-07 08:46:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:46:56.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:46:58.080 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:47:09.538 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 08:47:09.561 [Thread-31] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 08:47:09.563 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:47:09.569 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 08:47:09.571 [Thread-31] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 08:47:09.579 [Thread-31] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:47:09.584 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:47:09.591 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:47:09.592 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:47:09.593 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:47:09.593 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:47:09.594 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:47:09.594 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:47:09.595 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:47:09.596 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:47:09.596 [Thread-31] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:47:09.598 [Thread-31] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:47:09.599 [Thread-31] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-11-07 08:47:09.621 [Thread-31] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-11-07 08:47:10.962 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:47:10.962 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:47:10.964 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:47:11.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:47:11.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:47:12.063 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 9 JPA repository interfaces.
2025-11-07 08:47:12.069 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:47:12.069 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:47:12.080 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:47:12.081 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:47:12.081 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:47:12.081 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:47:12.082 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:47:12.082 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:47:12.083 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:47:12.083 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:47:12.084 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:47:12.085 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-11-07 08:47:12.875 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:47:12.883 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:47:12.885 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:47:12.890 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:47:12.943 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:47:12.944 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1975 ms
2025-11-07 08:47:13.301 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:47:13.301 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:47:13.302 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:47:13.543 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:47:13.558 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-11-07 08:47:13.562 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn90: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:47:13.563 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-11-07 08:47:13.564 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:47:14.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:47:14.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:47:14.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:47:14.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:47:14.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:47:14.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:47:14.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:47:14.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:47:14.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:47:14.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:47:14.537 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:47:14.542 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:47:14.544 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:47:14.549 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:47:14.552 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:47:14.553 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:47:14.558 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:47:14.561 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:47:14.564 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:47:14.568 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:47:14.570 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:47:14.576 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:47:14.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:47:14.588 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:47:14.590 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:47:14.592 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:47:14.594 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:47:14.596 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:47:14.598 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:47:14.600 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:47:14.602 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:47:14.604 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:47:14.610 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:47:14.611 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:47:14.614 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:47:14.970 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
2025-11-07 08:47:14.970 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:47:14.971 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:47:14.972 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:47:14.972 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:47:14.973 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:47:14.973 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:47:14.974 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:47:14.975 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:47:14.976 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:47:14.976 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:47:14.977 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:47:14.978 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 08:47:14.978 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-11-07 08:47:14.982 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-11-07 08:47:15.986 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-07 08:47:15.987 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-07 08:47:16.032 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-07 08:47:16.049 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pedidoController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:15)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pedidoServiceImpl' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/service/impl/PedidoServiceImpl.class]: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1760)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 25 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.service.impl.PedidoServiceImpl]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:123)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1351)
	... 36 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	The type PedidoServiceImpl must implement the inherited abstract method PedidoService.buscarPedidosPorRestaurante(Long, StatusPedido)
	The type PedidoServiceImpl must implement the inherited abstract method PedidoService.atualizarStatusPedido(Long, StatusPedido)
	The type PedidoServiceImpl must implement the inherited abstract method PedidoService.cancelarPedido(Long)
	The type PedidoServiceImpl must implement the inherited abstract method PedidoService.listarMeusPedidos(Pageable)
	The type PedidoServiceImpl must implement the inherited abstract method PedidoService.buscarPedidoPorId(Long)
	The type PedidoServiceImpl must implement the inherited abstract method PedidoService.calcularTotalPedido(CalculoPedidoDTO)
	The type PedidoServiceImpl must implement the inherited abstract method PedidoService.buscarPedidosPorCliente(Long)
	The type PedidoServiceImpl must implement the inherited abstract method PedidoService.listarPedidos(StatusPedido, LocalDate, LocalDate, Pageable)
	Syntax error, insert "}" to complete ClassBody
	Syntax error, insert ")" to complete Expression
	Syntax error, insert ";" to complete Statement
	Syntax error, insert "}" to complete Block
	Syntax error, insert "Finally" to complete TryStatement
	Syntax error, insert "}" to complete MethodBody

	at com.deliverytech.delivery.service.impl.PedidoServiceImpl.<init>(PedidoServiceImpl.java:52)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 38 common frames omitted
2025-11-07 08:48:23.231 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 08:48:23.232 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 08:48:23.233 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 08:48:24.249 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:48:24.249 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 08:48:24.289 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 9 JPA repository interfaces.
2025-11-07 08:48:24.296 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 08:48:24.296 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 08:48:24.303 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:48:24.303 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:48:24.304 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:48:24.304 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:48:24.304 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:48:24.304 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:48:24.304 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:48:24.305 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:48:24.305 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 08:48:24.305 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 08:48:24.631 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 08:48:24.632 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 08:48:24.633 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 08:48:24.633 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 08:48:24.647 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 08:48:24.647 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1405 ms
2025-11-07 08:48:24.917 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 08:48:24.917 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 08:48:24.917 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 08:48:25.073 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 08:48:25.074 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-11-07 08:48:25.076 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn100: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 08:48:25.077 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-11-07 08:48:25.078 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 08:48:25.770 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 08:48:25.771 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 08:48:25.771 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 08:48:25.772 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 08:48:25.772 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 08:48:25.772 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 08:48:25.773 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 08:48:25.773 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 08:48:25.774 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 08:48:25.774 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 08:48:25.775 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 08:48:25.778 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:48:25.781 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:48:25.783 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:48:25.784 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 08:48:25.786 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 08:48:25.788 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 08:48:25.791 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 08:48:25.793 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 08:48:25.795 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 08:48:25.797 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 08:48:25.799 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 08:48:25.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 08:48:25.802 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 08:48:25.804 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 08:48:25.805 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 08:48:25.807 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 08:48:25.808 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 08:48:25.810 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 08:48:25.811 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 08:48:25.813 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 08:48:25.815 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:48:25.816 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 08:48:25.818 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 08:48:25.821 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 08:48:26.923 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 08:48:27.386 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 08:48:27.481 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 08:48:27.726 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 08:48:27.997 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 08:48:28.147 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 08:48:28.231 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 08:48:28.596 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 08:48:28.709 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 08:48:28.761 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 08:48:28.764 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 08:48:28.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:48:28.784 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.722 seconds (process running for 2145.069)
2025-11-07 08:48:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:48:28.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:48:28.789 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 08:48:34.227 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:48:35.234 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 08:48:35.234 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 08:48:39.002 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 08:48:39.002 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 08:48:39.003 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 08:48:39.004 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 08:48:39.004 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 08:48:39.008 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6391695a
2025-11-07 08:48:39.013 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1f50c42e
2025-11-07 08:48:39.013 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 08:48:39.013 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-11-07 08:48:39.018 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 08:48:39.141 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:48:39.143 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:48:39.173 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 08:48:39.174 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 08:48:39.176 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 08:48:39.194 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@194d87a]
2025-11-07 08:48:39.289 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:48:39.292 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 08:48:39.328 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 08:48:39.329 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:48:39.341 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 08:48:39.356 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 08:48:39.360 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 08:48:39.373 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?, ?)
2025-11-07 08:48:39.378 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 08:48:39.394 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 08:48:39.402 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleBusinessException(BusinessException, WebRequest)
2025-11-07 08:48:39.416 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:48:39.417 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@74dc08cc]
2025-11-07 08:48:39.425 [http-nio-8080-exec-2] WARN  [251f033bfc4f4e63] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.BusinessException: Seleção máxima excedida para 'Molho Extra'. Máximo: 3, Enviado: 4]
2025-11-07 08:48:39.425 [http-nio-8080-exec-2] DEBUG [251f033bfc4f4e63] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 08:48:58.784 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:48:58.784 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:48:58.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:48:58.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:49:01.642 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:49:28.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:49:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:49:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:49:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:49:29.521 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:49:49.240 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 08:49:49.244 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T11:49:49Z, a difference of 3442243 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 08:49:49.245 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 08:49:49.251 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 08:49:49.252 [http-nio-8080-exec-4] DEBUG [1e8711e9fada4d19] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 08:49:49.255 [http-nio-8080-exec-4] DEBUG [1e8711e9fada4d19] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 08:49:49.258 [http-nio-8080-exec-4] DEBUG [1e8711e9fada4d19] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@4606b3c8]
2025-11-07 08:49:49.391 [http-nio-8080-exec-4] DEBUG [1e8711e9fada4d19] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:49:49.393 [http-nio-8080-exec-4] DEBUG [1e8711e9fada4d19] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:49:49.515 [http-nio-8080-exec-4] DEBUG [1e8711e9fada4d19] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 08:49:49.527 [http-nio-8080-exec-4] DEBUG [1e8711e9fada4d19] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:49:49.528 [http-nio-8080-exec-4] DEBUG [1e8711e9fada4d19] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@31d5a812]
2025-11-07 08:49:49.537 [http-nio-8080-exec-4] DEBUG [1e8711e9fada4d19] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 08:49:58.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:49:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:49:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:49:58.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:50:13.451 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:50:28.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:50:28.784 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:50:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:50:28.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:50:29.641 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:50:58.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:50:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:50:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:50:58.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:51:01.985 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:51:18.401 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos/meu-restaurante?status=PENDENTE
2025-11-07 08:51:18.405 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 08:51:18.410 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 08:51:28.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:51:28.797 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:51:28.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:51:28.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:51:29.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:51:47.173 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos/meu-restaurante?status=PENDENTE
2025-11-07 08:51:47.178 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:51:47.180 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:51:47.187 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos/meu-restaurante?status=PENDENTE
2025-11-07 08:51:47.188 [http-nio-8080-exec-8] DEBUG [0117b82dd6d24acc] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos/meu-restaurante?status=PENDENTE", parameters={masked}
2025-11-07 08:51:47.190 [http-nio-8080-exec-8] DEBUG [0117b82dd6d24acc] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 08:51:47.191 [http-nio-8080-exec-8] DEBUG [0117b82dd6d24acc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:51:47.191 [http-nio-8080-exec-8] DEBUG [0117b82dd6d24acc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6da6bec0]
2025-11-07 08:51:47.193 [http-nio-8080-exec-8] WARN  [0117b82dd6d24acc] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' is not supported]
2025-11-07 08:51:47.194 [http-nio-8080-exec-8] DEBUG [0117b82dd6d24acc] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 08:51:58.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:51:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:51:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:51:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:51:58.922 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:52:28.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:52:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:52:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:52:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:52:30.337 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:52:58.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:52:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:52:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:52:58.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:52:59.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:53:28.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:53:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:53:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:53:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:53:36.718 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:53:58.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:53:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:53:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:53:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:54:11.880 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:54:28.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:54:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:54:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:54:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:54:29.687 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:54:58.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:54:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:54:58.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:54:58.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:54:59.890 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:55:28.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:55:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:55:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:55:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:55:29.579 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:55:30.064 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 08:55:30.073 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 08:55:30.074 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 08:55:30.088 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 08:55:30.089 [http-nio-8080-exec-10] DEBUG [f552a341587d4e03] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos/restaurante/1?status=PENDENTE", parameters={masked}
2025-11-07 08:55:30.090 [http-nio-8080-exec-10] DEBUG [f552a341587d4e03] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 08:55:30.090 [http-nio-8080-exec-10] DEBUG [f552a341587d4e03] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 08:55:30.091 [http-nio-8080-exec-10] DEBUG [f552a341587d4e03] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@69174b0c]
2025-11-07 08:55:30.092 [http-nio-8080-exec-10] WARN  [f552a341587d4e03] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' is not supported]
2025-11-07 08:55:30.092 [http-nio-8080-exec-10] DEBUG [f552a341587d4e03] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 08:55:58.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:55:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:55:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:55:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:55:59.777 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:56:28.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:56:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:56:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:56:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:56:29.142 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 08:56:29.174 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 08:56:58.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:56:58.784 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:56:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:56:58.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:56:59.574 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:57:28.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:57:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:57:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:57:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:57:33.225 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:57:58.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:57:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:57:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:57:58.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:58:01.420 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:58:28.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:58:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:58:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:58:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:58:29.440 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:58:58.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:58:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:58:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:58:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:58:59.059 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:59:28.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:59:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:59:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:59:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:59:46.434 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 08:59:58.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 08:59:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 08:59:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 08:59:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 08:59:59.271 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 08:59:59.273 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 09:00:28.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:00:28.784 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 09:00:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:00:28.788 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:00:29.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:00:58.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:00:58.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 09:00:58.783 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:00:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:01:00.596 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:01:28.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:01:28.783 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 09:01:28.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:01:28.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:01:32.280 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-07 09:01:32.289 [Thread-41] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:01:32.290 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:01:32.293 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:01:32.294 [Thread-41] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:01:32.411 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:01:32.421 [Thread-41] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:01:32.422 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:01:32.440 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:01:32.444 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:01:32.449 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:01:32.456 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:01:32.459 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:01:32.462 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:01:32.468 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:01:32.471 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:01:32.484 [Thread-41] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:01:32.485 [Thread-41] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:01:32.486 [Thread-41] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-11-07 09:01:32.489 [Thread-41] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-11-07 09:01:33.030 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:01:33.030 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:01:33.031 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:01:33.885 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:01:33.885 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:01:33.941 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 54 ms. Found 9 JPA repository interfaces.
2025-11-07 09:01:33.946 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:01:33.946 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:01:33.958 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:01:33.959 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:01:33.959 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:01:33.960 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:01:33.961 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:01:33.962 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:01:33.963 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:01:33.964 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:01:33.965 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:01:33.966 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.
2025-11-07 09:01:34.699 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:01:34.702 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:01:34.703 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:01:34.703 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:01:34.734 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:01:34.735 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1692 ms
2025-11-07 09:01:35.673 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:01:35.675 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:01:35.675 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:01:35.956 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:01:35.958 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-11-07 09:01:35.961 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn110: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:01:35.962 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-11-07 09:01:35.963 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:01:36.676 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:01:36.676 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:01:36.676 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:01:36.676 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:01:36.676 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:01:36.677 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:01:36.677 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:01:36.677 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:01:36.677 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:01:36.677 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:01:36.678 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:01:36.680 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:01:36.682 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:01:36.683 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:01:36.684 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:01:36.686 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:01:36.687 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:01:36.689 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:01:36.691 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:01:36.697 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:01:36.700 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:01:36.702 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:01:36.704 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:01:36.718 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:01:36.723 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:01:36.730 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:01:36.736 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:01:36.743 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:01:36.750 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:01:36.756 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:01:36.762 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:01:36.769 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:01:36.774 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:01:36.780 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:01:36.788 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:01:38.493 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:01:38.944 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:01:39.030 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:01:39.270 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:01:39.436 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:01:39.565 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:01:39.699 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:01:40.123 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:01:40.370 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:01:40.449 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:01:40.454 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:01:40.510 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 7.625 seconds (process running for 2936.794)
2025-11-07 09:01:40.514 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:01:40.517 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:01:40.518 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:01:40.524 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:01:46.913 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:01:47.921 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:01:47.921 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:02:05.253 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 09:02:05.254 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 09:02:05.254 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 09:02:05.254 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 09:02:05.254 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 09:02:05.256 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5a1fbe3e
2025-11-07 09:02:05.257 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4e62c1ca
2025-11-07 09:02:05.257 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 09:02:05.257 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 09:02:05.260 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:02:05.359 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:02:05.361 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:02:05.384 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:02:05.388 [http-nio-8080-exec-1] DEBUG [34e8fe97f65248b7] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos/restaurante/1?status=PENDENTE", parameters={masked}
2025-11-07 09:02:05.392 [http-nio-8080-exec-1] DEBUG [34e8fe97f65248b7] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:02:05.404 [http-nio-8080-exec-1] DEBUG [34e8fe97f65248b7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:02:05.405 [http-nio-8080-exec-1] DEBUG [34e8fe97f65248b7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@5eb3bb3a]
2025-11-07 09:02:05.411 [http-nio-8080-exec-1] WARN  [34e8fe97f65248b7] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' is not supported]
2025-11-07 09:02:05.412 [http-nio-8080-exec-1] DEBUG [34e8fe97f65248b7] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:02:10.508 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:02:10.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:02:10.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:02:11.534 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:02:11.539 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:02:11.540 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:02:11.547 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:02:11.548 [http-nio-8080-exec-4] DEBUG [4771d88b33a9475a] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos/restaurante/1?status=PENDENTE", parameters={masked}
2025-11-07 09:02:11.549 [http-nio-8080-exec-4] DEBUG [4771d88b33a9475a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:02:11.550 [http-nio-8080-exec-4] DEBUG [4771d88b33a9475a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:02:11.550 [http-nio-8080-exec-4] DEBUG [4771d88b33a9475a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@5fdb2eb3]
2025-11-07 09:02:11.551 [http-nio-8080-exec-4] WARN  [4771d88b33a9475a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' is not supported]
2025-11-07 09:02:11.552 [http-nio-8080-exec-4] DEBUG [4771d88b33a9475a] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:02:18.756 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:02:40.508 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:02:40.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:02:40.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:02:56.091 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:03:10.508 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:03:10.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:03:10.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:03:11.309 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:03:12.276 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-07 09:03:12.294 [Thread-48] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:03:12.309 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:03:12.313 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:03:12.314 [Thread-48] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:03:12.323 [Thread-48] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:03:12.323 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:03:12.324 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:03:12.325 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:03:12.325 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:03:12.326 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:03:12.327 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:03:12.328 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:03:12.331 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:03:12.332 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:03:12.333 [Thread-48] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:03:12.335 [Thread-48] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:03:12.336 [Thread-48] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-11-07 09:03:12.349 [Thread-48] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-11-07 09:03:13.389 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:03:13.389 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:03:13.389 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:03:14.113 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:03:14.113 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:03:14.166 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 9 JPA repository interfaces.
2025-11-07 09:03:14.173 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:03:14.174 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:03:14.186 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:03:14.186 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:03:14.187 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:03:14.187 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:03:14.187 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:03:14.188 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:03:14.188 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:03:14.188 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:03:14.189 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:03:14.189 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-11-07 09:03:14.622 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:03:14.623 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:03:14.624 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:03:14.624 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:03:14.638 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:03:14.638 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1245 ms
2025-11-07 09:03:14.992 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:03:14.992 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:03:14.993 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:03:15.533 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:03:15.535 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Starting...
2025-11-07 09:03:15.540 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-13 - Added connection conn120: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:03:15.541 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Start completed.
2025-11-07 09:03:15.542 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:03:15.990 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:03:15.991 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:03:15.991 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:03:15.991 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:03:15.991 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:03:15.991 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:03:15.992 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:03:15.992 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:03:15.992 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:03:15.992 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:03:15.993 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:03:16.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:03:16.026 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:03:16.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:03:16.028 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:03:16.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:03:16.030 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:03:16.031 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:03:16.032 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:03:16.034 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:03:16.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:03:16.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:03:16.051 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:03:16.064 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:03:16.072 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:03:16.077 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:03:16.090 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:03:16.091 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:03:16.093 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:03:16.104 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:03:16.114 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:03:16.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:03:16.119 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:03:16.121 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:03:16.135 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:03:17.100 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:03:17.562 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:03:17.680 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:03:17.980 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:03:18.237 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:03:18.502 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:03:18.618 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:03:19.168 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:03:19.385 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:03:19.588 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:03:19.598 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:03:19.649 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:03:19.659 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:03:19.662 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:03:19.661 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.392 seconds (process running for 3035.945)
2025-11-07 09:03:19.672 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:03:21.181 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:03:22.185 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:03:22.185 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:03:25.313 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 09:03:25.313 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 09:03:25.313 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 09:03:25.314 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 09:03:25.314 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 09:03:25.316 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@350b5894
2025-11-07 09:03:25.316 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6b1f306f
2025-11-07 09:03:25.316 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 09:03:25.317 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-07 09:03:25.319 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:03:25.404 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:03:25.409 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:03:25.447 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:03:25.449 [http-nio-8080-exec-2] DEBUG [88452cc5856f498a] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/restaurante/1?status=PENDENTE", parameters={masked}
2025-11-07 09:03:25.451 [http-nio-8080-exec-2] DEBUG [88452cc5856f498a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorRestaurante(Long, StatusPedido)
2025-11-07 09:03:25.464 [http-nio-8080-exec-2] DEBUG [88452cc5856f498a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:03:25.494 [http-nio-8080-exec-2] DEBUG [88452cc5856f498a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:03:25.528 [http-nio-8080-exec-2] DEBUG [88452cc5856f498a] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        r1_0.id=? 
        and p1_0.status=?
2025-11-07 09:03:25.576 [http-nio-8080-exec-2] DEBUG [88452cc5856f498a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:03:25.577 [http-nio-8080-exec-2] DEBUG [88452cc5856f498a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@453680a7]
2025-11-07 09:03:25.608 [http-nio-8080-exec-2] DEBUG [88452cc5856f498a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:03:49.638 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:03:49.640 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:03:49.640 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:04:03.793 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:04:19.638 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:04:19.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:04:19.640 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:04:19.885 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:04:46.257 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:04:46.260 [Thread-52] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:04:46.260 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:04:46.261 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:04:46.262 [Thread-52] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:04:46.267 [Thread-52] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:04:46.268 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:04:46.269 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:04:46.270 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:04:46.271 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:04:46.272 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:04:46.272 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:04:46.273 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:04:46.274 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:04:46.274 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:04:46.275 [Thread-52] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:04:46.276 [Thread-52] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:04:46.277 [Thread-52] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-11-07 09:04:46.279 [Thread-52] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
2025-11-07 09:04:47.575 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:04:47.576 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:04:47.576 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:04:48.159 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:04:48.160 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:04:48.196 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 9 JPA repository interfaces.
2025-11-07 09:04:48.200 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:04:48.200 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:04:48.210 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:04:48.210 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:04:48.210 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:04:48.210 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:04:48.211 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:04:48.211 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:04:48.211 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:04:48.211 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:04:48.212 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:04:48.212 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-11-07 09:04:48.541 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:04:48.542 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:04:48.542 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:04:48.542 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:04:48.557 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:04:48.558 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 977 ms
2025-11-07 09:04:48.817 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:04:48.817 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:04:48.817 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:04:48.997 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:04:48.998 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Starting...
2025-11-07 09:04:49.001 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-14 - Added connection conn130: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:04:49.001 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Start completed.
2025-11-07 09:04:49.002 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:04:49.243 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:04:49.243 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:04:49.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:04:49.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:04:49.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:04:49.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:04:49.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:04:49.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:04:49.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:04:49.245 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:04:49.245 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:04:49.247 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:04:49.248 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:04:49.249 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:04:49.249 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:04:49.250 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:04:49.252 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:04:49.253 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:04:49.254 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:04:49.256 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:04:49.257 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:04:49.259 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:04:49.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:04:49.262 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:04:49.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:04:49.265 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:04:49.266 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:04:49.267 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:04:49.269 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:04:49.270 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:04:49.272 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:04:49.274 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:04:49.275 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:04:49.276 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:04:49.278 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:04:49.974 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:04:50.377 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:04:50.442 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:04:50.663 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:04:50.898 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:04:51.005 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:04:51.093 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:04:51.474 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:04:51.663 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:04:51.703 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:04:51.705 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:04:51.722 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:04:51.723 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.233 seconds (process running for 3128.007)
2025-11-07 09:04:51.725 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:04:51.726 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:04:51.730 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:04:54.108 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:04:55.111 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:04:55.112 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:04:56.713 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 09:04:56.713 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 09:04:56.713 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 09:04:56.713 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 09:04:56.713 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 09:04:56.715 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@65e3461f
2025-11-07 09:04:56.716 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@9344c8f
2025-11-07 09:04:56.716 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 09:04:56.716 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 09:04:56.717 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:04:56.782 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:04:56.784 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:04:56.809 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:04:56.812 [http-nio-8080-exec-2] DEBUG [624ba34884a94255] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/restaurante/1?status=PENDENTE", parameters={masked}
2025-11-07 09:04:56.814 [http-nio-8080-exec-2] DEBUG [624ba34884a94255] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorRestaurante(Long, StatusPedido)
2025-11-07 09:04:56.819 [http-nio-8080-exec-2] DEBUG [624ba34884a94255] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:04:56.823 [http-nio-8080-exec-2] DEBUG [624ba34884a94255] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:04:56.908 [http-nio-8080-exec-2] DEBUG [624ba34884a94255] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:04:56.914 [http-nio-8080-exec-2] DEBUG [624ba34884a94255] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:04:56.915 [http-nio-8080-exec-2] DEBUG [624ba34884a94255] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@1b1d2a4a]
2025-11-07 09:04:56.917 [http-nio-8080-exec-2] WARN  [624ba34884a94255] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags: [com.deliverytech.delivery.entity.ItemPedido.opcionaisSelecionados, com.deliverytech.delivery.entity.Pedido.itens]]
2025-11-07 09:04:56.918 [http-nio-8080-exec-2] DEBUG [624ba34884a94255] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:05:17.181 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-07 09:05:17.197 [Thread-56] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:05:17.201 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:05:17.206 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:05:17.207 [Thread-56] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:05:17.215 [Thread-56] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:05:17.215 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:05:17.217 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:05:17.217 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:05:17.219 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:05:17.224 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:05:17.225 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:05:17.229 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:05:17.232 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:05:17.236 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:05:17.236 [Thread-56] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:05:17.239 [Thread-56] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:05:17.248 [Thread-56] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown initiated...
2025-11-07 09:05:17.253 [Thread-56] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown completed.
2025-11-07 09:05:19.071 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:05:19.071 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:05:19.071 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:05:20.128 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:05:20.129 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:05:20.229 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 98 ms. Found 9 JPA repository interfaces.
2025-11-07 09:05:20.250 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:05:20.253 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:05:20.262 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:05:20.264 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:05:20.265 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:05:20.266 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:05:20.267 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:05:20.268 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:05:20.270 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:05:20.271 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:05:20.271 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:05:20.272 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2025-11-07 09:05:20.874 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:05:20.876 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:05:20.876 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:05:20.877 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:05:20.892 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:05:20.893 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1819 ms
2025-11-07 09:05:21.588 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:05:21.589 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:05:21.589 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:05:21.828 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:05:21.829 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Starting...
2025-11-07 09:05:21.831 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-15 - Added connection conn140: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:05:21.832 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Start completed.
2025-11-07 09:05:21.832 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:05:22.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:05:22.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:05:22.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:05:22.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:05:22.126 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:05:22.126 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:05:22.126 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:05:22.126 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:05:22.126 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:05:22.126 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:05:22.127 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:05:22.128 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:05:22.129 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:05:22.130 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:05:22.131 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:05:22.131 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:05:22.133 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:05:22.134 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:05:22.135 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:05:22.136 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:05:22.137 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:05:22.139 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:05:22.140 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:05:22.142 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:05:22.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:05:22.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:05:22.148 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:05:22.154 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:05:22.156 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:05:22.157 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:05:22.157 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:05:22.158 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:05:22.159 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:05:22.160 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:05:22.162 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:05:23.237 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:05:23.631 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:05:23.714 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:05:23.900 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:05:24.295 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:05:24.442 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:05:24.517 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:05:25.040 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:05:25.141 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:05:25.179 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:05:25.181 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:05:25.197 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:05:25.199 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:05:25.200 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.257 seconds (process running for 3161.484)
2025-11-07 09:05:25.201 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:05:25.205 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:05:25.888 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:05:26.892 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:05:26.892 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:05:55.198 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:05:55.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:05:55.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:05:56.247 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:06:25.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:06:25.199 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:06:25.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:06:26.275 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:06:55.199 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:06:55.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:06:55.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:06:56.312 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:06:56.425 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-07 09:06:56.431 [Thread-60] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:06:56.434 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:06:56.439 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:06:56.445 [Thread-60] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:06:56.459 [Thread-60] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:06:56.460 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:06:56.462 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:06:56.464 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:06:56.464 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:06:56.465 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:06:56.475 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:06:56.476 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:06:56.491 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:06:56.492 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:06:56.493 [Thread-60] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:06:56.495 [Thread-60] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:06:56.496 [Thread-60] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown initiated...
2025-11-07 09:06:56.500 [Thread-60] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown completed.
2025-11-07 09:06:57.530 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:06:57.531 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:06:57.532 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:06:58.826 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:06:58.826 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:06:58.950 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 120 ms. Found 9 JPA repository interfaces.
2025-11-07 09:06:58.977 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:06:58.978 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:06:59.004 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:06:59.006 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:06:59.008 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:06:59.010 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:06:59.013 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:06:59.014 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:06:59.016 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:06:59.021 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:06:59.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:06:59.024 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 0 Redis repository interfaces.
2025-11-07 09:06:59.646 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:06:59.649 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:06:59.650 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:06:59.651 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:06:59.674 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:06:59.675 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2130 ms
2025-11-07 09:07:00.069 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:07:00.071 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:07:00.071 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:07:00.260 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:07:00.262 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Starting...
2025-11-07 09:07:00.265 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-16 - Added connection conn150: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:07:00.265 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Start completed.
2025-11-07 09:07:00.266 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:07:00.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:07:00.610 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:07:00.611 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:07:00.612 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:07:00.612 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:07:00.612 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:07:00.612 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:07:00.613 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:07:00.613 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:07:00.613 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:07:00.614 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:07:00.616 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:07:00.618 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:07:00.620 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:07:00.622 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:07:00.623 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:07:00.625 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:07:00.626 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:07:00.627 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:07:00.628 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:07:00.629 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:07:00.630 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:07:00.632 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:07:00.635 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:07:00.636 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:07:00.638 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:07:00.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:07:00.641 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:07:00.642 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:07:00.643 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:07:00.645 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:07:00.646 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:07:00.648 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:07:00.649 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:07:00.651 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:07:01.554 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:07:01.968 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:07:02.093 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:07:02.293 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:07:02.490 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:07:02.603 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:07:02.754 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:07:03.332 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:07:03.481 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:07:03.537 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:07:03.544 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:07:03.565 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:07:03.566 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.094 seconds (process running for 3259.85)
2025-11-07 09:07:03.566 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:07:03.568 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:07:03.572 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:07:04.756 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:07:05.762 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:07:05.763 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:07:30.040 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:07:30.057 [Thread-64] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:07:30.077 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:07:30.083 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:07:30.099 [Thread-64] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:07:30.124 [Thread-64] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:07:30.125 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:07:30.127 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:07:30.137 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:07:30.141 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:07:30.143 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:07:30.144 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:07:30.149 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:07:30.153 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:07:30.154 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:07:30.155 [Thread-64] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:07:30.157 [Thread-64] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:07:30.159 [Thread-64] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown initiated...
2025-11-07 09:07:30.174 [Thread-64] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown completed.
2025-11-07 09:07:31.304 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:07:31.304 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:07:31.305 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:07:31.940 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:07:31.940 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:07:31.987 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 9 JPA repository interfaces.
2025-11-07 09:07:31.992 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:07:31.993 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:07:32.000 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:07:32.001 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:07:32.001 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:07:32.001 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:07:32.002 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:07:32.002 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:07:32.002 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:07:32.002 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:07:32.003 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:07:32.003 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-07 09:07:32.319 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:07:32.320 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:07:32.321 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:07:32.321 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:07:32.334 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:07:32.334 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1027 ms
2025-11-07 09:07:32.587 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:07:32.588 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:07:32.588 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:07:32.770 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:07:32.771 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Starting...
2025-11-07 09:07:32.774 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-17 - Added connection conn160: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:07:32.774 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Start completed.
2025-11-07 09:07:32.774 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:07:32.957 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:07:32.957 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:07:32.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:07:32.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:07:32.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:07:32.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:07:32.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:07:32.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:07:32.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:07:32.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:07:32.959 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:07:32.960 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:07:32.961 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:07:32.961 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:07:32.962 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:07:32.962 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:07:32.963 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:07:32.964 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:07:32.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:07:32.966 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:07:32.966 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:07:32.968 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:07:32.969 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:07:32.970 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:07:32.971 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:07:32.971 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:07:32.972 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:07:32.973 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:07:32.975 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:07:32.976 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:07:32.977 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:07:32.978 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:07:32.979 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:07:32.980 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:07:32.982 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:07:33.678 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:07:34.002 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:07:34.061 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:07:34.215 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:07:34.364 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:07:34.432 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:07:34.504 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:07:34.805 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:07:34.907 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:07:34.943 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:07:34.945 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:07:34.961 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:07:34.962 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.712 seconds (process running for 3291.246)
2025-11-07 09:07:34.963 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:07:34.964 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:07:34.968 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:07:36.059 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:07:37.063 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:07:37.063 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:07:46.614 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 09:07:46.614 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 09:07:46.614 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 09:07:46.614 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 09:07:46.615 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 09:07:46.616 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@21b48448
2025-11-07 09:07:46.617 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@73c6cab
2025-11-07 09:07:46.617 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 09:07:46.617 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 09:07:46.621 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:07:46.680 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:07:46.681 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:07:46.695 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:07:46.696 [http-nio-8080-exec-2] DEBUG [1b3a45c406e940bd] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/restaurante/1?status=PENDENTE", parameters={masked}
2025-11-07 09:07:46.698 [http-nio-8080-exec-2] DEBUG [1b3a45c406e940bd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorRestaurante(Long, StatusPedido)
2025-11-07 09:07:46.705 [http-nio-8080-exec-2] DEBUG [1b3a45c406e940bd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:07:46.711 [http-nio-8080-exec-2] DEBUG [1b3a45c406e940bd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:07:46.777 [http-nio-8080-exec-2] DEBUG [1b3a45c406e940bd] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:07:46.794 [http-nio-8080-exec-2] DEBUG [1b3a45c406e940bd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:07:46.795 [http-nio-8080-exec-2] DEBUG [1b3a45c406e940bd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@ec10806]
2025-11-07 09:07:46.796 [http-nio-8080-exec-2] WARN  [1b3a45c406e940bd] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags: [com.deliverytech.delivery.entity.ItemPedido.opcionaisSelecionados, com.deliverytech.delivery.entity.Pedido.itens]]
2025-11-07 09:07:46.797 [http-nio-8080-exec-2] DEBUG [1b3a45c406e940bd] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:07:58.710 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:07:58.716 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:07:58.724 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:07:58.742 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:07:58.744 [http-nio-8080-exec-4] DEBUG [316531c8fa794165] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/restaurante/1?status=PENDENTE", parameters={masked}
2025-11-07 09:07:58.751 [http-nio-8080-exec-4] DEBUG [316531c8fa794165] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorRestaurante(Long, StatusPedido)
2025-11-07 09:07:58.753 [http-nio-8080-exec-4] DEBUG [316531c8fa794165] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:07:58.755 [http-nio-8080-exec-4] DEBUG [316531c8fa794165] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:07:58.764 [http-nio-8080-exec-4] DEBUG [316531c8fa794165] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:07:58.765 [http-nio-8080-exec-4] DEBUG [316531c8fa794165] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:07:58.766 [http-nio-8080-exec-4] DEBUG [316531c8fa794165] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@35ed379f]
2025-11-07 09:07:58.771 [http-nio-8080-exec-4] WARN  [316531c8fa794165] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags: [com.deliverytech.delivery.entity.ItemPedido.opcionaisSelecionados, com.deliverytech.delivery.entity.Pedido.itens]]
2025-11-07 09:07:58.772 [http-nio-8080-exec-4] DEBUG [316531c8fa794165] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:08:04.960 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:08:04.960 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:08:04.961 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:08:06.562 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:08:34.960 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:08:34.960 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:08:34.961 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:08:50.104 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:09:04.959 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:09:04.960 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:09:04.961 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:09:06.330 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:09:13.197 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-07 09:09:13.201 [Thread-68] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:09:13.201 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:09:13.204 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:09:13.205 [Thread-68] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:09:13.217 [Thread-68] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:09:13.217 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:09:13.218 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:09:13.219 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:09:13.220 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:09:13.220 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:09:13.220 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:09:13.221 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:09:13.223 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:09:13.225 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:09:13.228 [Thread-68] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:09:13.230 [Thread-68] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:09:13.232 [Thread-68] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown initiated...
2025-11-07 09:09:13.242 [Thread-68] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown completed.
2025-11-07 09:09:14.744 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:09:14.744 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:09:14.745 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:09:15.304 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:09:15.304 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:09:15.348 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 9 JPA repository interfaces.
2025-11-07 09:09:15.354 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:09:15.354 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:09:15.365 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:15.365 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:15.365 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:15.366 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:15.366 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:15.366 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:15.366 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:15.367 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:15.367 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:15.367 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-11-07 09:09:15.759 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:09:15.760 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:09:15.760 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:09:15.760 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:09:15.776 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:09:15.777 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1030 ms
2025-11-07 09:09:16.050 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:09:16.051 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:09:16.051 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:09:16.223 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:09:16.224 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Starting...
2025-11-07 09:09:16.226 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-18 - Added connection conn170: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:09:16.226 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Start completed.
2025-11-07 09:09:16.227 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:09:16.471 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:09:16.471 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:09:16.471 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:09:16.471 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:09:16.472 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:09:16.472 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:09:16.472 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:09:16.472 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:09:16.472 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:09:16.472 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:09:16.473 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:09:16.474 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:09:16.475 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:09:16.476 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:09:16.476 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:09:16.477 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:09:16.478 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:09:16.480 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:09:16.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:09:16.482 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:09:16.484 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:09:16.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:09:16.488 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:09:16.489 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:09:16.490 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:09:16.494 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:09:16.496 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:09:16.499 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:09:16.500 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:09:16.501 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:09:16.503 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:09:16.504 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:09:16.505 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:09:16.507 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:09:16.509 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:09:17.601 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:09:18.239 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:09:18.305 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:09:18.499 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:09:18.683 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:09:18.794 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:09:18.943 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:09:19.365 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:09:19.509 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:09:19.554 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:09:19.557 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:09:19.581 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:09:19.582 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.884 seconds (process running for 3395.866)
2025-11-07 09:09:19.583 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:09:19.584 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:09:19.585 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:09:20.787 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:09:21.820 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:09:21.820 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:09:49.094 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:09:49.097 [Thread-72] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:09:49.098 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:09:49.099 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:09:49.099 [Thread-72] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:09:49.105 [Thread-72] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:09:49.106 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:09:49.107 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:09:49.108 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:09:49.108 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:09:49.109 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:09:49.109 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:09:49.110 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:09:49.110 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:09:49.110 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:09:49.111 [Thread-72] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:09:49.112 [Thread-72] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:09:49.113 [Thread-72] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown initiated...
2025-11-07 09:09:49.114 [Thread-72] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown completed.
2025-11-07 09:09:50.193 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:09:50.193 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:09:50.193 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:09:50.644 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:09:50.645 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:09:50.678 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 9 JPA repository interfaces.
2025-11-07 09:09:50.682 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:09:50.682 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:09:50.690 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:50.690 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:50.690 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:50.690 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:50.691 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:50.691 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:50.691 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:50.691 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:50.692 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:09:50.692 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 09:09:50.972 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:09:50.973 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:09:50.973 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:09:50.973 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:09:50.986 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:09:50.987 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 792 ms
2025-11-07 09:09:51.279 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:09:51.279 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:09:51.279 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:09:51.456 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:09:51.458 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Starting...
2025-11-07 09:09:51.469 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-19 - Added connection conn180: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:09:51.469 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Start completed.
2025-11-07 09:09:51.470 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:09:51.894 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:09:51.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:09:51.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:09:51.896 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:09:51.896 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:09:51.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:09:51.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:09:51.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:09:51.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:09:51.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:09:51.899 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:09:51.901 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:09:51.903 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:09:51.907 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:09:51.908 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:09:51.909 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:09:51.911 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:09:51.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:09:51.914 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:09:51.916 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:09:51.917 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:09:51.920 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:09:51.928 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:09:51.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:09:51.943 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:09:51.948 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:09:51.953 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:09:51.960 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:09:51.964 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:09:51.969 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:09:51.976 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:09:51.979 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:09:51.983 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:09:51.987 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:09:51.993 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:09:53.090 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:09:53.408 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:09:53.494 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:09:53.784 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:09:53.986 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:09:54.053 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:09:54.196 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:09:54.799 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:09:54.938 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:09:54.998 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:09:55.002 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:09:55.025 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:09:55.026 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.868 seconds (process running for 3431.31)
2025-11-07 09:09:55.026 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:09:55.031 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:09:55.033 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:09:57.181 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:09:58.189 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:09:58.189 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:10:02.806 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-07 09:10:02.818 [Thread-76] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:10:02.826 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:10:02.829 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:10:02.830 [Thread-76] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:10:02.864 [Thread-76] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:10:02.865 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:10:02.867 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:10:02.869 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:10:02.871 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:10:02.872 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:10:02.873 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:10:02.874 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:10:02.874 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:10:02.875 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:10:02.876 [Thread-76] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:10:02.878 [Thread-76] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:10:02.879 [Thread-76] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown initiated...
2025-11-07 09:10:02.881 [Thread-76] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown completed.
2025-11-07 09:10:04.265 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:10:04.265 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:10:04.266 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:10:05.416 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:10:05.417 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:10:05.466 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 9 JPA repository interfaces.
2025-11-07 09:10:05.475 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:10:05.476 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:10:05.484 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:10:05.484 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:10:05.485 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:10:05.485 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:10:05.486 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:10:05.486 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:10:05.486 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:10:05.487 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:10:05.487 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:10:05.488 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-11-07 09:10:05.873 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:10:05.874 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:10:05.874 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:10:05.874 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:10:05.889 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:10:05.889 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1618 ms
2025-11-07 09:10:06.189 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:10:06.189 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:10:06.189 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:10:06.479 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:10:06.480 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Starting...
2025-11-07 09:10:06.482 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-20 - Added connection conn190: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:10:06.483 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Start completed.
2025-11-07 09:10:06.483 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:10:06.806 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:10:06.808 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:10:06.809 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:10:06.809 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:10:06.810 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:10:06.811 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:10:06.812 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:10:06.813 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:10:06.814 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:10:06.815 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:10:06.816 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:10:06.819 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:10:06.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:10:06.824 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:10:06.826 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:10:06.827 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:10:06.829 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:10:06.832 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:10:06.834 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:10:06.835 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:10:06.836 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:10:06.837 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:10:06.839 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:10:06.841 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:10:06.843 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:10:06.847 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:10:06.848 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:10:06.849 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:10:06.850 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:10:06.851 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:10:06.852 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:10:06.853 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:10:06.854 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:10:06.856 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:10:06.862 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:10:07.886 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:10:08.406 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:10:08.466 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:10:08.606 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:10:08.745 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:10:08.803 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:10:08.866 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:10:09.187 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:10:09.293 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:10:09.333 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:10:09.335 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:10:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:10:09.352 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.203 seconds (process running for 3445.637)
2025-11-07 09:10:09.353 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:10:09.354 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:10:09.356 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:10:11.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:10:12.228 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:10:12.228 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:10:13.600 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 09:10:13.601 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 09:10:13.601 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 09:10:13.601 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 09:10:13.601 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 09:10:13.603 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5c8050ae
2025-11-07 09:10:13.603 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2f411e7e
2025-11-07 09:10:13.604 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 09:10:13.604 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 09:10:13.606 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:10:13.676 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:10:13.680 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:10:13.695 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:10:13.697 [http-nio-8080-exec-2] DEBUG [9f915c95c13f4af3] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/restaurante/1?status=PENDENTE", parameters={masked}
2025-11-07 09:10:13.698 [http-nio-8080-exec-2] DEBUG [9f915c95c13f4af3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorRestaurante(Long, StatusPedido)
2025-11-07 09:10:13.704 [http-nio-8080-exec-2] DEBUG [9f915c95c13f4af3] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:10:13.707 [http-nio-8080-exec-2] DEBUG [9f915c95c13f4af3] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:10:13.759 [http-nio-8080-exec-2] DEBUG [9f915c95c13f4af3] org.hibernate.SQL - 
    /* SELECT
        DISTINCT p 
    FROM
        Pedido p 
    LEFT JOIN
        
    FETCH
        p.restaurante r 
    LEFT JOIN
        
    FETCH
        p.itens i 
    WHERE
        p.restaurante.id = :restauranteId 
        AND (
            :status IS NULL 
            OR p.status = :status
        ) */ select
            distinct p1_0.id,
            p1_0.cliente_id,
            p1_0.data_pedido,
            p1_0.endereco_entrega_id,
            p1_0.entregador_id,
            i1_0.pedido_id,
            i1_0.id,
            i1_0.preco_unitario,
            i1_0.produto_id,
            i1_0.quantidade,
            i1_0.subtotal,
            p1_0.metodo_pagamento,
            p1_0.numero_pedido,
            p1_0.observacoes,
            p1_0.restaurante_id,
            r1_0.id,
            r1_0.ativo,
            r1_0.avaliacao,
            r1_0.categoria,
            r1_0.endereco_id,
            r1_0.horario_funcionamento,
            r1_0.nome,
            r1_0.taxa_entrega,
            r1_0.telefone,
            r1_0.tempo_entrega,
            p1_0.status,
            p1_0.subtotal,
            p1_0.taxa_entrega,
            p1_0.troco_para,
            p1_0.valor_total 
        from
            pedido p1_0 
        left join
            restaurante r1_0 
                on r1_0.id=p1_0.restaurante_id 
        left join
            itens_pedido i1_0 
                on p1_0.id=i1_0.pedido_id 
        where
            r1_0.id=? 
            and (
                ? is null 
                or p1_0.status=?
            )
2025-11-07 09:10:13.820 [http-nio-8080-exec-2] DEBUG [9f915c95c13f4af3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:10:13.820 [http-nio-8080-exec-2] DEBUG [9f915c95c13f4af3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@790be763]
2025-11-07 09:10:13.840 [http-nio-8080-exec-2] DEBUG [9f915c95c13f4af3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:10:39.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:10:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:10:39.355 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:10:40.445 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:11:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:11:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:11:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:11:10.332 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:11:39.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:11:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:11:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:11:41.178 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:12:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:12:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:12:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:12:10.852 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:12:39.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:12:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:12:39.353 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:12:40.428 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:13:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:13:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:13:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:13:10.385 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:13:20.791 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 09:13:20.795 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T12:13:20Z, a difference of 4853794 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 09:13:20.796 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:13:20.798 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 09:13:20.799 [http-nio-8080-exec-5] DEBUG [e74c2a77599449d9] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 09:13:20.799 [http-nio-8080-exec-5] DEBUG [e74c2a77599449d9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 09:13:20.803 [http-nio-8080-exec-5] DEBUG [e74c2a77599449d9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@6f137da0]
2025-11-07 09:13:20.954 [http-nio-8080-exec-5] DEBUG [e74c2a77599449d9] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:13:20.955 [http-nio-8080-exec-5] DEBUG [e74c2a77599449d9] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:13:21.085 [http-nio-8080-exec-5] DEBUG [e74c2a77599449d9] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 09:13:21.094 [http-nio-8080-exec-5] DEBUG [e74c2a77599449d9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:13:21.095 [http-nio-8080-exec-5] DEBUG [e74c2a77599449d9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@3003e14d]
2025-11-07 09:13:21.104 [http-nio-8080-exec-5] DEBUG [e74c2a77599449d9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:13:39.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:13:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:13:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:13:39.910 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:14:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:14:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:14:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:14:10.322 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:14:34.410 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 09:14:34.416 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:14:34.424 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:14:34.444 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 09:14:34.444 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 09:14:34.448 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 09:14:34.463 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@70c036e5]
2025-11-07 09:14:34.521 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:14:34.523 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:14:34.602 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 09:14:34.603 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:14:34.606 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 09:14:34.610 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 09:14:34.614 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 09:14:34.630 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?, ?)
2025-11-07 09:14:34.638 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 09:14:34.640 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 09:14:34.646 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 09:14:34.660 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 09:14:34.663 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 09:14:34.667 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 09:14:34.673 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 09:14:34.722 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 09:14:34.736 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:14:34.737 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@1bf5196]
2025-11-07 09:14:34.758 [http-nio-8080-exec-8] DEBUG [7f27545a2f774926] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 09:14:39.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:14:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:14:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:14:41.646 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:14:59.887 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 09:14:59.890 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T12:14:59Z, a difference of 4952890 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 09:14:59.890 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:14:59.892 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 09:14:59.893 [http-nio-8080-exec-9] DEBUG [98935403893f4ebc] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 09:14:59.900 [http-nio-8080-exec-9] DEBUG [98935403893f4ebc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 09:14:59.901 [http-nio-8080-exec-9] DEBUG [98935403893f4ebc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@39db5ff3]
2025-11-07 09:14:59.904 [http-nio-8080-exec-9] DEBUG [98935403893f4ebc] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:14:59.906 [http-nio-8080-exec-9] DEBUG [98935403893f4ebc] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:15:00.027 [http-nio-8080-exec-9] DEBUG [98935403893f4ebc] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 09:15:00.030 [http-nio-8080-exec-9] DEBUG [98935403893f4ebc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:15:00.030 [http-nio-8080-exec-9] DEBUG [98935403893f4ebc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@2a7e198c]
2025-11-07 09:15:00.031 [http-nio-8080-exec-9] DEBUG [98935403893f4ebc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:15:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:15:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:15:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:15:11.565 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:15:34.815 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:15:34.820 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:15:34.828 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:15:34.834 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/restaurante/1?status=PENDENTE
2025-11-07 09:15:34.834 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/restaurante/1?status=PENDENTE", parameters={masked}
2025-11-07 09:15:34.836 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorRestaurante(Long, StatusPedido)
2025-11-07 09:15:34.836 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:15:34.842 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:15:34.877 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] org.hibernate.SQL - 
    /* SELECT
        DISTINCT p 
    FROM
        Pedido p 
    LEFT JOIN
        
    FETCH
        p.restaurante r 
    LEFT JOIN
        
    FETCH
        p.itens i 
    WHERE
        p.restaurante.id = :restauranteId 
        AND (
            :status IS NULL 
            OR p.status = :status
        ) */ select
            distinct p1_0.id,
            p1_0.cliente_id,
            p1_0.data_pedido,
            p1_0.endereco_entrega_id,
            p1_0.entregador_id,
            i1_0.pedido_id,
            i1_0.id,
            i1_0.preco_unitario,
            i1_0.produto_id,
            i1_0.quantidade,
            i1_0.subtotal,
            p1_0.metodo_pagamento,
            p1_0.numero_pedido,
            p1_0.observacoes,
            p1_0.restaurante_id,
            r1_0.id,
            r1_0.ativo,
            r1_0.avaliacao,
            r1_0.categoria,
            r1_0.endereco_id,
            r1_0.horario_funcionamento,
            r1_0.nome,
            r1_0.taxa_entrega,
            r1_0.telefone,
            r1_0.tempo_entrega,
            p1_0.status,
            p1_0.subtotal,
            p1_0.taxa_entrega,
            p1_0.troco_para,
            p1_0.valor_total 
        from
            pedido p1_0 
        left join
            restaurante r1_0 
                on r1_0.id=p1_0.restaurante_id 
        left join
            itens_pedido i1_0 
                on p1_0.id=i1_0.pedido_id 
        where
            r1_0.id=? 
            and (
                ? is null 
                or p1_0.status=?
            )
2025-11-07 09:15:34.886 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 09:15:34.913 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] org.hibernate.SQL - 
    /* SELECT
        DISTINCT ip 
    FROM
        ItemPedido ip 
    LEFT JOIN
        
    FETCH
        ip.opcionaisSelecionados iso 
    LEFT JOIN
        
    FETCH
        iso.itemOpcional 
    WHERE
        ip IN :itens */ select
            distinct ip1_0.id,
            os1_0.item_pedido_id,
            os1_0.id,
            os1_0.item_opcional_id,
            io1_0.id,
            io1_0.grupo_opcional_id,
            io1_0.nome,
            io1_0.preco_adicional,
            os1_0.preco_registrado,
            ip1_0.pedido_id,
            ip1_0.preco_unitario,
            ip1_0.produto_id,
            ip1_0.quantidade,
            ip1_0.subtotal 
        from
            itens_pedido ip1_0 
        left join
            item_pedido_opcional os1_0 
                on ip1_0.id=os1_0.item_pedido_id 
        left join
            item_opcional io1_0 
                on io1_0.id=os1_0.item_opcional_id 
        where
            ip1_0.id in (?)
2025-11-07 09:15:34.918 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 09:15:34.920 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:15:34.927 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:15:34.928 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@19ba805]
2025-11-07 09:15:34.930 [http-nio-8080-exec-10] DEBUG [3b3b915d062b4290] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:15:39.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:15:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:15:39.353 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:15:43.144 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:16:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:16:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:16:09.353 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:16:14.566 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:16:39.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:16:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:16:39.354 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:16:40.946 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:16:55.581 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:16:55.582 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:16:55.582 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:17:06.970 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:17:06.974 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:17:06.975 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:17:06.979 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:17:06.980 [http-nio-8080-exec-4] DEBUG [00306aa6ae2f4e7e] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:17:06.981 [http-nio-8080-exec-4] DEBUG [00306aa6ae2f4e7e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:17:07.003 [http-nio-8080-exec-4] DEBUG [00306aa6ae2f4e7e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-07 09:17:07.004 [http-nio-8080-exec-4] DEBUG [00306aa6ae2f4e7e] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:17:07.010 [http-nio-8080-exec-4] DEBUG [00306aa6ae2f4e7e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:17:07.013 [http-nio-8080-exec-4] DEBUG [00306aa6ae2f4e7e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@7976b4cf]
2025-11-07 09:17:07.018 [http-nio-8080-exec-4] WARN  [00306aa6ae2f4e7e] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.PedidoResponseDTO>> com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO)]
2025-11-07 09:17:07.018 [http-nio-8080-exec-4] DEBUG [00306aa6ae2f4e7e] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:17:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:17:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:17:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:17:11.053 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:17:35.182 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:17:35.188 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:17:35.190 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:17:35.199 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:17:35.199 [http-nio-8080-exec-6] DEBUG [303fe58960354402] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:17:35.200 [http-nio-8080-exec-6] DEBUG [303fe58960354402] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:17:35.208 [http-nio-8080-exec-6] DEBUG [303fe58960354402] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@16f77177]
2025-11-07 09:17:35.211 [http-nio-8080-exec-6] DEBUG [303fe58960354402] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:17:35.280 [http-nio-8080-exec-6] DEBUG [303fe58960354402] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:17:35.281 [http-nio-8080-exec-6] DEBUG [303fe58960354402] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:17:35.281 [http-nio-8080-exec-6] DEBUG [303fe58960354402] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6b75217e]
2025-11-07 09:17:35.285 [http-nio-8080-exec-6] WARN  [303fe58960354402] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:17:35.285 [http-nio-8080-exec-6] DEBUG [303fe58960354402] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:17:39.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:17:39.353 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:17:39.354 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:17:40.297 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:18:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:18:09.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:18:09.353 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:18:11.092 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:18:39.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:18:39.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:18:39.359 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:18:39.584 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:19:09.351 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:19:09.410 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:19:09.411 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:19:09.570 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:19:39.352 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:19:39.353 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:19:39.354 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:19:42.283 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:19:42.959 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:19:42.963 [Thread-80] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:19:42.964 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:19:42.965 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:19:42.966 [Thread-80] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:19:42.971 [Thread-80] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:19:42.971 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:19:42.973 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:19:42.973 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:19:42.974 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:19:42.974 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:19:42.974 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:19:42.975 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:19:42.975 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:19:42.975 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:19:42.976 [Thread-80] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:19:42.977 [Thread-80] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:19:42.978 [Thread-80] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown initiated...
2025-11-07 09:19:42.979 [Thread-80] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown completed.
2025-11-07 09:19:43.755 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:19:43.756 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:19:43.756 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:19:44.904 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:19:44.904 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:19:44.944 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 9 JPA repository interfaces.
2025-11-07 09:19:44.948 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:19:44.948 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:19:44.954 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:19:44.955 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:19:44.955 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:19:44.955 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:19:44.956 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:19:44.956 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:19:44.956 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:19:44.956 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:19:44.957 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:19:44.957 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 09:19:45.801 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:19:45.805 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:19:45.808 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:19:45.810 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:19:45.860 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:19:45.864 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2105 ms
2025-11-07 09:19:46.585 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:19:46.586 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:19:46.586 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:19:47.027 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:19:47.029 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Starting...
2025-11-07 09:19:47.035 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-21 - Added connection conn200: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:19:47.036 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Start completed.
2025-11-07 09:19:47.037 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:19:47.444 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:19:47.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:19:47.448 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:19:47.454 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:19:47.456 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:19:47.464 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:19:47.465 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:19:47.465 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:19:47.465 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:19:47.465 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:19:47.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:19:47.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:19:47.473 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:19:47.474 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:19:47.475 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:19:47.477 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:19:47.491 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:19:47.493 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:19:47.495 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:19:47.496 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:19:47.498 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:19:47.499 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:19:47.500 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:19:47.503 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:19:47.512 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:19:47.513 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:19:47.515 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:19:47.519 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:19:47.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:19:47.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:19:47.542 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:19:47.547 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:19:47.554 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:19:47.573 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:19:47.579 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:19:48.852 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:19:49.404 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:19:49.530 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:19:50.244 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:19:50.648 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:19:50.786 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:19:50.875 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:19:51.326 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:19:51.470 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:19:51.516 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:19:51.519 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:19:51.539 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:19:51.541 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 7.836 seconds (process running for 4027.825)
2025-11-07 09:19:51.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:19:51.546 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:19:51.547 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:19:57.297 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-07 09:19:57.300 [Thread-84] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:19:57.300 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:19:57.301 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:19:57.302 [Thread-84] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:20:00.777 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:20:00.786 [Thread-84] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:20:00.786 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:20:00.787 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:20:00.787 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:20:00.788 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:20:00.788 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:20:00.788 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:20:00.789 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:20:00.789 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:20:00.789 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:20:00.790 [Thread-84] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:20:00.791 [Thread-84] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:20:00.792 [Thread-84] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown initiated...
2025-11-07 09:20:00.794 [Thread-84] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown completed.
2025-11-07 09:20:02.137 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:20:02.137 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:20:02.137 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:20:02.666 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:20:02.666 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:20:02.711 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 9 JPA repository interfaces.
2025-11-07 09:20:02.718 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:20:02.719 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:20:02.729 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:02.730 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:02.731 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:02.732 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:02.733 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:02.733 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:02.734 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:02.734 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:02.735 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:02.735 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2025-11-07 09:20:03.073 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:20:03.074 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:20:03.074 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:20:03.075 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:20:03.089 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:20:03.090 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 950 ms
2025-11-07 09:20:03.385 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:20:03.385 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:20:03.385 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:20:03.538 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:20:03.539 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Starting...
2025-11-07 09:20:03.541 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-22 - Added connection conn210: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:20:03.541 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Start completed.
2025-11-07 09:20:03.541 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:20:03.728 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:20:03.729 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:20:03.729 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:20:03.729 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:20:03.729 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:20:03.729 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:20:03.729 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:20:03.730 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:20:03.730 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:20:03.730 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:20:03.730 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:20:03.731 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:20:03.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:20:03.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:20:03.733 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:20:03.733 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:20:03.734 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:20:03.735 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:20:03.736 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:20:03.737 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:20:03.740 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:20:03.741 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:20:03.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:20:03.743 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:20:03.744 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:20:03.744 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:20:03.745 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:20:03.745 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:20:03.746 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:20:03.746 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:20:03.747 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:20:03.748 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:20:03.749 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:20:03.750 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:20:03.751 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:20:04.736 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:20:05.443 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:20:05.522 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:20:05.760 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:20:05.916 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:20:05.993 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:20:06.090 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:20:06.482 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:20:06.633 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:20:06.677 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:20:06.681 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:20:06.718 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.632 seconds (process running for 4043.002)
2025-11-07 09:20:06.728 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:20:06.731 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:20:06.734 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:20:06.749 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:20:09.087 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:20:10.091 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:20:10.091 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:20:36.715 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:20:36.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:20:36.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:20:46.240 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-07 09:20:46.244 [Thread-88] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:20:46.255 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:20:46.257 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:20:46.257 [Thread-88] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:20:52.655 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:20:52.668 [Thread-88] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:20:52.670 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:20:52.673 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:20:52.676 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:20:52.677 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:20:52.678 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:20:52.679 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:20:52.680 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:20:52.681 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:20:52.682 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:20:52.683 [Thread-88] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:20:52.684 [Thread-88] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:20:52.686 [Thread-88] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown initiated...
2025-11-07 09:20:52.688 [Thread-88] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown completed.
2025-11-07 09:20:53.468 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:20:53.468 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:20:53.468 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:20:54.210 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:20:54.210 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:20:54.272 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 9 JPA repository interfaces.
2025-11-07 09:20:54.278 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:20:54.278 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:20:54.286 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:54.287 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:54.287 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:54.288 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:54.288 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:54.288 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:54.289 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:54.289 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:54.289 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:20:54.290 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-11-07 09:20:54.664 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:20:54.665 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:20:54.666 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:20:54.666 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:20:54.680 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:20:54.680 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1210 ms
2025-11-07 09:20:54.926 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:20:54.926 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:20:54.926 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:20:55.058 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:20:55.059 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Starting...
2025-11-07 09:20:55.061 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-23 - Added connection conn220: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:20:55.061 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Start completed.
2025-11-07 09:20:55.062 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:20:55.240 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:20:55.243 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:20:55.243 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:20:55.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:20:55.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:20:55.245 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:20:55.245 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:20:55.245 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:20:55.246 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:20:55.246 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:20:55.247 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:20:55.249 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:20:55.253 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:20:55.255 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:20:55.256 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:20:55.257 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:20:55.259 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:20:55.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:20:55.262 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:20:55.263 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:20:55.265 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:20:55.267 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:20:55.268 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:20:55.269 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:20:55.270 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:20:55.271 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:20:55.272 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:20:55.273 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:20:55.274 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:20:55.275 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:20:55.276 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:20:55.277 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:20:55.278 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:20:55.279 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:20:55.281 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:20:55.986 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:20:56.627 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:20:56.780 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:20:57.475 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:20:58.349 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:20:58.713 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:20:58.956 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:20:59.478 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:20:59.591 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:20:59.633 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:20:59.635 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:20:59.655 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:20:59.657 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:20:59.657 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.221 seconds (process running for 4095.941)
2025-11-07 09:20:59.657 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:20:59.663 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:21:00.841 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:21:01.846 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:21:01.846 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:21:29.654 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:21:29.655 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:21:29.655 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:21:36.017 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:21:59.655 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:21:59.656 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:21:59.661 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:22:11.662 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:22:24.430 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:22:24.432 [Thread-92] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:22:24.433 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:22:24.434 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:22:24.435 [Thread-92] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:22:24.444 [Thread-92] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:22:24.444 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:22:24.445 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:22:24.445 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:22:24.446 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:22:24.446 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:22:24.446 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:22:24.446 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:22:24.447 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:22:24.447 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:22:24.447 [Thread-92] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:22:24.448 [Thread-92] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:22:24.449 [Thread-92] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown initiated...
2025-11-07 09:22:24.450 [Thread-92] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown completed.
2025-11-07 09:22:25.272 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:22:25.272 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:22:25.272 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:22:25.789 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:22:25.790 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:22:25.835 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 9 JPA repository interfaces.
2025-11-07 09:22:25.841 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:22:25.841 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:22:25.850 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:22:25.850 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:22:25.851 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:22:25.852 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:22:25.853 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:22:25.854 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:22:25.856 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:22:25.859 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:22:25.861 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:22:25.862 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.
2025-11-07 09:22:26.311 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:22:26.312 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:22:26.312 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:22:26.312 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:22:26.329 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:22:26.329 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1055 ms
2025-11-07 09:22:26.674 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:22:26.674 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:22:26.674 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:22:26.830 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:22:26.831 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Starting...
2025-11-07 09:22:26.833 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-24 - Added connection conn230: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:22:26.834 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Start completed.
2025-11-07 09:22:26.834 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:22:27.033 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:22:27.034 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:22:27.034 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:22:27.034 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:22:27.034 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:22:27.035 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:22:27.035 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:22:27.035 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:22:27.035 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:22:27.035 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:22:27.036 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:22:27.037 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:22:27.040 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:22:27.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:22:27.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:22:27.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:22:27.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:22:27.047 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:22:27.048 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:22:27.051 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:22:27.053 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:22:27.054 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:22:27.057 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:22:27.058 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:22:27.059 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:22:27.060 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:22:27.061 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:22:27.062 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:22:27.063 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:22:27.065 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:22:27.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:22:27.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:22:27.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:22:27.070 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:22:27.072 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:22:28.172 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:22:28.722 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:22:28.950 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:22:29.171 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:22:29.341 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:22:29.402 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:22:29.468 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:22:29.777 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:22:29.873 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:22:29.905 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:22:29.909 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:22:29.923 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:22:29.924 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.691 seconds (process running for 4186.208)
2025-11-07 09:22:29.925 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:22:29.925 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:22:29.928 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:22:47.168 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:22:48.172 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:22:48.172 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:22:59.923 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:22:59.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:22:59.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:23:00.180 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:23:29.923 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:23:29.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:23:29.925 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:23:31.704 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:23:59.923 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:23:59.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:23:59.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:24:02.314 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:24:05.807 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:24:05.810 [Thread-96] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:24:05.811 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:24:05.812 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:24:05.812 [Thread-96] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:24:05.820 [Thread-96] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:24:05.820 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:24:05.821 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:24:05.821 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:24:05.822 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:24:05.822 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:24:05.823 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:24:05.823 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:24:05.823 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:24:05.824 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:24:05.824 [Thread-96] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:24:05.825 [Thread-96] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:24:05.826 [Thread-96] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown initiated...
2025-11-07 09:24:05.827 [Thread-96] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown completed.
2025-11-07 09:24:06.548 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:24:06.548 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:24:06.548 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:24:06.989 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:24:06.989 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:24:07.018 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 9 JPA repository interfaces.
2025-11-07 09:24:07.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:24:07.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:24:07.029 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:07.029 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:07.029 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:07.030 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:07.030 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:07.030 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:07.030 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:07.030 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:07.031 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:07.031 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 09:24:07.323 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:24:07.324 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:24:07.324 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:24:07.324 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:24:07.337 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:24:07.337 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 787 ms
2025-11-07 09:24:07.572 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:24:07.573 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:24:07.573 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:24:07.698 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:24:07.698 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Starting...
2025-11-07 09:24:07.701 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-25 - Added connection conn240: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:24:07.701 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Start completed.
2025-11-07 09:24:07.702 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:24:07.911 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:24:07.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:24:07.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:24:07.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:24:07.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:24:07.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:24:07.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:24:07.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:24:07.913 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:24:07.913 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:24:07.913 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:24:07.914 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:24:07.915 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:24:07.916 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:24:07.917 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:24:07.918 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:24:07.918 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:24:07.920 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:24:07.921 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:24:07.921 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:24:07.922 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:24:07.923 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:24:07.924 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:24:07.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:24:07.926 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:24:07.926 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:24:07.928 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:24:07.929 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:24:07.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:24:07.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:24:07.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:24:07.933 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:24:07.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:24:07.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:24:07.937 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:24:08.959 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:24:09.429 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:24:09.484 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:24:09.634 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:24:09.787 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:24:09.843 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:24:09.912 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:24:10.280 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:24:10.409 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:24:10.453 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:24:10.459 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:24:10.475 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:24:10.475 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.962 seconds (process running for 4286.76)
2025-11-07 09:24:10.476 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:24:10.478 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:24:10.483 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:24:23.467 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:24:24.472 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:24:24.472 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:24:37.953 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:24:37.968 [Thread-100] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:24:37.969 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:24:37.970 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:24:37.971 [Thread-100] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:24:37.979 [Thread-100] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:24:37.979 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:24:37.981 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:24:37.981 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:24:37.982 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:24:37.982 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:24:37.982 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:24:37.983 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:24:37.983 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:24:37.983 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:24:37.984 [Thread-100] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:24:37.985 [Thread-100] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:24:37.986 [Thread-100] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown initiated...
2025-11-07 09:24:37.988 [Thread-100] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown completed.
2025-11-07 09:24:38.934 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:24:38.934 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:24:38.934 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:24:39.662 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:24:39.663 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:24:39.695 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 9 JPA repository interfaces.
2025-11-07 09:24:39.699 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:24:39.699 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:24:39.706 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:39.706 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:39.707 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:39.707 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:39.707 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:39.707 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:39.708 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:39.708 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:39.708 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:24:39.708 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 09:24:39.992 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:24:39.993 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:24:39.993 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:24:39.993 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:24:40.006 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:24:40.007 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1069 ms
2025-11-07 09:24:40.529 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:24:40.529 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:24:40.530 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:24:40.742 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:24:40.742 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Starting...
2025-11-07 09:24:40.745 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-26 - Added connection conn250: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:24:40.745 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Start completed.
2025-11-07 09:24:40.746 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:24:40.947 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:24:40.947 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:24:40.947 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:24:40.948 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:24:40.948 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:24:40.948 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:24:40.948 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:24:40.948 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:24:40.948 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:24:40.948 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:24:40.949 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:24:40.950 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:24:40.950 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:24:40.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:24:40.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:24:40.952 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:24:40.953 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:24:40.954 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:24:40.955 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:24:40.956 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:24:40.957 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:24:40.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:24:40.959 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:24:40.960 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:24:40.961 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:24:40.961 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:24:40.961 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:24:40.962 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:24:40.963 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:24:40.963 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:24:40.964 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:24:40.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:24:40.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:24:40.966 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:24:40.967 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:24:41.753 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:24:42.206 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:24:42.311 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:24:42.494 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:24:42.685 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:24:42.854 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:24:43.191 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:24:44.417 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:24:44.622 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:24:44.660 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:24:44.662 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:24:44.680 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:24:44.681 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.79 seconds (process running for 4320.965)
2025-11-07 09:24:44.683 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:24:44.684 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:24:44.687 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:24:45.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:24:46.478 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:24:46.478 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:25:14.679 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:25:14.680 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:25:14.680 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:25:15.086 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:25:44.679 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:25:44.680 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:25:44.681 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:25:50.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:26:05.517 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:26:05.519 [Thread-104] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:26:05.520 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:26:05.521 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:26:05.521 [Thread-104] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:26:05.527 [Thread-104] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:26:05.528 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:26:05.529 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:26:05.529 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:26:05.530 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:26:05.530 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:26:05.530 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:26:05.546 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:26:05.548 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:26:05.551 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:26:05.558 [Thread-104] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:26:05.565 [Thread-104] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:26:05.566 [Thread-104] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Shutdown initiated...
2025-11-07 09:26:05.579 [Thread-104] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Shutdown completed.
2025-11-07 09:26:07.200 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:26:07.200 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:26:07.200 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:26:07.756 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:26:07.756 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:26:07.805 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 9 JPA repository interfaces.
2025-11-07 09:26:07.815 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:26:07.817 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:26:07.831 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:26:07.835 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:26:07.836 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:26:07.837 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:26:07.838 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:26:07.840 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:26:07.848 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:26:07.849 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:26:07.850 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:26:07.851 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 0 Redis repository interfaces.
2025-11-07 09:26:08.518 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:26:08.519 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:26:08.519 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:26:08.520 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:26:08.538 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:26:08.538 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1334 ms
2025-11-07 09:26:08.825 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:26:08.825 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:26:08.825 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:26:08.949 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:26:08.950 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Starting...
2025-11-07 09:26:08.952 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-27 - Added connection conn260: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:26:08.952 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Start completed.
2025-11-07 09:26:08.953 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:26:09.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:26:09.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:26:09.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:26:09.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:26:09.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:26:09.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:26:09.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:26:09.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:26:09.119 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:26:09.119 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:26:09.119 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:26:09.120 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:26:09.121 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:26:09.121 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:26:09.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:26:09.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:26:09.122 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:26:09.123 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:26:09.124 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:26:09.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:26:09.126 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:26:09.127 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:26:09.128 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:26:09.129 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:26:09.129 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:26:09.130 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:26:09.130 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:26:09.131 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:26:09.132 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:26:09.132 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:26:09.133 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:26:09.133 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:26:09.134 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:26:09.134 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:26:09.135 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:26:10.137 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:26:10.563 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:26:10.676 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:26:11.036 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:26:11.179 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:26:11.235 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:26:11.301 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:26:11.609 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:26:11.698 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:26:11.731 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:26:11.733 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:26:11.751 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:26:11.752 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.635 seconds (process running for 4408.037)
2025-11-07 09:26:11.754 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:26:11.755 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:26:11.759 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:26:23.422 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:26:24.427 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:26:24.427 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:26:41.751 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:26:41.752 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:26:41.752 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:26:43.104 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:27:11.751 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:27:11.752 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:27:11.752 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:27:14.439 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:27:41.751 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:27:41.752 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:27:41.753 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:27:43.455 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:28:11.751 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:28:11.752 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:28:11.754 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:28:11.762 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:28:11.799 [Thread-108] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:28:11.832 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:28:11.847 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:28:11.848 [Thread-108] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:28:12.931 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:28:12.937 [Thread-108] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:28:12.939 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:28:12.941 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:28:12.942 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:28:12.943 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:28:12.944 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:28:12.945 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:28:12.946 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:28:12.946 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:28:12.947 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:28:12.947 [Thread-108] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:28:12.948 [Thread-108] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:28:12.949 [Thread-108] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Shutdown initiated...
2025-11-07 09:28:12.950 [Thread-108] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Shutdown completed.
2025-11-07 09:28:13.859 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:28:13.859 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:28:13.859 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:28:14.376 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:28:14.376 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:28:14.411 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 9 JPA repository interfaces.
2025-11-07 09:28:14.415 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:28:14.415 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:28:14.422 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:28:14.422 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:28:14.422 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:28:14.422 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:28:14.423 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:28:14.423 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:28:14.423 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:28:14.423 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:28:14.424 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:28:14.424 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 09:28:14.659 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:28:14.660 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:28:14.660 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:28:14.660 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:28:14.673 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:28:14.673 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 812 ms
2025-11-07 09:28:14.901 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:28:14.901 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:28:14.902 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:28:15.038 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:28:15.038 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Starting...
2025-11-07 09:28:15.040 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-28 - Added connection conn270: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:28:15.041 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Start completed.
2025-11-07 09:28:15.041 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:28:15.217 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:28:15.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:28:15.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:28:15.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:28:15.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:28:15.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:28:15.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:28:15.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:28:15.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:28:15.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:28:15.219 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:28:15.220 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:28:15.220 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:28:15.221 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:28:15.221 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:28:15.222 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:28:15.222 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:28:15.223 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:28:15.224 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:28:15.225 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:28:15.226 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:28:15.227 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:28:15.228 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:28:15.229 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:28:15.230 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:28:15.231 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:28:15.232 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:28:15.232 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:28:15.233 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:28:15.234 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:28:15.235 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:28:15.236 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:28:15.237 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:28:15.238 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:28:15.240 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:28:15.985 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:28:16.460 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:28:16.523 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:28:16.697 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:28:16.863 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:28:16.947 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:28:17.024 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:28:17.337 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:28:17.479 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:28:17.520 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:28:17.523 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:28:17.550 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.725 seconds (process running for 4533.835)
2025-11-07 09:28:17.553 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:28:17.554 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:28:17.555 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:28:17.556 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:28:18.975 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:28:19.010 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 09:28:19.010 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 09:28:19.010 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 09:28:19.010 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 09:28:19.010 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 09:28:19.012 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@685c0d66
2025-11-07 09:28:19.013 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4f8c9e4d
2025-11-07 09:28:19.014 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 09:28:19.014 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-07 09:28:19.017 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:28:19.130 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:28:19.136 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:28:19.171 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:28:19.174 [http-nio-8080-exec-1] DEBUG [21ae5eb631b64c73] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:28:19.187 [http-nio-8080-exec-1] DEBUG [21ae5eb631b64c73] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:28:19.199 [http-nio-8080-exec-1] DEBUG [21ae5eb631b64c73] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@202e4806]
2025-11-07 09:28:19.209 [http-nio-8080-exec-1] DEBUG [21ae5eb631b64c73] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:28:19.219 [http-nio-8080-exec-1] DEBUG [21ae5eb631b64c73] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:28:19.271 [http-nio-8080-exec-1] DEBUG [21ae5eb631b64c73] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:28:19.272 [http-nio-8080-exec-1] DEBUG [21ae5eb631b64c73] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@2e1943a6]
2025-11-07 09:28:19.287 [http-nio-8080-exec-1] WARN  [21ae5eb631b64c73] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:28:19.288 [http-nio-8080-exec-1] DEBUG [21ae5eb631b64c73] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:28:19.980 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:28:19.980 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 8 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:28:47.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:28:47.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:28:47.545 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:28:47.927 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:29:01.156 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:29:01.160 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:29:01.162 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:29:01.170 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:29:01.171 [http-nio-8080-exec-3] DEBUG [e82f38eb802e4c89] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:29:01.172 [http-nio-8080-exec-3] DEBUG [e82f38eb802e4c89] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:29:01.172 [http-nio-8080-exec-3] DEBUG [e82f38eb802e4c89] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-07 09:29:01.173 [http-nio-8080-exec-3] DEBUG [e82f38eb802e4c89] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:29:01.174 [http-nio-8080-exec-3] DEBUG [e82f38eb802e4c89] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:29:01.174 [http-nio-8080-exec-3] DEBUG [e82f38eb802e4c89] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@15429ed3]
2025-11-07 09:29:01.175 [http-nio-8080-exec-3] WARN  [e82f38eb802e4c89] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.PedidoResponseDTO>> com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO)]
2025-11-07 09:29:01.176 [http-nio-8080-exec-3] DEBUG [e82f38eb802e4c89] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:29:17.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:29:17.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:29:17.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:29:18.423 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:29:47.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:29:47.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:29:47.544 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:29:48.011 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:29:56.377 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:29:56.381 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:29:56.382 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:29:56.389 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:29:56.389 [http-nio-8080-exec-6] DEBUG [6dcb4b86e3c0445a] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:29:56.390 [http-nio-8080-exec-6] DEBUG [6dcb4b86e3c0445a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:29:56.391 [http-nio-8080-exec-6] DEBUG [6dcb4b86e3c0445a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-07 09:29:56.392 [http-nio-8080-exec-6] DEBUG [6dcb4b86e3c0445a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:29:56.393 [http-nio-8080-exec-6] DEBUG [6dcb4b86e3c0445a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:29:56.393 [http-nio-8080-exec-6] DEBUG [6dcb4b86e3c0445a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@26c0d98c]
2025-11-07 09:29:56.395 [http-nio-8080-exec-6] WARN  [6dcb4b86e3c0445a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.PedidoResponseDTO>> com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO)]
2025-11-07 09:29:56.395 [http-nio-8080-exec-6] DEBUG [6dcb4b86e3c0445a] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:30:17.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:30:17.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:30:17.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:30:19.040 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:30:27.396 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:30:27.401 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:30:27.402 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:30:27.408 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:30:27.409 [http-nio-8080-exec-8] DEBUG [4af59a0e479d4171] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:30:27.410 [http-nio-8080-exec-8] DEBUG [4af59a0e479d4171] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:30:27.412 [http-nio-8080-exec-8] DEBUG [4af59a0e479d4171] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@129c43d9]
2025-11-07 09:30:27.413 [http-nio-8080-exec-8] DEBUG [4af59a0e479d4171] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:30:27.415 [http-nio-8080-exec-8] DEBUG [4af59a0e479d4171] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:30:27.417 [http-nio-8080-exec-8] DEBUG [4af59a0e479d4171] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:30:27.417 [http-nio-8080-exec-8] DEBUG [4af59a0e479d4171] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@66f0a9a6]
2025-11-07 09:30:27.418 [http-nio-8080-exec-8] WARN  [4af59a0e479d4171] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:30:27.419 [http-nio-8080-exec-8] DEBUG [4af59a0e479d4171] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:30:47.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:30:47.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:30:47.547 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:30:54.105 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:31:17.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:31:17.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:31:17.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:31:18.610 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:31:47.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:31:47.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:31:47.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:31:48.166 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:32:17.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:32:17.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:32:17.544 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:32:18.998 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:32:47.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:32:47.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:32:47.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:32:48.371 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:33:17.542 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:33:17.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:33:17.544 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:33:19.371 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:33:19.489 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:33:19.512 [Thread-112] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:33:19.542 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:33:19.544 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:33:19.544 [Thread-112] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:33:19.553 [Thread-112] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:33:19.554 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:33:19.554 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:33:19.574 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:33:19.588 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:33:19.589 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:33:19.590 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:33:19.606 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:33:19.607 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:33:19.638 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:33:19.639 [Thread-112] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:33:19.640 [Thread-112] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:33:19.641 [Thread-112] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Shutdown initiated...
2025-11-07 09:33:19.657 [Thread-112] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Shutdown completed.
2025-11-07 09:33:20.807 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:33:20.807 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:33:20.808 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:33:21.766 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:33:21.767 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:33:21.817 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 9 JPA repository interfaces.
2025-11-07 09:33:21.822 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:33:21.822 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:33:21.833 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:33:21.834 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:33:21.834 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:33:21.835 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:33:21.836 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:33:21.836 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:33:21.837 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:33:21.837 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:33:21.837 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:33:21.838 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-11-07 09:33:22.169 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:33:22.172 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:33:22.172 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:33:22.172 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:33:22.189 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:33:22.189 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1374 ms
2025-11-07 09:33:22.536 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:33:22.536 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:33:22.536 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:33:22.752 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:33:22.753 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Starting...
2025-11-07 09:33:22.755 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-29 - Added connection conn280: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:33:22.755 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Start completed.
2025-11-07 09:33:22.756 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:33:23.005 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:33:23.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:33:23.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:33:23.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:33:23.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:33:23.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:33:23.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:33:23.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:33:23.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:33:23.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:33:23.008 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:33:23.009 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:33:23.010 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:33:23.011 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:33:23.011 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:33:23.012 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:33:23.013 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:33:23.014 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:33:23.015 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:33:23.015 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:33:23.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:33:23.039 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:33:23.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:33:23.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:33:23.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:33:23.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:33:23.048 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:33:23.050 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:33:23.052 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:33:23.053 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:33:23.055 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:33:23.057 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:33:23.065 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:33:23.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:33:23.069 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:33:24.508 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:33:25.274 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:33:25.327 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:33:25.641 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:33:26.217 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:33:26.326 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:33:26.409 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:33:26.822 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:33:27.036 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:33:27.085 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:33:27.087 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:33:27.107 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:33:27.108 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.38 seconds (process running for 4843.392)
2025-11-07 09:33:27.109 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:33:27.111 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:33:27.114 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:33:27.690 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:33:28.703 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:33:28.703 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:33:57.106 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:33:57.106 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:33:57.107 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:33:58.575 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:34:04.690 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:34:04.692 [Thread-116] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:34:04.693 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:34:04.694 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:34:04.694 [Thread-116] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:34:04.699 [Thread-116] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:34:04.699 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:34:04.701 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:34:04.701 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:34:04.701 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:34:04.702 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:34:04.702 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:34:04.703 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:34:04.703 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:34:04.703 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:34:04.704 [Thread-116] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:34:04.705 [Thread-116] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:34:04.706 [Thread-116] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Shutdown initiated...
2025-11-07 09:34:04.708 [Thread-116] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Shutdown completed.
2025-11-07 09:34:06.093 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:34:06.093 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:34:06.093 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:34:06.538 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:34:06.538 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:34:06.578 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 9 JPA repository interfaces.
2025-11-07 09:34:06.583 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:34:06.583 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:34:06.589 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:34:06.590 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:34:06.590 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:34:06.590 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:34:06.591 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:34:06.591 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:34:06.591 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:34:06.591 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:34:06.592 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:34:06.592 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-07 09:34:06.833 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:34:06.834 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:34:06.834 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:34:06.834 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:34:06.847 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:34:06.847 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 752 ms
2025-11-07 09:34:07.125 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:34:07.126 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:34:07.126 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:34:07.268 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:34:07.269 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Starting...
2025-11-07 09:34:07.270 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-30 - Added connection conn290: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:34:07.271 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Start completed.
2025-11-07 09:34:07.271 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:34:07.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:34:07.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:34:07.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:34:07.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:34:07.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:34:07.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:34:07.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:34:07.447 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:34:07.447 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:34:07.447 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:34:07.447 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:34:07.448 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:34:07.448 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:34:07.449 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:34:07.449 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:34:07.450 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:34:07.450 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:34:07.451 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:34:07.452 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:34:07.452 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:34:07.453 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:34:07.454 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:34:07.455 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:34:07.456 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:34:07.456 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:34:07.457 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:34:07.458 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:34:07.458 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:34:07.459 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:34:07.460 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:34:07.460 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:34:07.461 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:34:07.462 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:34:07.462 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:34:07.464 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:34:08.910 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:34:09.477 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:34:09.547 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:34:09.847 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:34:10.026 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:34:10.101 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:34:10.179 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:34:10.613 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:34:10.736 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:34:10.787 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:34:10.828 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:34:10.846 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:34:10.847 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.8 seconds (process running for 4887.132)
2025-11-07 09:34:10.849 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:34:10.851 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:34:10.858 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:34:14.929 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:34:15.933 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:34:15.933 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:34:21.047 [http-nio-8080-exec-4] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 09:34:21.048 [http-nio-8080-exec-4] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 09:34:21.048 [http-nio-8080-exec-4] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 09:34:21.048 [http-nio-8080-exec-4] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 09:34:21.048 [http-nio-8080-exec-4] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 09:34:21.049 [http-nio-8080-exec-4] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2c54472f
2025-11-07 09:34:21.050 [http-nio-8080-exec-4] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@54ff1228
2025-11-07 09:34:21.050 [http-nio-8080-exec-4] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 09:34:21.050 [http-nio-8080-exec-4] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-07 09:34:21.054 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:34:21.117 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:34:21.119 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:34:21.132 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:34:21.133 [http-nio-8080-exec-4] DEBUG [74044f966a99481a] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:34:21.134 [http-nio-8080-exec-4] DEBUG [74044f966a99481a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:34:21.145 [http-nio-8080-exec-4] DEBUG [74044f966a99481a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@40b9146a]
2025-11-07 09:34:21.159 [http-nio-8080-exec-4] DEBUG [74044f966a99481a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:34:21.179 [http-nio-8080-exec-4] DEBUG [74044f966a99481a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:34:21.189 [http-nio-8080-exec-4] DEBUG [74044f966a99481a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:34:21.190 [http-nio-8080-exec-4] DEBUG [74044f966a99481a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@627ee5a7]
2025-11-07 09:34:21.194 [http-nio-8080-exec-4] WARN  [74044f966a99481a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:34:21.196 [http-nio-8080-exec-4] DEBUG [74044f966a99481a] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:34:24.175 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:34:24.179 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:34:24.181 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:34:24.194 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:34:24.194 [http-nio-8080-exec-2] DEBUG [2349fc978ef6434c] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:34:24.195 [http-nio-8080-exec-2] DEBUG [2349fc978ef6434c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:34:24.198 [http-nio-8080-exec-2] DEBUG [2349fc978ef6434c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@1509517e]
2025-11-07 09:34:24.198 [http-nio-8080-exec-2] DEBUG [2349fc978ef6434c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:34:24.201 [http-nio-8080-exec-2] DEBUG [2349fc978ef6434c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:34:24.202 [http-nio-8080-exec-2] DEBUG [2349fc978ef6434c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:34:24.202 [http-nio-8080-exec-2] DEBUG [2349fc978ef6434c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@63b2ef18]
2025-11-07 09:34:24.211 [http-nio-8080-exec-2] WARN  [2349fc978ef6434c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:34:24.212 [http-nio-8080-exec-2] DEBUG [2349fc978ef6434c] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:34:26.516 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:34:26.521 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:34:26.522 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:34:26.528 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:34:26.529 [http-nio-8080-exec-7] DEBUG [1894103aa9474f46] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:34:26.529 [http-nio-8080-exec-7] DEBUG [1894103aa9474f46] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:34:26.530 [http-nio-8080-exec-7] DEBUG [1894103aa9474f46] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@2c072d55]
2025-11-07 09:34:26.531 [http-nio-8080-exec-7] DEBUG [1894103aa9474f46] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:34:26.532 [http-nio-8080-exec-7] DEBUG [1894103aa9474f46] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:34:26.533 [http-nio-8080-exec-7] DEBUG [1894103aa9474f46] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:34:26.533 [http-nio-8080-exec-7] DEBUG [1894103aa9474f46] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@562e440c]
2025-11-07 09:34:26.534 [http-nio-8080-exec-7] WARN  [1894103aa9474f46] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:34:26.534 [http-nio-8080-exec-7] DEBUG [1894103aa9474f46] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:34:40.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:34:40.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:34:40.848 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:34:42.470 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:35:10.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:35:10.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:35:10.848 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:35:13.375 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:35:40.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:35:40.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:35:40.848 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:35:41.269 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:36:08.560 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 09:36:08.564 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T12:36:08Z, a difference of 6221563 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 09:36:08.565 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:36:08.567 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 09:36:08.568 [http-nio-8080-exec-8] DEBUG [53ebd531cca049df] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 09:36:08.568 [http-nio-8080-exec-8] DEBUG [53ebd531cca049df] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 09:36:08.573 [http-nio-8080-exec-8] DEBUG [53ebd531cca049df] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@44bca31c]
2025-11-07 09:36:08.740 [http-nio-8080-exec-8] DEBUG [53ebd531cca049df] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:36:08.742 [http-nio-8080-exec-8] DEBUG [53ebd531cca049df] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:36:08.873 [http-nio-8080-exec-8] DEBUG [53ebd531cca049df] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 09:36:08.886 [http-nio-8080-exec-8] DEBUG [53ebd531cca049df] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:36:08.887 [http-nio-8080-exec-8] DEBUG [53ebd531cca049df] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@124f050e]
2025-11-07 09:36:08.905 [http-nio-8080-exec-8] DEBUG [53ebd531cca049df] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:36:10.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:36:10.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:36:10.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:36:25.121 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:36:25.126 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:36:25.127 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:36:25.136 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:36:25.137 [http-nio-8080-exec-9] DEBUG [87ebdbdd58b349ae] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:36:25.138 [http-nio-8080-exec-9] DEBUG [87ebdbdd58b349ae] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:36:25.141 [http-nio-8080-exec-9] DEBUG [87ebdbdd58b349ae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@67550082]
2025-11-07 09:36:25.143 [http-nio-8080-exec-9] DEBUG [87ebdbdd58b349ae] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:36:25.145 [http-nio-8080-exec-9] DEBUG [87ebdbdd58b349ae] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:36:25.146 [http-nio-8080-exec-9] DEBUG [87ebdbdd58b349ae] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:36:25.147 [http-nio-8080-exec-9] DEBUG [87ebdbdd58b349ae] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4886767d]
2025-11-07 09:36:25.148 [http-nio-8080-exec-9] WARN  [87ebdbdd58b349ae] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:36:25.148 [http-nio-8080-exec-9] DEBUG [87ebdbdd58b349ae] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:36:28.104 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:36:40.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:36:40.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:36:40.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:36:42.768 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:37:10.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:37:10.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:37:10.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:37:14.170 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:37:40.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:37:40.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:37:40.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:37:44.569 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:37:57.588 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 09:37:57.590 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:37:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:37:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=3232ca44dfc92783b90029e92175ef59
2025-11-07 09:37:57.845 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 09:37:57.846 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:37:57.846 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:37:57.847 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 09:37:58.227 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=a847cc435e8644a756d7c90bbad16408
2025-11-07 09:37:58.228 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:37:58.228 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:37:58.229 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=a847cc435e8644a756d7c90bbad16408
2025-11-07 09:37:58.544 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 09:37:58.545 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:37:58.545 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:37:58.546 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 09:37:58.565 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp
2025-11-07 09:37:58.566 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:37:58.567 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:37:58.568 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp
2025-11-07 09:37:59.699 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:37:59.704 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:37:59.706 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:37:59.708 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:00.702 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 09:38:00.703 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:00.704 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:01.633 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:01.634 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:01.634 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:01.635 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:02.066 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:02.076 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.077 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.078 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:02.078 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.079 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.090 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:02.090 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:02.091 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.091 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.095 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:02.078 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:02.094 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:02.100 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.100 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.108 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:02.268 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 09:38:02.269 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.269 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.271 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 09:38:02.281 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 09:38:02.284 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.289 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.285 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 09:38:02.291 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.292 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.288 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 09:38:02.294 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.294 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.309 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 09:38:02.313 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 09:38:02.292 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 09:38:02.314 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.314 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.315 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 09:38:02.310 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 09:38:02.328 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 09:38:02.329 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.329 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.330 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 09:38:02.334 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 09:38:02.335 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.336 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.336 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 09:38:02.368 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 09:38:02.368 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.369 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.369 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 09:38:02.371 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 09:38:02.376 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.376 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.379 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 09:38:02.380 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.380 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.381 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 09:38:02.381 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 09:38:02.381 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.381 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.382 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 09:38:02.384 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 09:38:02.449 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 09:38:02.451 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.451 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.456 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 09:38:02.586 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 09:38:02.587 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.587 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.588 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 09:38:02.674 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 09:38:02.676 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 09:38:02.677 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.677 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.678 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 09:38:02.680 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 09:38:02.682 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.684 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.688 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 09:38:02.681 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 09:38:02.692 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.692 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.693 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 09:38:02.682 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 09:38:02.695 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.695 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.696 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 09:38:02.696 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 09:38:02.696 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.697 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.697 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 09:38:02.685 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.701 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.702 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 09:38:02.686 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 09:38:02.705 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.705 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.706 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 09:38:02.738 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 09:38:02.740 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.740 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.741 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 09:38:02.752 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 09:38:02.753 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.754 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.756 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 09:38:02.791 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 09:38:02.792 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.792 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.792 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 09:38:02.795 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 09:38:02.796 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.796 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.800 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 09:38:02.819 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 09:38:02.819 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.820 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.820 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 09:38:02.829 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 09:38:02.831 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.832 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.834 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 09:38:02.830 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 09:38:02.848 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.849 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:02.849 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 09:38:02.887 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 09:38:02.888 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:02.888 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:05.264 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:05.266 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:05.267 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:05.269 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:05.360 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 09:38:05.360 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:05.360 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:05.361 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 09:38:10.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:38:10.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:38:10.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:38:13.443 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:38:17.918 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:17.920 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:17.920 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:17.921 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 09:38:17.991 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 09:38:17.991 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:17.992 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:17.992 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 09:38:17.999 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 09:38:18.000 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 09:38:18.000 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:38:18.001 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 09:38:40.846 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:38:40.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:38:40.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:38:43.990 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:39:05.937 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:39:05.952 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:39:05.954 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:39:05.969 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:39:05.970 [http-nio-8080-exec-1] DEBUG [b7a8e2c74ad94770] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:39:05.972 [http-nio-8080-exec-1] DEBUG [b7a8e2c74ad94770] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:39:05.976 [http-nio-8080-exec-1] DEBUG [b7a8e2c74ad94770] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@2d7bfefe]
2025-11-07 09:39:05.980 [http-nio-8080-exec-1] DEBUG [b7a8e2c74ad94770] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:39:05.984 [http-nio-8080-exec-1] DEBUG [b7a8e2c74ad94770] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:39:05.986 [http-nio-8080-exec-1] DEBUG [b7a8e2c74ad94770] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:39:05.990 [http-nio-8080-exec-1] DEBUG [b7a8e2c74ad94770] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@78beb2bf]
2025-11-07 09:39:06.006 [http-nio-8080-exec-1] WARN  [b7a8e2c74ad94770] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:39:06.007 [http-nio-8080-exec-1] DEBUG [b7a8e2c74ad94770] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:39:10.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:39:10.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:39:10.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:39:29.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:39:40.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:39:40.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:39:40.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:39:41.157 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:40:10.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:40:10.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:40:10.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:40:25.894 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:40:40.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:40:40.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:40:40.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:40:42.002 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:41:10.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:41:10.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:41:10.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:41:12.004 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:41:40.845 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:41:40.846 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:41:40.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:41:42.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:42:05.897 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:42:05.902 [Thread-120] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:42:05.904 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:42:05.907 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:42:05.910 [Thread-120] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:42:05.920 [Thread-120] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:42:05.920 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:42:05.921 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:42:05.921 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:42:05.922 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:42:05.922 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:42:05.922 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:42:05.923 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:42:05.923 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:42:05.923 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:42:05.924 [Thread-120] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:42:05.925 [Thread-120] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:42:05.928 [Thread-120] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Shutdown initiated...
2025-11-07 09:42:05.930 [Thread-120] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Shutdown completed.
2025-11-07 09:42:07.381 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:42:07.382 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:42:07.383 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:42:08.935 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:42:08.935 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:42:08.984 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 9 JPA repository interfaces.
2025-11-07 09:42:08.988 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:42:08.989 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:42:08.997 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:08.997 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:08.997 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:08.998 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:08.998 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:08.998 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:08.998 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:08.998 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:08.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:08.999 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-07 09:42:09.372 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:42:09.375 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:42:09.375 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:42:09.376 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:42:09.394 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:42:09.394 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1989 ms
2025-11-07 09:42:09.949 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:42:09.950 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:42:09.950 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:42:10.161 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:42:10.162 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Starting...
2025-11-07 09:42:10.165 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-31 - Added connection conn301: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:42:10.165 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Start completed.
2025-11-07 09:42:10.166 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:42:10.349 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:42:10.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:42:10.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:42:10.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:42:10.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:42:10.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:42:10.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:42:10.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:42:10.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:42:10.351 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:42:10.351 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:42:10.352 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:42:10.352 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:42:10.353 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:42:10.353 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:42:10.353 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:42:10.354 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:42:10.354 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:42:10.355 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:42:10.355 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:42:10.356 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:42:10.357 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:42:10.358 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:42:10.359 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:42:10.360 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:42:10.361 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:42:10.361 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:42:10.362 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:42:10.363 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:42:10.364 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:42:10.364 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:42:10.365 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:42:10.366 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:42:10.366 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:42:10.368 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:42:11.283 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:42:11.731 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:42:11.788 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:42:11.957 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:42:12.093 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:42:12.165 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:42:12.234 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:42:12.588 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:42:12.729 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:42:12.772 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:42:12.774 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:42:12.789 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:42:12.790 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.547 seconds (process running for 5369.074)
2025-11-07 09:42:12.790 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:42:12.791 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:42:12.795 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:42:13.459 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:42:14.462 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:42:14.463 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:42:42.295 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:42:42.305 [Thread-124] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:42:42.307 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:42:42.310 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:42:42.312 [Thread-124] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:42:42.321 [Thread-124] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:42:42.322 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:42:42.325 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:42:42.326 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:42:42.326 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:42:42.326 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:42:42.327 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:42:42.327 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:42:42.327 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:42:42.328 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:42:42.328 [Thread-124] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:42:42.329 [Thread-124] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:42:42.329 [Thread-124] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Shutdown initiated...
2025-11-07 09:42:42.331 [Thread-124] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Shutdown completed.
2025-11-07 09:42:42.892 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:42:42.892 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:42:42.892 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:42:43.604 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:42:43.605 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:42:43.668 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 9 JPA repository interfaces.
2025-11-07 09:42:43.674 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:42:43.674 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:42:43.685 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:43.686 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:43.686 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:43.687 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:43.687 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:43.688 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:43.688 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:43.689 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:43.689 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:42:43.689 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-11-07 09:42:44.013 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:42:44.013 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:42:44.014 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:42:44.014 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:42:44.027 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:42:44.027 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1133 ms
2025-11-07 09:42:44.313 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:42:44.313 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:42:44.313 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:42:44.718 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:42:44.720 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Starting...
2025-11-07 09:42:44.723 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-32 - Added connection conn311: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:42:44.724 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Start completed.
2025-11-07 09:42:44.725 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:42:45.040 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:42:45.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:42:45.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:42:45.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:42:45.041 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:42:45.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:42:45.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:42:45.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:42:45.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:42:45.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:42:45.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:42:45.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:42:45.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:42:45.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:42:45.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:42:45.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:42:45.046 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:42:45.047 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:42:45.048 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:42:45.048 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:42:45.049 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:42:45.051 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:42:45.051 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:42:45.052 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:42:45.053 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:42:45.053 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:42:45.061 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:42:45.063 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:42:45.065 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:42:45.066 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:42:45.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:42:45.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:42:45.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:42:45.070 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:42:45.074 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:42:45.755 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:42:46.202 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:42:46.266 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:42:46.426 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:42:46.577 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:42:46.687 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:42:46.797 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:42:47.454 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:42:47.559 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:42:47.600 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:42:47.602 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:42:47.622 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:42:47.623 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.763 seconds (process running for 5403.907)
2025-11-07 09:42:47.624 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:42:47.625 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:42:47.628 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:42:48.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:42:49.507 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:42:49.507 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:42:58.536 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 09:42:58.536 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 09:42:58.537 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 09:42:58.537 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 09:42:58.537 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 09:42:58.538 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6a7d5e82
2025-11-07 09:42:58.539 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5de96b6b
2025-11-07 09:42:58.545 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 09:42:58.545 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-11-07 09:42:58.548 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:42:58.676 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:42:58.678 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:42:58.704 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:42:58.705 [http-nio-8080-exec-2] DEBUG [f4c6f317fe2340e3] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:42:58.706 [http-nio-8080-exec-2] DEBUG [f4c6f317fe2340e3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:42:58.725 [http-nio-8080-exec-2] DEBUG [f4c6f317fe2340e3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@6124b1be]
2025-11-07 09:42:58.735 [http-nio-8080-exec-2] DEBUG [f4c6f317fe2340e3] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:42:58.742 [http-nio-8080-exec-2] DEBUG [f4c6f317fe2340e3] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:42:58.750 [http-nio-8080-exec-2] DEBUG [f4c6f317fe2340e3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:42:58.751 [http-nio-8080-exec-2] DEBUG [f4c6f317fe2340e3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4c651939]
2025-11-07 09:42:58.755 [http-nio-8080-exec-2] WARN  [f4c6f317fe2340e3] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:42:58.757 [http-nio-8080-exec-2] DEBUG [f4c6f317fe2340e3] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:43:04.779 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:43:04.784 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:43:04.785 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:43:04.806 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:43:04.807 [http-nio-8080-exec-3] DEBUG [187507dad9fd4060] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:43:04.808 [http-nio-8080-exec-3] DEBUG [187507dad9fd4060] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:43:04.810 [http-nio-8080-exec-3] DEBUG [187507dad9fd4060] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@13bd6012]
2025-11-07 09:43:04.811 [http-nio-8080-exec-3] DEBUG [187507dad9fd4060] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:43:04.822 [http-nio-8080-exec-3] DEBUG [187507dad9fd4060] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 09:43:04.823 [http-nio-8080-exec-3] DEBUG [187507dad9fd4060] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:43:04.823 [http-nio-8080-exec-3] DEBUG [187507dad9fd4060] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@3e6d8111]
2025-11-07 09:43:04.827 [http-nio-8080-exec-3] WARN  [187507dad9fd4060] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN') or @pedidoService.canAccess(#id)']
2025-11-07 09:43:04.827 [http-nio-8080-exec-3] DEBUG [187507dad9fd4060] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 09:43:17.621 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:43:17.622 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:43:17.623 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:43:17.883 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:43:47.621 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:43:47.622 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:43:47.624 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:43:48.709 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:44:17.621 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:44:17.622 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:44:17.622 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:44:19.071 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:44:41.987 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:44:41.990 [Thread-128] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:44:41.990 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:44:41.991 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:44:41.992 [Thread-128] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:44:42.000 [Thread-128] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:44:42.000 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:44:42.001 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:44:42.001 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:44:42.001 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:44:42.002 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:44:42.002 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:44:42.003 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:44:42.003 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:44:42.004 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:44:42.004 [Thread-128] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:44:42.005 [Thread-128] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:44:42.006 [Thread-128] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Shutdown initiated...
2025-11-07 09:44:42.007 [Thread-128] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Shutdown completed.
2025-11-07 09:44:42.943 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:44:42.943 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:44:42.943 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:44:43.670 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:44:43.671 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:44:43.723 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 9 JPA repository interfaces.
2025-11-07 09:44:43.731 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:44:43.732 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:44:43.742 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:44:43.743 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:44:43.743 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:44:43.744 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:44:43.744 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:44:43.745 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:44:43.745 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:44:43.746 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:44:43.746 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:44:43.746 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-11-07 09:44:44.058 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:44:44.059 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:44:44.060 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:44:44.060 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:44:44.076 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:44:44.077 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1131 ms
2025-11-07 09:44:44.292 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:44:44.292 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:44:44.292 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:44:44.427 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:44:44.428 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Starting...
2025-11-07 09:44:44.430 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-33 - Added connection conn321: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:44:44.430 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Start completed.
2025-11-07 09:44:44.430 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:44:44.831 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:44:44.837 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:44:44.842 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:44:44.844 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:44:44.844 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:44:44.844 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:44:44.844 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:44:44.852 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:44:44.852 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:44:44.852 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:44:44.853 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:44:44.855 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:44:44.855 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:44:44.858 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:44:44.874 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:44:44.908 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:44:44.940 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:44:44.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:44:44.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:44:44.967 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:44:44.970 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:44:44.972 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:44:44.974 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:44:44.976 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:44:44.983 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:44:44.986 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:44:44.988 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:44:44.989 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:44:44.990 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:44:44.991 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:44:44.993 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:44:44.995 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:44:44.996 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:44:44.997 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:44:45.002 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:44:46.108 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:44:46.644 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:44:46.699 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:44:46.859 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:44:47.007 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:44:47.074 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:44:47.146 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:44:47.479 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:44:47.582 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:44:47.619 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:44:47.622 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:44:47.639 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:44:47.639 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.727 seconds (process running for 5523.924)
2025-11-07 09:44:47.640 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:44:47.641 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:44:47.643 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:44:51.767 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:44:52.771 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:44:52.771 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:45:06.825 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 09:45:06.825 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 09:45:06.825 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 09:45:06.825 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 09:45:06.825 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 09:45:06.827 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6f28e681
2025-11-07 09:45:06.828 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6d2b0cbb
2025-11-07 09:45:06.828 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 09:45:06.828 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 09:45:06.829 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:45:06.883 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:45:06.884 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:45:06.893 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:45:06.896 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:45:06.897 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:45:06.905 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@4f90d382]
2025-11-07 09:45:06.916 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:45:06.934 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:45:06.943 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@1722883a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 09:45:06.945 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 09:45:06.954 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:45:06.955 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@35b019ef]
2025-11-07 09:45:06.957 [http-nio-8080-exec-2] WARN  [47f0d2200f574d8e] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 09:45:06.957 [http-nio-8080-exec-2] DEBUG [47f0d2200f574d8e] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 09:45:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:45:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:45:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:45:18.253 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:45:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:45:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:45:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:45:50.141 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:46:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:46:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:46:17.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:46:19.139 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:46:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:46:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:46:47.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:46:49.363 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:47:02.586 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 09:47:02.589 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T12:47:02Z, a difference of 6875588 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 09:47:02.590 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:47:02.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 09:47:02.591 [http-nio-8080-exec-5] DEBUG [5ffb57697dc94379] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 09:47:02.592 [http-nio-8080-exec-5] DEBUG [5ffb57697dc94379] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 09:47:02.596 [http-nio-8080-exec-5] DEBUG [5ffb57697dc94379] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@590dc7eb]
2025-11-07 09:47:02.727 [http-nio-8080-exec-5] DEBUG [5ffb57697dc94379] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:47:02.728 [http-nio-8080-exec-5] DEBUG [5ffb57697dc94379] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:47:02.849 [http-nio-8080-exec-5] DEBUG [5ffb57697dc94379] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 09:47:02.856 [http-nio-8080-exec-5] DEBUG [5ffb57697dc94379] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:47:02.857 [http-nio-8080-exec-5] DEBUG [5ffb57697dc94379] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@53e9785f]
2025-11-07 09:47:02.864 [http-nio-8080-exec-5] DEBUG [5ffb57697dc94379] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:47:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:47:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:47:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:47:21.398 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:47:23.231 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:47:23.235 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:47:23.238 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:47:23.248 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:47:23.248 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:47:23.249 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:47:23.251 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@5e2ba8c0]
2025-11-07 09:47:23.251 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:47:23.255 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:47:23.257 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@1722883a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 09:47:23.258 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 09:47:23.259 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:47:23.259 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@352d474a]
2025-11-07 09:47:23.260 [http-nio-8080-exec-6] WARN  [aaf5cd4d51604965] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 09:47:23.261 [http-nio-8080-exec-6] DEBUG [aaf5cd4d51604965] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 09:47:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:47:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:47:47.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:47:49.313 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:48:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:48:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:48:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:48:18.857 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:48:39.108 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 09:48:39.110 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T12:48:39Z, a difference of 6972110 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 09:48:39.111 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:48:39.112 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 09:48:39.112 [http-nio-8080-exec-8] DEBUG [60843da6e8d34506] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 09:48:39.113 [http-nio-8080-exec-8] DEBUG [60843da6e8d34506] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 09:48:39.114 [http-nio-8080-exec-8] DEBUG [60843da6e8d34506] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@4e8e8e76]
2025-11-07 09:48:39.118 [http-nio-8080-exec-8] DEBUG [60843da6e8d34506] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:48:39.120 [http-nio-8080-exec-8] DEBUG [60843da6e8d34506] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:48:39.247 [http-nio-8080-exec-8] DEBUG [60843da6e8d34506] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 09:48:39.250 [http-nio-8080-exec-8] DEBUG [60843da6e8d34506] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:48:39.250 [http-nio-8080-exec-8] DEBUG [60843da6e8d34506] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@47fd1e7a]
2025-11-07 09:48:39.251 [http-nio-8080-exec-8] DEBUG [60843da6e8d34506] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:48:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:48:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:48:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:48:47.820 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:48:48.631 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 09:48:48.639 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:48:48.642 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:48:48.665 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 09:48:48.668 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 09:48:48.669 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 09:48:48.694 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@1e253bf0]
2025-11-07 09:48:48.789 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:48:48.791 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:48:48.859 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 09:48:48.861 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:48:48.866 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 09:48:48.887 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 09:48:48.920 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 09:48:48.952 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?, ?)
2025-11-07 09:48:48.967 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 09:48:48.982 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 09:48:49.001 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 09:48:49.023 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 09:48:49.043 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 09:48:49.053 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 09:48:49.062 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 09:48:49.139 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 09:48:49.153 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:48:49.153 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@65835fec]
2025-11-07 09:48:49.169 [http-nio-8080-exec-10] DEBUG [b9fe00f381554c7e] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 09:49:03.551 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 09:49:03.555 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T12:49:03Z, a difference of 6996554 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 09:49:03.555 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:49:03.558 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 09:49:03.560 [http-nio-8080-exec-1] DEBUG [b14cee81cc644580] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 09:49:03.560 [http-nio-8080-exec-1] DEBUG [b14cee81cc644580] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 09:49:03.566 [http-nio-8080-exec-1] DEBUG [b14cee81cc644580] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@2b614488]
2025-11-07 09:49:03.575 [http-nio-8080-exec-1] DEBUG [b14cee81cc644580] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:49:03.579 [http-nio-8080-exec-1] DEBUG [b14cee81cc644580] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:49:03.847 [http-nio-8080-exec-1] DEBUG [b14cee81cc644580] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 09:49:03.854 [http-nio-8080-exec-1] DEBUG [b14cee81cc644580] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:49:03.872 [http-nio-8080-exec-1] DEBUG [b14cee81cc644580] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@7a9d891f]
2025-11-07 09:49:03.876 [http-nio-8080-exec-1] DEBUG [b14cee81cc644580] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:49:14.530 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:49:14.538 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:49:14.542 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:49:14.549 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:49:14.549 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:49:14.549 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:49:14.551 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@36a14d22]
2025-11-07 09:49:14.551 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:49:14.554 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:49:14.558 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:49:14.570 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:49:14.575 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 09:49:14.638 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 09:49:14.641 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:49:14.643 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 09:49:14.645 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 09:49:14.682 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 09:49:14.685 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:49:14.685 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@30cfa61a]
2025-11-07 09:49:14.686 [http-nio-8080-exec-2] DEBUG [9da2f73178b14e36] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:49:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:49:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:49:17.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:49:19.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:49:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:49:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:49:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:49:54.657 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:50:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:50:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:50:17.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:50:21.367 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:50:21.371 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:50:21.373 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:50:21.378 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:50:21.379 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:50:21.382 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:50:21.384 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@768ddd81]
2025-11-07 09:50:21.385 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:50:21.388 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:50:21.390 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:50:21.393 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:50:21.397 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 09:50:21.400 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 09:50:21.401 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:50:21.403 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 09:50:21.404 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 09:50:21.408 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 09:50:21.413 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:50:21.413 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@1b1d1c3b]
2025-11-07 09:50:21.416 [http-nio-8080-exec-5] DEBUG [26084bc8e3dc4c32] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:50:23.173 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:50:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:50:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:50:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:51:00.961 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:51:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:51:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:51:17.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:51:22.849 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:51:22.857 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:51:22.862 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:51:22.872 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:51:22.873 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:51:22.884 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:51:22.886 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@ffd156c]
2025-11-07 09:51:22.887 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:51:22.889 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:51:22.892 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:51:22.894 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:51:22.911 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-07 09:51:22.922 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:51:22.924 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:51:22.943 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:51:22.945 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:51:22.947 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:51:22.948 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:51:23.011 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id 
    from
        pedido p1_0 
    where
        p1_0.entregador_id=? 
        and p1_0.status=? 
    fetch
        first ? rows only
2025-11-07 09:51:23.014 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 09:51:23.016 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 09:51:23.018 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 09:51:23.020 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 09:51:23.024 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 09:51:23.026 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:51:23.027 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@3780e06b]
2025-11-07 09:51:23.028 [http-nio-8080-exec-7] DEBUG [c40337a403aa4d19] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:51:27.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:51:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:51:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:51:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:51:50.533 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:52:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:52:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:52:17.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:52:18.937 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:52:36.321 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 09:52:36.323 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T12:52:36Z, a difference of 7209323 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 09:52:36.324 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:52:36.324 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 09:52:36.325 [http-nio-8080-exec-1] DEBUG [f969e350967e4953] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 09:52:36.325 [http-nio-8080-exec-1] DEBUG [f969e350967e4953] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 09:52:36.326 [http-nio-8080-exec-1] DEBUG [f969e350967e4953] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@3a5976fa]
2025-11-07 09:52:36.329 [http-nio-8080-exec-1] DEBUG [f969e350967e4953] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:52:36.330 [http-nio-8080-exec-1] DEBUG [f969e350967e4953] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:52:36.453 [http-nio-8080-exec-1] DEBUG [f969e350967e4953] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 09:52:36.455 [http-nio-8080-exec-1] DEBUG [f969e350967e4953] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:52:36.456 [http-nio-8080-exec-1] DEBUG [f969e350967e4953] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@61d494c0]
2025-11-07 09:52:36.457 [http-nio-8080-exec-1] DEBUG [f969e350967e4953] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:52:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:52:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:52:47.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:52:51.693 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:53:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:53:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:53:17.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:53:19.698 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:53:19.701 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:53:19.702 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:53:19.710 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:53:19.710 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:53:19.711 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:53:19.712 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@6288020c]
2025-11-07 09:53:19.713 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:53:19.715 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:53:19.717 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@1722883a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 09:53:19.718 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 09:53:19.718 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:53:19.719 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@1160b471]
2025-11-07 09:53:19.723 [http-nio-8080-exec-2] WARN  [78bf63eaaa3d4342] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 09:53:19.724 [http-nio-8080-exec-2] DEBUG [78bf63eaaa3d4342] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 09:53:20.241 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:53:31.008 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 09:53:31.014 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T12:53:31Z, a difference of 7264014 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 09:53:31.020 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 09:53:31.021 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 09:53:31.022 [http-nio-8080-exec-3] DEBUG [e3d91968ca784159] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 09:53:31.022 [http-nio-8080-exec-3] DEBUG [e3d91968ca784159] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 09:53:31.023 [http-nio-8080-exec-3] DEBUG [e3d91968ca784159] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@16d5ef00]
2025-11-07 09:53:31.029 [http-nio-8080-exec-3] DEBUG [e3d91968ca784159] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:53:31.036 [http-nio-8080-exec-3] DEBUG [e3d91968ca784159] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:53:31.165 [http-nio-8080-exec-3] DEBUG [e3d91968ca784159] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 09:53:31.167 [http-nio-8080-exec-3] DEBUG [e3d91968ca784159] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:53:31.168 [http-nio-8080-exec-3] DEBUG [e3d91968ca784159] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@5f670efd]
2025-11-07 09:53:31.173 [http-nio-8080-exec-3] DEBUG [e3d91968ca784159] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 09:53:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:53:47.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:53:47.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:53:50.419 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 09:53:50.424 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 09:53:50.426 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 09:53:50.430 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 09:53:50.431 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 09:53:50.431 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 09:53:50.432 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@5cc23d63]
2025-11-07 09:53:50.433 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 09:53:50.439 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 09:53:50.442 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@1722883a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 09:53:50.443 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 09:53:50.444 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 09:53:50.444 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@1a5ff722]
2025-11-07 09:53:50.452 [http-nio-8080-exec-4] WARN  [563c55a4c3874eaa] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 09:53:50.452 [http-nio-8080-exec-4] DEBUG [563c55a4c3874eaa] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 09:54:01.036 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:54:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:54:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:54:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:54:19.396 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:54:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:54:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:54:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:54:48.271 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:55:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:55:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:55:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:55:20.437 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:55:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:55:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:55:47.640 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:55:52.498 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:56:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:56:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:56:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:56:18.600 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:56:47.638 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:56:47.642 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:56:47.643 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:56:52.225 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:57:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:57:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:57:17.639 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:57:19.725 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:57:47.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:57:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:57:47.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:58:12.242 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:58:17.637 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:58:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:58:17.638 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:58:20.282 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:58:41.789 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 09:58:41.792 [Thread-132] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 09:58:41.793 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:58:41.794 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 09:58:41.794 [Thread-132] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 09:58:41.801 [Thread-132] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:58:41.801 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:58:41.803 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:58:41.803 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:58:41.804 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:58:41.804 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:58:41.805 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:58:41.805 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:58:41.805 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:58:41.806 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:58:41.806 [Thread-132] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:58:41.808 [Thread-132] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 09:58:41.809 [Thread-132] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Shutdown initiated...
2025-11-07 09:58:41.818 [Thread-132] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Shutdown completed.
2025-11-07 09:58:42.531 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 09:58:42.532 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 09:58:42.532 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 09:58:43.457 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:58:43.457 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 09:58:43.502 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 9 JPA repository interfaces.
2025-11-07 09:58:43.509 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 09:58:43.509 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 09:58:43.518 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:58:43.518 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:58:43.518 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:58:43.519 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:58:43.519 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:58:43.519 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:58:43.519 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:58:43.520 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:58:43.520 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 09:58:43.520 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-07 09:58:44.252 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 09:58:44.256 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 09:58:44.256 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 09:58:44.256 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 09:58:44.275 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 09:58:44.275 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1739 ms
2025-11-07 09:58:44.605 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 09:58:44.606 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 09:58:44.606 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 09:58:44.763 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 09:58:44.764 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Starting...
2025-11-07 09:58:44.766 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-34 - Added connection conn331: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 09:58:44.767 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Start completed.
2025-11-07 09:58:44.768 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 09:58:45.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 09:58:45.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 09:58:45.329 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 09:58:45.329 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 09:58:45.329 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 09:58:45.330 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 09:58:45.330 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 09:58:45.330 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 09:58:45.331 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 09:58:45.331 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 09:58:45.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 09:58:45.336 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:58:45.338 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:58:45.344 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:58:45.345 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 09:58:45.347 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 09:58:45.350 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 09:58:45.353 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 09:58:45.356 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 09:58:45.359 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 09:58:45.361 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 09:58:45.363 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 09:58:45.366 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 09:58:45.368 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 09:58:45.370 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 09:58:45.372 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 09:58:45.376 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 09:58:45.378 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 09:58:45.380 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 09:58:45.383 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 09:58:45.385 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 09:58:45.387 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:58:45.390 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 09:58:45.394 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 09:58:45.404 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 09:58:47.869 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 09:58:48.219 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 09:58:48.280 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 09:58:48.440 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 09:58:48.580 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 09:58:48.662 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 09:58:48.813 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 09:58:49.263 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 09:58:49.367 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 09:58:49.419 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 09:58:49.421 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 09:58:49.441 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:58:49.443 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 7.014 seconds (process running for 6365.727)
2025-11-07 09:58:49.443 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:58:49.444 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:58:49.449 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 09:58:50.329 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:58:51.334 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 09:58:51.334 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 09:59:19.440 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:59:19.441 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:59:19.441 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:59:19.700 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 09:59:49.440 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 09:59:49.442 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 09:59:49.443 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 09:59:50.643 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:00:19.440 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:00:19.441 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:00:19.441 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:00:20.168 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:00:49.440 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:00:49.441 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:00:49.441 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:00:49.788 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:01:19.440 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:01:19.440 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:01:19.441 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:01:21.753 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:01:49.440 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:01:49.440 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:01:49.441 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:01:49.578 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:02:11.882 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 10:02:11.885 [Thread-136] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 10:02:11.885 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 10:02:11.886 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 10:02:11.886 [Thread-136] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 10:02:11.891 [Thread-136] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 10:02:11.892 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 10:02:11.893 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 10:02:11.894 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 10:02:11.895 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 10:02:11.895 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 10:02:11.896 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 10:02:11.896 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 10:02:11.897 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 10:02:11.897 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 10:02:11.898 [Thread-136] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 10:02:11.899 [Thread-136] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 10:02:11.900 [Thread-136] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Shutdown initiated...
2025-11-07 10:02:11.902 [Thread-136] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Shutdown completed.
2025-11-07 10:02:12.966 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 10:02:12.966 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 10:02:12.967 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 10:02:13.839 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 10:02:13.839 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 10:02:13.879 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 9 JPA repository interfaces.
2025-11-07 10:02:13.885 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 10:02:13.885 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 10:02:13.894 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 10:02:13.894 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 10:02:13.895 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 10:02:13.895 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 10:02:13.895 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 10:02:13.895 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 10:02:13.896 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 10:02:13.896 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 10:02:13.896 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 10:02:13.896 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-07 10:02:14.472 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 10:02:14.475 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 10:02:14.476 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 10:02:14.485 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 10:02:14.506 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 10:02:14.506 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1536 ms
2025-11-07 10:02:14.849 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 10:02:14.850 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 10:02:14.851 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 10:02:15.050 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 10:02:15.052 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Starting...
2025-11-07 10:02:15.056 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-35 - Added connection conn341: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 10:02:15.057 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Start completed.
2025-11-07 10:02:15.058 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 10:02:15.368 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 10:02:15.369 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 10:02:15.370 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 10:02:15.370 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 10:02:15.371 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 10:02:15.371 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 10:02:15.372 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 10:02:15.372 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 10:02:15.372 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 10:02:15.373 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 10:02:15.373 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 10:02:15.375 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 10:02:15.377 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 10:02:15.379 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 10:02:15.380 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 10:02:15.382 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 10:02:15.384 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 10:02:15.386 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 10:02:15.388 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 10:02:15.390 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 10:02:15.392 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 10:02:15.394 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 10:02:15.396 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 10:02:15.398 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 10:02:15.401 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 10:02:15.402 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 10:02:15.404 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 10:02:15.406 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 10:02:15.408 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 10:02:15.409 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 10:02:15.411 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 10:02:15.413 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 10:02:15.415 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 10:02:15.417 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 10:02:15.419 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 10:02:16.189 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 10:02:16.645 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 10:02:16.695 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 10:02:16.914 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 10:02:17.081 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 10:02:17.172 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 10:02:17.279 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 10:02:17.754 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 10:02:17.995 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 10:02:18.181 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 10:02:18.196 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 10:02:18.226 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.336 seconds (process running for 6574.511)
2025-11-07 10:02:18.230 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:02:18.232 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:02:18.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:02:18.239 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 10:02:19.194 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:02:20.197 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 10:02:20.198 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 10:02:48.045 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 10:02:48.047 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 10:02:48.048 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 10:02:48.048 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 10:02:48.049 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 10:02:48.052 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@705edc2
2025-11-07 10:02:48.060 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4cade048
2025-11-07 10:02:48.062 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 10:02:48.063 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 15 ms
2025-11-07 10:02:48.068 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 10:02:48.200 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:02:48.202 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:02:48.217 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 10:02:48.218 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 10:02:48.219 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 10:02:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:02:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:02:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:02:48.230 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@13b639d0]
2025-11-07 10:02:48.237 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:02:48.574 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 10:02:48.647 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 10:02:48.648 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 10:02:48.656 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:02:48.657 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6361a1a5]
2025-11-07 10:02:48.675 [http-nio-8080-exec-2] WARN  [10c9aba4f2f44209] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 10:02:48.675 [http-nio-8080-exec-2] DEBUG [10c9aba4f2f44209] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 10:02:50.724 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:02:59.897 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 10:02:59.902 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:02:59.903 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:02:59.922 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 10:02:59.923 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 10:02:59.924 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 10:02:59.937 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@5124c240]
2025-11-07 10:02:59.939 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:02:59.943 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 10:02:59.960 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 10:02:59.961 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 10:02:59.963 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:02:59.965 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6ddbd965]
2025-11-07 10:02:59.970 [http-nio-8080-exec-3] WARN  [5ba25748eddf4dab] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 10:02:59.971 [http-nio-8080-exec-3] DEBUG [5ba25748eddf4dab] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 10:03:03.966 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 10:03:03.993 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:03:04.021 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:03:04.050 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 10:03:04.055 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 10:03:04.058 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 10:03:04.072 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@8ef15c0]
2025-11-07 10:03:04.076 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:03:04.095 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 10:03:04.099 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 10:03:04.101 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 10:03:04.102 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:03:04.103 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@5a6891ec]
2025-11-07 10:03:04.125 [http-nio-8080-exec-4] WARN  [aabb46290b9345a4] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 10:03:04.126 [http-nio-8080-exec-4] DEBUG [aabb46290b9345a4] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 10:03:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:03:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:03:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:03:18.585 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:03:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:03:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:03:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:04:11.213 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:04:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:04:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:04:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:04:20.397 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:04:44.499 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 10:04:44.506 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:04:44.511 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:04:44.520 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 10:04:44.521 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 10:04:44.521 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 10:04:44.523 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@a90efc1]
2025-11-07 10:04:44.523 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:04:44.525 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 10:04:44.527 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 10:04:44.528 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 10:04:44.529 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:04:44.530 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@2fb6423]
2025-11-07 10:04:44.532 [http-nio-8080-exec-6] WARN  [1da6c6393da04bf0] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 10:04:44.535 [http-nio-8080-exec-6] DEBUG [1da6c6393da04bf0] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 10:04:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:04:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:04:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:04:50.160 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:04:53.661 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 10:04:53.666 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T13:04:53Z, a difference of 7946665 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 10:04:53.667 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 10:04:53.668 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 10:04:53.669 [http-nio-8080-exec-8] DEBUG [a293dc69d12747a7] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 10:04:53.670 [http-nio-8080-exec-8] DEBUG [a293dc69d12747a7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 10:04:53.673 [http-nio-8080-exec-8] DEBUG [a293dc69d12747a7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@7b2c8fef]
2025-11-07 10:04:53.874 [http-nio-8080-exec-8] DEBUG [a293dc69d12747a7] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:04:53.878 [http-nio-8080-exec-8] DEBUG [a293dc69d12747a7] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:04:54.036 [http-nio-8080-exec-8] DEBUG [a293dc69d12747a7] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 10:04:54.097 [http-nio-8080-exec-8] DEBUG [a293dc69d12747a7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:04:54.101 [http-nio-8080-exec-8] DEBUG [a293dc69d12747a7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@361cab4b]
2025-11-07 10:04:54.119 [http-nio-8080-exec-8] DEBUG [a293dc69d12747a7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 10:05:12.300 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 10:05:12.304 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:05:12.307 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:05:12.316 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 10:05:12.317 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 10:05:12.318 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 10:05:12.320 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@667cd48]
2025-11-07 10:05:12.321 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:05:12.336 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 10:05:12.341 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 10:05:12.343 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 10:05:12.345 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:05:12.346 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@77921ec5]
2025-11-07 10:05:12.350 [http-nio-8080-exec-9] WARN  [71c5f9d3f2e34062] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 10:05:12.353 [http-nio-8080-exec-9] DEBUG [71c5f9d3f2e34062] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 10:05:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:05:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:05:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:05:21.567 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:05:42.830 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos
2025-11-07 10:05:42.835 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:05:42.836 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:05:42.843 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos
2025-11-07 10:05:42.844 [http-nio-8080-exec-10] DEBUG [63aeaa26b2994650] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos", parameters={}
2025-11-07 10:05:42.846 [http-nio-8080-exec-10] DEBUG [63aeaa26b2994650] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 10:05:42.880 [http-nio-8080-exec-10] DEBUG [63aeaa26b2994650] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:05:42.882 [http-nio-8080-exec-10] DEBUG [63aeaa26b2994650] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN')]
2025-11-07 10:05:42.883 [http-nio-8080-exec-10] DEBUG [63aeaa26b2994650] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 10:05:42.884 [http-nio-8080-exec-10] DEBUG [63aeaa26b2994650] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:05:42.884 [http-nio-8080-exec-10] DEBUG [63aeaa26b2994650] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4b60363e]
2025-11-07 10:05:42.888 [http-nio-8080-exec-10] WARN  [63aeaa26b2994650] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 10:05:42.892 [http-nio-8080-exec-10] DEBUG [63aeaa26b2994650] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 10:05:48.222 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:05:48.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:05:48.225 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:05:50.485 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:06:06.240 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 10:06:06.258 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:06:06.282 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:06:06.323 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 10:06:06.325 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 10:06:06.331 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 10:06:06.390 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@3be38916]
2025-11-07 10:06:06.480 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:06:06.484 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:06:06.517 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 10:06:06.521 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:06:06.537 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 10:06:06.550 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 10:06:06.555 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 10:06:06.570 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?, ?)
2025-11-07 10:06:06.580 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 10:06:06.583 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 10:06:06.591 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 10:06:06.610 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 10:06:06.615 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 10:06:06.618 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 10:06:06.624 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 10:06:06.696 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 10:06:06.719 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:06:06.720 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@62ad12de]
2025-11-07 10:06:06.730 [http-nio-8080-exec-1] DEBUG [b43100b9721347ca] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 10:06:17.298 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 10:06:17.302 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:06:17.304 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:06:17.309 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 10:06:17.309 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 10:06:17.310 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 10:06:17.311 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@6d29a3]
2025-11-07 10:06:17.312 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:06:17.314 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 10:06:17.316 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 10:06:17.317 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 10:06:17.318 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:06:17.318 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@d20b8e6]
2025-11-07 10:06:17.319 [http-nio-8080-exec-2] WARN  [fea3fbda9715481d] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 10:06:17.319 [http-nio-8080-exec-2] DEBUG [fea3fbda9715481d] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 10:06:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:06:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:06:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:06:18.705 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:06:24.533 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 10:06:24.541 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T13:06:24Z, a difference of 8037541 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 10:06:24.542 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 10:06:24.545 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 10:06:24.550 [http-nio-8080-exec-3] DEBUG [1485dc8b16cf4473] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 10:06:24.550 [http-nio-8080-exec-3] DEBUG [1485dc8b16cf4473] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 10:06:24.553 [http-nio-8080-exec-3] DEBUG [1485dc8b16cf4473] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@7bc3d3d1]
2025-11-07 10:06:24.559 [http-nio-8080-exec-3] DEBUG [1485dc8b16cf4473] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:06:24.561 [http-nio-8080-exec-3] DEBUG [1485dc8b16cf4473] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:06:24.732 [http-nio-8080-exec-3] DEBUG [1485dc8b16cf4473] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 10:06:24.735 [http-nio-8080-exec-3] DEBUG [1485dc8b16cf4473] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:06:24.747 [http-nio-8080-exec-3] DEBUG [1485dc8b16cf4473] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@50b9560f]
2025-11-07 10:06:24.753 [http-nio-8080-exec-3] DEBUG [1485dc8b16cf4473] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 10:06:45.601 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 10:06:45.604 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:06:45.606 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:06:45.619 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 10:06:45.620 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 10:06:45.620 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 10:06:45.621 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@67c620f8]
2025-11-07 10:06:45.625 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:06:45.630 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 10:06:45.632 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 10:06:45.638 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 10:06:45.639 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:06:45.640 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6c5f885c]
2025-11-07 10:06:45.646 [http-nio-8080-exec-4] WARN  [86ba82a0b4cf427c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 10:06:45.648 [http-nio-8080-exec-4] DEBUG [86ba82a0b4cf427c] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 10:06:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:06:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:06:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:06:59.253 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:07:09.664 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 10:07:09.668 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 10:07:09.670 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 10:07:09.678 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 10:07:09.679 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 10:07:09.681 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 10:07:09.682 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@4b126eed]
2025-11-07 10:07:09.683 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 10:07:09.687 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 10:07:09.690 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 10:07:09.690 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 10:07:09.691 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 10:07:09.691 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@2d4908fb]
2025-11-07 10:07:09.693 [http-nio-8080-exec-5] WARN  [30f6f96f7bf44f65] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 10:07:09.694 [http-nio-8080-exec-5] DEBUG [30f6f96f7bf44f65] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 10:07:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:07:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:07:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:07:19.582 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:07:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:07:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:07:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:08:12.377 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:08:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:08:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:08:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:08:19.181 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:08:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:08:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:08:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:08:49.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:09:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:09:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:09:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:09:21.658 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:09:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:09:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:09:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:09:59.434 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:10:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:10:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:10:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:10:27.048 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:10:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:10:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:10:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:10:49.162 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:11:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:11:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:11:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:11:18.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:11:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:11:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:11:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:11:50.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:12:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:12:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:12:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:12:38.312 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:12:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:12:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:12:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:12:50.246 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:13:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:13:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:13:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:13:18.679 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:13:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:13:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:13:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:13:49.584 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:14:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:14:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:14:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:14:18.498 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:14:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:14:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:14:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:14:50.862 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:15:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:15:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:15:18.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:15:20.760 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:15:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:15:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:15:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:15:50.247 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:16:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:16:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:16:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:16:19.848 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:16:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:16:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:16:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:16:49.234 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:17:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:17:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:17:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:17:19.956 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:17:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:17:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:17:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:17:58.080 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:18:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:18:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:18:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:18:36.693 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:18:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:18:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:18:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:18:50.162 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:19:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:19:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:19:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:19:26.362 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:19:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:19:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:19:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:19:48.477 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:20:18.223 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:20:18.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:20:18.225 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:20:21.062 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:20:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:20:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:20:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:20:51.975 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:21:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:21:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:21:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:21:29.919 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:21:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:21:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:21:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:21:50.062 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:22:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:22:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:22:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:22:18.795 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:22:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:22:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:22:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:23:13.171 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:23:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:23:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:23:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:23:18.358 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:23:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:23:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:23:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:23:50.678 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:24:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:24:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:24:18.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:24:19.692 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:24:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:24:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:24:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:25:05.305 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:25:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:25:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:25:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:25:33.191 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:25:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:25:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:25:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:25:50.177 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:26:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:26:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:26:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:26:19.231 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:26:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:26:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:26:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:26:54.631 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:27:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:27:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:27:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:27:19.025 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:27:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:27:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:27:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:27:57.954 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:28:18.221 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:28:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:28:18.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:28:19.663 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:28:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:28:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:28:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:28:49.376 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:29:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:29:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:29:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:29:19.364 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:29:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:29:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:29:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:29:49.915 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:30:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:30:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:30:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:30:19.479 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:30:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:30:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:30:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:30:51.267 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:31:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:31:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:31:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:31:20.299 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:31:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:31:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:31:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:32:06.691 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:32:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:32:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:32:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:32:19.564 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:32:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:32:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:32:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:33:05.606 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:33:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:33:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:33:18.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:33:18.411 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:33:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:33:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:33:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:33:49.397 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:34:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:34:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:34:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:34:20.444 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:34:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:34:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:34:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:34:50.075 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:35:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:35:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:35:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:35:40.823 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:35:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:35:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:35:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:36:07.606 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:36:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:36:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:36:18.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:36:18.397 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:36:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:36:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:36:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:36:49.046 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:37:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:37:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:37:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:37:20.179 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:37:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:37:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:37:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:37:52.042 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:38:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:38:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:38:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:38:25.158 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:38:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:38:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:38:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:38:59.712 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:39:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:39:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:39:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:39:20.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:39:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:39:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:39:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:39:48.936 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:40:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:40:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:40:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:40:52.995 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:40:52.996 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:40:52.997 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:40:52.997 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:40:59.328 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:41:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:41:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:41:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:41:19.236 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:41:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:41:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:41:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:41:48.368 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:42:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:42:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:42:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:42:18.982 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:42:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:42:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:42:48.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:42:49.629 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:43:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:43:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:43:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:43:20.104 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:43:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:43:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:43:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:43:49.863 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:44:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:44:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:44:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:44:35.363 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:44:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:44:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:44:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:45:10.969 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:45:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:45:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:45:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:45:19.696 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:45:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:45:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:45:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:45:49.149 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:46:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:46:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:46:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:46:19.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:46:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:46:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:46:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:46:49.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:47:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:47:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:47:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:47:20.755 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:47:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:47:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:47:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:47:50.837 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:48:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:48:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:48:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:48:19.914 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:48:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:48:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:48:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:49:03.947 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:49:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:49:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:49:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:49:18.932 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:49:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:49:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:49:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:49:53.803 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:50:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:50:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:50:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:50:19.347 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:50:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:50:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:50:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:50:49.080 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:51:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:51:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:51:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:51:23.511 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:51:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:51:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:51:48.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:51:48.882 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:52:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:52:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:52:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:52:19.343 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:52:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:52:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:52:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:52:49.753 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:53:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:53:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:53:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:53:19.463 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:53:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:53:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:53:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:53:52.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:54:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:54:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:54:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:54:18.660 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 10:54:18.668 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 10:54:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:54:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:54:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:54:57.871 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:55:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:55:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:55:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:55:33.732 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:55:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:55:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:55:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:55:48.548 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:56:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:56:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:56:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:56:42.040 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:56:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:56:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:56:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:56:48.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:57:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:57:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:57:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:57:18.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:57:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:57:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:57:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:57:48.555 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:58:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:58:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:58:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:58:18.800 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:58:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:58:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:58:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:58:58.948 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:59:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:59:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:59:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:59:35.163 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 10:59:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 10:59:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 10:59:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 10:59:49.547 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:00:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:00:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:00:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:00:18.482 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:00:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:00:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:00:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:01:33.995 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:01:33.997 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:01:33.997 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:01:33.998 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:02:03.231 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:02:03.231 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:02:03.232 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:02:03.232 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:02:04.601 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:02:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:02:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:02:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:02:20.949 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:02:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:02:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:02:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:02:49.710 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:03:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:03:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:03:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:03:26.391 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:03:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:03:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:03:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:04:08.430 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:04:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:04:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:04:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:04:19.185 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:04:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:04:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:04:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:05:25.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:05:25.069 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:05:25.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:05:25.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:05:25.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:05:48.221 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:05:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:05:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:05:50.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:06:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:06:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:06:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:06:21.032 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:06:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:06:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:06:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:06:49.782 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:07:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:07:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:07:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:07:31.334 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:07:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:07:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:07:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:08:01.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:08:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:08:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:08:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:08:57.408 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:08:57.409 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:08:57.410 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:08:57.410 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:08:57.947 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:09:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:09:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:09:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:09:19.694 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:09:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:09:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:09:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:09:48.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:10:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:10:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:10:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:10:19.100 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:10:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:10:48.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:10:48.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:10:48.661 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:11:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:11:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:11:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:11:22.919 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:11:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:11:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:11:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:11:48.691 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:12:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:12:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:12:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:12:43.631 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:12:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:12:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:12:48.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:12:51.422 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:13:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:13:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:13:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:13:19.041 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:13:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:13:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:13:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:13:51.258 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:14:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:14:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:14:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:14:19.098 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:14:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:14:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:14:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:15:12.308 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:15:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:15:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:15:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:15:23.074 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:15:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:15:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:15:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:15:49.919 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:16:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:16:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:16:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:16:19.232 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:16:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:16:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:16:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:16:48.413 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:17:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:17:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:17:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:17:19.684 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:17:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:17:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:17:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:17:49.830 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:18:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:18:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:18:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:18:18.430 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:18:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:18:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:18:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:18:49.732 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:19:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:19:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:19:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:19:34.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:19:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:19:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:19:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:19:49.055 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:20:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:20:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:20:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:20:22.933 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:20:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:20:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:20:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:20:49.414 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:21:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:21:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:21:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:21:18.685 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:21:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:21:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:21:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:21:48.860 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:22:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:22:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:22:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:22:18.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:22:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:22:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:22:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:23:09.686 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:23:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:23:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:23:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:23:19.494 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:23:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:23:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:23:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:23:49.956 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:24:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:24:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:24:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:24:18.806 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:24:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:24:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:24:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:24:50.642 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:25:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:25:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:25:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:25:20.161 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:25:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:25:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:25:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:26:25.724 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:26:25.724 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:26:25.725 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:26:25.725 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:26:27.759 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:26:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:26:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:26:48.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:26:48.887 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:27:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:27:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:27:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:27:19.456 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:27:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:27:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:27:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:27:48.996 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:28:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:28:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:28:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:28:20.778 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:28:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:28:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:28:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:28:59.589 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:29:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:29:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:29:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:29:59.998 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:29:59.999 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:30:00.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:30:00.001 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:30:01.607 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:30:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:30:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:30:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:30:34.535 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:30:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:30:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:30:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:30:48.584 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:31:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:31:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:31:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:31:19.058 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:31:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:31:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:31:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:31:52.793 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:32:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:32:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:32:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:32:20.119 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:32:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:32:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:32:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:32:48.436 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:33:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:33:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:33:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:33:19.971 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:33:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:33:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:33:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:33:48.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:34:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:34:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:34:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:34:18.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:34:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:34:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:34:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:34:48.362 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:35:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:35:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:35:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:35:18.621 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:35:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:35:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:35:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:35:49.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:36:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:36:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:36:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:36:19.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:36:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:36:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:36:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:37:34.819 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:37:34.820 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:37:34.820 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:37:34.821 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:37:36.557 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:37:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:37:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:37:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:37:48.407 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:38:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:38:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:38:18.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:38:19.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:38:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:38:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:38:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:38:54.836 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:39:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:39:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:39:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:39:26.565 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:39:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:39:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:39:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:40:02.438 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:40:18.223 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:40:18.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:40:18.225 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:40:19.091 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:40:48.221 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:40:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:40:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:40:58.633 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:41:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:41:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:41:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:41:19.563 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:41:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:41:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:41:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:41:50.399 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:42:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:42:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:42:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:42:18.948 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:42:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:42:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:42:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:43:05.291 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:43:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:43:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:43:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:43:18.538 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:43:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:43:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:43:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:43:48.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:44:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:44:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:44:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:44:19.857 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 11:44:19.900 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 11:44:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:44:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:44:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:44:49.003 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:45:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:45:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:45:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:45:20.739 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:45:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:45:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:45:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:45:55.078 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:46:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:46:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:46:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:46:37.322 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:46:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:46:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:46:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:46:48.956 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:47:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:47:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:47:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:47:56.666 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:47:56.668 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:47:56.669 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:47:56.670 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:48:06.635 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:48:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:48:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:48:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:48:18.521 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:48:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:48:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:48:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:48:52.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:49:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:49:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:49:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:49:21.048 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:49:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:49:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:49:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:50:00.670 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:50:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:50:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:50:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:50:18.574 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:50:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:50:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:50:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:51:03.047 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:51:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:51:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:51:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:51:20.412 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:51:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:51:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:51:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:51:48.778 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:52:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:52:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:52:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:52:20.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:52:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:52:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:52:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:52:48.626 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:53:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:53:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:53:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:53:28.410 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:53:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:53:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:53:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:53:48.620 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:54:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:54:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:54:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:54:26.219 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:54:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:54:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:54:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:55:05.422 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:55:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:55:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:55:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:55:41.039 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:55:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:55:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:55:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:55:51.655 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:56:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:56:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:56:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:56:18.710 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:56:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:56:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:56:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:56:49.235 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:57:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:57:18.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:57:18.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:57:19.378 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:57:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:57:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:57:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:57:49.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:58:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:58:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:58:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:58:31.836 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:58:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:58:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:58:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:58:48.864 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:59:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:59:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:59:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:59:18.817 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 11:59:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 11:59:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 11:59:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 11:59:49.374 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:00:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:00:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:00:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:00:22.969 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:00:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:00:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:00:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:00:50.859 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:01:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:01:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:01:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:01:20.695 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:01:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:01:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:01:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:02:02.585 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:02:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:02:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:02:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:02:50.663 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:02:50.677 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:02:50.677 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:02:50.677 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:02:51.471 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:03:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:03:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:03:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:03:20.920 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:03:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:03:48.238 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:03:48.239 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:03:49.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:04:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:04:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:04:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:04:19.268 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:04:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:04:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:04:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:04:49.999 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:05:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:05:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:05:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:05:35.921 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:05:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:05:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:05:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:05:48.357 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:06:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:06:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:06:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:06:18.571 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:06:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:06:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:06:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:06:48.772 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:07:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:07:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:07:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:07:26.671 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:07:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:07:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:07:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:07:49.788 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:08:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:08:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:08:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:08:21.273 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:08:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:08:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:08:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:09:00.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:09:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:09:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:09:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:09:19.377 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:09:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:09:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:09:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:10:10.513 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:10:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:10:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:10:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:10:18.950 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:10:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:10:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:10:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:10:49.293 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:11:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:11:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:11:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:11:18.616 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:11:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:11:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:11:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:11:51.124 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:12:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:12:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:12:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:12:27.437 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:12:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:12:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:12:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:12:57.398 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:13:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:13:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:13:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:13:29.922 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:13:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:13:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:13:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:13:49.753 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:14:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:14:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:14:18.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:14:32.192 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:14:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:14:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:14:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:14:57.620 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:15:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:15:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:15:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:15:22.215 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:15:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:15:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:15:48.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:15:49.245 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 12:15:49.271 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 12:16:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:16:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:16:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:16:19.385 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:16:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:16:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:16:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:16:59.553 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:17:18.221 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:17:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:17:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:17:22.261 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:17:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:17:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:17:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:17:48.481 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:18:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:18:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:18:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:18:18.990 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:18:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:18:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:18:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:18:49.104 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:19:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:19:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:19:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:19:21.041 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:19:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:19:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:19:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:20:05.817 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:20:14.681 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 12:20:14.904 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-07T10:52:27Z. Current time: 2025-11-07T15:20:14Z, a difference of 16067870 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-07 12:20:14.905 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:20:14.907 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 12:20:14.909 [http-nio-8080-exec-8] DEBUG [902a802ae1504b71] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 12:20:14.913 [http-nio-8080-exec-8] DEBUG [902a802ae1504b71] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 12:20:14.967 [http-nio-8080-exec-8] DEBUG [902a802ae1504b71] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@7922bdb0]
2025-11-07 12:20:15.049 [http-nio-8080-exec-8] DEBUG [902a802ae1504b71] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:20:15.052 [http-nio-8080-exec-8] DEBUG [902a802ae1504b71] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:20:15.307 [http-nio-8080-exec-8] DEBUG [902a802ae1504b71] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 12:20:15.326 [http-nio-8080-exec-8] DEBUG [902a802ae1504b71] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:20:15.330 [http-nio-8080-exec-8] DEBUG [902a802ae1504b71] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@7fc02778]
2025-11-07 12:20:15.350 [http-nio-8080-exec-8] DEBUG [902a802ae1504b71] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:20:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:20:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:20:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:20:33.975 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:20:45.706 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 12:20:45.727 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:20:45.737 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:20:45.786 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 12:20:45.790 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 12:20:45.821 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 12:20:45.846 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@332dc419]
2025-11-07 12:20:46.136 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:20:46.138 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:20:46.180 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 12:20:46.182 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:20:46.185 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 12:20:46.190 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 12:20:46.193 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 12:20:46.210 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?, ?)
2025-11-07 12:20:46.218 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 12:20:46.221 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 12:20:46.235 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 12:20:46.268 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 12:20:46.291 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 12:20:46.307 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 12:20:46.323 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 12:20:46.367 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 12:20:46.371 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:20:46.373 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@15dbcf56]
2025-11-07 12:20:46.375 [http-nio-8080-exec-9] DEBUG [7f58033f216e4d25] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 12:20:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:20:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:20:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:20:49.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:21:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:21:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:21:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:21:19.091 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:21:47.853 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 12:21:47.881 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:21:47.882 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:21:47.898 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 12:21:47.899 [http-nio-8080-exec-2] DEBUG [bc1f6700050441ab] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 12:21:47.899 [http-nio-8080-exec-2] DEBUG [bc1f6700050441ab] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 12:21:47.901 [http-nio-8080-exec-2] DEBUG [bc1f6700050441ab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@64e9b8d0]
2025-11-07 12:21:47.906 [http-nio-8080-exec-2] DEBUG [bc1f6700050441ab] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:21:47.923 [http-nio-8080-exec-2] DEBUG [bc1f6700050441ab] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:21:48.185 [http-nio-8080-exec-2] DEBUG [bc1f6700050441ab] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 12:21:48.199 [http-nio-8080-exec-2] DEBUG [bc1f6700050441ab] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:21:48.199 [http-nio-8080-exec-2] DEBUG [bc1f6700050441ab] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@39cc58b9]
2025-11-07 12:21:48.204 [http-nio-8080-exec-2] DEBUG [bc1f6700050441ab] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:21:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:21:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:21:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:22:16.811 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:22:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:22:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:22:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:22:18.431 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:22:21.318 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 12:22:21.359 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:22:21.362 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:22:21.382 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 12:22:21.391 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 12:22:21.396 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 12:22:21.411 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@30afc758]
2025-11-07 12:22:21.425 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:22:21.428 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 12:22:21.446 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 12:22:21.450 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 12:22:21.451 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:22:21.453 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@7a74268f]
2025-11-07 12:22:21.461 [http-nio-8080-exec-3] WARN  [4229760fcf244e8e] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 12:22:21.463 [http-nio-8080-exec-3] DEBUG [4229760fcf244e8e] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 12:22:35.164 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 12:22:35.175 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:22:35.179 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:22:35.205 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 12:22:35.206 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 12:22:35.207 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 12:22:35.216 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@7b23c063]
2025-11-07 12:22:35.217 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:22:35.223 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 12:22:35.230 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 12:22:35.231 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 12:22:35.234 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:22:35.235 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@76bc8502]
2025-11-07 12:22:35.241 [http-nio-8080-exec-4] WARN  [793ad3ba0a9e4d00] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 12:22:35.249 [http-nio-8080-exec-4] DEBUG [793ad3ba0a9e4d00] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 12:22:45.344 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 12:22:45.355 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:22:45.363 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:22:45.385 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 12:22:45.386 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 12:22:45.395 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 12:22:45.403 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@6466b285]
2025-11-07 12:22:45.405 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:22:45.414 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 12:22:45.423 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@729c3b03 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @pedidoService.canAccess(#id)]
2025-11-07 12:22:45.426 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 12:22:45.429 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:22:45.430 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4f337d22]
2025-11-07 12:22:45.436 [http-nio-8080-exec-5] WARN  [09224c506dab4ec0] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 12:22:45.437 [http-nio-8080-exec-5] DEBUG [09224c506dab4ec0] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 12:22:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:22:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:22:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:22:51.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:23:17.271 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 12:23:17.282 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:23:17.288 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:23:17.308 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 12:23:17.309 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 12:23:17.310 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 12:23:17.316 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@2041478c]
2025-11-07 12:23:17.317 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:23:17.323 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 12:23:17.330 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:23:17.351 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 12:23:17.479 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 12:23:17.482 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 12:23:17.487 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:23:17.490 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 12:23:17.494 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 12:23:17.501 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 12:23:17.506 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:23:17.507 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@174b78c9]
2025-11-07 12:23:17.509 [http-nio-8080-exec-7] DEBUG [fa7e3f1156564c54] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:23:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:23:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:23:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:23:27.997 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:23:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:23:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:23:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:23:49.123 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:24:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:24:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:24:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:24:32.678 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:24:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:24:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:24:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:25:07.615 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:25:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:25:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:25:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:25:19.425 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:25:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:25:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:25:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:25:48.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:26:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:26:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:26:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:26:18.720 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:26:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:26:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:26:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:26:48.350 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:27:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:27:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:27:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:27:19.086 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:27:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:27:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:27:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:27:48.460 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:28:15.297 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 12:28:15.303 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:28:15.307 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:28:15.317 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 12:28:15.318 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 12:28:15.319 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 12:28:15.321 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@160c58a5]
2025-11-07 12:28:15.322 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:28:15.326 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 12:28:15.331 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:28:15.333 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 12:28:15.350 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 12:28:15.361 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 12:28:15.379 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:28:15.391 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 12:28:15.406 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 12:28:15.431 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 12:28:15.454 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:28:15.456 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@7de314a9]
2025-11-07 12:28:15.464 [http-nio-8080-exec-8] DEBUG [033dfc7ec2284b2d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:28:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:28:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:28:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:28:19.169 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:28:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:28:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:28:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:29:04.209 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:29:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:29:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:29:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:29:41.317 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 12:29:41.324 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:29:41.326 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:29:41.339 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 12:29:41.340 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 12:29:41.341 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 12:29:41.342 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@46a33d89]
2025-11-07 12:29:41.343 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:29:41.351 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 12:29:41.355 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:29:41.357 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 12:29:41.378 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-07 12:29:41.381 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:29:41.383 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:29:41.389 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:29:41.406 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:29:41.419 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:29:41.441 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:29:41.482 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id 
    from
        pedido p1_0 
    where
        p1_0.entregador_id=? 
        and p1_0.status=? 
    fetch
        first ? rows only
2025-11-07 12:29:41.496 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 12:29:41.511 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 12:29:41.523 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 12:29:41.529 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 12:29:41.540 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 12:29:41.621 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:29:41.621 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@22404775]
2025-11-07 12:29:41.626 [http-nio-8080-exec-2] DEBUG [ea9bd2ba86cd4ed8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:29:43.407 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:29:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:29:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:29:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:29:48.593 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:30:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:30:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:30:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:30:19.325 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:30:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:30:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:30:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:30:51.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:31:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:31:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:31:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:31:18.420 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:31:37.517 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 12:31:37.518 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:31:37.518 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:31:37.519 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 12:31:37.520 [http-nio-8080-exec-5] DEBUG [83d4f9f1230a4885] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 12:31:37.521 [http-nio-8080-exec-5] DEBUG [83d4f9f1230a4885] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 12:31:37.528 [http-nio-8080-exec-5] DEBUG [83d4f9f1230a4885] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@683cc67b]
2025-11-07 12:31:37.536 [http-nio-8080-exec-5] DEBUG [83d4f9f1230a4885] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:31:37.537 [http-nio-8080-exec-5] DEBUG [83d4f9f1230a4885] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:31:37.685 [http-nio-8080-exec-5] DEBUG [83d4f9f1230a4885] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 12:31:37.698 [http-nio-8080-exec-5] DEBUG [83d4f9f1230a4885] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:31:37.699 [http-nio-8080-exec-5] DEBUG [83d4f9f1230a4885] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@685eaab8]
2025-11-07 12:31:37.705 [http-nio-8080-exec-5] DEBUG [83d4f9f1230a4885] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:31:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:31:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:31:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:31:49.209 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:32:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:32:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:32:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:32:25.470 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:32:36.631 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 12:32:36.638 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:32:36.648 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:32:36.678 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 12:32:36.678 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 12:32:36.679 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 12:32:36.681 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@60bbb2a9]
2025-11-07 12:32:36.682 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:32:36.686 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 12:32:36.688 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:32:36.693 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 12:32:36.698 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 12:32:36.704 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 12:32:36.711 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:32:36.713 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 12:32:36.716 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 12:32:36.727 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 12:32:36.742 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:32:36.743 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@76285e0]
2025-11-07 12:32:36.745 [http-nio-8080-exec-7] DEBUG [618d7e4add294a99] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:32:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:32:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:32:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:33:03.147 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:33:18.221 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:33:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:33:18.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:33:19.590 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:33:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:33:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:33:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:34:26.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:34:26.894 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:34:26.895 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:34:26.896 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:34:27.593 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:34:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:34:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:34:48.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:34:48.491 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:35:11.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 12:35:11.602 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 12:35:11.606 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 12:35:11.616 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 12:35:11.617 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 12:35:11.618 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 12:35:11.619 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@2efacbd1]
2025-11-07 12:35:11.621 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:35:11.624 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 12:35:11.629 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 12:35:11.633 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 12:35:11.681 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleBusinessException(BusinessException, WebRequest)
2025-11-07 12:35:11.693 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:35:11.694 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@317e9a1b]
2025-11-07 12:35:11.698 [http-nio-8080-exec-8] WARN  [ebd6e1c4047b4b3e] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.BusinessException: Transição de status inválida: ENTREGUE -> PREPARANDO]
2025-11-07 12:35:11.699 [http-nio-8080-exec-8] DEBUG [ebd6e1c4047b4b3e] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 12:35:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:35:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:35:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:35:18.714 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:35:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:35:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:35:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:35:57.665 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:36:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:36:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:36:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:36:26.882 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:36:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:36:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:36:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:36:48.970 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:37:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:37:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:37:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:37:19.156 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:37:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:37:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:37:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:38:15.869 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:38:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:38:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:38:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:38:19.255 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:38:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:38:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:38:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:38:48.595 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:39:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:39:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:39:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:39:20.118 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:39:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:39:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:39:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:39:57.847 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:40:18.223 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:40:18.225 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:40:18.227 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:40:19.173 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:40:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:40:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:40:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:41:18.338 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:41:18.339 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:41:18.340 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:41:18.340 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:41:18.776 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:41:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:41:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:41:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:41:50.367 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:42:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:42:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:42:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:42:19.903 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:42:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:42:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:42:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:42:50.327 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:43:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:43:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:43:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:43:19.445 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:43:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:43:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:43:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:43:49.402 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:44:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:44:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:44:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:44:42.644 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:44:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:44:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:44:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:45:06.700 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:45:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:45:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:45:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:45:37.726 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:45:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:45:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:45:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:45:48.450 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:46:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:46:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:46:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:46:18.391 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:46:23.883 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui.html
2025-11-07 12:46:23.884 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:23.885 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:23.886 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui.html
2025-11-07 12:46:23.886 [http-nio-8080-exec-10] DEBUG [888246d1eeb4451d] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui.html", parameters={}
2025-11-07 12:46:23.887 [http-nio-8080-exec-10] DEBUG [888246d1eeb4451d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerWelcomeWebMvc#redirectToUi(HttpServletRequest)
2025-11-07 12:46:24.307 [http-nio-8080-exec-10] DEBUG [888246d1eeb4451d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:46:24.307 [http-nio-8080-exec-10] DEBUG [888246d1eeb4451d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-11-07 12:46:24.308 [http-nio-8080-exec-10] DEBUG [888246d1eeb4451d] o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-11-07 12:46:24.317 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-11-07 12:46:24.317 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:24.318 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:24.318 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-11-07 12:46:24.319 [http-nio-8080-exec-1] DEBUG [84118c8ddcac4a70] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-11-07 12:46:24.321 [http-nio-8080-exec-1] DEBUG [84118c8ddcac4a70] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 12:46:24.514 [http-nio-8080-exec-1] DEBUG [84118c8ddcac4a70] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:46:27.664 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-11-07 12:46:27.664 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:27.665 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:27.665 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-11-07 12:46:27.666 [http-nio-8080-exec-2] DEBUG [778347ee082b4719] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui.css", parameters={}
2025-11-07 12:46:27.667 [http-nio-8080-exec-2] DEBUG [778347ee082b4719] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 12:46:27.676 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-11-07 12:46:27.676 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:27.677 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:27.679 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-11-07 12:46:27.680 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:27.680 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:27.682 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-11-07 12:46:27.683 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:27.683 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:27.684 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-11-07 12:46:27.685 [http-nio-8080-exec-7] DEBUG [9a77072d79194bdb] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-11-07 12:46:27.686 [http-nio-8080-exec-7] DEBUG [9a77072d79194bdb] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 12:46:27.687 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-11-07 12:46:27.688 [http-nio-8080-exec-5] DEBUG [6f8a8fa35411402a] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-11-07 12:46:27.688 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-11-07 12:46:27.689 [http-nio-8080-exec-3] DEBUG [91fccdc17a9e4f8e] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.css", parameters={}
2025-11-07 12:46:27.690 [http-nio-8080-exec-3] DEBUG [91fccdc17a9e4f8e] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 12:46:27.693 [http-nio-8080-exec-5] DEBUG [6f8a8fa35411402a] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 12:46:27.760 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-11-07 12:46:27.761 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:27.761 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:27.762 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-11-07 12:46:27.762 [http-nio-8080-exec-4] DEBUG [fd80bd52c60e47ac] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-11-07 12:46:27.763 [http-nio-8080-exec-4] DEBUG [fd80bd52c60e47ac] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 12:46:28.010 [http-nio-8080-exec-3] DEBUG [91fccdc17a9e4f8e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:46:28.086 [http-nio-8080-exec-2] DEBUG [778347ee082b4719] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:46:28.213 [http-nio-8080-exec-4] DEBUG [fd80bd52c60e47ac] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:46:28.227 [http-nio-8080-exec-5] DEBUG [6f8a8fa35411402a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:46:28.571 [http-nio-8080-exec-7] DEBUG [9a77072d79194bdb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:46:28.692 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs/swagger-config
2025-11-07 12:46:28.693 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:28.693 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:28.694 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs/swagger-config
2025-11-07 12:46:28.694 [http-nio-8080-exec-6] DEBUG [b8827b372b4f4ba7] o.s.web.servlet.DispatcherServlet - GET "/api-docs/swagger-config", parameters={}
2025-11-07 12:46:28.695 [http-nio-8080-exec-6] DEBUG [b8827b372b4f4ba7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-11-07 12:46:28.905 [http-nio-8080-exec-6] DEBUG [b8827b372b4f4ba7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2025-11-07 12:46:28.909 [http-nio-8080-exec-6] DEBUG [b8827b372b4f4ba7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/api-docs/swagger-config, filter=true, oauth2RedirectUrl=http://localhost:8080/swagger-ui (truncated)...]
2025-11-07 12:46:28.912 [http-nio-8080-exec-6] DEBUG [b8827b372b4f4ba7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:46:29.422 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-32x32.png
2025-11-07 12:46:29.423 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:29.424 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:29.426 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-32x32.png
2025-11-07 12:46:29.439 [http-nio-8080-exec-9] DEBUG [2dd349bd194e4074] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/favicon-32x32.png", parameters={}
2025-11-07 12:46:29.446 [http-nio-8080-exec-9] DEBUG [2dd349bd194e4074] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 12:46:29.472 [http-nio-8080-exec-9] DEBUG [2dd349bd194e4074] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:46:29.533 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-11-07 12:46:29.534 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:46:29.534 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:46:29.534 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-11-07 12:46:29.535 [http-nio-8080-exec-8] DEBUG [f270a636ce704fed] o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-11-07 12:46:29.536 [http-nio-8080-exec-8] DEBUG [f270a636ce704fed] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-07 12:46:39.885 [http-nio-8080-exec-8] INFO  [f270a636ce704fed] o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 9883 ms
2025-11-07 12:46:39.948 [http-nio-8080-exec-8] DEBUG [f270a636ce704fed] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2025-11-07 12:46:39.961 [http-nio-8080-exec-8] DEBUG [f270a636ce704fed] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-07 12:46:39.963 [http-nio-8080-exec-8] DEBUG [f270a636ce704fed] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 12:46:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:46:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:46:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:46:49.032 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:47:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:47:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:47:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:47:32.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:47:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:47:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:47:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:48:00.870 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:48:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:48:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:48:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:48:18.358 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:48:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:48:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:48:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:48:51.131 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:49:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:49:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:49:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:49:19.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:49:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:49:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:49:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:49:49.316 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:50:18.224 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:50:18.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:50:18.225 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:50:19.021 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:50:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:50:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:50:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:50:50.019 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:51:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:51:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:51:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:51:28.528 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:51:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:51:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:51:48.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:52:00.709 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:52:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:52:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:52:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:52:19.326 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:52:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:52:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:52:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:52:49.105 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:53:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:53:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:53:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:53:20.309 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:53:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:53:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:53:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:53:49.438 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:54:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:54:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:54:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:54:21.362 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:54:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:54:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:54:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:54:56.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:55:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:55:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:55:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:55:28.490 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:55:46.214 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 12:55:46.215 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:55:46.215 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:55:46.216 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 12:55:46.216 [http-nio-8080-exec-5] DEBUG [a59dce5c0fc845ff] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 12:55:46.216 [http-nio-8080-exec-5] DEBUG [a59dce5c0fc845ff] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 12:55:46.242 [http-nio-8080-exec-5] DEBUG [a59dce5c0fc845ff] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@4ebd3dc8]
2025-11-07 12:55:46.585 [http-nio-8080-exec-5] DEBUG [a59dce5c0fc845ff] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-07 12:55:46.588 [http-nio-8080-exec-5] DEBUG [a59dce5c0fc845ff] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:55:46.589 [http-nio-8080-exec-5] DEBUG [a59dce5c0fc845ff] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@7be38a85]
2025-11-07 12:55:46.596 [http-nio-8080-exec-5] WARN  [a59dce5c0fc845ff] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.registerCliente(com.deliverytech.delivery.dto.auth.RegisterRequest) with 2 errors: [Field error in object 'registerRequest' on field 'cpf': rejected value [12345678901]; codes [CPF.registerRequest.cpf,CPF.cpf,CPF.java.lang.String,CPF]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.cpf,cpf]; arguments []; default message [cpf]]; default message [CPF inválido]] [Field error in object 'registerRequest' on field 'nome': rejected value [null]; codes [NotBlank.registerRequest.nome,NotBlank.nome,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.nome,nome]; arguments []; default message [nome]]; default message [Nome é obrigatório]] ]
2025-11-07 12:55:46.596 [http-nio-8080-exec-5] DEBUG [a59dce5c0fc845ff] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 12:55:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:55:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:55:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:56:05.412 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:56:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:56:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:56:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:56:42.776 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:56:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:56:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:56:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:56:49.865 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:57:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:57:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:57:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:57:19.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:57:34.774 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 12:57:34.775 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:57:34.776 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:57:34.777 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 12:57:34.777 [http-nio-8080-exec-7] DEBUG [0ad885240fee4b7a] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 12:57:34.777 [http-nio-8080-exec-7] DEBUG [0ad885240fee4b7a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 12:57:34.778 [http-nio-8080-exec-7] DEBUG [0ad885240fee4b7a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@1e215246]
2025-11-07 12:57:34.785 [http-nio-8080-exec-7] DEBUG [0ad885240fee4b7a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-07 12:57:34.786 [http-nio-8080-exec-7] DEBUG [0ad885240fee4b7a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:57:34.786 [http-nio-8080-exec-7] DEBUG [0ad885240fee4b7a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@3cd18b47]
2025-11-07 12:57:34.787 [http-nio-8080-exec-7] WARN  [0ad885240fee4b7a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.registerCliente(com.deliverytech.delivery.dto.auth.RegisterRequest): [Field error in object 'registerRequest' on field 'cpf': rejected value [33467854390]; codes [CPF.registerRequest.cpf,CPF.cpf,CPF.java.lang.String,CPF]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.cpf,cpf]; arguments []; default message [cpf]]; default message [CPF inválido]] ]
2025-11-07 12:57:34.788 [http-nio-8080-exec-7] DEBUG [0ad885240fee4b7a] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 12:57:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:57:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:57:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:57:49.969 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:58:11.836 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 12:58:11.837 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 12:58:11.838 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 12:58:11.839 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 12:58:11.840 [http-nio-8080-exec-6] DEBUG [70e08197f5ed412b] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 12:58:11.841 [http-nio-8080-exec-6] DEBUG [70e08197f5ed412b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 12:58:11.845 [http-nio-8080-exec-6] DEBUG [70e08197f5ed412b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@b56b400]
2025-11-07 12:58:11.848 [http-nio-8080-exec-6] DEBUG [70e08197f5ed412b] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-07 12:58:11.850 [http-nio-8080-exec-6] DEBUG [70e08197f5ed412b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 12:58:11.852 [http-nio-8080-exec-6] DEBUG [70e08197f5ed412b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@8b57863]
2025-11-07 12:58:11.857 [http-nio-8080-exec-6] WARN  [70e08197f5ed412b] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.registerCliente(com.deliverytech.delivery.dto.auth.RegisterRequest): [Field error in object 'registerRequest' on field 'cpf': rejected value [33467854390]; codes [CPF.registerRequest.cpf,CPF.cpf,CPF.java.lang.String,CPF]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.cpf,cpf]; arguments []; default message [cpf]]; default message [CPF inválido]] ]
2025-11-07 12:58:11.857 [http-nio-8080-exec-6] DEBUG [70e08197f5ed412b] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 12:58:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:58:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:58:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:58:20.017 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:58:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:58:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:58:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:58:55.334 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:59:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:59:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:59:18.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:59:38.586 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 12:59:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 12:59:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 12:59:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 12:59:48.967 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:00:03.115 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:00:03.116 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:00:03.116 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:00:03.117 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:00:03.117 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:00:03.118 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:00:03.119 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@771057e8]
2025-11-07 13:00:03.131 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:00:03.165 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:00:03.320 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 13:00:03.327 [http-nio-8080-exec-9] WARN  [a6e47111628448d6] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-07 13:00:03.327 [http-nio-8080-exec-9] ERROR [a6e47111628448d6] o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USUARIO(ID) ( /* key:1 */ TRUE, TIMESTAMP '2025-11-07 10:02:17.799298', CAST(1 AS BIGINT), NULL, 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', CAST('ADMIN' AS ENUM('ADMIN', 'CLIENTE', 'ENTREGADOR', 'RESTAURANTE')))"; SQL statement:
/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,r [23505-232]
2025-11-07 13:00:03.436 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 13:00:03.437 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:00:03.438 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@cce656d]
2025-11-07 13:00:03.440 [http-nio-8080-exec-9] WARN  [a6e47111628448d6] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USUARIO(ID) ( /* key:1 */ TRUE, TIMESTAMP '2025-11-07 10:02:17.799298', CAST(1 AS BIGINT), NULL, 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', CAST('ADMIN' AS ENUM('ADMIN', 'CLIENTE', 'ENTREGADOR', 'RESTAURANTE')))"; SQL statement:<EOL>/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,r [23505-232]] [/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,restaurante_id,role,senha,id) values (?,?,?,?,?,?,default)]; SQL [/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,restaurante_id,role,senha,id) values (?,?,?,?,?,?,default)]; constraint [PRIMARY KEY]]
2025-11-07 13:00:03.440 [http-nio-8080-exec-9] DEBUG [a6e47111628448d6] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 13:00:16.618 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:00:16.619 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:00:16.619 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:00:16.620 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:00:16.621 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:00:16.621 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:00:16.623 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@3a935574]
2025-11-07 13:00:16.630 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:00:16.634 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:00:16.839 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 13:00:16.843 [http-nio-8080-exec-8] WARN  [39986d22806d48af] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-07 13:00:16.844 [http-nio-8080-exec-8] ERROR [39986d22806d48af] o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USUARIO(ID) ( /* key:2 */ TRUE, TIMESTAMP '2025-11-07 10:02:17.799298', CAST(2 AS BIGINT), NULL, 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', CAST('CLIENTE' AS ENUM('ADMIN', 'CLIENTE', 'ENTREGADOR', 'RESTAURANTE')))"; SQL statement:
/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,r [23505-232]
2025-11-07 13:00:16.849 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 13:00:16.850 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:00:16.850 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@84f4f8a]
2025-11-07 13:00:16.851 [http-nio-8080-exec-8] WARN  [39986d22806d48af] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USUARIO(ID) ( /* key:2 */ TRUE, TIMESTAMP '2025-11-07 10:02:17.799298', CAST(2 AS BIGINT), NULL, 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', CAST('CLIENTE' AS ENUM('ADMIN', 'CLIENTE', 'ENTREGADOR', 'RESTAURANTE')))"; SQL statement:<EOL>/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,r [23505-232]] [/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,restaurante_id,role,senha,id) values (?,?,?,?,?,?,default)]; SQL [/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,restaurante_id,role,senha,id) values (?,?,?,?,?,?,default)]; constraint [PRIMARY KEY]]
2025-11-07 13:00:16.851 [http-nio-8080-exec-8] DEBUG [39986d22806d48af] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 13:00:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:00:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:00:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:00:18.894 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:00:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:00:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:00:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:00:50.155 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:00:50.156 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:00:50.157 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:00:50.158 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:00:50.158 [http-nio-8080-exec-10] DEBUG [4b459bf727cc4f0a] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:00:50.158 [http-nio-8080-exec-10] DEBUG [4b459bf727cc4f0a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:00:50.160 [http-nio-8080-exec-10] DEBUG [4b459bf727cc4f0a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@6ede7f]
2025-11-07 13:00:50.162 [http-nio-8080-exec-10] DEBUG [4b459bf727cc4f0a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-07 13:00:50.163 [http-nio-8080-exec-10] DEBUG [4b459bf727cc4f0a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:00:50.163 [http-nio-8080-exec-10] DEBUG [4b459bf727cc4f0a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@3903ba23]
2025-11-07 13:00:50.164 [http-nio-8080-exec-10] WARN  [4b459bf727cc4f0a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.registerCliente(com.deliverytech.delivery.dto.auth.RegisterRequest): [Field error in object 'registerRequest' on field 'cpf': rejected value [85539748043]; codes [CPF.registerRequest.cpf,CPF.cpf,CPF.java.lang.String,CPF]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.cpf,cpf]; arguments []; default message [cpf]]; default message [CPF inválido]] ]
2025-11-07 13:00:50.165 [http-nio-8080-exec-10] DEBUG [4b459bf727cc4f0a] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 13:00:51.885 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:01:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:01:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:01:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:01:19.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:01:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:01:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:01:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:01:50.241 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:01:58.474 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:01:58.475 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:01:58.475 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:01:58.475 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:01:58.476 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:01:58.476 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:01:58.477 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@2c8b4a0c]
2025-11-07 13:01:58.481 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:01:58.485 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:01:58.663 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 13:01:58.665 [http-nio-8080-exec-1] WARN  [94a5dafd24a34dc1] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-07 13:01:58.665 [http-nio-8080-exec-1] ERROR [94a5dafd24a34dc1] o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USUARIO(ID) ( /* key:3 */ TRUE, TIMESTAMP '2025-11-07 10:02:17.799298', CAST(3 AS BIGINT), NULL, 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', CAST('CLIENTE' AS ENUM('ADMIN', 'CLIENTE', 'ENTREGADOR', 'RESTAURANTE')))"; SQL statement:
/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,r [23505-232]
2025-11-07 13:01:58.667 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 13:01:58.667 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:01:58.667 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@3d519041]
2025-11-07 13:01:58.669 [http-nio-8080-exec-1] WARN  [94a5dafd24a34dc1] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USUARIO(ID) ( /* key:3 */ TRUE, TIMESTAMP '2025-11-07 10:02:17.799298', CAST(3 AS BIGINT), NULL, 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', CAST('CLIENTE' AS ENUM('ADMIN', 'CLIENTE', 'ENTREGADOR', 'RESTAURANTE')))"; SQL statement:<EOL>/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,r [23505-232]] [/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,restaurante_id,role,senha,id) values (?,?,?,?,?,?,default)]; SQL [/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,restaurante_id,role,senha,id) values (?,?,?,?,?,?,default)]; constraint [PRIMARY KEY]]
2025-11-07 13:01:58.669 [http-nio-8080-exec-1] DEBUG [94a5dafd24a34dc1] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 13:02:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:02:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:02:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:02:19.779 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:02:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:02:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:02:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:02:58.753 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:03:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:03:18.247 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:03:18.248 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:03:26.883 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:03:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:03:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:03:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:04:30.951 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:04:30.951 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:04:30.952 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:04:30.952 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:04:56.260 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:04:56.261 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:04:56.261 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:04:56.261 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:04:59.087 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:05:13.739 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:05:13.740 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:05:13.740 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:05:13.741 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:05:13.742 [http-nio-8080-exec-3] DEBUG [74e42a455f4d4880] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:05:13.742 [http-nio-8080-exec-3] DEBUG [74e42a455f4d4880] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:05:13.744 [http-nio-8080-exec-3] DEBUG [74e42a455f4d4880] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@2e01a322]
2025-11-07 13:05:13.747 [http-nio-8080-exec-3] DEBUG [74e42a455f4d4880] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-07 13:05:13.748 [http-nio-8080-exec-3] DEBUG [74e42a455f4d4880] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:05:13.748 [http-nio-8080-exec-3] DEBUG [74e42a455f4d4880] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@393ddb62]
2025-11-07 13:05:13.749 [http-nio-8080-exec-3] WARN  [74e42a455f4d4880] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.registerCliente(com.deliverytech.delivery.dto.auth.RegisterRequest): [Field error in object 'registerRequest' on field 'cpf': rejected value [28315173070]; codes [CPF.registerRequest.cpf,CPF.cpf,CPF.java.lang.String,CPF]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.cpf,cpf]; arguments []; default message [cpf]]; default message [CPF inválido]] ]
2025-11-07 13:05:13.754 [http-nio-8080-exec-3] DEBUG [74e42a455f4d4880] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 13:05:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:05:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:05:18.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:05:21.212 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:05:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:05:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:05:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:05:49.472 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:06:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:06:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:06:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:06:21.036 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:06:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:06:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:06:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:06:51.738 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:07:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:07:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:07:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:07:32.056 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:07:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:07:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:07:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:07:49.266 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:08:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:08:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:08:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:08:49.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:08:49.785 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:08:49.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:08:49.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:08:50.278 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:09:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:09:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:09:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:09:20.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:09:25.400 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:09:25.401 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:09:25.403 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:09:25.405 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:09:25.414 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:09:25.415 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:09:25.416 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@50696d3f]
2025-11-07 13:09:25.421 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:09:25.426 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:09:25.691 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 13:09:25.756 [http-nio-8080-exec-2] WARN  [30c2d89b78f4459c] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-07 13:09:25.757 [http-nio-8080-exec-2] ERROR [30c2d89b78f4459c] o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USUARIO(ID) ( /* key:4 */ TRUE, TIMESTAMP '2025-11-07 10:02:17.799298', CAST(4 AS BIGINT), CAST(1 AS BIGINT), 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', CAST('RESTAURANTE' AS ENUM('ADMIN', 'CLIENTE', 'ENTREGADOR', 'RESTAURANTE')))"; SQL statement:
/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,r [23505-232]
2025-11-07 13:09:25.761 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 13:09:25.767 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:09:25.768 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6286010d]
2025-11-07 13:09:25.769 [http-nio-8080-exec-2] WARN  [30c2d89b78f4459c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USUARIO(ID) ( /* key:4 */ TRUE, TIMESTAMP '2025-11-07 10:02:17.799298', CAST(4 AS BIGINT), CAST(1 AS BIGINT), 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', CAST('RESTAURANTE' AS ENUM('ADMIN', 'CLIENTE', 'ENTREGADOR', 'RESTAURANTE')))"; SQL statement:<EOL>/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,r [23505-232]] [/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,restaurante_id,role,senha,id) values (?,?,?,?,?,?,default)]; SQL [/* insert for com.deliverytech.delivery.entity.Usuario */insert into usuario (ativo,data_criacao,email,restaurante_id,role,senha,id) values (?,?,?,?,?,?,default)]; constraint [PRIMARY KEY]]
2025-11-07 13:09:25.775 [http-nio-8080-exec-2] DEBUG [30c2d89b78f4459c] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 13:09:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:09:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:09:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:09:49.578 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:10:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:10:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:10:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:10:18.611 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:10:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:10:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:10:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:10:51.457 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:11:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:11:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:11:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:11:21.210 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:11:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:11:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:11:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:11:50.235 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:12:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:12:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:12:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:12:20.104 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:12:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:12:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:12:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:12:50.216 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:13:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:13:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:13:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:13:20.914 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:13:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:13:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:13:48.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:13:50.058 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:14:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:14:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:14:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:14:19.997 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:14:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:14:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:14:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:15:02.742 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:15:18.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:15:18.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:15:18.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:15:18.533 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:15:48.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:15:48.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:15:48.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:16:03.649 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 13:16:03.652 [Thread-140] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 13:16:03.752 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 13:16:04.001 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 13:16:04.003 [Thread-140] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 13:16:28.400 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:16:28.425 [Thread-140] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 13:16:28.560 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 13:16:28.562 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 13:16:28.565 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 13:16:28.567 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 13:16:28.569 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 13:16:28.570 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 13:16:28.572 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 13:16:28.574 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 13:16:28.575 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 13:16:28.576 [Thread-140] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 13:16:28.600 [Thread-140] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 13:16:28.601 [Thread-140] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Shutdown initiated...
2025-11-07 13:16:28.644 [Thread-140] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Shutdown completed.
2025-11-07 13:16:30.407 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 13:16:30.408 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 13:16:30.410 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 13:16:32.534 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 13:16:32.535 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 13:16:32.683 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 146 ms. Found 9 JPA repository interfaces.
2025-11-07 13:16:32.689 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 13:16:32.689 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 13:16:32.707 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:16:32.708 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:16:32.708 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:16:32.708 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:16:32.708 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:16:32.709 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:16:32.709 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:16:32.709 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:16:32.709 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:16:32.710 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2025-11-07 13:16:35.033 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 13:16:35.038 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 13:16:35.039 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 13:16:35.039 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 13:16:35.106 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 13:16:35.106 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4689 ms
2025-11-07 13:16:35.652 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 13:16:35.653 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 13:16:35.654 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 13:16:36.028 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 13:16:36.031 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-36 - Starting...
2025-11-07 13:16:36.041 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-36 - Added connection conn421: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 13:16:36.042 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-36 - Start completed.
2025-11-07 13:16:36.043 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 13:16:36.853 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 13:16:36.876 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 13:16:36.877 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 13:16:36.879 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 13:16:36.880 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 13:16:36.882 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 13:16:36.883 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 13:16:36.884 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 13:16:36.884 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 13:16:36.889 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 13:16:36.891 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 13:16:36.896 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:16:36.899 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:16:36.909 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:16:36.911 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 13:16:36.916 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 13:16:36.920 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 13:16:36.931 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 13:16:36.942 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:16:36.945 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 13:16:36.952 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 13:16:36.964 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 13:16:36.967 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 13:16:36.970 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 13:16:36.973 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 13:16:36.978 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 13:16:36.993 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 13:16:36.999 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 13:16:37.009 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 13:16:37.017 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 13:16:37.021 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 13:16:37.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 13:16:37.036 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 13:16:37.047 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 13:16:37.055 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 13:16:37.997 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 13:16:38.682 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 13:16:38.739 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 13:16:38.905 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 13:16:39.038 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 13:16:39.108 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 13:16:39.185 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 13:16:39.542 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 13:16:39.684 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 13:16:39.765 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 13:16:39.767 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 13:16:39.785 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 9.547 seconds (process running for 18236.07)
2025-11-07 13:16:39.786 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:16:39.788 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:16:39.789 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:16:39.794 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 13:16:58.313 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:16:59.318 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 13:16:59.318 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 13:17:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:17:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:17:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:17:10.070 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 13:17:10.073 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 13:17:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:17:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:17:39.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:17:52.209 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:18:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:18:09.783 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:18:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:18:10.488 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:18:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:18:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:18:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:19:01.630 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:19:07.186 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 13:19:07.186 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 13:19:07.186 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 13:19:07.187 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 13:19:07.187 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 13:19:07.189 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@dcae0fd
2025-11-07 13:19:07.190 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2a561547
2025-11-07 13:19:07.190 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 13:19:07.190 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-07 13:19:07.194 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:19:07.198 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:19:07.201 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:19:07.204 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:19:07.205 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:19:07.206 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:19:07.234 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@109daad6]
2025-11-07 13:19:07.513 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:19:07.526 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:19:07.716 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 13:19:07.875 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone,
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        cliente c1_0 
    left join
        pedido p1_0 
            on c1_0.id=p1_0.cliente_id 
    where
        c1_0.id=?
2025-11-07 13:19:07.918 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 13:19:08.045 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 13:19:08.078 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:19:08.079 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@40062cb2]
2025-11-07 13:19:08.086 [http-nio-8080-exec-1] WARN  [8e6fedec423649a4] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.orm.ObjectOptimisticLockingFailureException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.deliverytech.delivery.entity.Cliente#7]]
2025-11-07 13:19:08.086 [http-nio-8080-exec-1] DEBUG [8e6fedec423649a4] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 13:19:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:19:09.783 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:19:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:19:10.822 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:19:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:19:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:19:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:19:53.322 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:19:53.395 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:19:53.396 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:19:53.399 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:19:53.400 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:19:53.401 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:19:53.403 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@4783c871]
2025-11-07 13:19:53.406 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:19:53.411 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:19:53.540 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 13:19:53.543 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone,
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        cliente c1_0 
    left join
        pedido p1_0 
            on c1_0.id=p1_0.cliente_id 
    where
        c1_0.id=?
2025-11-07 13:19:53.545 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 13:19:53.548 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 13:19:53.549 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:19:53.549 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@1da64519]
2025-11-07 13:19:53.550 [http-nio-8080-exec-2] WARN  [cdeb9366e3ff4584] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.orm.ObjectOptimisticLockingFailureException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.deliverytech.delivery.entity.Cliente#8]]
2025-11-07 13:19:53.550 [http-nio-8080-exec-2] DEBUG [cdeb9366e3ff4584] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 13:20:28.219 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:20:28.220 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:20:28.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:20:28.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:20:29.403 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 13:20:29.405 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:29.405 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:29.406 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=dde1a472ab48470f3048a0c17759d0c8
2025-11-07 13:20:32.332 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 13:20:32.333 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:32.334 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:32.335 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 13:20:32.480 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:20:32.731 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:32.733 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:32.734 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:32.735 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:35.459 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 13:20:35.461 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:35.462 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:35.463 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 13:20:36.391 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 13:20:36.393 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:36.398 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:38.549 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:38.555 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:38.560 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:38.562 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:39.608 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:39.611 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:39.612 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:39.614 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:39.633 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:39.639 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:39.642 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:39.643 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:39.757 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:39.800 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:39.800 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:39.759 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:20:39.803 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:20:39.803 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:20:39.789 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 13:20:39.805 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 13:20:39.805 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:39.806 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:39.807 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:39.805 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:39.808 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:39.809 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 13:20:39.811 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:39.812 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:39.813 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:20:39.816 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 13:20:39.821 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 13:20:39.822 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:39.822 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:39.823 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 13:20:39.850 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 13:20:39.850 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:39.850 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:39.851 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 13:20:39.850 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 13:20:39.854 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:39.854 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:39.854 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 13:20:40.208 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 13:20:40.209 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.210 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.211 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 13:20:40.235 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 13:20:40.236 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.236 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.237 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 13:20:40.252 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 13:20:40.253 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.253 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.254 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 13:20:40.268 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 13:20:40.269 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.269 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.270 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 13:20:40.293 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 13:20:40.293 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.294 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.294 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 13:20:40.548 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 13:20:40.549 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.549 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.550 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 13:20:40.601 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 13:20:40.602 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.602 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.604 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 13:20:40.710 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 13:20:40.710 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.711 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.711 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 13:20:40.862 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 13:20:40.864 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.864 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.865 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 13:20:40.868 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 13:20:40.869 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.869 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.870 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 13:20:40.873 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 13:20:40.873 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.874 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.874 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 13:20:40.906 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 13:20:40.906 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.907 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.908 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 13:20:40.916 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 13:20:40.917 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.917 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.918 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 13:20:40.940 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 13:20:40.940 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.941 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 13:20:40.942 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:40.942 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:40.943 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 13:20:41.080 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 13:20:41.081 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:41.081 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:41.083 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 13:20:41.145 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:41.146 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 13:20:41.147 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:41.147 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:41.148 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 13:20:41.148 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 13:20:41.155 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:41.155 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:41.157 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 13:20:41.149 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 13:20:41.161 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 13:20:41.166 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:41.167 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:41.169 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 13:20:41.170 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:41.170 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:41.171 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 13:20:41.172 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 13:20:41.411 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 13:20:41.412 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:20:41.412 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:20:41.727 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:21:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:21:09.869 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:21:09.869 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:21:11.344 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:21:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:21:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:21:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:21:39.992 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:22:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:22:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:22:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:22:24.132 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:22:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:22:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:22:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:22:42.486 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:23:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:23:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:23:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:23:28.582 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:23:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:23:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:23:39.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:23:40.246 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:24:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:24:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:24:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:24:10.734 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:24:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:24:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:24:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:24:40.078 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:25:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:25:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:25:09.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:25:10.896 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:25:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:25:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:25:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:25:41.494 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:26:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:26:09.783 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:26:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:26:12.098 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:26:39.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:26:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:26:39.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:26:45.103 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:27:09.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:27:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:27:09.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:27:11.172 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:27:37.743 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 5 class path changes (0 additions, 0 deletions, 5 modifications)
2025-11-07 13:27:37.745 [Thread-144] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 13:27:37.746 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 13:27:37.845 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 13:27:37.945 [Thread-144] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 13:27:37.954 [Thread-144] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 13:27:37.964 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 13:27:37.966 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 13:27:37.969 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 13:27:37.972 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 13:27:37.976 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 13:27:37.980 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 13:27:37.992 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 13:27:37.993 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 13:27:37.994 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 13:27:37.995 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 13:27:37.997 [Thread-144] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 13:27:37.998 [Thread-144] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-36 - Shutdown initiated...
2025-11-07 13:27:38.000 [Thread-144] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-36 - Shutdown completed.
2025-11-07 13:27:39.625 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 13:27:39.625 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 13:27:39.626 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 13:27:41.214 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 13:27:41.216 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 13:27:41.421 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 197 ms. Found 9 JPA repository interfaces.
2025-11-07 13:27:41.436 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 13:27:41.437 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 13:27:41.470 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:27:41.472 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:27:41.472 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:27:41.472 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:27:41.473 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:27:41.473 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:27:41.474 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:27:41.474 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:27:41.474 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:27:41.474 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2025-11-07 13:27:42.281 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 13:27:42.285 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 13:27:42.286 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 13:27:42.287 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 13:27:42.356 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 13:27:42.357 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2721 ms
2025-11-07 13:27:42.828 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 13:27:42.829 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 13:27:42.829 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 13:27:43.121 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 13:27:43.122 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-37 - Starting...
2025-11-07 13:27:43.125 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-37 - Added connection conn432: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 13:27:43.125 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-37 - Start completed.
2025-11-07 13:27:43.126 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 13:27:43.891 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 13:27:43.893 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 13:27:43.894 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 13:27:43.894 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 13:27:43.894 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 13:27:43.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 13:27:43.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 13:27:43.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 13:27:43.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 13:27:43.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 13:27:43.896 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 13:27:43.906 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:27:43.910 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:27:43.913 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:27:43.914 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 13:27:43.916 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 13:27:43.919 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 13:27:43.923 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 13:27:43.957 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:27:43.962 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 13:27:43.964 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 13:27:43.975 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 13:27:43.992 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 13:27:43.997 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 13:27:44.003 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 13:27:44.017 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 13:27:44.019 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 13:27:44.034 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 13:27:44.037 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 13:27:44.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 13:27:44.055 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 13:27:44.060 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 13:27:44.070 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 13:27:44.074 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 13:27:44.081 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 13:27:45.093 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 13:27:45.619 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 13:27:45.764 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 13:27:46.008 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 13:27:46.251 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 13:27:46.353 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 13:27:46.418 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 13:27:47.003 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 13:27:47.134 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 13:27:47.188 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 13:27:47.191 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 13:27:47.217 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:27:47.218 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 7.728 seconds (process running for 18903.502)
2025-11-07 13:27:47.218 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:27:47.219 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:27:47.221 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 13:27:48.086 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:27:49.092 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 13:27:49.093 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 13:28:17.216 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:28:17.217 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:28:17.217 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:28:36.282 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:28:47.216 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:28:47.217 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:28:47.218 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:28:59.293 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:29:17.216 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:29:17.217 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:29:17.217 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:29:19.359 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:29:22.227 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 13:29:22.228 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 13:29:22.228 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 13:29:22.228 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 13:29:22.228 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 13:29:22.230 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1f7670d2
2025-11-07 13:29:22.231 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@d8614a9
2025-11-07 13:29:22.231 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 13:29:22.231 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 13:29:22.233 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:29:22.235 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:29:22.236 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:29:22.238 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:29:22.240 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:29:22.241 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:29:22.266 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@48b20dbe]
2025-11-07 13:29:22.516 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:29:22.533 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:29:22.661 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 13:29:22.717 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (cpf, nome, telefone, id) 
    values
        (?, ?, ?, ?)
2025-11-07 13:29:22.719 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 13:29:22.733 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:29:22.733 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.UserResponse@4b498fbf]
2025-11-07 13:29:22.736 [http-nio-8080-exec-1] DEBUG [3e2ff1933b7144a7] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 13:29:47.216 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:29:47.218 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:29:47.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:29:54.221 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 13:29:54.224 [Thread-148] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 13:29:54.225 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 13:29:54.227 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 13:29:54.229 [Thread-148] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 13:29:54.636 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:29:54.642 [Thread-148] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 13:29:54.643 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 13:29:54.644 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 13:29:54.645 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 13:29:54.645 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 13:29:54.646 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 13:29:54.646 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 13:29:54.647 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 13:29:54.648 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 13:29:54.648 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 13:29:54.649 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 13:29:54.650 [Thread-148] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 13:29:54.651 [Thread-148] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-37 - Shutdown initiated...
2025-11-07 13:29:54.652 [Thread-148] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-37 - Shutdown completed.
2025-11-07 13:29:55.887 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 13:29:55.888 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 13:29:55.888 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 13:29:56.882 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 13:29:56.882 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 13:29:56.926 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 9 JPA repository interfaces.
2025-11-07 13:29:56.931 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 13:29:56.931 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 13:29:56.940 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:29:56.940 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:29:56.940 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:29:56.941 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:29:56.941 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:29:56.941 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:29:56.941 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:29:56.942 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:29:56.942 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 13:29:56.942 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-07 13:29:57.388 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 13:29:57.389 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 13:29:57.390 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 13:29:57.390 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 13:29:57.409 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 13:29:57.409 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1517 ms
2025-11-07 13:29:57.694 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 13:29:57.695 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 13:29:57.695 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 13:29:57.979 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 13:29:58.009 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-38 - Starting...
2025-11-07 13:29:58.058 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-38 - Added connection conn442: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 13:29:58.058 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-38 - Start completed.
2025-11-07 13:29:58.059 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 13:29:58.467 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 13:29:58.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 13:29:58.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 13:29:58.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 13:29:58.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 13:29:58.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 13:29:58.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 13:29:58.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 13:29:58.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 13:29:58.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 13:29:58.470 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 13:29:58.472 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:29:58.473 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:29:58.474 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:29:58.475 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 13:29:58.476 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 13:29:58.477 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 13:29:58.480 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 13:29:58.482 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 13:29:58.483 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 13:29:58.485 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 13:29:58.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 13:29:58.489 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 13:29:58.490 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 13:29:58.491 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 13:29:58.492 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 13:29:58.494 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 13:29:58.496 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 13:29:58.497 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 13:29:58.498 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 13:29:58.500 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 13:29:58.501 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 13:29:58.502 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 13:29:58.504 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 13:29:58.506 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 13:29:59.552 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 13:30:00.154 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 13:30:00.261 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 13:30:00.467 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 13:30:00.655 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 13:30:00.769 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 13:30:00.947 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 13:30:01.752 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 13:30:01.979 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 13:30:02.042 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 13:30:02.045 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 13:30:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:30:02.066 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.252 seconds (process running for 19038.35)
2025-11-07 13:30:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:30:02.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:30:02.071 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 13:30:06.037 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:30:07.041 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 13:30:07.041 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 13:30:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:30:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:30:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:30:32.328 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:31:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:31:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:31:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:31:51.743 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:31:51.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:31:51.744 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:31:51.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:31:53.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:32:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:32:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:32:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:32:24.279 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:32:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:32:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:32:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:32:33.264 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:32:45.613 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 13:32:45.613 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 13:32:45.613 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 13:32:45.613 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 13:32:45.614 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 13:32:45.616 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@219d10f7
2025-11-07 13:32:45.616 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@48ed8cd
2025-11-07 13:32:45.616 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 13:32:45.617 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-07 13:32:45.618 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 13:32:45.621 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:32:45.622 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:32:45.625 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 13:32:45.625 [http-nio-8080-exec-1] DEBUG [6e3e4abae86e4477] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 13:32:45.626 [http-nio-8080-exec-1] DEBUG [6e3e4abae86e4477] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 13:32:45.633 [http-nio-8080-exec-1] DEBUG [6e3e4abae86e4477] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@6faf4c03]
2025-11-07 13:32:45.878 [http-nio-8080-exec-1] DEBUG [6e3e4abae86e4477] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 13:32:46.033 [http-nio-8080-exec-1] DEBUG [6e3e4abae86e4477] o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'ana.cadastro.final@email.com'
2025-11-07 13:32:46.089 [http-nio-8080-exec-1] DEBUG [6e3e4abae86e4477] o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Usuário inexistente ou senha inválida
2025-11-07 13:32:46.096 [http-nio-8080-exec-1] DEBUG [6e3e4abae86e4477] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:32:46.097 [http-nio-8080-exec-1] DEBUG [6e3e4abae86e4477] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Credenciais inválidas}]
2025-11-07 13:32:46.099 [http-nio-8080-exec-1] DEBUG [6e3e4abae86e4477] o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-11-07 13:33:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:33:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:33:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:33:23.075 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:33:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:33:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:33:32.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:33:34.142 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:33:54.366 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:33:54.367 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:54.368 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:54.369 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=42d6b2a279b686fde2c29d062349d269
2025-11-07 13:33:54.406 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 13:33:54.407 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:54.408 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:54.410 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 13:33:54.429 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=b4acb885c1a44f31c62c756808bdcc00
2025-11-07 13:33:54.430 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:54.430 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:54.431 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=b4acb885c1a44f31c62c756808bdcc00
2025-11-07 13:33:54.459 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp
2025-11-07 13:33:54.460 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:54.461 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:54.462 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp
2025-11-07 13:33:54.463 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 13:33:54.464 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:54.464 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:54.465 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 13:33:55.681 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:55.682 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:55.682 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:55.683 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:55.927 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 13:33:55.927 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:55.928 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.387 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.390 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.391 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.393 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.501 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.502 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.503 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.503 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.504 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.505 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.505 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.506 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.511 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.532 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.532 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.533 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.514 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.536 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.536 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.537 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:33:58.566 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 13:33:58.566 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.567 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.588 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 13:33:58.589 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.589 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.590 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 13:33:58.597 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 13:33:58.603 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 13:33:58.605 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.604 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 13:33:58.608 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.608 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.607 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.609 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 13:33:58.610 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 13:33:58.610 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.610 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.611 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 13:33:58.611 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 13:33:58.612 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.612 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.613 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 13:33:58.613 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 13:33:58.644 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 13:33:58.645 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.646 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.648 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 13:33:58.650 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 13:33:58.650 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.651 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.652 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 13:33:58.660 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 13:33:58.662 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.665 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.667 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 13:33:58.660 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 13:33:58.670 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.670 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.671 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 13:33:58.710 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 13:33:58.711 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.712 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.713 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 13:33:58.728 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 13:33:58.728 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 13:33:58.729 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.729 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.730 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 13:33:58.736 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 13:33:58.737 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 13:33:58.737 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.738 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.738 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.739 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.739 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 13:33:58.739 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 13:33:58.739 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.741 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.743 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 13:33:58.752 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 13:33:58.753 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.753 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.754 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 13:33:58.755 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 13:33:58.753 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 13:33:58.755 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.755 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.759 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.756 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 13:33:58.757 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 13:33:58.760 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.761 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.761 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.763 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.764 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 13:33:58.762 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.768 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 13:33:58.762 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 13:33:58.762 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 13:33:58.802 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 13:33:58.802 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 13:33:58.803 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.803 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.803 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.804 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 13:33:58.803 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.805 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 13:33:58.817 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 13:33:58.818 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.818 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.819 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 13:33:58.820 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 13:33:58.821 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.821 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.823 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 13:33:58.831 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 13:33:58.833 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.833 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:33:58.834 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 13:33:58.850 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 13:33:58.851 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:33:58.851 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:34:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:34:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:34:02.928 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:34:02.929 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:34:02.929 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:02.930 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:34:03.049 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 13:34:03.050 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:34:03.050 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:03.051 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 13:34:12.837 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:34:19.034 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:34:19.036 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:34:19.037 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:19.039 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:34:19.081 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 13:34:19.082 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:34:19.083 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:19.081 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 13:34:19.086 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:34:19.086 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:19.087 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 13:34:19.091 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 13:34:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:34:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:34:32.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:34:32.251 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:34:34.436 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 13:34:34.437 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:34:34.437 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:34.438 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 13:34:34.438 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 13:34:34.439 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 13:34:34.445 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@544993d0]
2025-11-07 13:34:34.475 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:34:34.495 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 13:34:34.641 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 13:34:34.647 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (cpf, nome, telefone, id) 
    values
        (?, ?, ?, ?)
2025-11-07 13:34:34.649 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 13:34:34.660 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:34:34.661 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.UserResponse@59554b00]
2025-11-07 13:34:34.662 [http-nio-8080-exec-4] DEBUG [fe2b32b7d22744d5] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 13:34:52.407 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:34:52.408 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:34:52.408 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:52.409 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:34:52.451 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 13:34:52.452 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:34:52.453 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:52.454 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 13:34:52.466 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 13:34:52.467 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:34:52.467 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:34:52.468 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 13:35:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:35:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:35:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:35:02.647 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:35:12.833 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 13:35:12.834 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:35:12.834 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:35:12.835 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 13:35:12.835 [http-nio-8080-exec-3] DEBUG [e6c021c7834c4dd0] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 13:35:12.836 [http-nio-8080-exec-3] DEBUG [e6c021c7834c4dd0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 13:35:12.837 [http-nio-8080-exec-3] DEBUG [e6c021c7834c4dd0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@77c98c29]
2025-11-07 13:35:12.855 [http-nio-8080-exec-3] DEBUG [e6c021c7834c4dd0] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 13:35:12.857 [http-nio-8080-exec-3] DEBUG [e6c021c7834c4dd0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 13:35:13.038 [http-nio-8080-exec-3] DEBUG [e6c021c7834c4dd0] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 13:35:13.051 [http-nio-8080-exec-3] DEBUG [e6c021c7834c4dd0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:35:13.052 [http-nio-8080-exec-3] DEBUG [e6c021c7834c4dd0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@2b2d99d3]
2025-11-07 13:35:13.060 [http-nio-8080-exec-3] DEBUG [e6c021c7834c4dd0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 13:35:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:35:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:35:32.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:35:33.864 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:36:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:36:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:36:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:36:33.398 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:36:33.399 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:36:33.400 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:36:33.401 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:36:44.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:37:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:37:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:37:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:37:03.109 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:37:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:37:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:37:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:37:33.570 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:38:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:38:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:38:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:38:04.263 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:38:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:38:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:38:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:38:42.536 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:39:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:39:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:39:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:39:15.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:39:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:39:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:39:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:40:06.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:40:06.097 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:40:06.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:40:06.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:40:42.812 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:40:42.812 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:40:42.813 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:40:42.813 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:40:44.059 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:41:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:41:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:41:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:41:02.277 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:41:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:41:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:41:32.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:41:34.201 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:41:34.445 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 13:41:34.446 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:41:34.447 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:41:34.448 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 13:41:34.448 [http-nio-8080-exec-6] DEBUG [923004ab122b4aae] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 13:41:34.449 [http-nio-8080-exec-6] DEBUG [923004ab122b4aae] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 13:41:34.455 [http-nio-8080-exec-6] DEBUG [923004ab122b4aae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@26d0e6b7]
2025-11-07 13:41:34.464 [http-nio-8080-exec-6] DEBUG [923004ab122b4aae] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 13:41:34.466 [http-nio-8080-exec-6] DEBUG [923004ab122b4aae] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 13:41:34.609 [http-nio-8080-exec-6] DEBUG [923004ab122b4aae] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 13:41:34.612 [http-nio-8080-exec-6] DEBUG [923004ab122b4aae] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:41:34.613 [http-nio-8080-exec-6] DEBUG [923004ab122b4aae] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@412553e7]
2025-11-07 13:41:34.614 [http-nio-8080-exec-6] DEBUG [923004ab122b4aae] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 13:41:54.836 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 13:41:54.837 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:41:54.837 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:41:54.838 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 13:41:54.838 [http-nio-8080-exec-9] DEBUG [21763299dac943e7] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 13:41:54.838 [http-nio-8080-exec-9] DEBUG [21763299dac943e7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 13:41:54.840 [http-nio-8080-exec-9] DEBUG [21763299dac943e7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@2bccda76]
2025-11-07 13:41:54.848 [http-nio-8080-exec-9] DEBUG [21763299dac943e7] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 13:41:54.850 [http-nio-8080-exec-9] DEBUG [21763299dac943e7] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 13:41:55.014 [http-nio-8080-exec-9] DEBUG [21763299dac943e7] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 13:41:55.017 [http-nio-8080-exec-9] DEBUG [21763299dac943e7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:41:55.018 [http-nio-8080-exec-9] DEBUG [21763299dac943e7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@467f1930]
2025-11-07 13:41:55.019 [http-nio-8080-exec-9] DEBUG [21763299dac943e7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 13:42:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:42:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:42:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:42:03.368 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:42:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:42:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:42:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:42:34.343 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:43:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:43:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:43:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:43:06.082 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:43:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:43:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:43:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:43:37.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:44:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:44:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:44:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:44:03.343 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:44:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:44:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:44:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:44:34.381 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:45:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:45:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:45:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:45:05.167 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:45:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:45:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:45:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:45:32.425 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:46:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:46:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:46:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:46:02.342 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:46:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:46:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:46:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:46:33.017 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:47:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:47:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:47:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:47:03.246 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:47:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:47:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:47:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:47:32.295 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:48:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:48:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:48:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:48:09.830 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:48:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:48:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:48:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:48:46.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:49:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:49:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:49:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:49:03.652 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:49:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:49:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:49:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:49:36.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:50:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:50:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:50:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:50:07.750 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:50:31.221 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 13:50:31.222 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:50:31.222 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:50:31.223 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 13:50:31.223 [http-nio-8080-exec-4] DEBUG [938a5ce42af74362] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 13:50:31.223 [http-nio-8080-exec-4] DEBUG [938a5ce42af74362] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 13:50:31.225 [http-nio-8080-exec-4] DEBUG [938a5ce42af74362] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@4dbdfe9c]
2025-11-07 13:50:31.229 [http-nio-8080-exec-4] DEBUG [938a5ce42af74362] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 13:50:31.231 [http-nio-8080-exec-4] DEBUG [938a5ce42af74362] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 13:50:31.420 [http-nio-8080-exec-4] DEBUG [938a5ce42af74362] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 13:50:31.431 [http-nio-8080-exec-4] DEBUG [938a5ce42af74362] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:50:31.432 [http-nio-8080-exec-4] DEBUG [938a5ce42af74362] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@2a4fe086]
2025-11-07 13:50:31.437 [http-nio-8080-exec-4] DEBUG [938a5ce42af74362] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 13:50:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:50:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:50:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:50:33.883 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:51:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:51:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:51:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:51:16.037 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:51:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:51:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:51:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:51:32.353 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:52:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:52:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:52:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:52:02.972 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:52:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:52:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:52:32.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:52:33.259 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:53:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:53:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:53:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:53:11.595 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 13:53:11.607 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 13:53:11.632 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 13:53:11.651 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 13:53:11.652 [http-nio-8080-exec-5] DEBUG [1179af0dcda24210] o.s.web.servlet.DispatcherServlet - GET "/api/enderecos/meus", parameters={}
2025-11-07 13:53:11.653 [http-nio-8080-exec-5] DEBUG [1179af0dcda24210] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 13:53:11.672 [http-nio-8080-exec-5] DEBUG [1179af0dcda24210] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 13:53:11.682 [http-nio-8080-exec-5] DEBUG [1179af0dcda24210] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 13:53:11.703 [http-nio-8080-exec-5] DEBUG [1179af0dcda24210] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    left join
        usuario u1_0 
            on u1_0.id=e1_0.usuario_id 
    where
        u1_0.id=?
2025-11-07 13:53:11.730 [http-nio-8080-exec-5] DEBUG [1179af0dcda24210] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 13:53:11.731 [http-nio-8080-exec-5] DEBUG [1179af0dcda24210] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.deliverytech.delivery.dto.EnderecoDTO@6a92aa8]]
2025-11-07 13:53:11.747 [http-nio-8080-exec-5] DEBUG [1179af0dcda24210] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 13:53:26.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:53:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:53:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:53:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:53:58.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:53:59.254 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:53:59.256 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:53:59.257 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:53:59.258 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:53:59.296 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 13:53:59.297 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:53:59.297 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:53:59.298 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 13:53:59.307 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 13:53:59.308 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:53:59.308 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:53:59.308 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 13:54:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:54:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:54:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:54:03.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:54:19.679 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:54:19.681 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:54:19.682 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:54:19.684 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:54:19.741 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 13:54:19.742 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:54:19.742 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:54:19.742 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 13:54:19.748 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 13:54:19.749 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:54:19.749 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:54:19.750 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 13:54:29.709 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:54:29.710 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:54:29.711 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:54:29.712 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 13:54:29.754 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 13:54:29.754 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 13:54:29.755 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:54:29.755 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 13:54:29.756 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:54:29.756 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 13:54:29.757 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 13:54:29.757 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 13:54:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:54:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:54:32.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:54:34.768 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:55:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:55:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:55:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:55:09.681 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:55:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:55:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:55:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:55:33.191 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:56:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:56:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:56:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:56:03.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:56:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:56:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:56:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:56:56.546 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:57:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:57:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:57:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:57:16.397 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:57:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:57:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:57:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:57:33.055 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:58:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:58:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:58:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:58:02.261 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:58:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:58:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:58:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:58:33.636 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:59:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:59:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:59:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:59:04.450 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 13:59:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 13:59:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 13:59:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 13:59:33.614 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:00:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:00:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:00:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:00:03.855 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:00:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:00:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:00:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:00:59.168 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:01:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:01:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:01:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:01:35.698 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:01:35.698 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:01:35.699 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:01:35.699 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:01:57.619 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:02:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:02:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:02:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:02:02.361 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:02:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:02:32.084 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:02:32.084 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:02:32.275 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:03:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:03:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:03:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:03:03.112 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:03:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:03:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:03:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:03:32.982 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:04:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:04:02.078 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:04:02.079 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:04:19.544 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:04:32.065 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:04:32.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:04:32.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:04:44.304 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:05:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:05:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:05:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:05:13.235 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:05:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:05:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:05:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:05:32.990 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:06:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:06:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:06:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:06:07.426 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:06:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:06:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:06:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:06:36.113 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:07:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:07:02.116 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:07:02.116 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:07:03.590 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:07:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:07:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:07:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:07:37.429 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:07:57.635 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/enderecos
2025-11-07 14:07:57.802 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:07:57.805 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:07:57.894 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/enderecos
2025-11-07 14:07:57.895 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] o.s.web.servlet.DispatcherServlet - POST "/api/enderecos", parameters={}
2025-11-07 14:07:57.895 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#adicionarNovoEndereco(EnderecoDTO)
2025-11-07 14:07:57.897 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.EnderecoDTO@391867bd]
2025-11-07 14:07:57.993 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 14:07:57.996 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.adicionarNovoEndereco(com.deliverytech.delivery.dto.EnderecoDTO); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 14:07:58.036 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 14:07:58.038 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:07:58.051 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 14:07:58.058 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:07:58.059 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.EnderecoDTO@3bfc8f06]
2025-11-07 14:07:58.078 [http-nio-8080-exec-3] DEBUG [f79bcaeb994b406a] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 14:08:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:08:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:08:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:08:03.126 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:08:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:08:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:08:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:08:33.792 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:09:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:09:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:09:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:09:23.713 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:09:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:09:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:09:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:09:33.090 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:09:46.321 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:09:46.322 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:09:46.323 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:09:46.324 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:09:46.458 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 14:09:46.459 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:09:46.459 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:09:46.460 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 14:09:46.458 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 14:09:46.461 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:09:46.461 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:09:46.462 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 14:09:49.904 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:09:49.905 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:09:49.906 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:09:49.907 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:09:51.713 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:09:51.714 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:09:51.714 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:09:51.714 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:10:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:10:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:10:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:10:03.866 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:10:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:10:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:10:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:10:33.895 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:11:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:11:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:11:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:11:02.869 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:11:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:11:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:11:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:11:32.718 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:12:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:12:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:12:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:12:03.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:12:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:12:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:12:32.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:12:44.475 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:13:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:13:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:13:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:13:02.768 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:13:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:13:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:13:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:13:45.920 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:14:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:14:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:14:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:14:03.755 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:14:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:14:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:14:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:14:32.725 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:15:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:15:02.134 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:15:02.134 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:15:20.710 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:15:30.454 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-11-07 14:15:30.465 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:30.471 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:30.473 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-11-07 14:15:30.474 [http-nio-8080-exec-2] DEBUG [69ff0c4d2a6e471c] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-11-07 14:15:30.480 [http-nio-8080-exec-2] DEBUG [69ff0c4d2a6e471c] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 14:15:30.538 [http-nio-8080-exec-2] DEBUG [69ff0c4d2a6e471c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:15:30.787 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:15:30.788 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:30.788 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:30.788 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:15:30.791 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-11-07 14:15:30.792 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:30.792 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:30.793 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-11-07 14:15:30.793 [http-nio-8080-exec-7] DEBUG [95f1dfde368547da] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui.css", parameters={}
2025-11-07 14:15:30.794 [http-nio-8080-exec-7] DEBUG [95f1dfde368547da] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 14:15:30.967 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-11-07 14:15:30.967 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-11-07 14:15:30.967 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-11-07 14:15:30.968 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:30.968 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:30.969 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-11-07 14:15:30.969 [http-nio-8080-exec-9] DEBUG [a893994a49504607] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-11-07 14:15:30.969 [http-nio-8080-exec-9] DEBUG [a893994a49504607] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 14:15:30.967 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-11-07 14:15:30.971 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:30.967 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:30.968 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:30.972 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:30.972 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:30.972 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:30.973 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-11-07 14:15:30.974 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-11-07 14:15:30.974 [http-nio-8080-exec-1] DEBUG [744d5bfe8ff943c7] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-11-07 14:15:30.973 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-11-07 14:15:30.975 [http-nio-8080-exec-8] DEBUG [2485e386a4294178] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.css", parameters={}
2025-11-07 14:15:30.975 [http-nio-8080-exec-1] DEBUG [744d5bfe8ff943c7] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 14:15:30.975 [http-nio-8080-exec-8] DEBUG [2485e386a4294178] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 14:15:30.977 [http-nio-8080-exec-6] DEBUG [7470a22bca5c4083] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-11-07 14:15:30.978 [http-nio-8080-exec-6] DEBUG [7470a22bca5c4083] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 14:15:30.981 [http-nio-8080-exec-7] DEBUG [95f1dfde368547da] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:15:31.074 [http-nio-8080-exec-1] DEBUG [744d5bfe8ff943c7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:15:31.161 [http-nio-8080-exec-8] DEBUG [2485e386a4294178] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:15:31.259 [http-nio-8080-exec-9] DEBUG [a893994a49504607] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:15:31.386 [http-nio-8080-exec-6] DEBUG [7470a22bca5c4083] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:15:31.674 [http-nio-8080-exec-3] ERROR [] o.a.c.c.C.[.[.[/].[h2Console] - Servlet.service() for servlet [h2Console] in context with path [] threw exception
java.lang.NullPointerException: Cannot invoke "String.trim()" because the return value of "java.util.Properties.getProperty(String)" is null
	at org.h2.server.web.WebApp.query(WebApp.java:1076)
	at org.h2.server.web.WebApp.process(WebApp.java:244)
	at org.h2.server.web.WebApp.processRequest(WebApp.java:176)
	at org.h2.server.web.JakartaWebServlet.doGet(JakartaWebServlet.java:129)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.deliverytech.delivery.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:66)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:490)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:351)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:83)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:129)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at com.deliverytech.delivery.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:139)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:334)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:225)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1776)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:975)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:493)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-07 14:15:31.908 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs/swagger-config
2025-11-07 14:15:31.909 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:31.910 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:31.911 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs/swagger-config
2025-11-07 14:15:31.915 [http-nio-8080-exec-10] DEBUG [da3dd666ccdb43c9] o.s.web.servlet.DispatcherServlet - GET "/api-docs/swagger-config", parameters={}
2025-11-07 14:15:31.915 [http-nio-8080-exec-10] DEBUG [da3dd666ccdb43c9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-11-07 14:15:31.922 [http-nio-8080-exec-10] DEBUG [da3dd666ccdb43c9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2025-11-07 14:15:31.925 [http-nio-8080-exec-10] DEBUG [da3dd666ccdb43c9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/api-docs/swagger-config, filter=true, oauth2RedirectUrl=http://localhost:8080/swagger-ui (truncated)...]
2025-11-07 14:15:31.940 [http-nio-8080-exec-10] DEBUG [da3dd666ccdb43c9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:15:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:15:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:15:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:15:32.765 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-11-07 14:15:32.774 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:32.776 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:32.778 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-11-07 14:15:32.780 [http-nio-8080-exec-4] DEBUG [39c1fb75c5044de2] o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-11-07 14:15:32.782 [http-nio-8080-exec-4] DEBUG [39c1fb75c5044de2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-07 14:15:32.845 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:15:32.847 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:32.886 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 14:15:32.888 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:15:32.888 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:15:34.446 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:15:36.126 [http-nio-8080-exec-4] INFO  [39c1fb75c5044de2] o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 3312 ms
2025-11-07 14:15:36.160 [http-nio-8080-exec-4] DEBUG [39c1fb75c5044de2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2025-11-07 14:15:36.171 [http-nio-8080-exec-4] DEBUG [39c1fb75c5044de2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-07 14:15:36.173 [http-nio-8080-exec-4] DEBUG [39c1fb75c5044de2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:16:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:16:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:16:02.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:16:27.620 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:16:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:16:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:16:32.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:16:34.448 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:17:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:17:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:17:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:17:09.284 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:17:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:17:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:17:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:17:32.388 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:18:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:18:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:18:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:18:03.061 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:18:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:18:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:18:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:18:32.212 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:19:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:19:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:19:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:19:25.468 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:19:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:19:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:19:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:19:32.206 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:20:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:20:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:20:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:20:03.920 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:20:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:20:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:20:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:20:43.434 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/meus?restauranteId=2&enderecoEntregaId=6&metodoPagamento=CARTAO_CREDITO&observacoes=Pedido%20de%20teste%20da%20Ana%21&itens=%5B%7B%22produtoId%22%3A3%2C%22quantidade%22%3A1%2C%22opcionaisIds%22%3A%5B14%5D%7D%5D
2025-11-07 14:20:43.435 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:20:43.435 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:20:46.129 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:21:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:21:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:21:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:21:02.676 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:21:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:21:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:21:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:21:39.774 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 14:21:39.775 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:21:39.775 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:21:39.776 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 14:21:39.776 [http-nio-8080-exec-3] DEBUG [b78a5d76f3c64541] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 14:21:39.776 [http-nio-8080-exec-3] DEBUG [b78a5d76f3c64541] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 14:21:39.778 [http-nio-8080-exec-3] DEBUG [b78a5d76f3c64541] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@17aed4d7]
2025-11-07 14:21:39.787 [http-nio-8080-exec-3] DEBUG [b78a5d76f3c64541] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:21:39.789 [http-nio-8080-exec-3] DEBUG [b78a5d76f3c64541] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:21:39.940 [http-nio-8080-exec-3] DEBUG [b78a5d76f3c64541] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 14:21:39.943 [http-nio-8080-exec-3] DEBUG [b78a5d76f3c64541] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:21:39.943 [http-nio-8080-exec-3] DEBUG [b78a5d76f3c64541] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@5fefeea7]
2025-11-07 14:21:39.944 [http-nio-8080-exec-3] DEBUG [b78a5d76f3c64541] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:21:52.684 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:22:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:22:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:22:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:22:13.730 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:22:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:22:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:22:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:22:55.980 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:23:02.065 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:23:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:23:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:23:03.589 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:23:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:23:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:23:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:23:34.691 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:23:52.102 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 14:23:52.109 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:23:52.111 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:23:52.118 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 14:23:52.119 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 14:23:52.119 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 14:23:52.127 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@edc197b]
2025-11-07 14:23:52.201 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 14:23:52.204 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 14:23:52.237 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 14:23:52.238 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:23:52.241 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 14:23:52.248 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 14:23:52.252 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 14:23:52.261 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?)
2025-11-07 14:23:52.264 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 14:23:52.289 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 14:23:52.315 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 14:23:52.326 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 14:23:52.330 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 14:23:52.376 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 14:23:52.381 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:23:52.382 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@2dfc8ba8]
2025-11-07 14:23:52.398 [http-nio-8080-exec-4] DEBUG [ccfd64e8834c4232] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 14:24:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:24:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:24:02.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:24:02.692 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:24:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:24:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:24:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:24:33.071 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:25:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:25:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:25:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:25:03.930 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:25:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:25:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:25:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:25:51.941 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:26:01.767 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 14:26:01.780 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:26:01.798 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:26:01.834 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 14:26:01.835 [http-nio-8080-exec-1] DEBUG [3ddb57fb70cd4d0d] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 14:26:01.837 [http-nio-8080-exec-1] DEBUG [3ddb57fb70cd4d0d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 14:26:01.842 [http-nio-8080-exec-1] DEBUG [3ddb57fb70cd4d0d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@d903157]
2025-11-07 14:26:01.861 [http-nio-8080-exec-1] DEBUG [3ddb57fb70cd4d0d] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:26:01.868 [http-nio-8080-exec-1] DEBUG [3ddb57fb70cd4d0d] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:26:02.042 [http-nio-8080-exec-1] DEBUG [3ddb57fb70cd4d0d] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 14:26:02.045 [http-nio-8080-exec-1] DEBUG [3ddb57fb70cd4d0d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:26:02.045 [http-nio-8080-exec-1] DEBUG [3ddb57fb70cd4d0d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@4e5eade6]
2025-11-07 14:26:02.047 [http-nio-8080-exec-1] DEBUG [3ddb57fb70cd4d0d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:26:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:26:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:26:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:26:18.925 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:26:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:26:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:26:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:26:34.080 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:27:02.066 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:27:02.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:27:02.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:27:02.629 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:27:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:27:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:27:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:27:34.360 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/restaurantes/2
2025-11-07 14:27:34.365 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:27:34.366 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:27:34.372 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/restaurantes/2
2025-11-07 14:27:34.372 [http-nio-8080-exec-8] DEBUG [606d86b2d88b44e2] o.s.web.servlet.DispatcherServlet - GET "/api/restaurantes/2", parameters={}
2025-11-07 14:27:34.373 [http-nio-8080-exec-8] DEBUG [606d86b2d88b44e2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.RestauranteController#buscarPorId(Long)
2025-11-07 14:27:34.412 [http-nio-8080-exec-8] DEBUG [606d86b2d88b44e2] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 14:27:34.428 [http-nio-8080-exec-8] DEBUG [606d86b2d88b44e2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:27:34.429 [http-nio-8080-exec-8] DEBUG [606d86b2d88b44e2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@62e425b1]
2025-11-07 14:27:34.433 [http-nio-8080-exec-8] DEBUG [606d86b2d88b44e2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:27:35.505 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:28:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:28:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:28:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:28:03.108 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:28:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:28:32.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:28:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:28:32.394 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:29:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:29:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:29:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:29:02.566 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:29:32.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:29:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:29:32.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:29:46.146 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:30:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:30:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:30:02.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:30:32.556 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:30:32.556 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:30:32.557 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:30:32.557 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:30:33.817 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:31:02.064 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:31:02.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:31:02.065 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:31:10.505 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-07 14:31:10.512 [Thread-152] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 14:31:10.514 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 14:31:10.597 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 14:31:10.598 [Thread-152] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 14:31:40.662 [Thread-152] INFO  [] o.s.c.s.DefaultLifecycleProcessor - Shutdown phase 1073741823 ends with 1 bean still running after timeout of 30000ms: [taskScheduler]
2025-11-07 14:31:40.688 [Thread-152] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 14:31:40.688 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 14:31:40.691 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 14:31:40.697 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 14:31:40.699 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 14:31:40.705 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 14:31:40.706 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 14:31:40.712 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 14:31:40.714 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 14:31:40.715 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 14:31:40.715 [Thread-152] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 14:31:40.717 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 14:31:40.717 [Thread-152] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 14:31:40.721 [Thread-152] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-38 - Shutdown initiated...
2025-11-07 14:31:40.723 [Thread-152] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-38 - Shutdown completed.
2025-11-07 14:31:42.127 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 14:31:42.127 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 14:31:42.128 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 14:31:43.908 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 14:31:43.908 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 14:31:43.996 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 86 ms. Found 9 JPA repository interfaces.
2025-11-07 14:31:44.006 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 14:31:44.007 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 14:31:44.018 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 14:31:44.019 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 14:31:44.020 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 14:31:44.021 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 14:31:44.021 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 14:31:44.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 14:31:44.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 14:31:44.023 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 14:31:44.024 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 14:31:44.024 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2025-11-07 14:31:44.744 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 14:31:44.754 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 14:31:44.755 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 14:31:44.756 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 14:31:44.850 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 14:31:44.851 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2715 ms
2025-11-07 14:31:45.319 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 14:31:45.320 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 14:31:45.321 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 14:31:45.590 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 14:31:45.602 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-39 - Starting...
2025-11-07 14:31:45.606 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-39 - Added connection conn473: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 14:31:45.608 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-39 - Start completed.
2025-11-07 14:31:45.609 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 14:31:46.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 14:31:46.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 14:31:46.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 14:31:46.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 14:31:46.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 14:31:46.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 14:31:46.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 14:31:46.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 14:31:46.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 14:31:46.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 14:31:46.145 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 14:31:46.147 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 14:31:46.150 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 14:31:46.153 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 14:31:46.157 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 14:31:46.158 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 14:31:46.160 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 14:31:46.163 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 14:31:46.166 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 14:31:46.180 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 14:31:46.183 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 14:31:46.194 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 14:31:46.196 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 14:31:46.198 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 14:31:46.200 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 14:31:46.202 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 14:31:46.205 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 14:31:46.212 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 14:31:46.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 14:31:46.224 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 14:31:46.237 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 14:31:46.245 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 14:31:46.252 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 14:31:46.256 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 14:31:46.261 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 14:31:47.818 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 14:31:48.287 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 14:31:48.422 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 14:31:48.630 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 14:31:48.824 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 14:31:48.909 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 14:31:48.983 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 14:31:49.408 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 14:31:49.674 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 14:31:49.762 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 14:31:49.766 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 14:31:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:31:49.797 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 8.074 seconds (process running for 22746.082)
2025-11-07 14:31:49.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:31:49.799 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:31:49.810 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 14:31:52.704 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:31:53.708 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 14:31:53.708 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 14:32:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:32:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:32:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:32:24.141 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:32:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:32:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:32:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:32:52.769 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:33:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:33:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:33:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:33:26.454 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 14:33:26.455 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 14:33:26.455 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 14:33:26.455 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 14:33:26.455 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 14:33:26.458 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@149c5266
2025-11-07 14:33:26.459 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@f619850
2025-11-07 14:33:26.459 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 14:33:26.459 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-07 14:33:26.461 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/restaurantes/2
2025-11-07 14:33:26.631 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:33:26.633 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:33:26.646 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/restaurantes/2
2025-11-07 14:33:26.648 [http-nio-8080-exec-1] DEBUG [bc36e0d21d354b22] o.s.web.servlet.DispatcherServlet - GET "/api/restaurantes/2", parameters={}
2025-11-07 14:33:26.649 [http-nio-8080-exec-1] DEBUG [bc36e0d21d354b22] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.RestauranteController#buscarPorId(Long)
2025-11-07 14:33:26.674 [http-nio-8080-exec-1] DEBUG [bc36e0d21d354b22] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 14:33:26.743 [http-nio-8080-exec-1] DEBUG [bc36e0d21d354b22] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:33:26.745 [http-nio-8080-exec-1] DEBUG [bc36e0d21d354b22] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@65c5e99]
2025-11-07 14:33:26.766 [http-nio-8080-exec-1] DEBUG [bc36e0d21d354b22] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:33:27.080 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:33:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:33:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:33:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:34:08.682 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:34:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:34:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:34:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:34:20.147 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:34:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:34:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:34:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:34:50.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:35:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:35:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:35:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:35:20.059 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:35:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:35:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:35:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:36:05.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:36:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:36:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:36:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:36:31.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:36:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:36:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:36:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:36:51.568 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:37:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:37:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:37:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:37:20.319 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:37:42.302 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/restaurante/2?status=PENDENTE
2025-11-07 14:37:42.307 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:37:42.308 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:37:42.315 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/restaurante/2?status=PENDENTE
2025-11-07 14:37:42.316 [http-nio-8080-exec-3] DEBUG [8dfe2eb435f14698] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/restaurante/2?status=PENDENTE", parameters={masked}
2025-11-07 14:37:42.317 [http-nio-8080-exec-3] DEBUG [8dfe2eb435f14698] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorRestaurante(Long, StatusPedido)
2025-11-07 14:37:42.361 [http-nio-8080-exec-3] DEBUG [8dfe2eb435f14698] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 14:37:42.377 [http-nio-8080-exec-3] DEBUG [8dfe2eb435f14698] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 14:37:42.422 [http-nio-8080-exec-3] DEBUG [8dfe2eb435f14698] org.hibernate.SQL - 
    /* SELECT
        DISTINCT p 
    FROM
        Pedido p 
    LEFT JOIN
        
    FETCH
        p.restaurante r 
    LEFT JOIN
        
    FETCH
        p.itens i 
    WHERE
        p.restaurante.id = :restauranteId 
        AND (
            :status IS NULL 
            OR p.status = :status
        ) */ select
            distinct p1_0.id,
            p1_0.cliente_id,
            p1_0.data_pedido,
            p1_0.endereco_entrega_id,
            p1_0.entregador_id,
            i1_0.pedido_id,
            i1_0.id,
            i1_0.preco_unitario,
            i1_0.produto_id,
            i1_0.quantidade,
            i1_0.subtotal,
            p1_0.metodo_pagamento,
            p1_0.numero_pedido,
            p1_0.observacoes,
            p1_0.restaurante_id,
            r1_0.id,
            r1_0.ativo,
            r1_0.avaliacao,
            r1_0.categoria,
            r1_0.endereco_id,
            r1_0.horario_funcionamento,
            r1_0.nome,
            r1_0.taxa_entrega,
            r1_0.telefone,
            r1_0.tempo_entrega,
            p1_0.status,
            p1_0.subtotal,
            p1_0.taxa_entrega,
            p1_0.troco_para,
            p1_0.valor_total 
        from
            pedido p1_0 
        left join
            restaurante r1_0 
                on r1_0.id=p1_0.restaurante_id 
        left join
            itens_pedido i1_0 
                on p1_0.id=i1_0.pedido_id 
        where
            r1_0.id=? 
            and (
                ? is null 
                or p1_0.status=?
            )
2025-11-07 14:37:42.443 [http-nio-8080-exec-3] DEBUG [8dfe2eb435f14698] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:37:42.449 [http-nio-8080-exec-3] DEBUG [8dfe2eb435f14698] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@72fd2e41]
2025-11-07 14:37:42.456 [http-nio-8080-exec-3] DEBUG [8dfe2eb435f14698] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:37:49.798 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:37:49.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:37:49.799 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:37:50.324 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:38:19.797 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:38:19.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:38:19.799 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:38:32.023 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:38:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:38:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:38:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:38:52.532 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:39:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:39:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:39:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:39:25.657 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:39:25.659 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:25.660 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:25.661 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=70305db8fdf403df2b5ce0c2116b20a5
2025-11-07 14:39:25.701 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 14:39:25.702 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:25.702 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:25.703 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 14:39:25.746 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=933542e9c24546479ca0d13b9bcc8931
2025-11-07 14:39:25.747 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:25.748 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:25.748 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=933542e9c24546479ca0d13b9bcc8931
2025-11-07 14:39:25.781 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp
2025-11-07 14:39:25.782 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:25.782 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:25.783 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp
2025-11-07 14:39:25.806 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 14:39:25.806 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:25.807 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:25.808 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 14:39:26.411 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:26.412 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:26.412 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:26.414 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:26.495 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 14:39:26.496 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:26.497 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.738 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.738 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.738 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.739 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.782 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.782 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.783 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.783 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.796 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.797 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.797 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.799 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.800 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.801 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.805 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.807 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.809 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.816 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.816 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.818 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:27.840 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 14:39:27.841 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.841 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.842 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 14:39:27.853 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 14:39:27.854 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 14:39:27.853 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 14:39:27.854 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 14:39:27.855 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.855 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.855 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.855 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.855 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 14:39:27.856 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.856 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.856 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 14:39:27.857 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 14:39:27.857 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.857 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.858 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 14:39:27.858 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.858 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.858 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 14:39:27.859 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 14:39:27.881 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 14:39:27.881 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.882 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.882 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 14:39:27.886 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 14:39:27.887 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.887 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.886 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 14:39:27.889 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.891 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.892 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 14:39:27.892 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 14:39:27.892 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:27.892 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:27.893 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 14:39:27.894 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 14:39:28.019 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 14:39:28.020 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.020 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.021 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 14:39:28.060 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 14:39:28.064 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.065 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.068 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 14:39:28.072 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 14:39:28.072 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.073 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.073 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 14:39:28.084 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 14:39:28.086 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.087 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.084 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 14:39:28.087 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 14:39:28.087 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.088 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.088 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 14:39:28.089 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 14:39:28.089 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.090 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.090 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 14:39:28.085 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 14:39:28.091 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.094 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.085 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 14:39:28.095 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.095 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.096 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 14:39:28.097 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 14:39:28.099 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 14:39:28.100 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.102 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.106 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 14:39:28.125 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 14:39:28.126 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.126 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.126 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 14:39:28.138 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 14:39:28.142 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.143 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.139 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 14:39:28.144 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.144 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.145 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 14:39:28.148 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 14:39:28.148 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 14:39:28.148 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 14:39:28.149 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.149 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.150 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 14:39:28.149 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.151 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.151 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 14:39:28.150 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 14:39:28.152 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.153 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:28.156 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 14:39:28.195 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 14:39:28.195 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:28.196 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:31.505 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:31.507 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:31.507 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:31.508 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:31.546 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 14:39:31.547 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:31.548 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:31.550 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 14:39:37.097 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:37.098 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:37.098 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:37.098 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 14:39:37.120 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 14:39:37.121 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 14:39:37.121 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 14:39:37.121 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 14:39:38.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:39:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:39:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:39:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:40:07.321 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:40:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:40:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:40:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:40:37.087 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:40:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:40:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:40:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:40:49.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:41:01.106 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 14:41:01.113 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:41:01.116 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:41:01.121 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 14:41:01.122 [http-nio-8080-exec-6] DEBUG [7db0340197944af3] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 14:41:01.122 [http-nio-8080-exec-6] DEBUG [7db0340197944af3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 14:41:01.137 [http-nio-8080-exec-6] DEBUG [7db0340197944af3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@798d91f3]
2025-11-07 14:41:01.287 [http-nio-8080-exec-6] DEBUG [7db0340197944af3] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:41:01.414 [http-nio-8080-exec-6] DEBUG [7db0340197944af3] o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'ana.cadastro.final@email.com'
2025-11-07 14:41:01.415 [http-nio-8080-exec-6] DEBUG [7db0340197944af3] o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Usuário inexistente ou senha inválida
2025-11-07 14:41:01.419 [http-nio-8080-exec-6] DEBUG [7db0340197944af3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:41:01.420 [http-nio-8080-exec-6] DEBUG [7db0340197944af3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Credenciais inválidas}]
2025-11-07 14:41:01.421 [http-nio-8080-exec-6] DEBUG [7db0340197944af3] o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-11-07 14:41:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:41:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:41:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:41:27.218 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:41:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:41:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:41:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:42:10.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:42:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:42:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:42:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:42:19.976 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:42:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:42:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:42:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:43:03.057 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:43:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:43:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:43:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:43:21.184 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:43:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:43:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:43:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:43:51.272 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:44:19.797 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:44:19.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:44:19.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:44:21.231 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:44:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:44:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:44:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:44:54.395 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:45:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:45:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:45:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:45:22.083 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:45:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:45:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:45:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:45:50.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:46:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:46:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:46:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:46:20.896 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:46:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:46:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:46:49.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:46:50.057 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:47:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:47:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:47:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:47:20.262 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:47:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:47:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:47:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:48:00.385 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:48:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:48:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:48:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:48:25.424 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:48:49.797 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:48:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:48:49.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:48:50.623 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:49:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:49:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:49:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:49:35.457 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:49:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:49:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:49:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:50:00.595 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:50:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:50:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:50:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:50:45.737 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:50:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:50:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:50:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:50:50.925 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:51:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:51:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:51:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:51:21.030 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:51:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:51:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:51:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:51:50.342 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:52:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:52:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:52:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:52:21.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:52:33.431 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 14:52:33.438 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:52:33.447 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:52:33.461 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 14:52:33.462 [http-nio-8080-exec-5] DEBUG [5b35ce5c99c7495a] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 14:52:33.462 [http-nio-8080-exec-5] DEBUG [5b35ce5c99c7495a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 14:52:33.479 [http-nio-8080-exec-5] DEBUG [5b35ce5c99c7495a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@289f2911]
2025-11-07 14:52:33.530 [http-nio-8080-exec-5] DEBUG [5b35ce5c99c7495a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-07 14:52:33.534 [http-nio-8080-exec-5] DEBUG [5b35ce5c99c7495a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:52:33.535 [http-nio-8080-exec-5] DEBUG [5b35ce5c99c7495a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@16e721f5]
2025-11-07 14:52:33.539 [http-nio-8080-exec-5] WARN  [5b35ce5c99c7495a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.registerCliente(com.deliverytech.delivery.dto.auth.RegisterRequest): [Field error in object 'registerRequest' on field 'cpf': rejected value [03114435001]; codes [CPF.registerRequest.cpf,CPF.cpf,CPF.java.lang.String,CPF]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.cpf,cpf]; arguments []; default message [cpf]]; default message [CPF inválido]] ]
2025-11-07 14:52:33.539 [http-nio-8080-exec-5] DEBUG [5b35ce5c99c7495a] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 14:52:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:52:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:52:49.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:52:51.084 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:53:10.118 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 14:53:10.149 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:53:10.158 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:53:10.246 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 14:53:10.256 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 14:53:10.257 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 14:53:10.261 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@70cc4d41]
2025-11-07 14:53:10.287 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 14:53:10.315 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 14:53:10.517 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 14:53:10.531 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (cpf, nome, telefone, id) 
    values
        (?, ?, ?, ?)
2025-11-07 14:53:10.543 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 14:53:10.550 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:53:10.551 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.UserResponse@4820f855]
2025-11-07 14:53:10.559 [http-nio-8080-exec-4] DEBUG [c0694818619c4c25] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 14:53:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:53:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:53:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:53:32.176 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:53:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:53:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:53:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:53:51.768 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:54:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:54:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:54:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:54:19.965 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:54:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:54:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:54:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:54:52.512 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 14:54:52.516 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:54:52.518 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:54:52.523 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 14:54:52.524 [http-nio-8080-exec-9] DEBUG [7e770baeaeaf4870] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 14:54:52.525 [http-nio-8080-exec-9] DEBUG [7e770baeaeaf4870] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 14:54:52.526 [http-nio-8080-exec-9] DEBUG [7e770baeaeaf4870] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@418bd8c6]
2025-11-07 14:54:52.533 [http-nio-8080-exec-9] DEBUG [7e770baeaeaf4870] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:54:52.535 [http-nio-8080-exec-9] DEBUG [7e770baeaeaf4870] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:54:52.670 [http-nio-8080-exec-9] DEBUG [7e770baeaeaf4870] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 14:54:52.676 [http-nio-8080-exec-9] DEBUG [7e770baeaeaf4870] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:54:52.676 [http-nio-8080-exec-9] DEBUG [7e770baeaeaf4870] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@1a2cd5bb]
2025-11-07 14:54:52.685 [http-nio-8080-exec-9] DEBUG [7e770baeaeaf4870] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:54:57.962 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:55:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:55:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:55:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:55:21.813 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:55:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:55:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:55:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:55:50.420 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:56:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:56:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:56:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:56:20.575 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:56:45.443 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/enderecos/meus
2025-11-07 14:56:45.488 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:56:45.496 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:56:45.512 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/enderecos/meus
2025-11-07 14:56:45.513 [http-nio-8080-exec-2] DEBUG [9d6f5d8cc5b446df] o.s.web.servlet.DispatcherServlet - GET "/api/enderecos/meus", parameters={}
2025-11-07 14:56:45.513 [http-nio-8080-exec-2] DEBUG [9d6f5d8cc5b446df] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.EnderecoController#listarMeusEnderecos()
2025-11-07 14:56:45.525 [http-nio-8080-exec-2] DEBUG [9d6f5d8cc5b446df] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 14:56:45.528 [http-nio-8080-exec-2] DEBUG [9d6f5d8cc5b446df] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.EnderecoController.listarMeusEnderecos(); target is of class [com.deliverytech.delivery.controller.EnderecoController]
2025-11-07 14:56:45.537 [http-nio-8080-exec-2] DEBUG [9d6f5d8cc5b446df] org.hibernate.SQL - 
    /* <criteria> */ select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    left join
        usuario u1_0 
            on u1_0.id=e1_0.usuario_id 
    where
        u1_0.id=?
2025-11-07 14:56:45.544 [http-nio-8080-exec-2] DEBUG [9d6f5d8cc5b446df] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:56:45.544 [http-nio-8080-exec-2] DEBUG [9d6f5d8cc5b446df] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.deliverytech.delivery.dto.EnderecoDTO@5e234831]]
2025-11-07 14:56:45.545 [http-nio-8080-exec-2] DEBUG [9d6f5d8cc5b446df] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:56:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:56:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:56:49.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:57:05.464 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:57:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:57:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:57:19.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:57:58.456 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:57:58.457 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:57:58.457 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:57:58.458 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:58:01.882 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:58:05.571 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 14:58:05.577 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:58:05.580 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:58:05.603 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 14:58:05.604 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 14:58:05.606 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 14:58:05.625 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@25d6bdb4]
2025-11-07 14:58:05.697 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 14:58:05.700 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 14:58:05.726 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 14:58:05.740 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:58:05.755 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 14:58:05.767 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 14:58:05.778 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 14:58:05.789 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?)
2025-11-07 14:58:05.793 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 14:58:05.809 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 14:58:05.831 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 14:58:05.853 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 14:58:05.858 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 14:58:05.924 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 14:58:05.934 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:58:05.935 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@3d56377a]
2025-11-07 14:58:05.939 [http-nio-8080-exec-7] DEBUG [6405e1f9cb854e21] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 14:58:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:58:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:58:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:58:20.573 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:58:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:58:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:58:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:58:50.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:59:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:59:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:59:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:59:19.986 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 14:59:48.600 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 14:59:48.611 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:59:48.617 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:59:48.632 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 14:59:48.634 [http-nio-8080-exec-8] DEBUG [cfa54916ff4b4354] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 14:59:48.635 [http-nio-8080-exec-8] DEBUG [cfa54916ff4b4354] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 14:59:48.658 [http-nio-8080-exec-8] DEBUG [cfa54916ff4b4354] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@4edff90c]
2025-11-07 14:59:48.661 [http-nio-8080-exec-8] DEBUG [cfa54916ff4b4354] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 14:59:48.662 [http-nio-8080-exec-8] DEBUG [cfa54916ff4b4354] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 14:59:48.827 [http-nio-8080-exec-8] DEBUG [cfa54916ff4b4354] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 14:59:48.830 [http-nio-8080-exec-8] DEBUG [cfa54916ff4b4354] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 14:59:48.830 [http-nio-8080-exec-8] DEBUG [cfa54916ff4b4354] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@3a38b307]
2025-11-07 14:59:48.834 [http-nio-8080-exec-8] DEBUG [cfa54916ff4b4354] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 14:59:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 14:59:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 14:59:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 14:59:51.433 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:00:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:00:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:00:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:00:21.183 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:00:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:00:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:00:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:00:50.650 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:01:13.148 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/restaurante/2?status=PENDENTE
2025-11-07 15:01:13.151 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:01:13.153 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:01:13.157 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/restaurante/2?status=PENDENTE
2025-11-07 15:01:13.158 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/restaurante/2?status=PENDENTE", parameters={masked}
2025-11-07 15:01:13.159 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorRestaurante(Long, StatusPedido)
2025-11-07 15:01:13.160 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:01:13.167 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:01:13.181 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] org.hibernate.SQL - 
    /* SELECT
        DISTINCT p 
    FROM
        Pedido p 
    LEFT JOIN
        
    FETCH
        p.restaurante r 
    LEFT JOIN
        
    FETCH
        p.itens i 
    WHERE
        p.restaurante.id = :restauranteId 
        AND (
            :status IS NULL 
            OR p.status = :status
        ) */ select
            distinct p1_0.id,
            p1_0.cliente_id,
            p1_0.data_pedido,
            p1_0.endereco_entrega_id,
            p1_0.entregador_id,
            i1_0.pedido_id,
            i1_0.id,
            i1_0.preco_unitario,
            i1_0.produto_id,
            i1_0.quantidade,
            i1_0.subtotal,
            p1_0.metodo_pagamento,
            p1_0.numero_pedido,
            p1_0.observacoes,
            p1_0.restaurante_id,
            r1_0.id,
            r1_0.ativo,
            r1_0.avaliacao,
            r1_0.categoria,
            r1_0.endereco_id,
            r1_0.horario_funcionamento,
            r1_0.nome,
            r1_0.taxa_entrega,
            r1_0.telefone,
            r1_0.tempo_entrega,
            p1_0.status,
            p1_0.subtotal,
            p1_0.taxa_entrega,
            p1_0.troco_para,
            p1_0.valor_total 
        from
            pedido p1_0 
        left join
            restaurante r1_0 
                on r1_0.id=p1_0.restaurante_id 
        left join
            itens_pedido i1_0 
                on p1_0.id=i1_0.pedido_id 
        where
            r1_0.id=? 
            and (
                ? is null 
                or p1_0.status=?
            )
2025-11-07 15:01:13.192 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:01:13.209 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] org.hibernate.SQL - 
    /* SELECT
        DISTINCT ip 
    FROM
        ItemPedido ip 
    LEFT JOIN
        
    FETCH
        ip.opcionaisSelecionados iso 
    LEFT JOIN
        
    FETCH
        iso.itemOpcional 
    WHERE
        ip IN :itens */ select
            distinct ip1_0.id,
            os1_0.item_pedido_id,
            os1_0.id,
            os1_0.item_opcional_id,
            io1_0.id,
            io1_0.grupo_opcional_id,
            io1_0.nome,
            io1_0.preco_adicional,
            os1_0.preco_registrado,
            ip1_0.pedido_id,
            ip1_0.preco_unitario,
            ip1_0.produto_id,
            ip1_0.quantidade,
            ip1_0.subtotal 
        from
            itens_pedido ip1_0 
        left join
            item_pedido_opcional os1_0 
                on ip1_0.id=os1_0.item_pedido_id 
        left join
            item_opcional io1_0 
                on io1_0.id=os1_0.item_opcional_id 
        where
            ip1_0.id in (?)
2025-11-07 15:01:13.233 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:01:13.241 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:01:13.245 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:01:13.245 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@149e5bba]
2025-11-07 15:01:13.248 [http-nio-8080-exec-4] DEBUG [23c00ade69fb4e04] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:01:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:01:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:01:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:01:20.534 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:01:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:01:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:01:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:01:50.007 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:02:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:02:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:02:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:02:22.648 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:02:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:02:49.808 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:02:49.809 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:02:50.555 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:03:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:03:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:03:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:03:20.058 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:03:49.391 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 15:03:49.544 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:03:49.635 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:03:49.642 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 15:03:49.643 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 15:03:49.644 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 15:03:49.702 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@315a50ec]
2025-11-07 15:03:49.706 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:03:49.758 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 15:03:49.762 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:03:49.766 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 15:03:49.773 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:03:49.775 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 15:03:49.777 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:03:49.778 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 15:03:49.781 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 15:03:49.789 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 15:03:49.793 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:03:49.793 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@4a6d26e5]
2025-11-07 15:03:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:03:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:03:49.796 [http-nio-8080-exec-9] DEBUG [c06b02a5c72e44ef] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:03:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:03:51.958 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:04:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:04:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:04:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:04:22.356 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:04:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:04:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:04:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:04:54.274 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:05:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:05:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:05:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:05:21.279 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 15:05:21.570 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 15:05:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:05:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:05:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:05:52.209 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:06:09.430 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/produtos/1/disponibilidade
2025-11-07 15:06:09.457 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:06:09.458 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:06:09.476 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/produtos/1/disponibilidade
2025-11-07 15:06:09.477 [http-nio-8080-exec-2] DEBUG [4512b028ee64450a] o.s.web.servlet.DispatcherServlet - PATCH "/api/produtos/1/disponibilidade", parameters={}
2025-11-07 15:06:09.480 [http-nio-8080-exec-2] DEBUG [4512b028ee64450a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ProdutoController#alterarDisponibilidade(Long)
2025-11-07 15:06:09.501 [http-nio-8080-exec-2] DEBUG [4512b028ee64450a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ProdutoController.alterarDisponibilidade(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ProdutoController]
2025-11-07 15:06:09.511 [http-nio-8080-exec-2] DEBUG [4512b028ee64450a] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 15:06:09.570 [http-nio-8080-exec-2] DEBUG [4512b028ee64450a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ProdutoController.alterarDisponibilidade(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ProdutoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@61e36f6f and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('ADMIN') or @produtoService.isOwner(#id)]
2025-11-07 15:06:09.574 [http-nio-8080-exec-2] DEBUG [4512b028ee64450a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 15:06:09.593 [http-nio-8080-exec-2] DEBUG [4512b028ee64450a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:06:09.599 [http-nio-8080-exec-2] DEBUG [4512b028ee64450a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@3e578c12]
2025-11-07 15:06:09.601 [http-nio-8080-exec-2] WARN  [4512b028ee64450a] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 15:06:09.601 [http-nio-8080-exec-2] DEBUG [4512b028ee64450a] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 15:06:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:06:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:06:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:06:20.110 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:06:29.993 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 15:06:30.000 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:06:30.002 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:06:30.006 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 15:06:30.007 [http-nio-8080-exec-1] DEBUG [15a0de7d4fc64e81] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 15:06:30.008 [http-nio-8080-exec-1] DEBUG [15a0de7d4fc64e81] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 15:06:30.009 [http-nio-8080-exec-1] DEBUG [15a0de7d4fc64e81] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@2d18f293]
2025-11-07 15:06:30.013 [http-nio-8080-exec-1] DEBUG [15a0de7d4fc64e81] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:06:30.014 [http-nio-8080-exec-1] DEBUG [15a0de7d4fc64e81] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:06:30.228 [http-nio-8080-exec-1] DEBUG [15a0de7d4fc64e81] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 15:06:30.232 [http-nio-8080-exec-1] DEBUG [15a0de7d4fc64e81] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:06:30.232 [http-nio-8080-exec-1] DEBUG [15a0de7d4fc64e81] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@49d80ee]
2025-11-07 15:06:30.233 [http-nio-8080-exec-1] DEBUG [15a0de7d4fc64e81] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:06:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:06:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:06:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:06:50.503 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:07:19.797 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:07:19.798 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:07:19.799 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:07:20.476 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:07:31.980 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 15:07:31.985 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:07:31.991 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:07:31.999 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 15:07:32.000 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 15:07:32.001 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 15:07:32.002 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@4adcafdc]
2025-11-07 15:07:32.003 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:07:32.032 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 15:07:32.038 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:07:32.047 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 15:07:32.062 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:07:32.076 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 15:07:32.078 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:07:32.079 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 15:07:32.081 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 15:07:32.091 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 15:07:32.095 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:07:32.096 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@401ff98d]
2025-11-07 15:07:32.101 [http-nio-8080-exec-6] DEBUG [fe1e98ff59a94cf7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:07:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:07:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:07:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:07:50.602 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:08:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:08:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:08:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:08:23.102 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:08:26.201 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 15:08:26.204 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:08:26.206 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:08:26.210 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 15:08:26.211 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 15:08:26.211 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 15:08:26.214 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@93a6496]
2025-11-07 15:08:26.215 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:08:26.217 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 15:08:26.233 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:08:26.239 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 15:08:26.246 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-07 15:08:26.254 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:08:26.256 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:08:26.260 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:08:26.272 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:08:26.279 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:08:26.291 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:08:26.295 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:08:26.319 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id 
    from
        pedido p1_0 
    where
        p1_0.entregador_id=? 
        and p1_0.status=? 
    fetch
        first ? rows only
2025-11-07 15:08:26.321 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:08:26.338 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 15:08:26.345 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 15:08:26.348 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 15:08:26.369 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 15:08:26.382 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:08:26.382 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@6d8c4270]
2025-11-07 15:08:26.383 [http-nio-8080-exec-8] DEBUG [aa060c56c1074cc3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:08:49.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:08:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:08:49.799 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:08:58.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:09:19.796 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:09:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:09:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:09:20.815 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:09:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:09:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:09:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:10:00.348 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:10:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:10:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:10:19.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:10:20.318 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:10:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:10:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:10:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:10:50.819 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:11:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:11:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:11:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:11:27.384 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:11:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:11:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:11:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:11:50.217 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:12:19.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:12:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:12:19.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:12:21.952 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:12:49.795 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:12:49.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:12:49.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:12:53.109 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:13:10.786 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-07 15:13:10.806 [Thread-156] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 15:13:10.816 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 15:13:10.840 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 15:13:10.842 [Thread-156] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 15:13:10.877 [Thread-156] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 15:13:10.884 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 15:13:10.889 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 15:13:10.892 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 15:13:10.898 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 15:13:10.901 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 15:13:10.904 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 15:13:10.913 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 15:13:10.916 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 15:13:10.919 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 15:13:10.922 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 15:13:10.927 [Thread-156] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 15:13:10.938 [Thread-156] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-39 - Shutdown initiated...
2025-11-07 15:13:10.955 [Thread-156] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-39 - Shutdown completed.
2025-11-07 15:13:13.473 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 15:13:13.474 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 15:13:13.475 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 15:13:22.286 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 15:13:22.287 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 15:13:22.657 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 362 ms. Found 9 JPA repository interfaces.
2025-11-07 15:13:22.675 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 15:13:22.692 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 15:13:22.725 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:13:22.729 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:13:22.730 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:13:22.742 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:13:22.747 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:13:22.749 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:13:22.750 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:13:22.751 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:13:22.752 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:13:22.755 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
2025-11-07 15:13:24.552 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 15:13:24.674 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 15:13:24.675 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 15:13:24.675 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 15:13:24.847 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 15:13:24.849 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 11369 ms
2025-11-07 15:13:25.518 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 15:13:25.519 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 15:13:25.520 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 15:13:25.931 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 15:13:25.933 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-40 - Starting...
2025-11-07 15:13:25.935 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-40 - Added connection conn494: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 15:13:25.936 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-40 - Start completed.
2025-11-07 15:13:25.937 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 15:13:27.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 15:13:27.302 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 15:13:27.302 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 15:13:27.302 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 15:13:27.303 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 15:13:27.303 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 15:13:27.303 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 15:13:27.303 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 15:13:27.303 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 15:13:27.304 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 15:13:27.304 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 15:13:27.307 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:13:27.320 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:13:27.336 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:13:27.341 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 15:13:27.354 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 15:13:27.381 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 15:13:27.384 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 15:13:27.389 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:13:27.391 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 15:13:27.395 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 15:13:27.406 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 15:13:27.407 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 15:13:27.409 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 15:13:27.421 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 15:13:27.422 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 15:13:27.427 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 15:13:27.432 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 15:13:27.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 15:13:27.437 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 15:13:27.441 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 15:13:27.448 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 15:13:27.458 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 15:13:27.465 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 15:13:27.476 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 15:13:29.259 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 15:13:30.138 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 15:13:30.200 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 15:13:30.453 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 15:13:30.677 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 15:13:30.765 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 15:13:30.853 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 15:13:31.669 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 15:13:31.970 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 15:13:32.027 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 15:13:32.031 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 15:13:32.054 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 18.97 seconds (process running for 25248.338)
2025-11-07 15:13:32.059 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 15:13:32.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:13:32.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:13:32.100 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:13:41.718 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:13:42.781 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 15:13:42.782 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 15:14:02.051 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:14:02.052 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:14:02.053 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:14:02.387 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:14:29.721 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 15:14:29.723 [Thread-160] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 15:14:29.724 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 15:14:29.725 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 15:14:29.725 [Thread-160] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 15:14:29.731 [Thread-160] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 15:14:29.732 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 15:14:29.733 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 15:14:29.735 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 15:14:29.736 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 15:14:29.738 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 15:14:29.739 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 15:14:29.740 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 15:14:29.741 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 15:14:29.742 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 15:14:29.743 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 15:14:29.745 [Thread-160] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 15:14:29.746 [Thread-160] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-40 - Shutdown initiated...
2025-11-07 15:14:29.747 [Thread-160] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-40 - Shutdown completed.
2025-11-07 15:14:30.395 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 15:14:30.395 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 15:14:30.395 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 15:14:30.924 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 15:14:30.924 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 15:14:30.977 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 9 JPA repository interfaces.
2025-11-07 15:14:30.982 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 15:14:30.982 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 15:14:30.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:14:30.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:14:30.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:14:30.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:14:30.995 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:14:30.995 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:14:30.995 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:14:30.995 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:14:30.996 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:14:30.996 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-11-07 15:14:31.373 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 15:14:31.373 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 15:14:31.374 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 15:14:31.374 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 15:14:31.390 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 15:14:31.390 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 992 ms
2025-11-07 15:14:31.751 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 15:14:31.752 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 15:14:31.752 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 15:14:32.106 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 15:14:32.108 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-41 - Starting...
2025-11-07 15:14:32.111 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-41 - Added connection conn504: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 15:14:32.111 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-41 - Start completed.
2025-11-07 15:14:32.112 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 15:14:32.432 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 15:14:32.432 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 15:14:32.432 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 15:14:32.432 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 15:14:32.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 15:14:32.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 15:14:32.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 15:14:32.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 15:14:32.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 15:14:32.433 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 15:14:32.434 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 15:14:32.436 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:14:32.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:14:32.440 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:14:32.441 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 15:14:32.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 15:14:32.443 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 15:14:32.444 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 15:14:32.446 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:14:32.448 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 15:14:32.449 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 15:14:32.451 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 15:14:32.452 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 15:14:32.457 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 15:14:32.459 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 15:14:32.460 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 15:14:32.462 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 15:14:32.464 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 15:14:32.465 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 15:14:32.467 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 15:14:32.469 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 15:14:32.471 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 15:14:32.473 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 15:14:32.475 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 15:14:32.478 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 15:14:33.298 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 15:14:33.712 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 15:14:33.787 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 15:14:34.032 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 15:14:34.210 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 15:14:34.277 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 15:14:34.352 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 15:14:34.702 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 15:14:34.830 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 15:14:34.868 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 15:14:34.870 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 15:14:34.893 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:14:34.895 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.587 seconds (process running for 25311.179)
2025-11-07 15:14:34.895 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:14:34.896 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:14:34.900 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 15:15:27.517 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:15:27.518 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:15:27.519 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:15:27.519 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:15:28.521 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 15:15:28.521 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 15:15:34.966 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:15:34.967 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:15:34.968 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:15:34.968 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:15:35.141 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 15:15:35.143 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:35.144 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:35.146 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=b353e0d386aff7be264569e2d04a39ce
2025-11-07 15:15:37.011 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:15:38.377 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 15:15:38.378 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:38.378 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:38.380 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 15:15:38.440 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:38.441 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:38.442 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:38.443 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:38.898 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 15:15:38.899 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:38.900 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:38.902 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 15:15:39.686 [http-nio-8080-exec-5] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 15:15:39.686 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 15:15:39.686 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 15:15:39.686 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 15:15:39.686 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 15:15:39.689 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5e4be37c
2025-11-07 15:15:39.690 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@724d31ee
2025-11-07 15:15:39.690 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 15:15:39.690 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-07 15:15:39.692 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 15:15:39.695 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:39.696 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:40.933 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:40.938 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:40.939 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:40.951 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:41.406 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:41.407 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.408 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.409 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:41.411 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:41.411 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.412 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.413 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:41.426 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:41.427 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.427 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.428 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:41.440 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:41.441 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.442 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.443 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:41.549 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 15:15:41.550 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.550 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.552 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 15:15:41.566 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 15:15:41.567 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.569 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.570 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 15:15:41.571 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.571 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.572 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 15:15:41.575 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 15:15:41.586 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 15:15:41.586 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.588 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.589 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 15:15:41.601 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 15:15:41.602 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.602 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.612 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 15:15:41.627 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 15:15:41.628 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 15:15:41.629 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.629 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.630 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.630 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.630 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 15:15:41.635 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 15:15:41.637 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 15:15:41.644 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.644 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.645 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 15:15:41.638 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 15:15:41.637 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 15:15:41.649 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.649 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.639 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 15:15:41.651 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.642 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.651 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.652 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.655 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 15:15:41.656 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 15:15:41.659 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 15:15:41.860 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 15:15:41.861 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 15:15:41.860 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 15:15:41.861 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.862 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.862 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.863 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.863 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.863 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.866 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 15:15:41.867 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 15:15:41.870 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 15:15:41.878 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 15:15:41.885 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.878 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 15:15:41.886 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.887 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.888 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 15:15:41.886 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.894 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 15:15:41.908 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 15:15:41.909 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.910 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.911 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 15:15:41.908 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 15:15:41.917 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.917 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.910 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 15:15:41.913 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 15:15:41.918 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.919 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.920 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 15:15:41.920 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 15:15:41.920 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.921 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.921 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 15:15:41.946 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 15:15:41.948 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.949 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.951 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 15:15:41.963 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 15:15:41.965 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.965 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.966 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 15:15:41.980 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 15:15:41.981 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.981 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.981 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 15:15:41.982 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 15:15:41.982 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.982 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:41.983 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 15:15:41.994 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 15:15:41.995 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:41.998 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:42.000 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 15:15:42.026 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 15:15:42.026 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:42.027 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:45.266 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:45.267 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:45.268 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:45.269 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:45.420 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 15:15:45.421 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:45.421 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:45.422 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 15:15:54.778 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:54.779 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:54.780 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:54.781 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:15:54.821 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 15:15:54.822 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:15:54.823 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:15:54.825 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 15:16:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:16:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:16:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:16:08.119 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:16:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:16:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:16:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:16:48.063 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:17:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:17:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:17:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:17:06.373 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:17:34.519 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-07 15:17:34.581 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:17:34.583 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:17:34.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-07 15:17:34.591 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-11-07 15:17:34.592 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#registerCliente(RegisterRequest)
2025-11-07 15:17:34.606 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@27730921]
2025-11-07 15:17:34.633 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 15:17:34.648 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-07 15:17:34.773 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2025-11-07 15:17:34.777 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (cpf, nome, telefone, id) 
    values
        (?, ?, ?, ?)
2025-11-07 15:17:34.782 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Endereco */insert 
    into
        endereco (apelido, bairro, cep, cidade, complemento, estado, latitude, longitude, numero, rua, usuario_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 15:17:34.796 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:17:34.797 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.UserResponse@3d3f0574]
2025-11-07 15:17:34.800 [http-nio-8080-exec-1] DEBUG [4a9fb4872111445a] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 15:17:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:17:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:17:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:17:35.833 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:18:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:18:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:18:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:18:05.843 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:18:24.051 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 15:18:24.055 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:18:24.056 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:18:24.063 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 15:18:24.064 [http-nio-8080-exec-10] DEBUG [58eba13d725e4121] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 15:18:24.065 [http-nio-8080-exec-10] DEBUG [58eba13d725e4121] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 15:18:24.080 [http-nio-8080-exec-10] DEBUG [58eba13d725e4121] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@62be426a]
2025-11-07 15:18:24.307 [http-nio-8080-exec-10] DEBUG [58eba13d725e4121] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:18:24.309 [http-nio-8080-exec-10] DEBUG [58eba13d725e4121] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:18:24.475 [http-nio-8080-exec-10] DEBUG [58eba13d725e4121] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 15:18:24.506 [http-nio-8080-exec-10] DEBUG [58eba13d725e4121] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:18:24.507 [http-nio-8080-exec-10] DEBUG [58eba13d725e4121] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@e3a5e4]
2025-11-07 15:18:24.524 [http-nio-8080-exec-10] DEBUG [58eba13d725e4121] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:18:34.892 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:18:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:18:34.894 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:18:37.366 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:19:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:19:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:19:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:19:18.127 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:19:31.558 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 15:19:31.563 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:19:31.565 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:19:31.571 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 15:19:31.572 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 15:19:31.573 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 15:19:31.590 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@56bd34d7]
2025-11-07 15:19:31.653 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:19:31.658 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:19:31.758 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 15:19:31.762 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:19:31.766 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 15:19:31.776 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:19:31.795 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco_base,
        p1_0.restaurante_id 
    from
        produto p1_0 
    where
        p1_0.id=?
2025-11-07 15:19:31.805 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    /* <criteria> */ select
        io1_0.id,
        io1_0.grupo_opcional_id,
        io1_0.nome,
        io1_0.preco_adicional 
    from
        item_opcional io1_0 
    where
        io1_0.id in (?)
2025-11-07 15:19:31.817 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    where
        go1_0.id=?
2025-11-07 15:19:31.831 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    /* <criteria> */ select
        go1_0.id,
        go1_0.max_selecao,
        go1_0.min_selecao,
        go1_0.nome,
        go1_0.produto_id 
    from
        grupo_opcional go1_0 
    left join
        produto p1_0 
            on p1_0.id=go1_0.produto_id 
    where
        p1_0.id=?
2025-11-07 15:19:31.843 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega_id, entregador_id, metodo_pagamento, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, troco_para, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-07 15:19:31.849 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-07 15:19:31.854 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedidoOpcional */insert 
    into
        item_pedido_opcional (item_opcional_id, item_pedido_id, preco_registrado, id) 
    values
        (?, ?, ?, default)
2025-11-07 15:19:31.900 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco_base=?,
        restaurante_id=? 
    where
        id=?
2025-11-07 15:19:31.920 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:19:31.920 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@255e7a1e]
2025-11-07 15:19:31.931 [http-nio-8080-exec-8] DEBUG [a5d6b7237df943df] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-07 15:19:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:19:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:19:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:19:40.123 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:20:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:20:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:20:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:20:07.215 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 15:20:07.219 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:20:07.221 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:20:07.246 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 15:20:07.247 [http-nio-8080-exec-9] DEBUG [4dbe21828c4d4014] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 15:20:07.249 [http-nio-8080-exec-9] DEBUG [4dbe21828c4d4014] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 15:20:07.266 [http-nio-8080-exec-9] DEBUG [4dbe21828c4d4014] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@6ea06f7e]
2025-11-07 15:20:07.285 [http-nio-8080-exec-9] DEBUG [4dbe21828c4d4014] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:20:07.299 [http-nio-8080-exec-9] DEBUG [4dbe21828c4d4014] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:20:07.346 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:20:07.467 [http-nio-8080-exec-9] DEBUG [4dbe21828c4d4014] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 15:20:07.474 [http-nio-8080-exec-9] DEBUG [4dbe21828c4d4014] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:20:07.475 [http-nio-8080-exec-9] DEBUG [4dbe21828c4d4014] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@295160b5]
2025-11-07 15:20:07.481 [http-nio-8080-exec-9] DEBUG [4dbe21828c4d4014] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:20:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:20:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:20:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:20:35.679 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:21:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:21:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:21:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:21:06.642 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:21:09.173 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/restaurante/2?status=PENDENTE
2025-11-07 15:21:09.183 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:21:09.185 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:21:09.191 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/restaurante/2?status=PENDENTE
2025-11-07 15:21:09.192 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/restaurante/2?status=PENDENTE", parameters={masked}
2025-11-07 15:21:09.193 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorRestaurante(Long, StatusPedido)
2025-11-07 15:21:09.200 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:21:09.365 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorRestaurante(java.lang.Long,com.deliverytech.delivery.enums.StatusPedido); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:21:09.505 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] org.hibernate.SQL - 
    /* SELECT
        DISTINCT p 
    FROM
        Pedido p 
    LEFT JOIN
        
    FETCH
        p.restaurante r 
    LEFT JOIN
        
    FETCH
        p.itens i 
    WHERE
        p.restaurante.id = :restauranteId 
        AND (
            :status IS NULL 
            OR p.status = :status
        ) */ select
            distinct p1_0.id,
            p1_0.cliente_id,
            p1_0.data_pedido,
            p1_0.endereco_entrega_id,
            p1_0.entregador_id,
            i1_0.pedido_id,
            i1_0.id,
            i1_0.preco_unitario,
            i1_0.produto_id,
            i1_0.quantidade,
            i1_0.subtotal,
            p1_0.metodo_pagamento,
            p1_0.numero_pedido,
            p1_0.observacoes,
            p1_0.restaurante_id,
            r1_0.id,
            r1_0.ativo,
            r1_0.avaliacao,
            r1_0.categoria,
            r1_0.endereco_id,
            r1_0.horario_funcionamento,
            r1_0.nome,
            r1_0.taxa_entrega,
            r1_0.telefone,
            r1_0.tempo_entrega,
            p1_0.status,
            p1_0.subtotal,
            p1_0.taxa_entrega,
            p1_0.troco_para,
            p1_0.valor_total 
        from
            pedido p1_0 
        left join
            restaurante r1_0 
                on r1_0.id=p1_0.restaurante_id 
        left join
            itens_pedido i1_0 
                on p1_0.id=i1_0.pedido_id 
        where
            r1_0.id=? 
            and (
                ? is null 
                or p1_0.status=?
            )
2025-11-07 15:21:09.509 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:21:09.625 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] org.hibernate.SQL - 
    /* SELECT
        DISTINCT ip 
    FROM
        ItemPedido ip 
    LEFT JOIN
        
    FETCH
        ip.opcionaisSelecionados iso 
    LEFT JOIN
        
    FETCH
        iso.itemOpcional 
    WHERE
        ip IN :itens */ select
            distinct ip1_0.id,
            os1_0.item_pedido_id,
            os1_0.id,
            os1_0.item_opcional_id,
            io1_0.id,
            io1_0.grupo_opcional_id,
            io1_0.nome,
            io1_0.preco_adicional,
            os1_0.preco_registrado,
            ip1_0.pedido_id,
            ip1_0.preco_unitario,
            ip1_0.produto_id,
            ip1_0.quantidade,
            ip1_0.subtotal 
        from
            itens_pedido ip1_0 
        left join
            item_pedido_opcional os1_0 
                on ip1_0.id=os1_0.item_pedido_id 
        left join
            item_opcional io1_0 
                on io1_0.id=os1_0.item_opcional_id 
        where
            ip1_0.id in (?)
2025-11-07 15:21:09.638 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:21:09.643 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:21:09.662 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:21:09.663 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@2a86f70d]
2025-11-07 15:21:09.675 [http-nio-8080-exec-2] DEBUG [cbc264fb4f3c4466] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:21:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:21:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:21:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:21:35.135 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:22:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:22:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:22:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:22:05.149 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:22:28.734 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 15:22:28.767 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:22:28.772 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:22:28.787 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 15:22:28.789 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 15:22:28.795 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 15:22:28.818 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@1d7d908b]
2025-11-07 15:22:28.828 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:22:28.859 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 15:22:28.867 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:22:28.878 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 15:22:28.901 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:22:28.923 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 15:22:28.935 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:22:28.940 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 15:22:28.955 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 15:22:28.978 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 15:22:28.982 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:22:28.983 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@2089165c]
2025-11-07 15:22:28.984 [http-nio-8080-exec-3] DEBUG [7439cce977674c4d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:22:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:22:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:22:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:22:48.694 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:22:51.009 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 15:22:51.037 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:22:51.039 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:22:51.046 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 15:22:51.047 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 15:22:51.048 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 15:22:51.049 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@124bbbca]
2025-11-07 15:22:51.053 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:22:51.058 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 15:22:51.061 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:22:51.065 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 15:22:51.081 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:22:51.084 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 15:22:51.093 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:22:51.102 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 15:22:51.110 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 15:22:51.126 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 15:22:51.148 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:22:51.151 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@73cc618a]
2025-11-07 15:22:51.154 [http-nio-8080-exec-7] DEBUG [bd18e52928304ebd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:23:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:23:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:23:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:23:14.670 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 15:23:14.686 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:23:14.716 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:23:14.724 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 15:23:14.725 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 15:23:14.729 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 15:23:14.745 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@3f12a327]
2025-11-07 15:23:14.747 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:23:14.753 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 15:23:14.771 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:23:14.793 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 15:23:14.800 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-07 15:23:14.801 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:23:14.803 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:23:14.810 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:23:14.824 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:23:14.825 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:23:14.826 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:23:14.826 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:23:14.862 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id 
    from
        pedido p1_0 
    where
        p1_0.entregador_id=? 
        and p1_0.status=? 
    fetch
        first ? rows only
2025-11-07 15:23:14.869 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:23:14.874 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 15:23:14.880 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 15:23:14.885 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 15:23:14.921 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 15:23:14.932 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:23:14.933 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@1fc0b1f2]
2025-11-07 15:23:14.934 [http-nio-8080-exec-1] DEBUG [43f61b60e03444c0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:23:22.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:23:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:23:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:23:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:23:37.819 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:24:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:24:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:24:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:24:05.767 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:24:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:24:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:24:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:24:35.696 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:24:37.513 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 15:24:37.518 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:24:37.519 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:24:37.524 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 15:24:37.525 [http-nio-8080-exec-6] DEBUG [ce78e71a58a545ea] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 15:24:37.526 [http-nio-8080-exec-6] DEBUG [ce78e71a58a545ea] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 15:24:37.528 [http-nio-8080-exec-6] DEBUG [ce78e71a58a545ea] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@5ea96de8]
2025-11-07 15:24:37.533 [http-nio-8080-exec-6] DEBUG [ce78e71a58a545ea] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:24:37.561 [http-nio-8080-exec-6] DEBUG [ce78e71a58a545ea] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:24:37.729 [http-nio-8080-exec-6] DEBUG [ce78e71a58a545ea] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 15:24:37.732 [http-nio-8080-exec-6] DEBUG [ce78e71a58a545ea] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:24:37.732 [http-nio-8080-exec-6] DEBUG [ce78e71a58a545ea] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@4b4a8aac]
2025-11-07 15:24:37.733 [http-nio-8080-exec-6] DEBUG [ce78e71a58a545ea] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:25:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:25:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:25:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:25:12.454 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:25:25.861 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 15:25:25.866 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:25:25.869 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:25:25.875 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 15:25:25.876 [http-nio-8080-exec-8] DEBUG [32d5533880654397] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 15:25:25.877 [http-nio-8080-exec-8] DEBUG [32d5533880654397] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 15:25:25.880 [http-nio-8080-exec-8] DEBUG [32d5533880654397] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@b59ae9b]
2025-11-07 15:25:25.881 [http-nio-8080-exec-8] DEBUG [32d5533880654397] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:25:25.886 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    /* SELECT
        CASE 
            WHEN COUNT(p) > 0 
                THEN true 
            ELSE false 
    END 
FROM
    Pedido p 
WHERE
    p.id = :pedidoId 
    AND (
        p.cliente.id = :clienteId 
        OR p.restaurante.id = :restauranteId 
        OR (
            p.entregador IS NOT NULL 
            AND p.entregador.id = :entregadorId
        )
    ) */ select
        case 
            when count(p1_0.id)>0 
                then true 
            else false 
    end 
from
    pedido p1_0 
where
    p1_0.id=? 
    and (
        p1_0.cliente_id=? 
        or p1_0.restaurante_id=? 
        or (
            p1_0.entregador_id is not null 
            and p1_0.entregador_id=?
        )
    )
2025-11-07 15:25:25.890 [http-nio-8080-exec-8] DEBUG [32d5533880654397] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:25:25.905 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 15:25:25.916 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:25:25.943 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 15:25:25.946 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:25:25.953 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 15:25:25.969 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 15:25:25.970 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:25:25.977 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 15:25:25.985 [http-nio-8080-exec-8] DEBUG [32d5533880654397] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Pedido */update pedido 
    set
        cliente_id=?,
        data_pedido=?,
        endereco_entrega_id=?,
        entregador_id=?,
        metodo_pagamento=?,
        numero_pedido=?,
        observacoes=?,
        restaurante_id=?,
        status=?,
        subtotal=?,
        taxa_entrega=?,
        troco_para=?,
        valor_total=? 
    where
        id=?
2025-11-07 15:25:25.990 [http-nio-8080-exec-8] DEBUG [32d5533880654397] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:25:25.997 [http-nio-8080-exec-8] DEBUG [32d5533880654397] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@4f54d0b6]
2025-11-07 15:25:26.000 [http-nio-8080-exec-8] DEBUG [32d5533880654397] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:25:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:25:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:25:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:25:36.815 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:26:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:26:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:26:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:26:18.843 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:26:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:26:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:26:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:26:35.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:27:03.201 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 15:27:03.246 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:27:03.247 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:27:03.255 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 15:27:03.256 [http-nio-8080-exec-5] DEBUG [64ba660ec1294f82] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 15:27:03.257 [http-nio-8080-exec-5] DEBUG [64ba660ec1294f82] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 15:27:03.259 [http-nio-8080-exec-5] DEBUG [64ba660ec1294f82] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@214b669f]
2025-11-07 15:27:03.263 [http-nio-8080-exec-5] DEBUG [64ba660ec1294f82] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:27:03.266 [http-nio-8080-exec-5] DEBUG [64ba660ec1294f82] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:27:03.417 [http-nio-8080-exec-5] DEBUG [64ba660ec1294f82] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 15:27:03.420 [http-nio-8080-exec-5] DEBUG [64ba660ec1294f82] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:27:03.420 [http-nio-8080-exec-5] DEBUG [64ba660ec1294f82] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@33ee61cc]
2025-11-07 15:27:03.422 [http-nio-8080-exec-5] DEBUG [64ba660ec1294f82] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:27:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:27:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:27:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:27:24.249 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:27:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:27:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:27:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:27:37.583 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 15:27:37.586 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 15:27:53.233 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=EM_PREPARO&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:27:53.255 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:27:53.256 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:27:53.268 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=EM_PREPARO&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:27:53.269 [http-nio-8080-exec-2] DEBUG [6ae8bb8b54344923] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=EM_PREPARO&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D", parameters={masked}
2025-11-07 15:27:53.269 [http-nio-8080-exec-2] DEBUG [6ae8bb8b54344923] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:27:53.359 [http-nio-8080-exec-2] DEBUG [6ae8bb8b54344923] o.s.web.method.HandlerMethod - Could not resolve parameter [0] in public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.PagedResponseWrapper<com.deliverytech.delivery.dto.response.PedidoResponseDTO>> com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable): Method parameter 'status': Failed to convert value of type 'java.lang.String' to required type 'com.deliverytech.delivery.enums.StatusPedido'; Failed to convert from type [java.lang.String] to type [@io.swagger.v3.oas.annotations.Parameter @org.springframework.web.bind.annotation.RequestParam com.deliverytech.delivery.enums.StatusPedido] for value [EM_PREPARO]
2025-11-07 15:27:53.360 [http-nio-8080-exec-2] DEBUG [6ae8bb8b54344923] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:27:53.374 [http-nio-8080-exec-2] DEBUG [6ae8bb8b54344923] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:27:53.376 [http-nio-8080-exec-2] DEBUG [6ae8bb8b54344923] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@237a34f7]
2025-11-07 15:27:53.381 [http-nio-8080-exec-2] WARN  [6ae8bb8b54344923] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Method parameter 'status': Failed to convert value of type 'java.lang.String' to required type 'com.deliverytech.delivery.enums.StatusPedido'; Failed to convert from type [java.lang.String] to type [@io.swagger.v3.oas.annotations.Parameter @org.springframework.web.bind.annotation.RequestParam com.deliverytech.delivery.enums.StatusPedido] for value [EM_PREPARO]]
2025-11-07 15:27:53.382 [http-nio-8080-exec-2] DEBUG [6ae8bb8b54344923] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:28:04.892 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:28:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:28:04.894 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:28:05.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:28:23.371 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:28:23.377 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:28:23.379 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:28:23.386 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:28:23.387 [http-nio-8080-exec-4] DEBUG [438fabf1a8cd4ea1] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D", parameters={masked}
2025-11-07 15:28:23.397 [http-nio-8080-exec-4] DEBUG [438fabf1a8cd4ea1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:28:23.538 [http-nio-8080-exec-4] DEBUG [438fabf1a8cd4ea1] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:28:23.540 [http-nio-8080-exec-4] DEBUG [438fabf1a8cd4ea1] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:28:23.549 [http-nio-8080-exec-4] DEBUG [438fabf1a8cd4ea1] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:28:23.550 [http-nio-8080-exec-4] DEBUG [438fabf1a8cd4ea1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:28:23.550 [http-nio-8080-exec-4] DEBUG [438fabf1a8cd4ea1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@46f42a8d]
2025-11-07 15:28:23.734 [http-nio-8080-exec-4] WARN  [438fabf1a8cd4ea1] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '["string"]' found for type 'Pedido']
2025-11-07 15:28:23.735 [http-nio-8080-exec-4] DEBUG [438fabf1a8cd4ea1] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:28:30.137 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=SAIU_PARA_ENTREGA&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:28:30.141 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:28:30.143 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:28:30.149 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=SAIU_PARA_ENTREGA&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:28:30.150 [http-nio-8080-exec-3] DEBUG [7808528177e04175] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=SAIU_PARA_ENTREGA&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D", parameters={masked}
2025-11-07 15:28:30.151 [http-nio-8080-exec-3] DEBUG [7808528177e04175] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:28:30.156 [http-nio-8080-exec-3] DEBUG [7808528177e04175] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:28:30.157 [http-nio-8080-exec-3] DEBUG [7808528177e04175] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:28:30.160 [http-nio-8080-exec-3] DEBUG [7808528177e04175] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:28:30.162 [http-nio-8080-exec-3] DEBUG [7808528177e04175] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:28:30.164 [http-nio-8080-exec-3] DEBUG [7808528177e04175] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@79adc410]
2025-11-07 15:28:30.168 [http-nio-8080-exec-3] WARN  [7808528177e04175] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '["string"]' found for type 'Pedido']
2025-11-07 15:28:30.170 [http-nio-8080-exec-3] DEBUG [7808528177e04175] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:28:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:28:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:28:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:28:35.691 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:28:35.696 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:28:35.697 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:28:35.712 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:28:35.714 [http-nio-8080-exec-7] DEBUG [52d9dd53f7114d72] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D", parameters={masked}
2025-11-07 15:28:35.715 [http-nio-8080-exec-7] DEBUG [52d9dd53f7114d72] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:28:35.732 [http-nio-8080-exec-7] DEBUG [52d9dd53f7114d72] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:28:35.738 [http-nio-8080-exec-7] DEBUG [52d9dd53f7114d72] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:28:35.748 [http-nio-8080-exec-7] DEBUG [52d9dd53f7114d72] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:28:35.772 [http-nio-8080-exec-7] DEBUG [52d9dd53f7114d72] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:28:35.773 [http-nio-8080-exec-7] DEBUG [52d9dd53f7114d72] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@5179c82b]
2025-11-07 15:28:35.778 [http-nio-8080-exec-7] WARN  [52d9dd53f7114d72] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '["string"]' found for type 'Pedido']
2025-11-07 15:28:35.783 [http-nio-8080-exec-7] DEBUG [52d9dd53f7114d72] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:28:35.897 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:28:47.600 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:28:47.604 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:28:47.607 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:28:47.640 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:28:47.641 [http-nio-8080-exec-1] DEBUG [5c2f62edff2c4470] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D", parameters={masked}
2025-11-07 15:28:47.642 [http-nio-8080-exec-1] DEBUG [5c2f62edff2c4470] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:28:47.670 [http-nio-8080-exec-1] DEBUG [5c2f62edff2c4470] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:28:47.673 [http-nio-8080-exec-1] DEBUG [5c2f62edff2c4470] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:28:47.680 [http-nio-8080-exec-1] DEBUG [5c2f62edff2c4470] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:28:47.682 [http-nio-8080-exec-1] DEBUG [5c2f62edff2c4470] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:28:47.684 [http-nio-8080-exec-1] DEBUG [5c2f62edff2c4470] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@259623c5]
2025-11-07 15:28:47.690 [http-nio-8080-exec-1] WARN  [5c2f62edff2c4470] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '["string"]' found for type 'Pedido']
2025-11-07 15:28:47.690 [http-nio-8080-exec-1] DEBUG [5c2f62edff2c4470] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:29:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:29:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:29:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:29:09.667 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:29:25.505 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:29:25.510 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:29:25.542 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:29:25.550 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:29:25.551 [http-nio-8080-exec-10] DEBUG [f08b1d79bea84cbc] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D", parameters={masked}
2025-11-07 15:29:25.551 [http-nio-8080-exec-10] DEBUG [f08b1d79bea84cbc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:29:25.563 [http-nio-8080-exec-10] DEBUG [f08b1d79bea84cbc] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:29:25.568 [http-nio-8080-exec-10] DEBUG [f08b1d79bea84cbc] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:29:25.576 [http-nio-8080-exec-10] DEBUG [f08b1d79bea84cbc] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:29:25.583 [http-nio-8080-exec-10] DEBUG [f08b1d79bea84cbc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:29:25.584 [http-nio-8080-exec-10] DEBUG [f08b1d79bea84cbc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@7e97b95d]
2025-11-07 15:29:25.589 [http-nio-8080-exec-10] WARN  [f08b1d79bea84cbc] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '["string"]' found for type 'Pedido']
2025-11-07 15:29:25.591 [http-nio-8080-exec-10] DEBUG [f08b1d79bea84cbc] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:29:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:29:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:29:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:29:36.243 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:29:52.624 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:29:52.625 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:29:52.625 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:29:52.626 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:29:52.657 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 15:29:52.658 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:29:52.660 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 15:29:52.661 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:29:52.661 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:29:52.662 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 15:29:52.666 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:29:52.668 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 15:30:00.305 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:30:00.306 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:30:00.307 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:30:00.308 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:30:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:30:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:30:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:30:14.162 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:30:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:30:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:30:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:30:50.226 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:30:50.231 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:30:50.320 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:30:50.331 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:30:50.331 [http-nio-8080-exec-2] DEBUG [2af2986fb2554764] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D", parameters={masked}
2025-11-07 15:30:50.332 [http-nio-8080-exec-2] DEBUG [2af2986fb2554764] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:30:50.336 [http-nio-8080-exec-2] DEBUG [2af2986fb2554764] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:30:50.337 [http-nio-8080-exec-2] DEBUG [2af2986fb2554764] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:30:50.339 [http-nio-8080-exec-2] DEBUG [2af2986fb2554764] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:30:50.340 [http-nio-8080-exec-2] DEBUG [2af2986fb2554764] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:30:50.340 [http-nio-8080-exec-2] DEBUG [2af2986fb2554764] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4d93705f]
2025-11-07 15:30:50.348 [http-nio-8080-exec-2] WARN  [2af2986fb2554764] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '["string"]' found for type 'Pedido']
2025-11-07 15:30:50.349 [http-nio-8080-exec-2] DEBUG [2af2986fb2554764] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:30:52.433 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:31:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:31:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:31:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:31:27.390 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:31:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:31:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:31:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:31:38.362 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:31:42.247 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/meus?restauranteId=2&enderecoEntregaId=6&metodoPagamento=CARTAO_CREDITO&observacoes=Pedido%20de%20teste%20da%20Ana%21&itens=%5B%7B%22produtoId%22%3A3%2C%22quantidade%22%3A1%2C%22opcionaisIds%22%3A%5B14%5D%7D%5D
2025-11-07 15:31:42.252 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:31:42.259 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:31:42.272 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/meus?restauranteId=2&enderecoEntregaId=6&metodoPagamento=CARTAO_CREDITO&observacoes=Pedido%20de%20teste%20da%20Ana%21&itens=%5B%7B%22produtoId%22%3A3%2C%22quantidade%22%3A1%2C%22opcionaisIds%22%3A%5B14%5D%7D%5D
2025-11-07 15:31:42.273 [http-nio-8080-exec-3] DEBUG [1241855344174c89] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/meus?restauranteId=2&enderecoEntregaId=6&metodoPagamento=CARTAO_CREDITO&observacoes=Pedido%20de%20teste%20da%20Ana%21&itens=%5B%7B%22produtoId%22%3A3%2C%22quantidade%22%3A1%2C%22opcionaisIds%22%3A%5B14%5D%7D%5D", parameters={masked}
2025-11-07 15:31:42.277 [http-nio-8080-exec-3] DEBUG [1241855344174c89] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listarMeusPedidos(Pageable)
2025-11-07 15:31:42.281 [http-nio-8080-exec-3] DEBUG [1241855344174c89] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listarMeusPedidos(org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:31:42.284 [http-nio-8080-exec-3] DEBUG [1241855344174c89] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listarMeusPedidos(org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@1a50ae07 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENTE')]
2025-11-07 15:31:42.285 [http-nio-8080-exec-3] DEBUG [1241855344174c89] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-07 15:31:42.334 [http-nio-8080-exec-3] DEBUG [1241855344174c89] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:31:42.334 [http-nio-8080-exec-3] DEBUG [1241855344174c89] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@2790d86e]
2025-11-07 15:31:42.336 [http-nio-8080-exec-3] WARN  [1241855344174c89] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-07 15:31:42.339 [http-nio-8080-exec-3] DEBUG [1241855344174c89] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-07 15:32:01.045 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 15:32:01.081 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:32:01.089 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:32:01.119 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 15:32:01.119 [http-nio-8080-exec-7] DEBUG [c461bd5fcffc415a] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 15:32:01.120 [http-nio-8080-exec-7] DEBUG [c461bd5fcffc415a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 15:32:01.136 [http-nio-8080-exec-7] DEBUG [c461bd5fcffc415a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@315eb40d]
2025-11-07 15:32:01.139 [http-nio-8080-exec-7] DEBUG [c461bd5fcffc415a] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:32:01.141 [http-nio-8080-exec-7] DEBUG [c461bd5fcffc415a] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:32:01.276 [http-nio-8080-exec-7] DEBUG [c461bd5fcffc415a] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 15:32:01.280 [http-nio-8080-exec-7] DEBUG [c461bd5fcffc415a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:32:01.281 [http-nio-8080-exec-7] DEBUG [c461bd5fcffc415a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@52e544fb]
2025-11-07 15:32:01.282 [http-nio-8080-exec-7] DEBUG [c461bd5fcffc415a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:32:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:32:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:32:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:32:05.402 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:32:29.413 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:32:29.418 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:32:29.420 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:32:29.425 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D
2025-11-07 15:32:29.428 [http-nio-8080-exec-1] DEBUG [7dc1c95707bf44dd] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=1073741824&size=1073741824&sort=%5B%22string%22%5D", parameters={masked}
2025-11-07 15:32:29.441 [http-nio-8080-exec-1] DEBUG [7dc1c95707bf44dd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:32:29.457 [http-nio-8080-exec-1] DEBUG [7dc1c95707bf44dd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:32:29.460 [http-nio-8080-exec-1] DEBUG [7dc1c95707bf44dd] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:32:29.465 [http-nio-8080-exec-1] DEBUG [7dc1c95707bf44dd] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:32:29.466 [http-nio-8080-exec-1] DEBUG [7dc1c95707bf44dd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:32:29.468 [http-nio-8080-exec-1] DEBUG [7dc1c95707bf44dd] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@52117a93]
2025-11-07 15:32:29.470 [http-nio-8080-exec-1] WARN  [7dc1c95707bf44dd] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '["string"]' found for type 'Pedido']
2025-11-07 15:32:29.473 [http-nio-8080-exec-1] DEBUG [7dc1c95707bf44dd] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:32:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:32:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:32:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:32:35.607 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:32:39.961 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos/1
2025-11-07 15:32:40.001 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:32:40.017 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:32:40.024 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos/1
2025-11-07 15:32:40.024 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos/1", parameters={}
2025-11-07 15:32:40.025 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#buscarPorId(Long)
2025-11-07 15:32:40.027 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:32:40.031 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:32:40.033 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 15:32:40.036 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 15:32:40.042 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 15:32:40.044 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:32:40.045 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 15:32:40.049 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 15:32:40.060 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:32:40.062 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 15:32:40.064 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:32:40.065 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@7be62c94]
2025-11-07 15:32:40.067 [http-nio-8080-exec-10] DEBUG [421592385c944d2a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:33:04.892 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:33:04.894 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:33:04.895 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:33:07.724 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:33:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:33:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:33:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:33:36.962 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:34:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:34:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:34:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:34:13.819 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:34:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:34:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:34:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:34:35.185 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:35:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:35:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:35:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:35:06.680 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:35:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:35:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:35:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:35:43.036 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:36:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:36:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:36:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:36:05.984 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:36:06.735 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/pedidos/1/status
2025-11-07 15:36:06.740 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:36:06.742 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:36:06.760 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/pedidos/1/status
2025-11-07 15:36:06.761 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] o.s.web.servlet.DispatcherServlet - PATCH "/api/pedidos/1/status", parameters={}
2025-11-07 15:36:06.761 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#atualizarStatus(Long, StatusPedidoDTO)
2025-11-07 15:36:06.765 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.StatusPedidoDTO@7c8b5d7a]
2025-11-07 15:36:06.771 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:36:06.772 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.atualizarStatus(java.lang.Long,com.deliverytech.delivery.dto.StatusPedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:36:06.775 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.id=?
2025-11-07 15:36:06.779 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleBusinessException(BusinessException, WebRequest)
2025-11-07 15:36:06.780 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:36:06.781 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@156d9c3a]
2025-11-07 15:36:06.784 [http-nio-8080-exec-9] WARN  [af5f3677c6264830] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.BusinessException: Transição de status inválida: ENTREGUE -> CANCELADO]
2025-11-07 15:36:06.785 [http-nio-8080-exec-9] DEBUG [af5f3677c6264830] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 15:36:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:36:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:36:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:36:35.718 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:37:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:37:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:37:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:37:05.825 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:37:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:37:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:37:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:37:36.193 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:38:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:38:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:38:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:38:26.335 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:38:32.267 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=10&sort=%5B%22string%22%5D
2025-11-07 15:38:32.272 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:38:32.274 [http-nio-8080-exec-8] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:38:32.279 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=10&sort=%5B%22string%22%5D
2025-11-07 15:38:32.280 [http-nio-8080-exec-8] DEBUG [d3959d43167c4852] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=10&sort=%5B%22string%22%5D", parameters={masked}
2025-11-07 15:38:32.280 [http-nio-8080-exec-8] DEBUG [d3959d43167c4852] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:38:32.284 [http-nio-8080-exec-8] DEBUG [d3959d43167c4852] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:38:32.285 [http-nio-8080-exec-8] DEBUG [d3959d43167c4852] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:38:32.304 [http-nio-8080-exec-8] DEBUG [d3959d43167c4852] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:38:32.305 [http-nio-8080-exec-8] DEBUG [d3959d43167c4852] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:38:32.305 [http-nio-8080-exec-8] DEBUG [d3959d43167c4852] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@39133233]
2025-11-07 15:38:32.306 [http-nio-8080-exec-8] WARN  [d3959d43167c4852] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '["string"]' found for type 'Pedido']
2025-11-07 15:38:32.311 [http-nio-8080-exec-8] DEBUG [d3959d43167c4852] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:38:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:38:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:38:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:38:42.711 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=10&sort=%5B%5D
2025-11-07 15:38:42.717 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:38:42.720 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:38:42.725 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=10&sort=%5B%5D
2025-11-07 15:38:42.726 [http-nio-8080-exec-5] DEBUG [4c7452e9448d4fb2] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=ENTREGUE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=10&sort=%5B%5D", parameters={masked}
2025-11-07 15:38:42.726 [http-nio-8080-exec-5] DEBUG [4c7452e9448d4fb2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:38:42.741 [http-nio-8080-exec-5] DEBUG [4c7452e9448d4fb2] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:38:42.746 [http-nio-8080-exec-5] DEBUG [4c7452e9448d4fb2] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:38:42.749 [http-nio-8080-exec-5] DEBUG [4c7452e9448d4fb2] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:38:42.756 [http-nio-8080-exec-5] DEBUG [4c7452e9448d4fb2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:38:42.758 [http-nio-8080-exec-5] DEBUG [4c7452e9448d4fb2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4dd767d6]
2025-11-07 15:38:42.764 [http-nio-8080-exec-5] WARN  [4c7452e9448d4fb2] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '[]' found for type 'Pedido'; Did you mean 'id']
2025-11-07 15:38:42.765 [http-nio-8080-exec-5] DEBUG [4c7452e9448d4fb2] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:38:54.856 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:39:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:39:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:39:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:39:06.028 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:39:15.958 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=ENTREGUE&dataInicio=2025-11-07&dataFim=2025-11-07&page=0&size=10&sort=%5B%5D
2025-11-07 15:39:15.961 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:39:15.964 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:39:15.978 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=ENTREGUE&dataInicio=2025-11-07&dataFim=2025-11-07&page=0&size=10&sort=%5B%5D
2025-11-07 15:39:15.981 [http-nio-8080-exec-2] DEBUG [f53832834f774165] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=ENTREGUE&dataInicio=2025-11-07&dataFim=2025-11-07&page=0&size=10&sort=%5B%5D", parameters={masked}
2025-11-07 15:39:15.982 [http-nio-8080-exec-2] DEBUG [f53832834f774165] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:39:15.992 [http-nio-8080-exec-2] DEBUG [f53832834f774165] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:39:15.993 [http-nio-8080-exec-2] DEBUG [f53832834f774165] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:39:15.996 [http-nio-8080-exec-2] DEBUG [f53832834f774165] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:39:15.997 [http-nio-8080-exec-2] DEBUG [f53832834f774165] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:39:15.998 [http-nio-8080-exec-2] DEBUG [f53832834f774165] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@469e0ba3]
2025-11-07 15:39:16.000 [http-nio-8080-exec-2] WARN  [f53832834f774165] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '[]' found for type 'Pedido'; Did you mean 'id']
2025-11-07 15:39:16.001 [http-nio-8080-exec-2] DEBUG [f53832834f774165] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:39:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:39:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:39:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:39:35.645 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:40:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:40:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:40:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:40:05.668 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:40:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:40:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:40:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:40:52.497 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:40:53.345 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=ENTREGUE&dataInicio=2025-11-07&dataFim=2025-11-07&page=0&size=10&sort=%5B%5D
2025-11-07 15:40:53.349 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:40:53.352 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:40:53.358 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=ENTREGUE&dataInicio=2025-11-07&dataFim=2025-11-07&page=0&size=10&sort=%5B%5D
2025-11-07 15:40:53.359 [http-nio-8080-exec-4] DEBUG [206477f26a064a27] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=ENTREGUE&dataInicio=2025-11-07&dataFim=2025-11-07&page=0&size=10&sort=%5B%5D", parameters={masked}
2025-11-07 15:40:53.359 [http-nio-8080-exec-4] DEBUG [206477f26a064a27] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:40:53.362 [http-nio-8080-exec-4] DEBUG [206477f26a064a27] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:40:53.364 [http-nio-8080-exec-4] DEBUG [206477f26a064a27] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:40:53.366 [http-nio-8080-exec-4] DEBUG [206477f26a064a27] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 15:40:53.367 [http-nio-8080-exec-4] DEBUG [206477f26a064a27] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:40:53.368 [http-nio-8080-exec-4] DEBUG [206477f26a064a27] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@1953cf75]
2025-11-07 15:40:53.371 [http-nio-8080-exec-4] WARN  [206477f26a064a27] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '[]' found for type 'Pedido'; Did you mean 'id']
2025-11-07 15:40:53.371 [http-nio-8080-exec-4] DEBUG [206477f26a064a27] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 15:41:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:41:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:41:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:41:16.749 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:41:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:41:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:41:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:41:37.929 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:42:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:42:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:42:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:42:11.866 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:42:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:42:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:42:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:42:36.709 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:43:04.892 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:43:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:43:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:43:17.228 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:43:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:43:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:43:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:43:43.136 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:44:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:44:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:44:04.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:44:05.724 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:44:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:44:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:44:34.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:44:37.597 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:45:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:45:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:45:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:45:06.028 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:45:34.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:45:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:45:34.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:45:35.775 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:46:04.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:46:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:46:04.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:46:05.330 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 15:46:05.345 [Thread-164] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 15:46:05.371 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 15:46:05.375 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 15:46:05.376 [Thread-164] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 15:46:06.440 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:46:06.452 [Thread-164] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 15:46:06.454 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 15:46:06.457 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 15:46:06.464 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 15:46:06.465 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 15:46:06.465 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 15:46:06.465 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 15:46:06.466 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 15:46:06.466 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 15:46:06.467 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 15:46:06.467 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 15:46:06.469 [Thread-164] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 15:46:06.470 [Thread-164] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-41 - Shutdown initiated...
2025-11-07 15:46:06.472 [Thread-164] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-41 - Shutdown completed.
2025-11-07 15:46:07.860 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 15:46:07.861 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 15:46:07.862 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 15:46:08.672 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 15:46:08.672 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 15:46:08.719 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 9 JPA repository interfaces.
2025-11-07 15:46:08.727 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 15:46:08.727 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 15:46:08.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:46:08.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:46:08.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:46:08.737 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:46:08.737 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:46:08.737 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:46:08.738 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:46:08.738 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:46:08.738 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:46:08.738 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-07 15:46:09.078 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 15:46:09.080 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 15:46:09.081 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 15:46:09.081 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 15:46:09.160 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 15:46:09.160 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1292 ms
2025-11-07 15:46:09.436 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 15:46:09.437 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 15:46:09.437 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 15:46:09.683 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 15:46:09.685 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-42 - Starting...
2025-11-07 15:46:09.688 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-42 - Added connection conn525: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 15:46:09.689 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-42 - Start completed.
2025-11-07 15:46:09.691 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 15:46:10.293 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 15:46:10.294 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 15:46:10.294 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 15:46:10.295 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 15:46:10.295 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 15:46:10.295 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 15:46:10.295 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 15:46:10.295 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 15:46:10.296 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 15:46:10.296 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 15:46:10.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 15:46:10.299 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:46:10.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:46:10.304 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:46:10.308 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 15:46:10.310 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 15:46:10.312 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 15:46:10.314 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 15:46:10.316 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:46:10.318 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 15:46:10.320 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 15:46:10.325 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 15:46:10.327 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 15:46:10.329 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 15:46:10.333 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 15:46:10.336 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 15:46:10.342 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 15:46:10.366 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 15:46:10.374 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 15:46:10.379 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 15:46:10.384 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 15:46:10.391 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 15:46:10.395 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 15:46:10.407 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 15:46:10.411 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 15:46:11.476 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 15:46:12.014 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 15:46:12.096 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 15:46:12.368 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 15:46:12.566 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 15:46:12.695 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 15:46:12.862 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 15:46:13.398 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 15:46:13.547 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 15:46:13.594 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 15:46:13.635 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 15:46:13.653 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:46:13.654 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.964 seconds (process running for 27209.939)
2025-11-07 15:46:13.655 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:46:13.657 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:46:13.661 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 15:46:15.996 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:46:17.001 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 15:46:17.001 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 15:46:43.652 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:46:43.653 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:46:43.653 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:46:52.810 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:47:13.652 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:47:13.653 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:47:13.653 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:47:27.272 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:47:43.652 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:47:43.653 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:47:43.653 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:47:54.965 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:48:13.652 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:48:13.653 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:48:13.653 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:48:15.787 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:48:25.682 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-07 15:48:25.701 [Thread-168] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 15:48:25.702 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 15:48:25.705 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 15:48:25.706 [Thread-168] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 15:48:25.715 [Thread-168] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 15:48:25.715 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 15:48:25.718 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 15:48:25.719 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 15:48:25.720 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 15:48:25.721 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 15:48:25.722 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 15:48:25.722 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 15:48:25.728 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 15:48:25.729 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 15:48:25.729 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 15:48:25.730 [Thread-168] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 15:48:25.731 [Thread-168] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-42 - Shutdown initiated...
2025-11-07 15:48:25.741 [Thread-168] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-42 - Shutdown completed.
2025-11-07 15:48:27.257 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 15:48:27.258 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 15:48:27.259 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 15:48:28.250 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 15:48:28.250 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 15:48:28.321 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 9 JPA repository interfaces.
2025-11-07 15:48:28.334 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 15:48:28.334 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 15:48:28.343 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:48:28.345 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:48:28.346 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:48:28.346 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:48:28.347 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:48:28.348 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:48:28.348 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:48:28.349 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:48:28.350 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 15:48:28.351 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
2025-11-07 15:48:28.763 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 15:48:28.764 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 15:48:28.764 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 15:48:28.764 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 15:48:28.779 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 15:48:28.779 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1515 ms
2025-11-07 15:48:29.200 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 15:48:29.201 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 15:48:29.201 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 15:48:29.843 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 15:48:29.845 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-43 - Starting...
2025-11-07 15:48:29.851 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-43 - Added connection conn535: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 15:48:29.851 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-43 - Start completed.
2025-11-07 15:48:29.852 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 15:48:30.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 15:48:30.931 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 15:48:30.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 15:48:30.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 15:48:30.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 15:48:30.933 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 15:48:30.933 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 15:48:30.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 15:48:30.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 15:48:30.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 15:48:30.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 15:48:30.938 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:48:30.940 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:48:30.941 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:48:30.942 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 15:48:30.944 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 15:48:30.952 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 15:48:30.958 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 15:48:30.959 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 15:48:30.962 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 15:48:30.966 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 15:48:30.967 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 15:48:30.969 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 15:48:30.970 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 15:48:30.971 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 15:48:30.972 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 15:48:30.973 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 15:48:30.974 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 15:48:30.974 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 15:48:30.975 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 15:48:30.980 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 15:48:30.982 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 15:48:30.983 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 15:48:30.984 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 15:48:30.986 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 15:48:32.076 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 15:48:32.502 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 15:48:32.556 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 15:48:32.712 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 15:48:32.883 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 15:48:32.942 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 15:48:33.088 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 15:48:33.492 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 15:48:33.650 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 15:48:33.689 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 15:48:33.691 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 15:48:33.715 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:48:33.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:48:33.718 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.604 seconds (process running for 27350.002)
2025-11-07 15:48:33.719 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:48:33.722 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 15:48:48.903 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:48:49.907 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-07 15:48:49.908 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-07 15:49:01.644 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:49:01.647 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:01.649 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:01.656 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=cac3b71f1e22ade627b1fbd7cef6c769
2025-11-07 15:49:01.865 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 15:49:01.869 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:01.869 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:01.871 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 15:49:01.905 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/login.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:01.907 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:01.908 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:01.910 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/login.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:02.130 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/background.gif
2025-11-07 15:49:02.132 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:02.132 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:02.133 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/background.gif
2025-11-07 15:49:02.178 [http-nio-8080-exec-5] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-07 15:49:02.178 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-07 15:49:02.178 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-07 15:49:02.178 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-07 15:49:02.179 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-07 15:49:02.182 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@a7e0570
2025-11-07 15:49:02.183 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@d6427dc
2025-11-07 15:49:02.183 [http-nio-8080-exec-5] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-07 15:49:02.183 [http-nio-8080-exec-5] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-07 15:49:02.189 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 15:49:02.190 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:02.197 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.483 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.487 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.487 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.490 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.559 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.561 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.561 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.563 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.569 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.570 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.571 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.573 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.583 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.584 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.584 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.585 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.601 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.602 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.603 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.604 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:49:03.715 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 15:49:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:49:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:49:03.719 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.719 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.723 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 15:49:03.767 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 15:49:03.769 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.771 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.782 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 15:49:03.786 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.787 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.778 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 15:49:03.783 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 15:49:03.783 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 15:49:03.782 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 15:49:03.796 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.791 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.797 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.784 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 15:49:03.804 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.804 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.805 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 15:49:03.791 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.808 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.809 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 15:49:03.800 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.800 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 15:49:03.812 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 15:49:03.805 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 15:49:03.862 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 15:49:03.864 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 15:49:03.866 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.870 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.867 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 15:49:03.872 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.873 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.876 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 15:49:03.877 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.877 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.878 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 15:49:03.879 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:03.880 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:03.881 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 15:49:03.881 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 15:49:03.887 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 15:49:04.141 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 15:49:04.146 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.152 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.158 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 15:49:04.160 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 15:49:04.161 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.161 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.162 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 15:49:04.164 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 15:49:04.165 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.166 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.168 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 15:49:04.177 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 15:49:04.178 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.178 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.179 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 15:49:04.151 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 15:49:04.180 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.180 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.181 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 15:49:04.152 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 15:49:04.153 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 15:49:04.186 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.186 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.187 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 15:49:04.172 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 15:49:04.192 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.193 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.194 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 15:49:04.192 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.198 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.199 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 15:49:04.239 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 15:49:04.245 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.249 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.250 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 15:49:04.314 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 15:49:04.315 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.314 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 15:49:04.315 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.317 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.317 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 15:49:04.318 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.320 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 15:49:04.334 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 15:49:04.335 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 15:49:04.337 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.336 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 15:49:04.338 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.338 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.338 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.340 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 15:49:04.337 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.343 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:04.344 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 15:49:04.344 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 15:49:04.383 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 15:49:04.384 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:04.384 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:05.217 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:49:07.091 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:07.092 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:07.094 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:07.095 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:07.140 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 15:49:07.141 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:07.141 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:07.143 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 15:49:16.366 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:16.368 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:16.370 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:16.371 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:16.412 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 15:49:16.413 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:16.413 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:16.414 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 15:49:21.070 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/login.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.071 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.072 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.072 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/login.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.173 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/header.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.174 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.175 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.176 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/header.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.179 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tables.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.183 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/query.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.187 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.190 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.188 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.192 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.193 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/query.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.193 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/help.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.195 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.196 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.198 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/help.jsp?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.202 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tables.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:21.310 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 15:49:21.310 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_disconnect.gif
2025-11-07 15:49:21.311 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.311 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.312 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 15:49:21.313 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_refresh.gif
2025-11-07 15:49:21.314 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.314 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.316 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_rollback.gif
2025-11-07 15:49:21.318 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.310 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_line.gif
2025-11-07 15:49:21.318 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.311 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.319 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.317 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_stop.gif
2025-11-07 15:49:21.319 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.320 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.320 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_stop.gif
2025-11-07 15:49:21.322 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_rollback.gif
2025-11-07 15:49:21.318 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.323 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.323 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_line.gif
2025-11-07 15:49:21.324 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_refresh.gif
2025-11-07 15:49:21.321 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_disconnect.gif
2025-11-07 15:49:21.354 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_help.gif
2025-11-07 15:49:21.354 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.355 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.355 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_help.gif
2025-11-07 15:49:21.357 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 15:49:21.357 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.357 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.358 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 15:49:21.362 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 15:49:21.363 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.364 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.365 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 15:49:21.377 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_commit.gif
2025-11-07 15:49:21.378 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.379 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.380 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run.gif
2025-11-07 15:49:21.381 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.382 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.383 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run.gif
2025-11-07 15:49:21.383 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_commit.gif
2025-11-07 15:49:21.397 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_history.gif
2025-11-07 15:49:21.450 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.451 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.452 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_history.gif
2025-11-07 15:49:21.454 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/icon_run_selected.gif
2025-11-07 15:49:21.455 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree.js
2025-11-07 15:49:21.460 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.460 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.461 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.461 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/icon_run_selected.gif
2025-11-07 15:49:21.472 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.485 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree.js
2025-11-07 15:49:21.514 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_minus.gif
2025-11-07 15:49:21.516 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.517 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.519 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_minus.gif
2025-11-07 15:49:21.533 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_plus.gif
2025-11-07 15:49:21.533 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.534 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.534 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_plus.gif
2025-11-07 15:49:21.546 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_database.gif
2025-11-07 15:49:21.547 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.547 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.548 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_database.gif
2025-11-07 15:49:21.556 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_table.gif
2025-11-07 15:49:21.556 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.557 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.557 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_table.gif
2025-11-07 15:49:21.561 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_empty.gif
2025-11-07 15:49:21.562 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.562 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.563 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_empty.gif
2025-11-07 15:49:21.565 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_column.gif
2025-11-07 15:49:21.567 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.568 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.568 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_column.gif
2025-11-07 15:49:21.613 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_type.gif
2025-11-07 15:49:21.614 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.614 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.619 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index_az.gif
2025-11-07 15:49:21.619 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.620 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.620 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index_az.gif
2025-11-07 15:49:21.622 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_type.gif
2025-11-07 15:49:21.648 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_index.gif
2025-11-07 15:49:21.649 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.649 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.650 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_index.gif
2025-11-07 15:49:21.657 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_user.gif
2025-11-07 15:49:21.658 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.658 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.658 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_users.gif
2025-11-07 15:49:21.659 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_user.gif
2025-11-07 15:49:21.659 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.659 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.660 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_users.gif
2025-11-07 15:49:21.662 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_folder.gif
2025-11-07 15:49:21.662 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_view.gif
2025-11-07 15:49:21.663 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.663 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.663 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.664 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.664 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_view.gif
2025-11-07 15:49:21.664 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_folder.gif
2025-11-07 15:49:21.718 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/tree_info.gif
2025-11-07 15:49:21.719 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.719 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:21.719 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/tree_info.gif
2025-11-07 15:49:21.739 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-07 15:49:21.740 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:21.740 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:25.642 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:25.643 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:25.643 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:25.644 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:25.684 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 15:49:25.684 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:25.685 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:25.685 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 15:49:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:49:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:49:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:49:36.024 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:49:50.448 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:50.448 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:50.449 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:50.449 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:49:50.473 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 15:49:50.473 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:50.474 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:50.474 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 15:49:50.477 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 15:49:50.478 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:49:50.478 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:49:50.482 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 15:50:01.235 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:50:01.236 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:50:01.237 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:50:01.238 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:50:01.284 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 15:50:01.284 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 15:50:01.285 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:50:01.285 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:50:01.285 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 15:50:01.285 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:50:01.286 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:50:01.287 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 15:50:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:50:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:50:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:50:04.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:50:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:50:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:50:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:50:35.299 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:50:52.020 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:50:52.021 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:50:52.021 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:50:52.022 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:50:52.049 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 15:50:52.051 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:50:52.052 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:50:52.052 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 15:50:52.051 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 15:50:52.054 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:50:52.055 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:50:52.055 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 15:51:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:51:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:51:03.718 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:51:07.658 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:51:07.658 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:51:07.659 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:51:07.659 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 15:51:07.702 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 15:51:07.703 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:51:07.703 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:51:07.702 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 15:51:07.704 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 15:51:07.704 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:51:07.704 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:51:07.704 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 15:51:15.239 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:51:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:51:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:51:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:51:38.727 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 15:51:39.548 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:51:39.550 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:51:39.567 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 15:51:39.568 [http-nio-8080-exec-7] DEBUG [51b2a41848824fb9] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 15:51:39.569 [http-nio-8080-exec-7] DEBUG [51b2a41848824fb9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 15:51:39.582 [http-nio-8080-exec-7] DEBUG [51b2a41848824fb9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@236ad606]
2025-11-07 15:51:39.722 [http-nio-8080-exec-7] DEBUG [51b2a41848824fb9] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:51:39.724 [http-nio-8080-exec-7] DEBUG [51b2a41848824fb9] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:51:39.839 [http-nio-8080-exec-7] DEBUG [51b2a41848824fb9] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 15:51:39.847 [http-nio-8080-exec-7] DEBUG [51b2a41848824fb9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:51:39.848 [http-nio-8080-exec-7] DEBUG [51b2a41848824fb9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@13405291]
2025-11-07 15:51:39.856 [http-nio-8080-exec-7] DEBUG [51b2a41848824fb9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:51:56.034 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:52:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:52:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:52:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:52:04.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:52:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:52:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:52:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:52:35.647 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:52:56.002 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-11-07 15:52:56.003 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:52:56.003 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:52:56.004 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-11-07 15:52:56.005 [http-nio-8080-exec-1] DEBUG [8c54cc958ec64c8a] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-11-07 15:52:56.006 [http-nio-8080-exec-1] DEBUG [8c54cc958ec64c8a] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 15:52:56.016 [http-nio-8080-exec-1] DEBUG [8c54cc958ec64c8a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:52:56.129 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-11-07 15:52:56.129 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:52:56.129 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:52:56.130 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-11-07 15:52:56.130 [http-nio-8080-exec-6] DEBUG [6d2c64f319cd4145] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui.css", parameters={}
2025-11-07 15:52:56.131 [http-nio-8080-exec-6] DEBUG [6d2c64f319cd4145] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 15:52:56.140 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-11-07 15:52:56.140 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-11-07 15:52:56.140 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:52:56.140 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:52:56.140 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:52:56.141 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:52:56.141 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-11-07 15:52:56.144 [http-nio-8080-exec-9] DEBUG [723044e3bfa94f48] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-11-07 15:52:56.142 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-11-07 15:52:56.147 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:52:56.147 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:52:56.148 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-11-07 15:52:56.142 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-11-07 15:52:56.149 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:52:56.149 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:52:56.150 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-11-07 15:52:56.150 [http-nio-8080-exec-8] DEBUG [67dc325f378d49c9] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-11-07 15:52:56.151 [http-nio-8080-exec-8] DEBUG [67dc325f378d49c9] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 15:52:56.151 [http-nio-8080-exec-9] DEBUG [723044e3bfa94f48] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 15:52:56.143 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-11-07 15:52:56.152 [http-nio-8080-exec-10] DEBUG [6ec60ae34d6749b6] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-11-07 15:52:56.152 [http-nio-8080-exec-4] DEBUG [b00d90288ba14276] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.css", parameters={}
2025-11-07 15:52:56.152 [http-nio-8080-exec-10] DEBUG [6ec60ae34d6749b6] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 15:52:56.153 [http-nio-8080-exec-4] DEBUG [b00d90288ba14276] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 15:52:56.254 [http-nio-8080-exec-8] DEBUG [67dc325f378d49c9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:52:56.303 [http-nio-8080-exec-10] DEBUG [6ec60ae34d6749b6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:52:56.304 [http-nio-8080-exec-6] DEBUG [6d2c64f319cd4145] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:52:56.306 [http-nio-8080-exec-4] DEBUG [b00d90288ba14276] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:52:56.332 [http-nio-8080-exec-9] DEBUG [723044e3bfa94f48] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:52:57.105 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs/swagger-config
2025-11-07 15:52:57.105 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:52:57.106 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:52:57.106 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs/swagger-config
2025-11-07 15:52:57.106 [http-nio-8080-exec-2] DEBUG [57cc91a3f6a64630] o.s.web.servlet.DispatcherServlet - GET "/api-docs/swagger-config", parameters={}
2025-11-07 15:52:57.107 [http-nio-8080-exec-2] DEBUG [57cc91a3f6a64630] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-11-07 15:52:57.114 [http-nio-8080-exec-2] DEBUG [57cc91a3f6a64630] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2025-11-07 15:52:57.114 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-32x32.png
2025-11-07 15:52:57.115 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:52:57.116 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:52:57.116 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-32x32.png
2025-11-07 15:52:57.117 [http-nio-8080-exec-7] DEBUG [0f9a44915a01455d] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/favicon-32x32.png", parameters={}
2025-11-07 15:52:57.128 [http-nio-8080-exec-7] DEBUG [0f9a44915a01455d] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-07 15:52:57.136 [http-nio-8080-exec-7] DEBUG [0f9a44915a01455d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:52:57.140 [http-nio-8080-exec-2] DEBUG [57cc91a3f6a64630] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/api-docs/swagger-config, filter=true, oauth2RedirectUrl=http://localhost:8080/swagger-ui (truncated)...]
2025-11-07 15:52:57.145 [http-nio-8080-exec-2] DEBUG [57cc91a3f6a64630] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:52:57.341 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-11-07 15:52:57.341 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:52:57.341 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:52:57.342 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-11-07 15:52:57.342 [http-nio-8080-exec-5] DEBUG [437bcad2412e4c56] o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-11-07 15:52:57.343 [http-nio-8080-exec-5] DEBUG [437bcad2412e4c56] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-07 15:53:01.014 [http-nio-8080-exec-5] INFO  [437bcad2412e4c56] o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 3658 ms
2025-11-07 15:53:01.041 [http-nio-8080-exec-5] DEBUG [437bcad2412e4c56] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2025-11-07 15:53:01.054 [http-nio-8080-exec-5] DEBUG [437bcad2412e4c56] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-07 15:53:01.056 [http-nio-8080-exec-5] DEBUG [437bcad2412e4c56] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:53:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:53:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:53:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:53:07.760 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:53:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:53:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:53:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:53:35.276 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=20
2025-11-07 15:53:35.277 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:53:35.277 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:53:45.213 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:54:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:54:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:54:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:54:13.130 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:54:22.290 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 15:54:22.291 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 15:54:22.291 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 15:54:22.292 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 15:54:22.292 [http-nio-8080-exec-4] DEBUG [c11ab83529de47a8] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 15:54:22.293 [http-nio-8080-exec-4] DEBUG [c11ab83529de47a8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 15:54:22.294 [http-nio-8080-exec-4] DEBUG [c11ab83529de47a8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@4cd6eee0]
2025-11-07 15:54:22.298 [http-nio-8080-exec-4] DEBUG [c11ab83529de47a8] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:54:22.308 [http-nio-8080-exec-4] DEBUG [c11ab83529de47a8] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:54:22.458 [http-nio-8080-exec-4] DEBUG [c11ab83529de47a8] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 15:54:22.461 [http-nio-8080-exec-4] DEBUG [c11ab83529de47a8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:54:22.462 [http-nio-8080-exec-4] DEBUG [c11ab83529de47a8] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@bacb4bc]
2025-11-07 15:54:22.463 [http-nio-8080-exec-4] DEBUG [c11ab83529de47a8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:54:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:54:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:54:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:54:35.024 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:55:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:55:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:55:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:55:14.649 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=20
2025-11-07 15:55:14.686 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:55:14.688 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:55:14.708 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=20
2025-11-07 15:55:14.709 [http-nio-8080-exec-9] DEBUG [51e7734a29d14a8a] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=20", parameters={masked}
2025-11-07 15:55:14.709 [http-nio-8080-exec-9] DEBUG [51e7734a29d14a8a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:55:14.729 [http-nio-8080-exec-9] DEBUG [51e7734a29d14a8a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:55:14.736 [http-nio-8080-exec-9] DEBUG [51e7734a29d14a8a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:55:14.878 [http-nio-8080-exec-9] DEBUG [51e7734a29d14a8a] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.status=? 
        and p1_0.data_pedido between ? and ? 
    fetch
        first ? rows only
2025-11-07 15:55:14.931 [http-nio-8080-exec-9] DEBUG [51e7734a29d14a8a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:55:14.931 [http-nio-8080-exec-9] DEBUG [51e7734a29d14a8a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.PagedResponseWrapper@6d4b393a]
2025-11-07 15:55:14.935 [http-nio-8080-exec-9] DEBUG [51e7734a29d14a8a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:55:22.302 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:55:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:55:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:55:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:55:34.112 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:56:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:56:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:56:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:56:03.911 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:56:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:56:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:56:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:56:33.873 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:57:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:57:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:57:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:57:04.664 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:57:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:57:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:57:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:57:35.306 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:57:36.421 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=20
2025-11-07 15:57:36.426 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 15:57:36.462 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 15:57:36.479 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=20
2025-11-07 15:57:36.479 [http-nio-8080-exec-2] DEBUG [6665b8e6f2324a26] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=PENDENTE&dataInicio=2025-10-01&dataFim=2025-10-23&page=0&size=20", parameters={masked}
2025-11-07 15:57:36.480 [http-nio-8080-exec-2] DEBUG [6665b8e6f2324a26] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 15:57:36.484 [http-nio-8080-exec-2] DEBUG [6665b8e6f2324a26] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:57:36.485 [http-nio-8080-exec-2] DEBUG [6665b8e6f2324a26] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 15:57:36.489 [http-nio-8080-exec-2] DEBUG [6665b8e6f2324a26] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.status=? 
        and p1_0.data_pedido between ? and ? 
    fetch
        first ? rows only
2025-11-07 15:57:36.493 [http-nio-8080-exec-2] DEBUG [6665b8e6f2324a26] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 15:57:36.494 [http-nio-8080-exec-2] DEBUG [6665b8e6f2324a26] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.PagedResponseWrapper@75183f1c]
2025-11-07 15:57:36.495 [http-nio-8080-exec-2] DEBUG [6665b8e6f2324a26] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 15:58:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:58:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:58:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:58:04.797 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:58:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:58:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:58:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:58:34.831 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:59:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:59:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:59:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:59:03.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 15:59:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 15:59:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 15:59:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 15:59:40.761 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:00:00.502 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/pedidos?status=PENDENTE&dataInicio=2025-11-07&dataFim=2025-11-07&page=0&size=20
2025-11-07 16:00:00.545 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:00:00.549 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:00:00.557 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/pedidos?status=PENDENTE&dataInicio=2025-11-07&dataFim=2025-11-07&page=0&size=20
2025-11-07 16:00:00.559 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] o.s.web.servlet.DispatcherServlet - GET "/api/pedidos?status=PENDENTE&dataInicio=2025-11-07&dataFim=2025-11-07&page=0&size=20", parameters={masked}
2025-11-07 16:00:00.563 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#listar(StatusPedido, LocalDate, LocalDate, Pageable)
2025-11-07 16:00:00.577 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 16:00:00.580 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.listar(com.deliverytech.delivery.enums.StatusPedido,java.time.LocalDate,java.time.LocalDate,org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 16:00:00.586 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.cliente_id,
        p1_0.data_pedido,
        p1_0.endereco_entrega_id,
        p1_0.entregador_id,
        p1_0.metodo_pagamento,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.troco_para,
        p1_0.valor_total 
    from
        pedido p1_0 
    where
        p1_0.status=? 
        and p1_0.data_pedido between ? and ? 
    fetch
        first ? rows only
2025-11-07 16:00:00.632 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] org.hibernate.SQL - 
    select
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id 
    from
        endereco e1_0 
    where
        e1_0.id=?
2025-11-07 16:00:00.730 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] org.hibernate.SQL - 
    select
        i1_0.pedido_id,
        i1_0.id,
        i1_0.preco_unitario,
        i1_0.produto_id,
        i1_0.quantidade,
        i1_0.subtotal 
    from
        itens_pedido i1_0 
    where
        i1_0.pedido_id=?
2025-11-07 16:00:00.752 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:00:00.756 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 16:00:00.836 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] org.hibernate.SQL - 
    select
        os1_0.item_pedido_id,
        os1_0.id,
        os1_0.item_opcional_id,
        os1_0.preco_registrado 
    from
        item_pedido_opcional os1_0 
    where
        os1_0.item_pedido_id=?
2025-11-07 16:00:00.843 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 16:00:00.844 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.PagedResponseWrapper@65337bcc]
2025-11-07 16:00:00.863 [http-nio-8080-exec-3] DEBUG [cc66d5df955545be] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 16:00:03.715 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:00:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:00:03.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:00:04.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:00:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:00:33.719 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:00:33.720 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:00:46.063 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:01:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:01:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:01:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:01:29.139 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:01:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:01:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:01:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:01:36.307 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:02:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:02:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:02:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:02:05.739 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:02:12.873 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 16:02:12.873 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 16:02:12.874 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 16:02:12.874 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /h2-console/query.do?jsessionid=dd26b7c69357f773e9b1428da0fd63bb
2025-11-07 16:02:13.255 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/table.js
2025-11-07 16:02:13.256 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /h2-console/stylesheet.css
2025-11-07 16:02:13.256 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 16:02:13.256 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-07 16:02:13.256 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 16:02:13.256 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-07 16:02:13.257 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/stylesheet.css
2025-11-07 16:02:13.257 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /h2-console/table.js
2025-11-07 16:02:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:02:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:02:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:02:34.275 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 16:02:34.278 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 16:03:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:03:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:03:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:03:04.945 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/produtos?restauranteId=1&categoria=Italiana&disponivel=true&page=0&size=10&sort=%5B%22%20%22%5D
2025-11-07 16:03:05.394 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:03:05.395 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:03:05.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/produtos?restauranteId=1&categoria=Italiana&disponivel=true&page=0&size=10&sort=%5B%22%20%22%5D
2025-11-07 16:03:05.593 [http-nio-8080-exec-7] DEBUG [9acd2befd79c439c] o.s.web.servlet.DispatcherServlet - GET "/api/produtos?restauranteId=1&categoria=Italiana&disponivel=true&page=0&size=10&sort=%5B%22%20%22%5D", parameters={masked}
2025-11-07 16:03:05.593 [http-nio-8080-exec-7] DEBUG [9acd2befd79c439c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ProdutoController#listar(Long, String, Boolean, Pageable)
2025-11-07 16:03:05.834 [http-nio-8080-exec-7] DEBUG [9acd2befd79c439c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 16:03:05.841 [http-nio-8080-exec-7] DEBUG [9acd2befd79c439c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 16:03:05.842 [http-nio-8080-exec-7] DEBUG [9acd2befd79c439c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4d34d559]
2025-11-07 16:03:05.849 [http-nio-8080-exec-7] WARN  [9acd2befd79c439c] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '[" "]' found for type 'Produto']
2025-11-07 16:03:05.849 [http-nio-8080-exec-7] DEBUG [9acd2befd79c439c] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 16:03:06.030 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:03:27.249 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/produtos?restauranteId=1&categoria=Italiana&disponivel=true&page=0&size=10&sort=%5B%5D
2025-11-07 16:03:27.253 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:03:27.255 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:03:27.261 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/produtos?restauranteId=1&categoria=Italiana&disponivel=true&page=0&size=10&sort=%5B%5D
2025-11-07 16:03:27.261 [http-nio-8080-exec-2] DEBUG [9ef709c5da3746b5] o.s.web.servlet.DispatcherServlet - GET "/api/produtos?restauranteId=1&categoria=Italiana&disponivel=true&page=0&size=10&sort=%5B%5D", parameters={masked}
2025-11-07 16:03:27.262 [http-nio-8080-exec-2] DEBUG [9ef709c5da3746b5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ProdutoController#listar(Long, String, Boolean, Pageable)
2025-11-07 16:03:27.267 [http-nio-8080-exec-2] DEBUG [9ef709c5da3746b5] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-11-07 16:03:27.267 [http-nio-8080-exec-2] DEBUG [9ef709c5da3746b5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 16:03:27.268 [http-nio-8080-exec-2] DEBUG [9ef709c5da3746b5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@96fd02]
2025-11-07 16:03:27.271 [http-nio-8080-exec-2] WARN  [9ef709c5da3746b5] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.data.mapping.PropertyReferenceException: No property '[]' found for type 'Produto'; Did you mean 'id']
2025-11-07 16:03:27.273 [http-nio-8080-exec-2] DEBUG [9ef709c5da3746b5] o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-11-07 16:03:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:03:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:03:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:03:44.341 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:04:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:04:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:04:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:04:03.864 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:04:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:04:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:04:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:04:34.818 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:04:55.872 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing DELETE /api/clientes/1
2025-11-07 16:04:55.878 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:04:55.882 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:04:55.898 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured DELETE /api/clientes/1
2025-11-07 16:04:55.899 [http-nio-8080-exec-5] DEBUG [5236e65ecfdb48f0] o.s.web.servlet.DispatcherServlet - DELETE "/api/clientes/1", parameters={}
2025-11-07 16:04:55.900 [http-nio-8080-exec-5] DEBUG [5236e65ecfdb48f0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#ativarDesativarCliente(Long)
2025-11-07 16:04:55.905 [http-nio-8080-exec-5] DEBUG [5236e65ecfdb48f0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.ativarDesativarCliente(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-07 16:04:55.914 [http-nio-8080-exec-5] DEBUG [5236e65ecfdb48f0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.ativarDesativarCliente(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-07 16:04:56.029 [http-nio-8080-exec-5] DEBUG [5236e65ecfdb48f0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:04:56.042 [http-nio-8080-exec-5] DEBUG [5236e65ecfdb48f0] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleEntityNotFoundException(EntityNotFoundException, WebRequest)
2025-11-07 16:04:56.043 [http-nio-8080-exec-5] DEBUG [5236e65ecfdb48f0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 16:04:56.044 [http-nio-8080-exec-5] DEBUG [5236e65ecfdb48f0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@50438c03]
2025-11-07 16:04:56.044 [http-nio-8080-exec-5] WARN  [5236e65ecfdb48f0] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.EntityNotFoundException: Cliente não encontrado com ID: 1]
2025-11-07 16:04:56.044 [http-nio-8080-exec-5] DEBUG [5236e65ecfdb48f0] o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-11-07 16:05:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:05:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:05:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:05:25.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:05:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:05:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:05:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:05:33.862 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:05:57.040 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/restaurantes/1/status
2025-11-07 16:05:57.046 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:05:57.064 [http-nio-8080-exec-1] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:05:57.099 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/restaurantes/1/status
2025-11-07 16:05:57.101 [http-nio-8080-exec-1] DEBUG [591667bc52ff4f1b] o.s.web.servlet.DispatcherServlet - PATCH "/api/restaurantes/1/status", parameters={}
2025-11-07 16:05:57.102 [http-nio-8080-exec-1] DEBUG [591667bc52ff4f1b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.RestauranteController#alterarStatus(Long)
2025-11-07 16:05:57.113 [http-nio-8080-exec-1] DEBUG [591667bc52ff4f1b] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.RestauranteController.alterarStatus(java.lang.Long); target is of class [com.deliverytech.delivery.controller.RestauranteController]
2025-11-07 16:05:57.141 [http-nio-8080-exec-1] DEBUG [591667bc52ff4f1b] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.RestauranteController.alterarStatus(java.lang.Long); target is of class [com.deliverytech.delivery.controller.RestauranteController]
2025-11-07 16:05:57.154 [http-nio-8080-exec-1] DEBUG [591667bc52ff4f1b] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 16:05:57.215 [http-nio-8080-exec-1] DEBUG [591667bc52ff4f1b] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Restaurante */update restaurante 
    set
        ativo=?,
        avaliacao=?,
        categoria=?,
        endereco_id=?,
        horario_funcionamento=?,
        nome=?,
        taxa_entrega=?,
        telefone=?,
        tempo_entrega=? 
    where
        id=?
2025-11-07 16:05:57.223 [http-nio-8080-exec-1] DEBUG [591667bc52ff4f1b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 16:05:57.224 [http-nio-8080-exec-1] DEBUG [591667bc52ff4f1b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@3c2a0c4e]
2025-11-07 16:05:57.231 [http-nio-8080-exec-1] DEBUG [591667bc52ff4f1b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 16:06:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:06:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:06:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:06:06.423 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:06:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:06:33.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:06:33.719 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:06:34.313 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-07 16:06:34.314 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-07 16:07:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:07:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:07:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:07:09.706 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:07:28.367 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/restaurantes/1/status
2025-11-07 16:07:28.372 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:07:28.373 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:07:28.381 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/restaurantes/1/status
2025-11-07 16:07:28.382 [http-nio-8080-exec-6] DEBUG [6556b1bf8e1648e4] o.s.web.servlet.DispatcherServlet - PATCH "/api/restaurantes/1/status", parameters={}
2025-11-07 16:07:28.382 [http-nio-8080-exec-6] DEBUG [6556b1bf8e1648e4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.RestauranteController#alterarStatus(Long)
2025-11-07 16:07:28.385 [http-nio-8080-exec-6] DEBUG [6556b1bf8e1648e4] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.RestauranteController.alterarStatus(java.lang.Long); target is of class [com.deliverytech.delivery.controller.RestauranteController]
2025-11-07 16:07:28.400 [http-nio-8080-exec-6] DEBUG [6556b1bf8e1648e4] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.RestauranteController.alterarStatus(java.lang.Long); target is of class [com.deliverytech.delivery.controller.RestauranteController]
2025-11-07 16:07:28.403 [http-nio-8080-exec-6] DEBUG [6556b1bf8e1648e4] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 16:07:28.436 [http-nio-8080-exec-6] DEBUG [6556b1bf8e1648e4] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Restaurante */update restaurante 
    set
        ativo=?,
        avaliacao=?,
        categoria=?,
        endereco_id=?,
        horario_funcionamento=?,
        nome=?,
        taxa_entrega=?,
        telefone=?,
        tempo_entrega=? 
    where
        id=?
2025-11-07 16:07:28.450 [http-nio-8080-exec-6] DEBUG [6556b1bf8e1648e4] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 16:07:28.459 [http-nio-8080-exec-6] DEBUG [6556b1bf8e1648e4] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@49d867c7]
2025-11-07 16:07:28.485 [http-nio-8080-exec-6] DEBUG [6556b1bf8e1648e4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 16:07:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:07:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:07:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:07:34.988 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:08:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:08:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:08:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:08:04.034 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:08:20.263 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing PATCH /api/restaurantes/1/status
2025-11-07 16:08:20.267 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:08:20.272 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:08:20.279 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured PATCH /api/restaurantes/1/status
2025-11-07 16:08:20.279 [http-nio-8080-exec-10] DEBUG [9d4067963d5448a5] o.s.web.servlet.DispatcherServlet - PATCH "/api/restaurantes/1/status", parameters={}
2025-11-07 16:08:20.280 [http-nio-8080-exec-10] DEBUG [9d4067963d5448a5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.RestauranteController#alterarStatus(Long)
2025-11-07 16:08:20.281 [http-nio-8080-exec-10] DEBUG [9d4067963d5448a5] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.RestauranteController.alterarStatus(java.lang.Long); target is of class [com.deliverytech.delivery.controller.RestauranteController]
2025-11-07 16:08:20.282 [http-nio-8080-exec-10] DEBUG [9d4067963d5448a5] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.RestauranteController.alterarStatus(java.lang.Long); target is of class [com.deliverytech.delivery.controller.RestauranteController]
2025-11-07 16:08:20.290 [http-nio-8080-exec-10] DEBUG [9d4067963d5448a5] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 16:08:20.316 [http-nio-8080-exec-10] DEBUG [9d4067963d5448a5] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Restaurante */update restaurante 
    set
        ativo=?,
        avaliacao=?,
        categoria=?,
        endereco_id=?,
        horario_funcionamento=?,
        nome=?,
        taxa_entrega=?,
        telefone=?,
        tempo_entrega=? 
    where
        id=?
2025-11-07 16:08:20.331 [http-nio-8080-exec-10] DEBUG [9d4067963d5448a5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 16:08:20.332 [http-nio-8080-exec-10] DEBUG [9d4067963d5448a5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@286ce853]
2025-11-07 16:08:20.337 [http-nio-8080-exec-10] DEBUG [9d4067963d5448a5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 16:08:33.716 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:08:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:08:33.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:08:43.913 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:08:55.044 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-07 16:08:55.050 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:08:55.052 [http-nio-8080-exec-9] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:08:55.057 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-07 16:08:55.058 [http-nio-8080-exec-9] DEBUG [6b47ed260f0149c6] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-07 16:08:55.058 [http-nio-8080-exec-9] DEBUG [6b47ed260f0149c6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-07 16:08:55.060 [http-nio-8080-exec-9] DEBUG [6b47ed260f0149c6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@57d3eb60]
2025-11-07 16:08:55.133 [http-nio-8080-exec-9] DEBUG [6b47ed260f0149c6] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:08:55.135 [http-nio-8080-exec-9] DEBUG [6b47ed260f0149c6] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:08:55.398 [http-nio-8080-exec-9] DEBUG [6b47ed260f0149c6] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-07 16:08:55.403 [http-nio-8080-exec-9] DEBUG [6b47ed260f0149c6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 16:08:55.404 [http-nio-8080-exec-9] DEBUG [6b47ed260f0149c6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@1f922baa]
2025-11-07 16:08:55.406 [http-nio-8080-exec-9] DEBUG [6b47ed260f0149c6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-07 16:09:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:09:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:09:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:09:22.474 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:09:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:09:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:09:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:09:42.906 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:09:55.786 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-07 16:09:55.792 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-07 16:09:55.794 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:09:55.799 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-07 16:09:55.800 [http-nio-8080-exec-7] DEBUG [2658979717674a75] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-07 16:09:55.801 [http-nio-8080-exec-7] DEBUG [2658979717674a75] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-07 16:09:55.817 [http-nio-8080-exec-7] DEBUG [2658979717674a75] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@12a9faa1]
2025-11-07 16:09:55.918 [http-nio-8080-exec-7] DEBUG [2658979717674a75] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 16:09:55.921 [http-nio-8080-exec-7] DEBUG [2658979717674a75] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-07 16:09:56.164 [http-nio-8080-exec-7] DEBUG [2658979717674a75] org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.id=?
2025-11-07 16:09:56.167 [http-nio-8080-exec-7] DEBUG [2658979717674a75] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.cpf,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-07 16:09:56.169 [http-nio-8080-exec-7] DEBUG [2658979717674a75] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        e1_0.id,
        e1_0.apelido,
        e1_0.bairro,
        e1_0.cep,
        e1_0.cidade,
        e1_0.complemento,
        e1_0.estado,
        e1_0.latitude,
        e1_0.longitude,
        e1_0.numero,
        e1_0.rua,
        e1_0.usuario_id,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    left join
        endereco e1_0 
            on e1_0.id=r1_0.endereco_id 
    where
        r1_0.id=?
2025-11-07 16:09:56.178 [http-nio-8080-exec-7] DEBUG [2658979717674a75] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleBusinessException(BusinessException, WebRequest)
2025-11-07 16:09:56.180 [http-nio-8080-exec-7] DEBUG [2658979717674a75] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-07 16:09:56.183 [http-nio-8080-exec-7] DEBUG [2658979717674a75] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@23d0cd93]
2025-11-07 16:09:56.189 [http-nio-8080-exec-7] WARN  [2658979717674a75] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.BusinessException: Restaurante não está disponível]
2025-11-07 16:09:56.190 [http-nio-8080-exec-7] DEBUG [2658979717674a75] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-07 16:10:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:10:04.027 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:10:04.028 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:10:04.028 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:10:04.255 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:10:33.715 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:10:33.716 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:10:33.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:10:33.719 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:10:33.954 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:11:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:11:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:11:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:11:03.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:11:06.629 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:11:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:11:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:11:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:11:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:11:36.586 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:12:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:12:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:12:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:12:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:12:13.451 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:12:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:12:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:12:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:12:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:12:35.135 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:13:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:13:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:13:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:13:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:13:18.459 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:13:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:13:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:13:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:13:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:14:01.648 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:14:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:14:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:14:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:14:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:14:03.897 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:14:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:14:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:14:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:14:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:14:40.066 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:15:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:15:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:15:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:15:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:15:04.794 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:15:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:15:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:15:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:15:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:15:35.244 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:16:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:16:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:16:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:16:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:16:13.275 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:16:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:16:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:16:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:16:33.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:16:47.296 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:17:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:17:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:17:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:17:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:17:21.037 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:17:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:17:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:17:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:17:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:17:33.973 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:18:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:18:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:18:03.720 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:18:03.721 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:18:24.758 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:18:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:18:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:18:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:18:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:18:36.035 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:19:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:19:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:19:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:19:03.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:19:04.928 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:19:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:19:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:19:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:19:33.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:19:34.647 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:20:03.719 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:20:03.720 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:20:03.720 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:20:03.720 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:20:04.789 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:20:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:20:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:20:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:20:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:20:37.871 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:21:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:21:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:21:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:21:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:21:15.161 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:21:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:21:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:21:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:21:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:21:53.538 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:22:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:22:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:22:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:22:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:22:19.506 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:22:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:22:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:22:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:22:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:22:36.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:23:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:23:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:23:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:23:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:23:13.610 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:23:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:23:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:23:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:23:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:23:33.991 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:24:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:24:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:24:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:24:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:24:04.475 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:24:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:24:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:24:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:24:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:24:44.528 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:25:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:25:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:25:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:25:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:25:05.871 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:25:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:25:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:25:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:25:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:25:48.292 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:26:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:26:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:26:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:26:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:26:04.558 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:26:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:26:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:26:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:26:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:27:01.262 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:27:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:27:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:27:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:27:03.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:27:04.188 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:27:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:27:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:27:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:27:33.716 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:27:36.387 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:28:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:28:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:28:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:28:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:28:04.387 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:28:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:28:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:28:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:28:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:28:34.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:29:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:29:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:29:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:29:03.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:29:04.674 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:29:33.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:29:33.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:29:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:29:33.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:29:47.438 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:30:03.714 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:30:03.715 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [CRITICAL] HIGH_ERROR_RATE: Taxa de erro alta: 100,00% (Limite: 5,00%)
2025-11-07 16:30:03.719 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:30:03.721 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:30:29.173 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-07 16:30:29.176 [Thread-172] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 16:30:29.177 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-07 16:30:29.199 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 16:30:29.199 [Thread-172] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-07 16:30:29.357 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:30:29.483 [Thread-172] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 16:30:29.484 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 16:30:29.485 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 16:30:29.486 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 16:30:29.487 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 16:30:29.488 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 16:30:29.489 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 16:30:29.489 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 16:30:29.490 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 16:30:29.490 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 16:30:29.491 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 16:30:29.492 [Thread-172] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 16:30:29.493 [Thread-172] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-43 - Shutdown initiated...
2025-11-07 16:30:29.497 [Thread-172] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-43 - Shutdown completed.
2025-11-07 16:30:31.554 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83406 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-07 16:30:31.555 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-07 16:30:31.555 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-07 16:30:35.937 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 16:30:35.937 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-07 16:30:36.022 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 83 ms. Found 9 JPA repository interfaces.
2025-11-07 16:30:36.028 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-07 16:30:36.028 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-07 16:30:36.039 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 16:30:36.039 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.EnderecoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 16:30:36.040 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.GrupoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 16:30:36.040 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 16:30:36.040 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ItemPedidoOpcionalRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 16:30:36.040 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 16:30:36.041 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 16:30:36.041 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 16:30:36.041 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-07 16:30:36.041 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-07 16:30:36.841 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-07 16:30:36.846 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-07 16:30:36.847 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-07 16:30:36.848 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-07 16:30:36.914 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-07 16:30:36.915 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5356 ms
2025-11-07 16:30:37.526 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-07 16:30:37.527 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-07 16:30:37.527 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-07 16:30:37.798 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-07 16:30:37.800 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-44 - Starting...
2025-11-07 16:30:37.804 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-44 - Added connection conn557: url=jdbc:h2:mem:deliverydb user=SA
2025-11-07 16:30:37.805 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-44 - Start completed.
2025-11-07 16:30:37.806 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-07 16:30:38.353 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 16:30:38.354 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 16:30:38.355 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 16:30:38.355 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 16:30:38.355 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 16:30:38.356 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 16:30:38.356 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 16:30:38.356 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 16:30:38.356 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 16:30:38.356 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 16:30:38.357 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        id bigint not null,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        nome varchar(100) not null,
        primary key (id)
    )
2025-11-07 16:30:38.359 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table endereco (
        estado varchar(2) not null,
        latitude numeric(10,8),
        longitude numeric(11,8),
        cep varchar(8) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        numero varchar(20) not null,
        apelido varchar(50) not null,
        bairro varchar(255) not null,
        cidade varchar(255) not null,
        complemento varchar(255),
        rua varchar(255) not null,
        primary key (id)
    )
2025-11-07 16:30:38.363 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table grupo_opcional (
        max_selecao integer not null check (max_selecao>=1),
        min_selecao integer not null check (min_selecao>=0),
        id bigint generated by default as identity,
        produto_id bigint not null,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 16:30:38.366 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_opcional (
        preco_adicional numeric(38,2) not null,
        grupo_opcional_id bigint not null,
        id bigint generated by default as identity,
        nome varchar(255) not null,
        primary key (id)
    )
2025-11-07 16:30:38.400 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table item_pedido_opcional (
        preco_registrado numeric(38,2) not null,
        id bigint generated by default as identity,
        item_opcional_id bigint not null,
        item_pedido_id bigint not null,
        primary key (id)
    )
2025-11-07 16:30:38.402 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-07 16:30:38.405 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        troco_para numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        endereco_entrega_id bigint not null,
        entregador_id bigint,
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        metodo_pagamento varchar(255) not null,
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-07 16:30:38.411 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco_base numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-07 16:30:38.418 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        endereco_id bigint unique,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-07 16:30:38.422 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-07 16:30:38.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists cliente 
       add constraint FKsitxst8o302fspskxfjatuyrl 
       foreign key (id) 
       references usuario
2025-11-07 16:30:38.442 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists endereco 
       add constraint FKekdpb8k6gmp3lllla9d1qgmxk 
       foreign key (usuario_id) 
       references usuario
2025-11-07 16:30:38.452 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists grupo_opcional 
       add constraint FKpssm5hjvy6p7j9invf2q8ifcr 
       foreign key (produto_id) 
       references produto
2025-11-07 16:30:38.457 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_opcional 
       add constraint FKj2pr8rwufqx3pu7ef03h9r072 
       foreign key (grupo_opcional_id) 
       references grupo_opcional
2025-11-07 16:30:38.463 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FKe3h652dkcw2h4k8gr2dawx14v 
       foreign key (item_opcional_id) 
       references item_opcional
2025-11-07 16:30:38.466 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists item_pedido_opcional 
       add constraint FK8x5b3u33ebvie1jiwq6v5tdr8 
       foreign key (item_pedido_id) 
       references itens_pedido
2025-11-07 16:30:38.472 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-07 16:30:38.484 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-07 16:30:38.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-07 16:30:38.502 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FKcrxxe5rpllxbh0sfi4a6rwphb 
       foreign key (endereco_entrega_id) 
       references endereco
2025-11-07 16:30:38.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK1o4p1l374f8fjjyuy28mm0vp7 
       foreign key (entregador_id) 
       references usuario
2025-11-07 16:30:38.520 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 16:30:38.524 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-07 16:30:38.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists restaurante 
       add constraint FKnc0aps7r9c6euyqrs6d2v04qa 
       foreign key (endereco_id) 
       references endereco
2025-11-07 16:30:38.537 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 16:30:39.711 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-07 16:30:40.320 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 54 mappings in 'requestMappingHandlerMapping'
2025-11-07 16:30:40.390 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-07 16:30:40.617 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-07 16:30:40.763 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-07 16:30:40.847 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-07 16:30:40.925 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-07 16:30:41.316 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-07 16:30:41.519 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-07 16:30:41.591 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-07 16:30:41.594 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-07 16:30:41.613 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-07 16:30:41.615 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 10.319 seconds (process running for 29877.899)
2025-11-07 16:30:41.616 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-07 16:30:41.617 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-07 16:30:41.620 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-07 16:30:46.252 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-07 16:30:46.254 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-07 16:31:00.108 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-07 16:31:00.140 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-07 16:31:00.141 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-07 16:31:00.143 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists endereco cascade 
2025-11-07 16:31:00.144 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists grupo_opcional cascade 
2025-11-07 16:31:00.146 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_opcional cascade 
2025-11-07 16:31:00.146 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists item_pedido_opcional cascade 
2025-11-07 16:31:00.147 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-07 16:31:00.148 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-07 16:31:00.149 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-07 16:31:00.150 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-07 16:31:00.150 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-07 16:31:00.153 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-07 16:31:00.154 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-44 - Shutdown initiated...
2025-11-07 16:31:00.157 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-44 - Shutdown completed.
