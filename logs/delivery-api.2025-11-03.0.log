2025-11-03 12:32:31.732 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 16828 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 12:32:31.795 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 12:32:31.797 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 12:32:32.153 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 12:32:32.153 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 12:32:38.746 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 12:32:38.908 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 131 ms. Found 5 JPA repository interfaces.
2025-11-03 12:32:40.724 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 12:32:40.773 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 12:32:40.776 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 12:32:40.778 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 12:32:40.873 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 12:32:40.875 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 8719 ms
2025-11-03 12:32:41.962 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 12:32:41.964 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 12:32:41.964 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 12:32:43.695 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 12:32:43.893 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 12:32:44.449 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 12:32:44.452 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 12:32:44.542 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 12:32:46.975 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 12:32:46.982 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 12:32:46.982 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 12:32:46.983 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 12:32:46.983 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 12:32:46.984 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 12:32:47.018 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 12:32:47.048 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 12:32:47.058 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 12:32:47.063 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 12:32:47.066 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 12:32:47.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 12:32:47.072 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 12:32:47.104 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 12:32:47.106 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 12:32:47.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 12:32:47.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 12:32:47.130 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 12:32:47.787 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 12:32:49.741 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 12:32:50.850 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 12:32:50.930 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 12:32:51.107 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 12:32:51.271 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 12:32:51.417 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 12:32:51.603 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 12:32:52.129 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 12:32:52.356 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 12:32:52.485 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 12:32:52.501 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 12:32:52.532 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 23.463 seconds (process running for 25.198)
2025-11-03 12:32:52.544 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:32:52.658 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:32:52.685 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:33:00.615 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:33:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:33:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:33:22.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:33:24.282 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:33:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:33:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:33:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:33:53.383 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:34:22.529 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:34:22.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:34:22.532 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:34:23.567 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:34:52.529 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:34:52.544 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:34:52.546 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:35:09.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:35:22.529 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:35:22.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:35:22.533 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:35:23.919 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:35:52.529 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:35:52.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:35:52.532 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:35:53.880 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:36:16.198 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 12:36:16.199 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 12:36:16.199 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 12:36:16.200 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 12:36:16.200 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 12:36:16.203 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6fa34f58
2025-11-03 12:36:16.205 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2d9e513e
2025-11-03 12:36:16.205 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 12:36:16.206 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-11-03 12:36:16.306 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-03 12:36:16.430 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:16.435 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:16.435 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:16.458 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-03 12:36:16.471 [http-nio-8080-exec-1] DEBUG [125f145088e54c4a] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-03 12:36:16.526 [http-nio-8080-exec-1] DEBUG [125f145088e54c4a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-03 12:36:16.670 [http-nio-8080-exec-1] DEBUG [125f145088e54c4a] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-03 12:36:16.969 [http-nio-8080-exec-1] DEBUG [125f145088e54c4a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:19.207 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:36:19.219 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:19.235 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:19.238 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:19.256 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:36:19.256 [http-nio-8080-exec-2] DEBUG [87b31a208d09412a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:36:19.262 [http-nio-8080-exec-2] DEBUG [87b31a208d09412a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:36:19.353 [http-nio-8080-exec-2] DEBUG [87b31a208d09412a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:19.356 [http-nio-8080-exec-2] DEBUG [87b31a208d09412a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:36:19.370 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 12:36:19.371 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:19.372 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:19.372 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:19.508 [http-nio-8080-exec-2] DEBUG [87b31a208d09412a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:22.529 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:36:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:36:22.532 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:36:24.209 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:36:24.211 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:24.212 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:24.213 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:24.216 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:36:24.217 [http-nio-8080-exec-4] DEBUG [1a3624d5851847f4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:36:24.218 [http-nio-8080-exec-4] DEBUG [1a3624d5851847f4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:36:24.221 [http-nio-8080-exec-4] DEBUG [1a3624d5851847f4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:24.222 [http-nio-8080-exec-4] DEBUG [1a3624d5851847f4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:36:24.224 [http-nio-8080-exec-4] DEBUG [1a3624d5851847f4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:24.494 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:36:29.210 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:36:29.212 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:29.214 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:29.215 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:29.218 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:36:29.219 [http-nio-8080-exec-5] DEBUG [4d23d8d9b3884daa] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:36:29.220 [http-nio-8080-exec-5] DEBUG [4d23d8d9b3884daa] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:36:29.222 [http-nio-8080-exec-5] DEBUG [4d23d8d9b3884daa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:29.223 [http-nio-8080-exec-5] DEBUG [4d23d8d9b3884daa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:36:29.225 [http-nio-8080-exec-5] DEBUG [4d23d8d9b3884daa] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:33.837 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 12:36:34.209 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:36:34.210 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:34.211 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:34.211 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:34.213 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:36:34.214 [http-nio-8080-exec-7] DEBUG [8a3331268d2b4cc0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:36:34.215 [http-nio-8080-exec-7] DEBUG [8a3331268d2b4cc0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:36:34.217 [http-nio-8080-exec-7] DEBUG [8a3331268d2b4cc0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:34.218 [http-nio-8080-exec-7] DEBUG [8a3331268d2b4cc0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:36:34.221 [http-nio-8080-exec-7] DEBUG [8a3331268d2b4cc0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:34.805 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T01:20:13Z. Current time: 2025-11-03T15:36:34Z, a difference of 137781804 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 12:36:34.807 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:34.810 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 12:36:34.811 [http-nio-8080-exec-8] DEBUG [3e1bee21b26d4d4b] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 12:36:34.812 [http-nio-8080-exec-8] DEBUG [3e1bee21b26d4d4b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 12:36:34.945 [http-nio-8080-exec-8] DEBUG [3e1bee21b26d4d4b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@2a2ce575]
2025-11-03 12:36:35.614 [http-nio-8080-exec-8] DEBUG [3e1bee21b26d4d4b] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 12:36:35.986 [http-nio-8080-exec-8] DEBUG [3e1bee21b26d4d4b] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 12:36:36.143 [http-nio-8080-exec-8] DEBUG [3e1bee21b26d4d4b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:36.144 [http-nio-8080-exec-8] DEBUG [3e1bee21b26d4d4b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@62ee3073]
2025-11-03 12:36:36.157 [http-nio-8080-exec-8] DEBUG [3e1bee21b26d4d4b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:39.211 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:36:39.213 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:39.214 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:39.214 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:39.217 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:36:39.218 [http-nio-8080-exec-9] DEBUG [7be6b89d9d774bf2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:36:39.219 [http-nio-8080-exec-9] DEBUG [7be6b89d9d774bf2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:36:39.223 [http-nio-8080-exec-9] DEBUG [7be6b89d9d774bf2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:39.224 [http-nio-8080-exec-9] DEBUG [7be6b89d9d774bf2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:36:39.225 [http-nio-8080-exec-9] DEBUG [7be6b89d9d774bf2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:44.210 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:36:44.212 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:44.213 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:44.214 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:44.219 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:36:44.220 [http-nio-8080-exec-10] DEBUG [b26b1a8e9a934bd0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:36:44.220 [http-nio-8080-exec-10] DEBUG [b26b1a8e9a934bd0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:36:44.223 [http-nio-8080-exec-10] DEBUG [b26b1a8e9a934bd0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:44.225 [http-nio-8080-exec-10] DEBUG [b26b1a8e9a934bd0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:36:44.230 [http-nio-8080-exec-10] DEBUG [b26b1a8e9a934bd0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:49.208 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:36:49.209 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:49.209 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:49.209 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:49.210 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:36:49.211 [http-nio-8080-exec-1] DEBUG [6f736ad2f8544039] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:36:49.211 [http-nio-8080-exec-1] DEBUG [6f736ad2f8544039] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:36:49.212 [http-nio-8080-exec-1] DEBUG [6f736ad2f8544039] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:49.212 [http-nio-8080-exec-1] DEBUG [6f736ad2f8544039] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:36:49.214 [http-nio-8080-exec-1] DEBUG [6f736ad2f8544039] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:36:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:36:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:36:53.036 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 12:36:53.040 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T01:20:13Z. Current time: 2025-11-03T15:36:53Z, a difference of 137800039 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 12:36:53.041 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:53.046 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 12:36:53.046 [http-nio-8080-exec-3] DEBUG [d2fd07f3c30e49e9] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 12:36:53.047 [http-nio-8080-exec-3] DEBUG [d2fd07f3c30e49e9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 12:36:53.052 [http-nio-8080-exec-3] DEBUG [d2fd07f3c30e49e9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@5e79d712]
2025-11-03 12:36:53.056 [http-nio-8080-exec-3] DEBUG [d2fd07f3c30e49e9] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 12:36:53.178 [http-nio-8080-exec-3] DEBUG [d2fd07f3c30e49e9] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 12:36:53.182 [http-nio-8080-exec-3] DEBUG [d2fd07f3c30e49e9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:53.218 [http-nio-8080-exec-3] DEBUG [d2fd07f3c30e49e9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@4e2a91d2]
2025-11-03 12:36:53.232 [http-nio-8080-exec-3] DEBUG [d2fd07f3c30e49e9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:54.208 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:36:54.209 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:54.210 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:54.210 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:54.212 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:36:54.212 [http-nio-8080-exec-2] DEBUG [7cbc782417eb409d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:36:54.213 [http-nio-8080-exec-2] DEBUG [7cbc782417eb409d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:36:54.214 [http-nio-8080-exec-2] DEBUG [7cbc782417eb409d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:54.215 [http-nio-8080-exec-2] DEBUG [7cbc782417eb409d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:36:54.216 [http-nio-8080-exec-2] DEBUG [7cbc782417eb409d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:36:59.211 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:36:59.214 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:36:59.215 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:36:59.216 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:36:59.219 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:36:59.220 [http-nio-8080-exec-4] DEBUG [847b987768f14302] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:36:59.220 [http-nio-8080-exec-4] DEBUG [847b987768f14302] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:36:59.222 [http-nio-8080-exec-4] DEBUG [847b987768f14302] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:36:59.223 [http-nio-8080-exec-4] DEBUG [847b987768f14302] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:36:59.224 [http-nio-8080-exec-4] DEBUG [847b987768f14302] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:04.209 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:04.214 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:04.216 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:04.218 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:04.221 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:04.222 [http-nio-8080-exec-5] DEBUG [f51befaf5e3b4213] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:04.223 [http-nio-8080-exec-5] DEBUG [f51befaf5e3b4213] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:04.226 [http-nio-8080-exec-5] DEBUG [f51befaf5e3b4213] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:04.227 [http-nio-8080-exec-5] DEBUG [f51befaf5e3b4213] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:04.235 [http-nio-8080-exec-5] DEBUG [f51befaf5e3b4213] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:04.888 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:37:09.210 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:09.211 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:09.212 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:09.213 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:09.216 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:09.217 [http-nio-8080-exec-6] DEBUG [fa53b84348284d92] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:09.217 [http-nio-8080-exec-6] DEBUG [fa53b84348284d92] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:09.219 [http-nio-8080-exec-6] DEBUG [fa53b84348284d92] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:09.219 [http-nio-8080-exec-6] DEBUG [fa53b84348284d92] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:09.221 [http-nio-8080-exec-6] DEBUG [fa53b84348284d92] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:14.209 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:14.211 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:14.212 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:14.212 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:14.214 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:14.215 [http-nio-8080-exec-7] DEBUG [413524239c5e46b5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:14.216 [http-nio-8080-exec-7] DEBUG [413524239c5e46b5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:14.219 [http-nio-8080-exec-7] DEBUG [413524239c5e46b5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:14.219 [http-nio-8080-exec-7] DEBUG [413524239c5e46b5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:14.221 [http-nio-8080-exec-7] DEBUG [413524239c5e46b5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:19.208 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:19.209 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:19.210 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:19.211 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:19.213 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:19.214 [http-nio-8080-exec-8] DEBUG [91c3b3b6a7044c7f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:19.214 [http-nio-8080-exec-8] DEBUG [91c3b3b6a7044c7f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:19.217 [http-nio-8080-exec-8] DEBUG [91c3b3b6a7044c7f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:19.219 [http-nio-8080-exec-8] DEBUG [91c3b3b6a7044c7f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:19.221 [http-nio-8080-exec-8] DEBUG [91c3b3b6a7044c7f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:22.022 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 12:37:22.031 [http-nio-8080-exec-10] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 12:37:22.045 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 12:37:22.045 [http-nio-8080-exec-10] DEBUG [67035989032f4c3f] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-03 12:37:22.046 [http-nio-8080-exec-10] DEBUG [67035989032f4c3f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 12:37:22.106 [http-nio-8080-exec-10] DEBUG [67035989032f4c3f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@38c102a0]
2025-11-03 12:37:22.258 [http-nio-8080-exec-10] DEBUG [67035989032f4c3f] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 12:37:22.308 [http-nio-8080-exec-10] DEBUG [67035989032f4c3f] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@3f62f6ee and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENTE')]
2025-11-03 12:37:22.311 [http-nio-8080-exec-10] DEBUG [67035989032f4c3f] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-03 12:37:22.340 [http-nio-8080-exec-10] DEBUG [67035989032f4c3f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:22.341 [http-nio-8080-exec-10] DEBUG [67035989032f4c3f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@67284e98]
2025-11-03 12:37:22.344 [http-nio-8080-exec-10] WARN  [67035989032f4c3f] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-03 12:37:22.345 [http-nio-8080-exec-10] DEBUG [67035989032f4c3f] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-03 12:37:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:37:22.529 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:37:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:37:24.208 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:24.209 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:24.209 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:24.210 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:24.210 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:24.211 [http-nio-8080-exec-1] DEBUG [690aea38dc324284] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:24.211 [http-nio-8080-exec-1] DEBUG [690aea38dc324284] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:24.213 [http-nio-8080-exec-1] DEBUG [690aea38dc324284] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:24.213 [http-nio-8080-exec-1] DEBUG [690aea38dc324284] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:24.214 [http-nio-8080-exec-1] DEBUG [690aea38dc324284] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:29.207 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:29.208 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:29.209 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:29.209 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:29.210 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:29.217 [http-nio-8080-exec-3] DEBUG [258d2ec5960c4b5e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:29.219 [http-nio-8080-exec-3] DEBUG [258d2ec5960c4b5e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:29.233 [http-nio-8080-exec-3] DEBUG [258d2ec5960c4b5e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:29.239 [http-nio-8080-exec-3] DEBUG [258d2ec5960c4b5e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:29.255 [http-nio-8080-exec-3] DEBUG [258d2ec5960c4b5e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:34.209 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:34.211 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:34.213 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:34.214 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:34.231 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:34.234 [http-nio-8080-exec-2] DEBUG [54e12d02d9454ca6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:34.236 [http-nio-8080-exec-2] DEBUG [54e12d02d9454ca6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:34.241 [http-nio-8080-exec-2] DEBUG [54e12d02d9454ca6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:34.249 [http-nio-8080-exec-2] DEBUG [54e12d02d9454ca6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:34.252 [http-nio-8080-exec-2] DEBUG [54e12d02d9454ca6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:39.207 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:39.208 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:39.208 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:39.208 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:39.210 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:39.211 [http-nio-8080-exec-4] DEBUG [cf6c5663bc004982] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:39.211 [http-nio-8080-exec-4] DEBUG [cf6c5663bc004982] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:39.213 [http-nio-8080-exec-4] DEBUG [cf6c5663bc004982] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:39.214 [http-nio-8080-exec-4] DEBUG [cf6c5663bc004982] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:39.215 [http-nio-8080-exec-4] DEBUG [cf6c5663bc004982] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:44.231 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:44.232 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:44.233 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:44.233 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:44.259 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:44.260 [http-nio-8080-exec-5] DEBUG [b6e26f6644fa435b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:44.261 [http-nio-8080-exec-5] DEBUG [b6e26f6644fa435b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:44.263 [http-nio-8080-exec-5] DEBUG [b6e26f6644fa435b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:44.264 [http-nio-8080-exec-5] DEBUG [b6e26f6644fa435b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:44.265 [http-nio-8080-exec-5] DEBUG [b6e26f6644fa435b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:45.340 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 12:37:45.341 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 5 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 12:37:49.208 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:49.210 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:49.210 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:49.210 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:49.212 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:49.213 [http-nio-8080-exec-6] DEBUG [3d3751e85c9e4205] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:49.213 [http-nio-8080-exec-6] DEBUG [3d3751e85c9e4205] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:49.217 [http-nio-8080-exec-6] DEBUG [3d3751e85c9e4205] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:49.217 [http-nio-8080-exec-6] DEBUG [3d3751e85c9e4205] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:49.222 [http-nio-8080-exec-6] DEBUG [3d3751e85c9e4205] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:54.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:54.593 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:54.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:54.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:54.596 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:54.597 [http-nio-8080-exec-7] DEBUG [1fe49850338d4b2b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:54.597 [http-nio-8080-exec-7] DEBUG [1fe49850338d4b2b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:54.600 [http-nio-8080-exec-7] DEBUG [1fe49850338d4b2b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:54.601 [http-nio-8080-exec-7] DEBUG [1fe49850338d4b2b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:54.604 [http-nio-8080-exec-7] DEBUG [1fe49850338d4b2b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:37:59.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:37:59.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:37:59.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:37:59.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:37:59.595 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:37:59.596 [http-nio-8080-exec-8] DEBUG [45b1a9f486e14a5d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:37:59.596 [http-nio-8080-exec-8] DEBUG [45b1a9f486e14a5d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:37:59.598 [http-nio-8080-exec-8] DEBUG [45b1a9f486e14a5d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:37:59.599 [http-nio-8080-exec-8] DEBUG [45b1a9f486e14a5d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:37:59.600 [http-nio-8080-exec-8] DEBUG [45b1a9f486e14a5d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:03.518 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 12:38:03.522 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T01:20:13Z. Current time: 2025-11-03T15:38:03Z, a difference of 137870521 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 12:38:03.523 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:03.526 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 12:38:03.527 [http-nio-8080-exec-9] DEBUG [10f4abedfd2f480f] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 12:38:03.528 [http-nio-8080-exec-9] DEBUG [10f4abedfd2f480f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 12:38:03.529 [http-nio-8080-exec-9] DEBUG [10f4abedfd2f480f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@7f189a88]
2025-11-03 12:38:03.533 [http-nio-8080-exec-9] DEBUG [10f4abedfd2f480f] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 12:38:03.664 [http-nio-8080-exec-9] DEBUG [10f4abedfd2f480f] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 12:38:03.667 [http-nio-8080-exec-9] DEBUG [10f4abedfd2f480f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:03.667 [http-nio-8080-exec-9] DEBUG [10f4abedfd2f480f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@3d03f357]
2025-11-03 12:38:03.668 [http-nio-8080-exec-9] DEBUG [10f4abedfd2f480f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:04.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:04.593 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:04.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:04.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:04.594 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:04.594 [http-nio-8080-exec-10] DEBUG [de8e6fa8425c4a73] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:04.595 [http-nio-8080-exec-10] DEBUG [de8e6fa8425c4a73] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:04.596 [http-nio-8080-exec-10] DEBUG [de8e6fa8425c4a73] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:04.596 [http-nio-8080-exec-10] DEBUG [de8e6fa8425c4a73] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:38:04.597 [http-nio-8080-exec-10] DEBUG [de8e6fa8425c4a73] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:09.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:09.593 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:09.593 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:09.593 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:09.595 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:09.596 [http-nio-8080-exec-1] DEBUG [1f0b4ecc781342fd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:09.596 [http-nio-8080-exec-1] DEBUG [1f0b4ecc781342fd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:09.598 [http-nio-8080-exec-1] DEBUG [1f0b4ecc781342fd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:09.599 [http-nio-8080-exec-1] DEBUG [1f0b4ecc781342fd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:38:09.600 [http-nio-8080-exec-1] DEBUG [1f0b4ecc781342fd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:09.811 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:38:09.813 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:38:09.813 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:38:09.814 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:38:10.436 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:38:14.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:14.594 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:14.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:14.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:14.597 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:14.598 [http-nio-8080-exec-3] DEBUG [72612ad362364a7a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:14.600 [http-nio-8080-exec-3] DEBUG [72612ad362364a7a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:14.602 [http-nio-8080-exec-3] DEBUG [72612ad362364a7a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:14.605 [http-nio-8080-exec-3] DEBUG [72612ad362364a7a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:38:14.606 [http-nio-8080-exec-3] DEBUG [72612ad362364a7a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:19.562 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 12:38:19.567 [http-nio-8080-exec-2] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 12:38:19.573 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 12:38:19.573 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-03 12:38:19.573 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 12:38:19.575 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@2eee8572]
2025-11-03 12:38:19.576 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 12:38:19.578 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 12:38:19.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:19.593 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:19.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:19.595 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:19.601 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:19.603 [http-nio-8080-exec-4] DEBUG [5e0997f9af0547be] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:19.604 [http-nio-8080-exec-4] DEBUG [5e0997f9af0547be] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:19.605 [http-nio-8080-exec-4] DEBUG [5e0997f9af0547be] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:19.607 [http-nio-8080-exec-4] DEBUG [5e0997f9af0547be] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:38:19.609 [http-nio-8080-exec-4] DEBUG [5e0997f9af0547be] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:19.710 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 12:38:19.756 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-03 12:38:19.761 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 12:38:19.870 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 12:38:19.915 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-03 12:38:20.049 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-03 12:38:20.083 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:20.083 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@20f87c31]
2025-11-03 12:38:20.107 [http-nio-8080-exec-2] DEBUG [ea09b704e1354bb6] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-03 12:38:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:38:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:38:22.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:38:23.947 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:38:24.208 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:24.210 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:24.211 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:24.211 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:24.214 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:24.214 [http-nio-8080-exec-5] DEBUG [8fbf2eae74754d60] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:24.216 [http-nio-8080-exec-5] DEBUG [8fbf2eae74754d60] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:24.218 [http-nio-8080-exec-5] DEBUG [8fbf2eae74754d60] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:24.219 [http-nio-8080-exec-5] DEBUG [8fbf2eae74754d60] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:38:24.220 [http-nio-8080-exec-5] DEBUG [8fbf2eae74754d60] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:29.208 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:29.209 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:29.209 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:29.210 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:29.212 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:29.212 [http-nio-8080-exec-6] DEBUG [e6e9e64368984a79] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:29.213 [http-nio-8080-exec-6] DEBUG [e6e9e64368984a79] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:29.214 [http-nio-8080-exec-6] DEBUG [e6e9e64368984a79] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:29.215 [http-nio-8080-exec-6] DEBUG [e6e9e64368984a79] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:38:29.217 [http-nio-8080-exec-6] DEBUG [e6e9e64368984a79] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:34.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:34.593 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:34.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:34.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:34.596 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:34.597 [http-nio-8080-exec-7] DEBUG [6b26ef23a7f94caa] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:34.598 [http-nio-8080-exec-7] DEBUG [6b26ef23a7f94caa] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:34.600 [http-nio-8080-exec-7] DEBUG [6b26ef23a7f94caa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:34.601 [http-nio-8080-exec-7] DEBUG [6b26ef23a7f94caa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:38:34.603 [http-nio-8080-exec-7] DEBUG [6b26ef23a7f94caa] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:39.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:39.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:39.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:39.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:39.596 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:39.596 [http-nio-8080-exec-8] DEBUG [3443492a128a477e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:39.597 [http-nio-8080-exec-8] DEBUG [3443492a128a477e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:39.598 [http-nio-8080-exec-8] DEBUG [3443492a128a477e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:39.599 [http-nio-8080-exec-8] DEBUG [3443492a128a477e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:38:39.602 [http-nio-8080-exec-8] DEBUG [3443492a128a477e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:44.591 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:44.592 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:44.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:44.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:44.595 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:44.595 [http-nio-8080-exec-9] DEBUG [bccc501650e4458e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:44.596 [http-nio-8080-exec-9] DEBUG [bccc501650e4458e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:44.597 [http-nio-8080-exec-9] DEBUG [bccc501650e4458e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:44.597 [http-nio-8080-exec-9] DEBUG [bccc501650e4458e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:38:44.598 [http-nio-8080-exec-9] DEBUG [bccc501650e4458e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:49.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:49.593 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:49.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:49.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:49.595 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:49.595 [http-nio-8080-exec-10] DEBUG [17795deec0bf4c0a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:49.596 [http-nio-8080-exec-10] DEBUG [17795deec0bf4c0a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:49.602 [http-nio-8080-exec-10] DEBUG [17795deec0bf4c0a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:49.603 [http-nio-8080-exec-10] DEBUG [17795deec0bf4c0a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:38:49.606 [http-nio-8080-exec-10] DEBUG [17795deec0bf4c0a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:38:52.529 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:38:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:38:54.148 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:38:54.592 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:54.594 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:54.594 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:54.594 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:54.596 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:54.597 [http-nio-8080-exec-1] DEBUG [f7241aabc16d4588] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:54.597 [http-nio-8080-exec-1] DEBUG [f7241aabc16d4588] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:54.600 [http-nio-8080-exec-1] DEBUG [f7241aabc16d4588] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:54.601 [http-nio-8080-exec-1] DEBUG [f7241aabc16d4588] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:38:54.603 [http-nio-8080-exec-1] DEBUG [f7241aabc16d4588] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:38:59.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:38:59.592 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:38:59.593 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:38:59.593 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:38:59.594 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:38:59.595 [http-nio-8080-exec-3] DEBUG [f4c20e331c0543ee] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:38:59.596 [http-nio-8080-exec-3] DEBUG [f4c20e331c0543ee] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:38:59.599 [http-nio-8080-exec-3] DEBUG [f4c20e331c0543ee] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:38:59.599 [http-nio-8080-exec-3] DEBUG [f4c20e331c0543ee] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:38:59.601 [http-nio-8080-exec-3] DEBUG [f4c20e331c0543ee] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:39:04.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:39:04.593 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:39:04.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:39:04.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:39:04.596 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:39:04.597 [http-nio-8080-exec-4] DEBUG [4f206dd7bdcd474e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:39:04.598 [http-nio-8080-exec-4] DEBUG [4f206dd7bdcd474e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:39:04.601 [http-nio-8080-exec-4] DEBUG [4f206dd7bdcd474e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:39:04.602 [http-nio-8080-exec-4] DEBUG [4f206dd7bdcd474e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:39:04.606 [http-nio-8080-exec-4] DEBUG [4f206dd7bdcd474e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:39:09.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:39:09.592 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:39:09.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:39:09.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:39:09.594 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:39:09.594 [http-nio-8080-exec-2] DEBUG [5ba6788cea9341ec] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:39:09.595 [http-nio-8080-exec-2] DEBUG [5ba6788cea9341ec] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:39:09.596 [http-nio-8080-exec-2] DEBUG [5ba6788cea9341ec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:39:09.597 [http-nio-8080-exec-2] DEBUG [5ba6788cea9341ec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:39:09.600 [http-nio-8080-exec-2] DEBUG [5ba6788cea9341ec] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:39:14.592 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:39:14.593 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:39:14.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:39:14.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:39:14.595 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:39:14.596 [http-nio-8080-exec-5] DEBUG [3107a9e310b443c1] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:39:14.597 [http-nio-8080-exec-5] DEBUG [3107a9e310b443c1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:39:14.599 [http-nio-8080-exec-5] DEBUG [3107a9e310b443c1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:39:14.600 [http-nio-8080-exec-5] DEBUG [3107a9e310b443c1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:39:14.603 [http-nio-8080-exec-5] DEBUG [3107a9e310b443c1] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:39:19.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:39:19.592 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:39:19.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:39:19.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:39:19.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:39:19.594 [http-nio-8080-exec-6] DEBUG [cb866b8da2644b98] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:39:19.594 [http-nio-8080-exec-6] DEBUG [cb866b8da2644b98] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:39:19.596 [http-nio-8080-exec-6] DEBUG [cb866b8da2644b98] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:39:19.596 [http-nio-8080-exec-6] DEBUG [cb866b8da2644b98] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:39:19.597 [http-nio-8080-exec-6] DEBUG [cb866b8da2644b98] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:39:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:39:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:39:22.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:39:24.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:39:24.591 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:39:24.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:39:24.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:39:24.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:39:24.593 [http-nio-8080-exec-8] DEBUG [b4fbd6879365457a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:39:24.593 [http-nio-8080-exec-8] DEBUG [b4fbd6879365457a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:39:24.594 [http-nio-8080-exec-8] DEBUG [b4fbd6879365457a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:39:24.594 [http-nio-8080-exec-8] DEBUG [b4fbd6879365457a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:39:24.595 [http-nio-8080-exec-8] DEBUG [b4fbd6879365457a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:39:25.059 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:39:29.590 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:39:29.591 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:39:29.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:39:29.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:39:29.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:39:29.593 [http-nio-8080-exec-9] DEBUG [88db1d333f6649b5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:39:29.594 [http-nio-8080-exec-9] DEBUG [88db1d333f6649b5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:39:29.595 [http-nio-8080-exec-9] DEBUG [88db1d333f6649b5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:39:29.596 [http-nio-8080-exec-9] DEBUG [88db1d333f6649b5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:39:29.597 [http-nio-8080-exec-9] DEBUG [88db1d333f6649b5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:39:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:39:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:39:52.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:39:53.205 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:39:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:39:57.595 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:39:57.596 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:39:57.596 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:39:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:39:57.598 [http-nio-8080-exec-10] DEBUG [559d996958504fce] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:39:57.598 [http-nio-8080-exec-10] DEBUG [559d996958504fce] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:39:57.600 [http-nio-8080-exec-10] DEBUG [559d996958504fce] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:39:57.601 [http-nio-8080-exec-10] DEBUG [559d996958504fce] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:39:57.602 [http-nio-8080-exec-10] DEBUG [559d996958504fce] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:40:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:40:22.529 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:40:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:40:23.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:40:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:40:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:40:52.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:40:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:40:57.595 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:40:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:40:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:40:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:40:57.599 [http-nio-8080-exec-1] DEBUG [4bffc48fcb5f4f17] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:40:57.600 [http-nio-8080-exec-1] DEBUG [4bffc48fcb5f4f17] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:40:57.602 [http-nio-8080-exec-1] DEBUG [4bffc48fcb5f4f17] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:40:57.602 [http-nio-8080-exec-1] DEBUG [4bffc48fcb5f4f17] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:40:57.604 [http-nio-8080-exec-1] DEBUG [4bffc48fcb5f4f17] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:41:03.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:41:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:41:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:41:22.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:41:30.384 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:41:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:41:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:41:52.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:41:57.607 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:41:57.608 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:41:57.609 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:41:57.609 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:41:57.611 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:41:57.612 [http-nio-8080-exec-3] DEBUG [44074c2f6d96447b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:41:57.613 [http-nio-8080-exec-3] DEBUG [44074c2f6d96447b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:41:57.617 [http-nio-8080-exec-3] DEBUG [44074c2f6d96447b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:41:57.617 [http-nio-8080-exec-3] DEBUG [44074c2f6d96447b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:41:57.620 [http-nio-8080-exec-3] DEBUG [44074c2f6d96447b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:42:11.669 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 12:42:11.670 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:42:11.671 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:42:11.672 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 12:42:11.673 [http-nio-8080-exec-4] DEBUG [745e76021ee34cf6] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 12:42:11.699 [http-nio-8080-exec-4] DEBUG [745e76021ee34cf6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-03 12:42:11.758 [http-nio-8080-exec-4] DEBUG [745e76021ee34cf6] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:42:11.759 [http-nio-8080-exec-4] DEBUG [745e76021ee34cf6] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:42:12.456 [http-nio-8080-exec-4] DEBUG [745e76021ee34cf6] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:42:12.466 [http-nio-8080-exec-4] DEBUG [745e76021ee34cf6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 12:42:12.475 [http-nio-8080-exec-4] DEBUG [745e76021ee34cf6] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@70ff38fd]
2025-11-03 12:42:12.478 [http-nio-8080-exec-4] DEBUG [745e76021ee34cf6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:42:12.704 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 12:42:12.705 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:42:12.705 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:42:32.325 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:42:32.327 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:42:32.328 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:42:32.329 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:42:33.584 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:42:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:42:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:42:52.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:42:53.768 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:42:57.598 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:42:57.600 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:42:57.601 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:42:57.602 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:42:57.603 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:42:57.604 [http-nio-8080-exec-5] DEBUG [6d45bb35fdcc41a6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:42:57.604 [http-nio-8080-exec-5] DEBUG [6d45bb35fdcc41a6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:42:57.607 [http-nio-8080-exec-5] DEBUG [6d45bb35fdcc41a6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:42:57.607 [http-nio-8080-exec-5] DEBUG [6d45bb35fdcc41a6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=358.59182, receita_total=40.9, pedid (truncated)...]
2025-11-03 12:42:57.613 [http-nio-8080-exec-5] DEBUG [6d45bb35fdcc41a6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:42:59.357 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 12:42:59.362 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 12:42:59.367 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 12:42:59.368 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-03 12:42:59.368 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 12:42:59.369 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@2e1a0afc]
2025-11-03 12:42:59.371 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 12:42:59.373 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 12:42:59.376 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 12:42:59.378 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-03 12:42:59.385 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 12:42:59.391 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 12:42:59.397 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-03 12:42:59.403 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-03 12:42:59.408 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:42:59.408 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@52b24eda]
2025-11-03 12:42:59.410 [http-nio-8080-exec-7] DEBUG [cb8d303d9f494b2b] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-03 12:43:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:43:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:43:22.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:43:24.707 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:43:26.106 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 12:43:26.107 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:43:26.107 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:43:26.108 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 12:43:26.108 [http-nio-8080-exec-10] DEBUG [f4d767a7a82943e9] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 12:43:26.109 [http-nio-8080-exec-10] DEBUG [f4d767a7a82943e9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-03 12:43:26.110 [http-nio-8080-exec-10] DEBUG [f4d767a7a82943e9] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:43:26.113 [http-nio-8080-exec-10] DEBUG [f4d767a7a82943e9] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:43:28.871 [http-nio-8080-exec-10] DEBUG [f4d767a7a82943e9] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:43:28.872 [http-nio-8080-exec-10] DEBUG [f4d767a7a82943e9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 12:43:28.873 [http-nio-8080-exec-10] DEBUG [f4d767a7a82943e9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@270f6fd5]
2025-11-03 12:43:28.874 [http-nio-8080-exec-10] DEBUG [f4d767a7a82943e9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:43:28.949 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 12:43:28.951 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:43:28.952 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:43:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:43:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:43:52.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:43:53.951 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:43:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:43:57.593 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:43:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:43:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:43:57.595 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:43:57.596 [http-nio-8080-exec-4] DEBUG [22b200941ff04f68] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:43:57.596 [http-nio-8080-exec-4] DEBUG [22b200941ff04f68] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:43:57.598 [http-nio-8080-exec-4] DEBUG [22b200941ff04f68] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:43:57.599 [http-nio-8080-exec-4] DEBUG [22b200941ff04f68] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=191.767255, receita_total=81.8, pedi (truncated)...]
2025-11-03 12:43:57.600 [http-nio-8080-exec-4] DEBUG [22b200941ff04f68] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:44:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:44:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:44:22.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:44:36.816 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:44:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:44:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:44:52.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:44:57.593 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:44:57.594 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:44:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:44:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:44:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:44:57.597 [http-nio-8080-exec-2] DEBUG [90cc91787ad346cd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:44:57.597 [http-nio-8080-exec-2] DEBUG [90cc91787ad346cd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:44:57.599 [http-nio-8080-exec-2] DEBUG [90cc91787ad346cd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:44:57.599 [http-nio-8080-exec-2] DEBUG [90cc91787ad346cd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=191.767255, receita_total=81.8, pedi (truncated)...]
2025-11-03 12:44:57.602 [http-nio-8080-exec-2] DEBUG [90cc91787ad346cd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:45:14.219 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:45:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:45:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:45:22.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:45:25.247 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:45:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:45:52.529 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:45:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:45:53.757 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:45:57.590 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:45:57.591 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:45:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:45:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:45:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:45:57.592 [http-nio-8080-exec-5] DEBUG [7e0db9a4788843dd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:45:57.593 [http-nio-8080-exec-5] DEBUG [7e0db9a4788843dd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:45:57.594 [http-nio-8080-exec-5] DEBUG [7e0db9a4788843dd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:45:57.594 [http-nio-8080-exec-5] DEBUG [7e0db9a4788843dd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=191.767255, receita_total=81.8, pedi (truncated)...]
2025-11-03 12:45:57.595 [http-nio-8080-exec-5] DEBUG [7e0db9a4788843dd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:46:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:46:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:46:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:46:22.837 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:46:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:46:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:46:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:46:53.351 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:46:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:46:57.597 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:46:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:46:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:46:57.599 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:46:57.600 [http-nio-8080-exec-6] DEBUG [3b22a662a3584928] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:46:57.601 [http-nio-8080-exec-6] DEBUG [3b22a662a3584928] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:46:57.604 [http-nio-8080-exec-6] DEBUG [3b22a662a3584928] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:46:57.604 [http-nio-8080-exec-6] DEBUG [3b22a662a3584928] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=191.767255, receita_total=81.8, pedi (truncated)...]
2025-11-03 12:46:57.606 [http-nio-8080-exec-6] DEBUG [3b22a662a3584928] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:47:22.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:47:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:47:22.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:47:25.645 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:47:52.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:47:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:47:52.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:47:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:47:57.594 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:47:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:47:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:47:57.596 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:47:57.596 [http-nio-8080-exec-7] DEBUG [89d7fffdaa594356] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:47:57.597 [http-nio-8080-exec-7] DEBUG [89d7fffdaa594356] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:47:57.599 [http-nio-8080-exec-7] DEBUG [89d7fffdaa594356] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:47:57.599 [http-nio-8080-exec-7] DEBUG [89d7fffdaa594356] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=191.767255, receita_total=81.8, pedi (truncated)...]
2025-11-03 12:47:57.600 [http-nio-8080-exec-7] DEBUG [89d7fffdaa594356] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:48:14.984 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:48:21.155 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 12:48:21.158 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 12:48:21.172 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 12:48:21.174 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 12:48:21.177 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 12:48:21.179 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 12:48:21.180 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 12:48:21.182 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 12:48:21.182 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 12:48:21.208 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 12:48:21.209 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 12:48:21.211 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 12:49:40.628 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 24113 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 12:49:40.630 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 12:49:40.631 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 12:49:40.696 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 12:49:40.696 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 12:49:43.125 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 12:49:43.256 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 119 ms. Found 5 JPA repository interfaces.
2025-11-03 12:49:44.385 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 12:49:44.403 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 12:49:44.406 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 12:49:44.407 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 12:49:44.468 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 12:49:44.469 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3772 ms
2025-11-03 12:49:45.372 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 12:49:45.374 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 12:49:45.375 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 12:49:47.603 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 12:49:47.720 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 12:49:48.322 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 12:49:48.326 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 12:49:48.451 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 12:49:50.628 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 12:49:50.633 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 12:49:50.633 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 12:49:50.634 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 12:49:50.634 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 12:49:50.635 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 12:49:50.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 12:49:50.721 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 12:49:50.727 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 12:49:50.730 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 12:49:50.732 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 12:49:50.735 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 12:49:50.738 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 12:49:50.769 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 12:49:50.772 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 12:49:50.774 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 12:49:50.777 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 12:49:50.786 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 12:49:51.679 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 12:49:53.772 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 12:49:54.655 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 12:49:54.732 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 12:49:54.920 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 12:49:55.082 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 12:49:55.237 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 12:49:55.493 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 12:49:56.118 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 12:49:56.334 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 12:49:56.451 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 12:49:56.481 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 12:49:56.511 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 17.292 seconds (process running for 18.008)
2025-11-03 12:49:56.523 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:49:56.663 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:49:56.729 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:49:57.667 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 12:49:57.667 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 12:49:57.667 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 12:49:57.668 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 12:49:57.668 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 12:49:57.670 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@70282925
2025-11-03 12:49:57.671 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7d54326
2025-11-03 12:49:57.672 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 12:49:57.672 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 12:49:57.699 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:49:57.714 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:49:57.717 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:49:57.717 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:49:57.728 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:49:57.733 [http-nio-8080-exec-1] DEBUG [0259857ad8614883] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:49:57.737 [http-nio-8080-exec-1] DEBUG [0259857ad8614883] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:49:57.773 [http-nio-8080-exec-1] DEBUG [0259857ad8614883] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:49:57.775 [http-nio-8080-exec-1] DEBUG [0259857ad8614883] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:49:57.814 [http-nio-8080-exec-1] DEBUG [0259857ad8614883] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:49:57.935 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:50:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:50:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:50:26.511 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:50:27.131 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:50:53.733 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 12:50:53.739 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:50:53.740 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:50:53.752 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 12:50:53.754 [http-nio-8080-exec-2] DEBUG [4c623a40da5d441b] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 12:50:53.763 [http-nio-8080-exec-2] DEBUG [4c623a40da5d441b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-03 12:50:53.785 [http-nio-8080-exec-2] DEBUG [4c623a40da5d441b] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:50:53.787 [http-nio-8080-exec-2] DEBUG [4c623a40da5d441b] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:50:56.383 [http-nio-8080-exec-2] DEBUG [4c623a40da5d441b] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:50:56.397 [http-nio-8080-exec-2] DEBUG [4c623a40da5d441b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 12:50:56.426 [http-nio-8080-exec-2] DEBUG [4c623a40da5d441b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@62b1a3fa]
2025-11-03 12:50:56.432 [http-nio-8080-exec-2] DEBUG [4c623a40da5d441b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:50:56.488 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 12:50:56.491 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:50:56.492 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:50:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:50:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:50:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:50:57.597 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:50:57.600 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:50:57.601 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:50:57.601 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:50:57.604 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:50:57.605 [http-nio-8080-exec-4] DEBUG [feaaf550e3574411] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:50:57.607 [http-nio-8080-exec-4] DEBUG [feaaf550e3574411] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:50:57.610 [http-nio-8080-exec-4] DEBUG [feaaf550e3574411] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:50:57.611 [http-nio-8080-exec-4] DEBUG [feaaf550e3574411] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:50:57.614 [http-nio-8080-exec-4] DEBUG [feaaf550e3574411] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:50:58.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:51:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:51:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:51:26.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:51:45.001 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:51:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:51:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:51:56.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:51:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:51:57.599 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:51:57.600 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:51:57.600 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:51:57.602 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:51:57.605 [http-nio-8080-exec-6] DEBUG [2c5374f450694fdf] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:51:57.605 [http-nio-8080-exec-6] DEBUG [2c5374f450694fdf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:51:57.607 [http-nio-8080-exec-6] DEBUG [2c5374f450694fdf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:51:57.607 [http-nio-8080-exec-6] DEBUG [2c5374f450694fdf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:51:57.608 [http-nio-8080-exec-6] DEBUG [2c5374f450694fdf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:52:26.601 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:52:26.603 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:52:26.605 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:52:26.607 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:52:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:52:57.598 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:52:57.599 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:52:57.599 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:52:57.602 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:52:57.603 [http-nio-8080-exec-7] DEBUG [68ede4a8a7b7460f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:52:57.604 [http-nio-8080-exec-7] DEBUG [68ede4a8a7b7460f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:52:57.607 [http-nio-8080-exec-7] DEBUG [68ede4a8a7b7460f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:52:57.608 [http-nio-8080-exec-7] DEBUG [68ede4a8a7b7460f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:52:57.610 [http-nio-8080-exec-7] DEBUG [68ede4a8a7b7460f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:53:05.539 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:53:05.541 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:53:05.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:53:05.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:53:07.938 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:53:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:53:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:53:26.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:53:44.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:53:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:53:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:53:56.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:53:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:53:57.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:53:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:53:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:53:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:53:57.597 [http-nio-8080-exec-8] DEBUG [7b63b3ccf07049d6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:53:57.598 [http-nio-8080-exec-8] DEBUG [7b63b3ccf07049d6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:53:57.599 [http-nio-8080-exec-8] DEBUG [7b63b3ccf07049d6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:53:57.600 [http-nio-8080-exec-8] DEBUG [7b63b3ccf07049d6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:53:57.601 [http-nio-8080-exec-8] DEBUG [7b63b3ccf07049d6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:53:58.572 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:54:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:54:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:54:26.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:54:29.185 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:54:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:54:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:54:56.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:54:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:54:57.593 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:54:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:54:57.594 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:54:57.596 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:54:57.596 [http-nio-8080-exec-9] DEBUG [6d29539ad39e45e2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:54:57.597 [http-nio-8080-exec-9] DEBUG [6d29539ad39e45e2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:54:57.600 [http-nio-8080-exec-9] DEBUG [6d29539ad39e45e2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:54:57.601 [http-nio-8080-exec-9] DEBUG [6d29539ad39e45e2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:54:57.602 [http-nio-8080-exec-9] DEBUG [6d29539ad39e45e2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:55:05.251 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:55:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:55:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:55:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:55:28.730 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:55:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:55:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:55:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:55:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:55:57.593 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:55:57.594 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:55:57.595 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:55:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:55:57.597 [http-nio-8080-exec-10] DEBUG [1e6cf92febe64fe9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:55:57.601 [http-nio-8080-exec-10] DEBUG [1e6cf92febe64fe9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:55:57.602 [http-nio-8080-exec-10] DEBUG [1e6cf92febe64fe9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:55:57.602 [http-nio-8080-exec-10] DEBUG [1e6cf92febe64fe9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:55:57.604 [http-nio-8080-exec-10] DEBUG [1e6cf92febe64fe9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:55:58.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:56:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:56:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:56:26.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:56:27.968 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:56:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:56:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:56:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:56:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:56:57.597 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:56:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:56:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:56:57.606 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:56:57.607 [http-nio-8080-exec-1] DEBUG [de6c9e4186814d4c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:56:57.607 [http-nio-8080-exec-1] DEBUG [de6c9e4186814d4c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:56:57.608 [http-nio-8080-exec-1] DEBUG [de6c9e4186814d4c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:56:57.609 [http-nio-8080-exec-1] DEBUG [de6c9e4186814d4c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:56:57.610 [http-nio-8080-exec-1] DEBUG [de6c9e4186814d4c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:56:58.636 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 12:56:58.636 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 5 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 12:56:59.675 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:57:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:57:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:57:26.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:57:34.831 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:57:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:57:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:57:56.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:57:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:57:57.593 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:57:57.594 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:57:57.594 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:57:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:57:57.596 [http-nio-8080-exec-2] DEBUG [9f8c13e3a62d433d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:57:57.596 [http-nio-8080-exec-2] DEBUG [9f8c13e3a62d433d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:57:57.598 [http-nio-8080-exec-2] DEBUG [9f8c13e3a62d433d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:57:57.598 [http-nio-8080-exec-2] DEBUG [9f8c13e3a62d433d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:57:57.600 [http-nio-8080-exec-2] DEBUG [9f8c13e3a62d433d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:57:58.587 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:58:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:58:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:58:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:58:43.049 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:58:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:58:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:58:56.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:58:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:58:57.593 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:58:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:58:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:58:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:58:57.595 [http-nio-8080-exec-3] DEBUG [628f03f7cca449df] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:58:57.595 [http-nio-8080-exec-3] DEBUG [628f03f7cca449df] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:58:57.597 [http-nio-8080-exec-3] DEBUG [628f03f7cca449df] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:58:57.597 [http-nio-8080-exec-3] DEBUG [628f03f7cca449df] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:58:57.600 [http-nio-8080-exec-3] DEBUG [628f03f7cca449df] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:59:45.020 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:59:45.021 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:59:45.022 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:59:45.023 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:59:46.373 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:59:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 12:59:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 12:59:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 12:59:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 12:59:57.593 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 12:59:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 12:59:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 12:59:57.595 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 12:59:57.595 [http-nio-8080-exec-4] DEBUG [75d982c80a9b497d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 12:59:57.596 [http-nio-8080-exec-4] DEBUG [75d982c80a9b497d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 12:59:57.597 [http-nio-8080-exec-4] DEBUG [75d982c80a9b497d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 12:59:57.597 [http-nio-8080-exec-4] DEBUG [75d982c80a9b497d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 12:59:57.598 [http-nio-8080-exec-4] DEBUG [75d982c80a9b497d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 12:59:59.158 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:00:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:00:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:00:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:00:27.082 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:00:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:00:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:00:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:00:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:00:57.592 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:00:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:00:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:00:57.594 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:00:57.595 [http-nio-8080-exec-5] DEBUG [f75ae6e736274762] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:00:57.596 [http-nio-8080-exec-5] DEBUG [f75ae6e736274762] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:00:57.597 [http-nio-8080-exec-5] DEBUG [f75ae6e736274762] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:00:57.597 [http-nio-8080-exec-5] DEBUG [f75ae6e736274762] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:00:57.599 [http-nio-8080-exec-5] DEBUG [f75ae6e736274762] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:01:04.534 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:01:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:01:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:01:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:01:34.698 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:01:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:01:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:01:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:01:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:01:57.599 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:01:57.599 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:01:57.599 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:01:57.601 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:01:57.603 [http-nio-8080-exec-6] DEBUG [ea02bd5bf509482c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:01:57.604 [http-nio-8080-exec-6] DEBUG [ea02bd5bf509482c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:01:57.606 [http-nio-8080-exec-6] DEBUG [ea02bd5bf509482c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:01:57.606 [http-nio-8080-exec-6] DEBUG [ea02bd5bf509482c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:01:57.607 [http-nio-8080-exec-6] DEBUG [ea02bd5bf509482c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:02:15.736 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:02:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:02:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:02:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:02:27.569 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:02:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:02:56.540 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:02:56.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:02:56.864 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:02:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:02:57.592 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:02:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:02:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:02:57.594 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:02:57.595 [http-nio-8080-exec-7] DEBUG [d57aa74d654f483f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:02:57.595 [http-nio-8080-exec-7] DEBUG [d57aa74d654f483f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:02:57.597 [http-nio-8080-exec-7] DEBUG [d57aa74d654f483f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:02:57.597 [http-nio-8080-exec-7] DEBUG [d57aa74d654f483f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:02:57.598 [http-nio-8080-exec-7] DEBUG [d57aa74d654f483f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:03:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:03:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:03:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:03:27.599 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:03:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:03:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:03:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:03:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:03:57.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:03:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:03:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:03:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:03:57.595 [http-nio-8080-exec-8] DEBUG [9f2854c831f74457] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:03:57.595 [http-nio-8080-exec-8] DEBUG [9f2854c831f74457] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:03:57.596 [http-nio-8080-exec-8] DEBUG [9f2854c831f74457] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:03:57.596 [http-nio-8080-exec-8] DEBUG [9f2854c831f74457] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:03:57.597 [http-nio-8080-exec-8] DEBUG [9f2854c831f74457] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:03:58.413 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:04:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:04:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:04:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:04:31.214 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:04:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:04:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:04:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:04:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:04:57.592 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:04:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:04:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:04:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:04:57.594 [http-nio-8080-exec-9] DEBUG [7625d4b6e0114391] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:04:57.594 [http-nio-8080-exec-9] DEBUG [7625d4b6e0114391] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:04:57.595 [http-nio-8080-exec-9] DEBUG [7625d4b6e0114391] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:04:57.596 [http-nio-8080-exec-9] DEBUG [7625d4b6e0114391] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:04:57.597 [http-nio-8080-exec-9] DEBUG [7625d4b6e0114391] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:05:08.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:05:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:05:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:05:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:05:57.595 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:05:57.596 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:05:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:05:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:05:57.598 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:05:57.599 [http-nio-8080-exec-10] DEBUG [2f32aa8a999947c9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:05:57.600 [http-nio-8080-exec-10] DEBUG [2f32aa8a999947c9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:05:57.602 [http-nio-8080-exec-10] DEBUG [2f32aa8a999947c9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:05:57.602 [http-nio-8080-exec-10] DEBUG [2f32aa8a999947c9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:05:57.604 [http-nio-8080-exec-10] DEBUG [2f32aa8a999947c9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:06:10.103 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:06:10.104 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:06:10.105 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:06:10.106 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:06:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:06:57.593 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:06:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:06:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:06:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:06:57.599 [http-nio-8080-exec-1] DEBUG [a3f06e23ea2f4d34] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:06:57.599 [http-nio-8080-exec-1] DEBUG [a3f06e23ea2f4d34] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:06:57.600 [http-nio-8080-exec-1] DEBUG [a3f06e23ea2f4d34] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:06:57.601 [http-nio-8080-exec-1] DEBUG [a3f06e23ea2f4d34] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:06:57.602 [http-nio-8080-exec-1] DEBUG [a3f06e23ea2f4d34] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:07:06.146 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:07:06.147 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:07:06.148 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:07:06.149 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:07:07.947 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:07:07.948 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:07:07.949 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:07:07.949 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:07:08.686 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:07:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:07:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:07:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:07:29.767 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:07:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:07:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:07:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:07:57.591 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:07:57.592 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:07:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:07:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:07:57.593 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:07:57.594 [http-nio-8080-exec-2] DEBUG [e80111e0896449d9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:07:57.594 [http-nio-8080-exec-2] DEBUG [e80111e0896449d9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:07:57.595 [http-nio-8080-exec-2] DEBUG [e80111e0896449d9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:07:57.595 [http-nio-8080-exec-2] DEBUG [e80111e0896449d9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:07:57.597 [http-nio-8080-exec-2] DEBUG [e80111e0896449d9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:07:58.290 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-03 13:07:58.740 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 13:08:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:08:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:08:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:08:29.174 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:08:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:08:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:08:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:08:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:08:57.592 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:08:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:08:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:08:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:08:57.594 [http-nio-8080-exec-3] DEBUG [add30e2cbcc34f57] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:08:57.594 [http-nio-8080-exec-3] DEBUG [add30e2cbcc34f57] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:08:57.595 [http-nio-8080-exec-3] DEBUG [add30e2cbcc34f57] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:08:57.595 [http-nio-8080-exec-3] DEBUG [add30e2cbcc34f57] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:08:57.596 [http-nio-8080-exec-3] DEBUG [add30e2cbcc34f57] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:09:19.261 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:09:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:09:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:09:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:09:27.114 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:09:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:09:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:09:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:09:57.052 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:09:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:09:57.593 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:09:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:09:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:09:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:09:57.595 [http-nio-8080-exec-4] DEBUG [b0a5d017745c4bb9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:09:57.595 [http-nio-8080-exec-4] DEBUG [b0a5d017745c4bb9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:09:57.596 [http-nio-8080-exec-4] DEBUG [b0a5d017745c4bb9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:09:57.597 [http-nio-8080-exec-4] DEBUG [b0a5d017745c4bb9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:09:57.598 [http-nio-8080-exec-4] DEBUG [b0a5d017745c4bb9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:10:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:10:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:10:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:10:26.850 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:10:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:10:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:10:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:10:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:10:57.592 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:10:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:10:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:10:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:10:57.593 [http-nio-8080-exec-5] DEBUG [8352aa8fe93741a8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:10:57.594 [http-nio-8080-exec-5] DEBUG [8352aa8fe93741a8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:10:57.595 [http-nio-8080-exec-5] DEBUG [8352aa8fe93741a8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:10:57.595 [http-nio-8080-exec-5] DEBUG [8352aa8fe93741a8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:10:57.596 [http-nio-8080-exec-5] DEBUG [8352aa8fe93741a8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:11:06.487 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:11:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:11:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:11:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:11:29.569 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:11:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:11:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:11:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:11:57.552 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:11:57.599 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:11:57.600 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:11:57.600 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:11:57.600 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:11:57.602 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:11:57.602 [http-nio-8080-exec-6] DEBUG [2df461cba47f4a85] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:11:57.602 [http-nio-8080-exec-6] DEBUG [2df461cba47f4a85] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:11:57.604 [http-nio-8080-exec-6] DEBUG [2df461cba47f4a85] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:11:57.604 [http-nio-8080-exec-6] DEBUG [2df461cba47f4a85] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:11:57.605 [http-nio-8080-exec-6] DEBUG [2df461cba47f4a85] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:12:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:12:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:12:26.511 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:12:41.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:12:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:12:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:12:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:12:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:12:57.593 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:12:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:12:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:12:57.594 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:12:57.594 [http-nio-8080-exec-7] DEBUG [499ac4622df7429f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:12:57.595 [http-nio-8080-exec-7] DEBUG [499ac4622df7429f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:12:57.596 [http-nio-8080-exec-7] DEBUG [499ac4622df7429f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:12:57.596 [http-nio-8080-exec-7] DEBUG [499ac4622df7429f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:12:57.600 [http-nio-8080-exec-7] DEBUG [499ac4622df7429f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:12:58.003 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:13:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:13:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:13:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:13:57.595 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:13:57.596 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:13:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:13:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:13:57.599 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:13:57.600 [http-nio-8080-exec-8] DEBUG [0124f40341024789] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:13:57.601 [http-nio-8080-exec-8] DEBUG [0124f40341024789] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:13:57.604 [http-nio-8080-exec-8] DEBUG [0124f40341024789] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:13:57.604 [http-nio-8080-exec-8] DEBUG [0124f40341024789] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:13:57.606 [http-nio-8080-exec-8] DEBUG [0124f40341024789] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:14:24.563 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:14:24.564 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:14:24.565 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:14:24.566 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:14:26.288 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-03 13:14:26.288 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 13:14:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:14:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:14:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:14:26.645 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:14:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:14:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:14:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:14:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:14:57.593 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:14:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:14:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:14:57.595 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:14:57.595 [http-nio-8080-exec-9] DEBUG [06571c707a254ad7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:14:57.596 [http-nio-8080-exec-9] DEBUG [06571c707a254ad7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:14:57.597 [http-nio-8080-exec-9] DEBUG [06571c707a254ad7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:14:57.597 [http-nio-8080-exec-9] DEBUG [06571c707a254ad7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:14:57.598 [http-nio-8080-exec-9] DEBUG [06571c707a254ad7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:14:58.067 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:15:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:15:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:15:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:15:37.114 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:15:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:15:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:15:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:15:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:15:57.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:15:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:15:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:15:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:15:57.593 [http-nio-8080-exec-10] DEBUG [d82518ff941444d4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:15:57.594 [http-nio-8080-exec-10] DEBUG [d82518ff941444d4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:15:57.595 [http-nio-8080-exec-10] DEBUG [d82518ff941444d4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:15:57.595 [http-nio-8080-exec-10] DEBUG [d82518ff941444d4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:15:57.596 [http-nio-8080-exec-10] DEBUG [d82518ff941444d4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:15:58.267 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:16:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:16:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:16:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:16:27.450 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:16:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:16:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:16:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:16:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:16:57.593 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:16:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:16:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:16:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:16:57.596 [http-nio-8080-exec-1] DEBUG [9b8df623a2bc4374] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:16:57.596 [http-nio-8080-exec-1] DEBUG [9b8df623a2bc4374] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:16:57.597 [http-nio-8080-exec-1] DEBUG [9b8df623a2bc4374] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:16:57.598 [http-nio-8080-exec-1] DEBUG [9b8df623a2bc4374] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:16:57.599 [http-nio-8080-exec-1] DEBUG [9b8df623a2bc4374] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:17:18.546 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:17:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:17:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:17:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:17:57.594 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:17:57.595 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:17:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:17:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:17:57.597 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:17:57.598 [http-nio-8080-exec-2] DEBUG [4234bfc6c6bd4b83] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:17:57.598 [http-nio-8080-exec-2] DEBUG [4234bfc6c6bd4b83] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:17:57.600 [http-nio-8080-exec-2] DEBUG [4234bfc6c6bd4b83] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:17:57.601 [http-nio-8080-exec-2] DEBUG [4234bfc6c6bd4b83] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:17:57.603 [http-nio-8080-exec-2] DEBUG [4234bfc6c6bd4b83] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:18:00.243 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:18:00.244 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:18:00.245 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:18:00.246 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:18:51.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:18:51.716 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:18:51.717 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:18:51.718 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:18:52.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:18:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:18:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:18:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:18:57.020 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:18:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:18:57.597 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:18:57.598 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:18:57.598 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:18:57.600 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:18:57.601 [http-nio-8080-exec-3] DEBUG [ee39c7463fea4d5a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:18:57.602 [http-nio-8080-exec-3] DEBUG [ee39c7463fea4d5a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:18:57.604 [http-nio-8080-exec-3] DEBUG [ee39c7463fea4d5a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:18:57.605 [http-nio-8080-exec-3] DEBUG [ee39c7463fea4d5a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:18:57.609 [http-nio-8080-exec-3] DEBUG [ee39c7463fea4d5a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:19:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:19:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:19:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:19:27.479 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:19:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:19:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:19:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:19:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:19:57.592 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:19:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:19:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:19:57.594 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:19:57.594 [http-nio-8080-exec-5] DEBUG [7af79510ca2447f2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:19:57.595 [http-nio-8080-exec-5] DEBUG [7af79510ca2447f2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:19:57.596 [http-nio-8080-exec-5] DEBUG [7af79510ca2447f2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:19:57.596 [http-nio-8080-exec-5] DEBUG [7af79510ca2447f2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:19:57.600 [http-nio-8080-exec-5] DEBUG [7af79510ca2447f2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:20:01.787 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:20:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:20:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:20:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:20:52.809 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:20:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:20:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:20:56.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:20:57.594 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:20:57.595 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:20:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:20:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:20:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:20:57.600 [http-nio-8080-exec-6] DEBUG [833dc2be93f64ee0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:20:57.601 [http-nio-8080-exec-6] DEBUG [833dc2be93f64ee0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:20:57.603 [http-nio-8080-exec-6] DEBUG [833dc2be93f64ee0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:20:57.604 [http-nio-8080-exec-6] DEBUG [833dc2be93f64ee0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:20:57.608 [http-nio-8080-exec-6] DEBUG [833dc2be93f64ee0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:20:57.747 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:21:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:21:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:21:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:21:57.604 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:21:57.607 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:21:57.608 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:21:57.608 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:21:57.610 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:21:57.611 [http-nio-8080-exec-7] DEBUG [1a671ada95514a4d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:21:57.612 [http-nio-8080-exec-7] DEBUG [1a671ada95514a4d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:21:57.615 [http-nio-8080-exec-7] DEBUG [1a671ada95514a4d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:21:57.616 [http-nio-8080-exec-7] DEBUG [1a671ada95514a4d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:21:57.618 [http-nio-8080-exec-7] DEBUG [1a671ada95514a4d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:22:19.996 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:19.997 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:22:19.998 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:22:19.999 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:22:21.298 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:22:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:22:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:22:28.304 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:22:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:22:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:22:57.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:22:57.592 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:22:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:22:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:22:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:22:57.593 [http-nio-8080-exec-8] DEBUG [56a6be58a2db4731] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:22:57.594 [http-nio-8080-exec-8] DEBUG [56a6be58a2db4731] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:22:57.595 [http-nio-8080-exec-8] DEBUG [56a6be58a2db4731] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:22:57.595 [http-nio-8080-exec-8] DEBUG [56a6be58a2db4731] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:22:57.596 [http-nio-8080-exec-8] DEBUG [56a6be58a2db4731] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:23:18.040 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:23:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:23:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:23:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:23:29.264 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:23:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:23:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:23:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:23:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:23:57.592 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:23:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:23:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:23:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:23:57.594 [http-nio-8080-exec-9] DEBUG [a3414239c25e4541] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:23:57.594 [http-nio-8080-exec-9] DEBUG [a3414239c25e4541] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:23:57.595 [http-nio-8080-exec-9] DEBUG [a3414239c25e4541] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:23:57.595 [http-nio-8080-exec-9] DEBUG [a3414239c25e4541] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:23:57.596 [http-nio-8080-exec-9] DEBUG [a3414239c25e4541] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:24:10.068 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:24:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:24:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:24:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:24:43.681 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:24:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:24:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:24:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:24:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:24:57.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:24:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:24:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:24:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:24:57.593 [http-nio-8080-exec-10] DEBUG [dbfa30ee3bfc4bb9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:24:57.593 [http-nio-8080-exec-10] DEBUG [dbfa30ee3bfc4bb9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:24:57.594 [http-nio-8080-exec-10] DEBUG [dbfa30ee3bfc4bb9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:24:57.595 [http-nio-8080-exec-10] DEBUG [dbfa30ee3bfc4bb9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:24:57.596 [http-nio-8080-exec-10] DEBUG [dbfa30ee3bfc4bb9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:25:42.381 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:25:42.383 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:25:42.384 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:25:42.384 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:25:44.045 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:25:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:25:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:25:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:25:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:25:57.592 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:25:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:25:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:25:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:25:57.593 [http-nio-8080-exec-1] DEBUG [5dae370f996a4c37] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:25:57.594 [http-nio-8080-exec-1] DEBUG [5dae370f996a4c37] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:25:57.595 [http-nio-8080-exec-1] DEBUG [5dae370f996a4c37] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:25:57.595 [http-nio-8080-exec-1] DEBUG [5dae370f996a4c37] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:25:57.596 [http-nio-8080-exec-1] DEBUG [5dae370f996a4c37] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:26:00.582 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:26:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:26:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:26:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:26:27.485 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:26:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:26:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:26:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:26:57.550 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:26:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:26:57.593 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:26:57.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:26:57.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:26:57.594 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:26:57.595 [http-nio-8080-exec-2] DEBUG [b0e330489e044af2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:26:57.595 [http-nio-8080-exec-2] DEBUG [b0e330489e044af2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:26:57.597 [http-nio-8080-exec-2] DEBUG [b0e330489e044af2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:26:57.597 [http-nio-8080-exec-2] DEBUG [b0e330489e044af2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:26:57.602 [http-nio-8080-exec-2] DEBUG [b0e330489e044af2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:27:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:27:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:27:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:27:27.558 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:27:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:27:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:27:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:27:57.332 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:27:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:27:57.591 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:27:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:27:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:27:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:27:57.593 [http-nio-8080-exec-3] DEBUG [0241389c73824ce8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:27:57.593 [http-nio-8080-exec-3] DEBUG [0241389c73824ce8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:27:57.594 [http-nio-8080-exec-3] DEBUG [0241389c73824ce8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:27:57.594 [http-nio-8080-exec-3] DEBUG [0241389c73824ce8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:27:57.595 [http-nio-8080-exec-3] DEBUG [0241389c73824ce8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:28:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:28:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:28:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:28:28.915 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:28:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:28:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:28:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:28:57.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:28:57.591 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:28:57.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:28:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:28:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:28:57.593 [http-nio-8080-exec-4] DEBUG [39e8ce1faa6f4696] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:28:57.593 [http-nio-8080-exec-4] DEBUG [39e8ce1faa6f4696] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:28:57.594 [http-nio-8080-exec-4] DEBUG [39e8ce1faa6f4696] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:28:57.594 [http-nio-8080-exec-4] DEBUG [39e8ce1faa6f4696] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:28:57.595 [http-nio-8080-exec-4] DEBUG [39e8ce1faa6f4696] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:28:59.299 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:29:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:29:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:29:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:29:42.098 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:29:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:29:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:29:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:29:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:29:57.592 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:29:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:29:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:29:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:29:57.593 [http-nio-8080-exec-5] DEBUG [3afb281126aa433c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:29:57.594 [http-nio-8080-exec-5] DEBUG [3afb281126aa433c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:29:57.596 [http-nio-8080-exec-5] DEBUG [3afb281126aa433c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:29:57.596 [http-nio-8080-exec-5] DEBUG [3afb281126aa433c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:29:57.599 [http-nio-8080-exec-5] DEBUG [3afb281126aa433c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:30:13.649 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:30:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:30:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:30:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:30:28.569 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:30:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:30:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:30:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:30:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:30:57.591 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:30:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:30:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:30:57.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:30:57.594 [http-nio-8080-exec-6] DEBUG [92c38e1b581b4d96] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:30:57.595 [http-nio-8080-exec-6] DEBUG [92c38e1b581b4d96] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:30:57.596 [http-nio-8080-exec-6] DEBUG [92c38e1b581b4d96] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:30:57.596 [http-nio-8080-exec-6] DEBUG [92c38e1b581b4d96] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:30:57.600 [http-nio-8080-exec-6] DEBUG [92c38e1b581b4d96] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:31:13.040 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:31:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:31:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:31:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:31:27.728 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:31:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:31:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:31:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:31:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:31:57.592 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:31:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:31:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:31:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:31:57.594 [http-nio-8080-exec-7] DEBUG [20f7b7bb30f14f96] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:31:57.595 [http-nio-8080-exec-7] DEBUG [20f7b7bb30f14f96] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:31:57.596 [http-nio-8080-exec-7] DEBUG [20f7b7bb30f14f96] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:31:57.597 [http-nio-8080-exec-7] DEBUG [20f7b7bb30f14f96] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:31:57.598 [http-nio-8080-exec-7] DEBUG [20f7b7bb30f14f96] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:32:33.807 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:32:33.808 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:32:33.808 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:32:33.809 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:32:33.965 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:32:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:32:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:32:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:32:57.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:32:57.592 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:32:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:32:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:32:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:32:57.594 [http-nio-8080-exec-8] DEBUG [693dfed497c14980] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:32:57.595 [http-nio-8080-exec-8] DEBUG [693dfed497c14980] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:32:57.596 [http-nio-8080-exec-8] DEBUG [693dfed497c14980] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:32:57.596 [http-nio-8080-exec-8] DEBUG [693dfed497c14980] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:32:57.597 [http-nio-8080-exec-8] DEBUG [693dfed497c14980] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:33:00.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:33:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:33:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:33:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:33:26.653 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:33:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:33:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:33:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:33:57.590 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:33:57.591 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:33:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:33:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:33:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:33:57.592 [http-nio-8080-exec-9] DEBUG [2406ac41095f45ec] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:33:57.593 [http-nio-8080-exec-9] DEBUG [2406ac41095f45ec] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:33:57.594 [http-nio-8080-exec-9] DEBUG [2406ac41095f45ec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:33:57.594 [http-nio-8080-exec-9] DEBUG [2406ac41095f45ec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:33:57.595 [http-nio-8080-exec-9] DEBUG [2406ac41095f45ec] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:34:00.358 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:34:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:34:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:34:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:34:39.498 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:34:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:34:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:34:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:34:57.590 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:34:57.591 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:34:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:34:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:34:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:34:57.592 [http-nio-8080-exec-10] DEBUG [146f6011a76d4d1c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:34:57.593 [http-nio-8080-exec-10] DEBUG [146f6011a76d4d1c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:34:57.594 [http-nio-8080-exec-10] DEBUG [146f6011a76d4d1c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:34:57.594 [http-nio-8080-exec-10] DEBUG [146f6011a76d4d1c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:34:57.595 [http-nio-8080-exec-10] DEBUG [146f6011a76d4d1c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:35:30.069 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:35:30.070 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:35:30.071 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:35:30.072 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:35:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:35:57.595 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:35:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:35:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:35:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:35:57.598 [http-nio-8080-exec-1] DEBUG [d239fe80b5c8460e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:35:57.599 [http-nio-8080-exec-1] DEBUG [d239fe80b5c8460e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:35:57.601 [http-nio-8080-exec-1] DEBUG [d239fe80b5c8460e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:35:57.602 [http-nio-8080-exec-1] DEBUG [d239fe80b5c8460e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:35:57.603 [http-nio-8080-exec-1] DEBUG [d239fe80b5c8460e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:36:30.210 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 504 GATEWAY_TIMEOUT
2025-11-03 13:36:30.211 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 13:36:30.211 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:36:30.212 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:36:30.212 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:36:30.649 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-03 13:36:30.650 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 13:36:30.651 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:36:30.652 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:36:30.652 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:36:39.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:36:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:36:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:36:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:36:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:36:57.593 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:36:57.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:36:57.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:36:57.594 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:36:57.594 [http-nio-8080-exec-2] DEBUG [aba5398a85fa4eeb] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:36:57.595 [http-nio-8080-exec-2] DEBUG [aba5398a85fa4eeb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:36:57.597 [http-nio-8080-exec-2] DEBUG [aba5398a85fa4eeb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:36:57.597 [http-nio-8080-exec-2] DEBUG [aba5398a85fa4eeb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:36:57.603 [http-nio-8080-exec-2] DEBUG [aba5398a85fa4eeb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:37:00.078 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:37:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:37:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:37:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:37:27.779 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:37:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:37:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:37:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:37:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:37:57.592 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:37:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:37:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:37:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:37:57.593 [http-nio-8080-exec-3] DEBUG [808336cefd6040f7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:37:57.594 [http-nio-8080-exec-3] DEBUG [808336cefd6040f7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:37:57.595 [http-nio-8080-exec-3] DEBUG [808336cefd6040f7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:37:57.595 [http-nio-8080-exec-3] DEBUG [808336cefd6040f7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:37:57.596 [http-nio-8080-exec-3] DEBUG [808336cefd6040f7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:38:12.708 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:38:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:38:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:38:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:38:30.654 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:38:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:38:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:38:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:38:57.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:38:57.592 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:38:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:38:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:38:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:38:57.594 [http-nio-8080-exec-4] DEBUG [df4b6366fe8441fc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:38:57.594 [http-nio-8080-exec-4] DEBUG [df4b6366fe8441fc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:38:57.595 [http-nio-8080-exec-4] DEBUG [df4b6366fe8441fc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:38:57.596 [http-nio-8080-exec-4] DEBUG [df4b6366fe8441fc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:38:57.597 [http-nio-8080-exec-4] DEBUG [df4b6366fe8441fc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:38:58.100 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-03 13:38:58.101 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 13:39:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:39:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:39:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:39:27.394 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:39:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:39:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:39:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:39:56.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:39:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:39:57.591 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:39:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:39:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:39:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:39:57.593 [http-nio-8080-exec-5] DEBUG [2aca8f5175f04bd4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:39:57.593 [http-nio-8080-exec-5] DEBUG [2aca8f5175f04bd4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:39:57.594 [http-nio-8080-exec-5] DEBUG [2aca8f5175f04bd4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:39:57.594 [http-nio-8080-exec-5] DEBUG [2aca8f5175f04bd4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:39:57.595 [http-nio-8080-exec-5] DEBUG [2aca8f5175f04bd4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:40:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:40:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:40:26.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:40:31.590 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:40:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:40:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:40:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:40:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:40:57.592 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:40:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:40:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:40:57.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:40:57.593 [http-nio-8080-exec-6] DEBUG [36812cbcd74843e4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:40:57.594 [http-nio-8080-exec-6] DEBUG [36812cbcd74843e4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:40:57.595 [http-nio-8080-exec-6] DEBUG [36812cbcd74843e4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:40:57.595 [http-nio-8080-exec-6] DEBUG [36812cbcd74843e4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:40:57.596 [http-nio-8080-exec-6] DEBUG [36812cbcd74843e4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:41:03.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:41:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:41:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:41:26.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:41:51.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:41:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:41:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:41:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:41:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:41:57.592 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:41:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:41:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:41:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:41:57.594 [http-nio-8080-exec-7] DEBUG [dee5eceb1fa1494b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:41:57.594 [http-nio-8080-exec-7] DEBUG [dee5eceb1fa1494b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:41:57.595 [http-nio-8080-exec-7] DEBUG [dee5eceb1fa1494b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:41:57.595 [http-nio-8080-exec-7] DEBUG [dee5eceb1fa1494b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:41:57.596 [http-nio-8080-exec-7] DEBUG [dee5eceb1fa1494b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:41:58.775 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:42:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:42:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:42:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:42:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:42:57.596 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:42:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:42:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:42:57.598 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:42:57.599 [http-nio-8080-exec-8] DEBUG [754a529dc1044338] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:42:57.600 [http-nio-8080-exec-8] DEBUG [754a529dc1044338] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:42:57.602 [http-nio-8080-exec-8] DEBUG [754a529dc1044338] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:42:57.603 [http-nio-8080-exec-8] DEBUG [754a529dc1044338] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:42:57.604 [http-nio-8080-exec-8] DEBUG [754a529dc1044338] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:43:20.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:43:20.925 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:43:20.926 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:43:20.926 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:43:28.035 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:43:28.036 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:43:28.036 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:43:28.037 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:43:29.657 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:43:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:43:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:43:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:43:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:43:57.591 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:43:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:43:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:43:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:43:57.593 [http-nio-8080-exec-9] DEBUG [6362d09978094133] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:43:57.593 [http-nio-8080-exec-9] DEBUG [6362d09978094133] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:43:57.594 [http-nio-8080-exec-9] DEBUG [6362d09978094133] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:43:57.594 [http-nio-8080-exec-9] DEBUG [6362d09978094133] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:43:57.595 [http-nio-8080-exec-9] DEBUG [6362d09978094133] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:43:59.576 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:44:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:44:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:44:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:44:41.910 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:44:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:44:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:44:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:44:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:44:57.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:44:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:44:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:44:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:44:57.594 [http-nio-8080-exec-10] DEBUG [9fc7403f21ad4393] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:44:57.594 [http-nio-8080-exec-10] DEBUG [9fc7403f21ad4393] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:44:57.595 [http-nio-8080-exec-10] DEBUG [9fc7403f21ad4393] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:44:57.596 [http-nio-8080-exec-10] DEBUG [9fc7403f21ad4393] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:44:57.597 [http-nio-8080-exec-10] DEBUG [9fc7403f21ad4393] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:45:28.512 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:28.513 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:45:28.514 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:45:28.515 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:45:29.049 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:45:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:45:56.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:45:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:45:57.591 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:45:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:45:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:45:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:45:57.592 [http-nio-8080-exec-1] DEBUG [849485eb2dde4e8e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:45:57.593 [http-nio-8080-exec-1] DEBUG [849485eb2dde4e8e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:45:57.594 [http-nio-8080-exec-1] DEBUG [849485eb2dde4e8e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:45:57.594 [http-nio-8080-exec-1] DEBUG [849485eb2dde4e8e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:45:57.595 [http-nio-8080-exec-1] DEBUG [849485eb2dde4e8e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:46:00.048 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:46:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:46:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:46:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:46:29.165 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:46:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:46:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:46:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:46:57.591 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:46:57.592 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:46:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:46:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:46:57.593 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:46:57.593 [http-nio-8080-exec-2] DEBUG [5d92949cf1cc44b0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:46:57.594 [http-nio-8080-exec-2] DEBUG [5d92949cf1cc44b0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:46:57.595 [http-nio-8080-exec-2] DEBUG [5d92949cf1cc44b0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:46:57.595 [http-nio-8080-exec-2] DEBUG [5d92949cf1cc44b0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:46:57.596 [http-nio-8080-exec-2] DEBUG [5d92949cf1cc44b0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:46:58.088 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:47:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:47:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:47:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:47:29.334 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:47:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:47:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:47:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:47:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:47:57.591 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:47:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:47:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:47:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:47:57.592 [http-nio-8080-exec-3] DEBUG [6124c11e0fd94dd6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:47:57.593 [http-nio-8080-exec-3] DEBUG [6124c11e0fd94dd6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:47:57.593 [http-nio-8080-exec-3] DEBUG [6124c11e0fd94dd6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:47:57.594 [http-nio-8080-exec-3] DEBUG [6124c11e0fd94dd6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:47:57.594 [http-nio-8080-exec-3] DEBUG [6124c11e0fd94dd6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:47:58.973 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:48:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:48:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:48:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:48:57.299 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:48:57.300 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:48:57.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:48:57.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:48:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:48:57.595 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:48:57.596 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:48:57.596 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:48:57.597 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:48:57.597 [http-nio-8080-exec-4] DEBUG [b9914557cf514a5b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:48:57.598 [http-nio-8080-exec-4] DEBUG [b9914557cf514a5b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:48:57.600 [http-nio-8080-exec-4] DEBUG [b9914557cf514a5b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:48:57.600 [http-nio-8080-exec-4] DEBUG [b9914557cf514a5b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:48:57.601 [http-nio-8080-exec-4] DEBUG [b9914557cf514a5b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:48:58.730 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:49:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:49:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:49:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:49:26.965 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:49:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:49:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:49:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:49:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:49:57.591 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:49:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:49:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:49:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:49:57.592 [http-nio-8080-exec-6] DEBUG [9a7014c464e748e5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:49:57.593 [http-nio-8080-exec-6] DEBUG [9a7014c464e748e5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:49:57.594 [http-nio-8080-exec-6] DEBUG [9a7014c464e748e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:49:57.594 [http-nio-8080-exec-6] DEBUG [9a7014c464e748e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:49:57.595 [http-nio-8080-exec-6] DEBUG [9a7014c464e748e5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:50:39.956 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:50:39.957 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:50:39.958 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:50:39.959 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:50:49.540 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:50:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:50:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:50:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:50:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:50:57.592 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:50:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:50:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:50:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:50:57.593 [http-nio-8080-exec-7] DEBUG [4ea1560471824933] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:50:57.594 [http-nio-8080-exec-7] DEBUG [4ea1560471824933] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:50:57.595 [http-nio-8080-exec-7] DEBUG [4ea1560471824933] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:50:57.595 [http-nio-8080-exec-7] DEBUG [4ea1560471824933] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:50:57.596 [http-nio-8080-exec-7] DEBUG [4ea1560471824933] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:51:04.578 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:51:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:51:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:51:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:51:29.996 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:51:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:51:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:51:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:51:57.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:51:57.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:51:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:51:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:51:57.595 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:51:57.596 [http-nio-8080-exec-8] DEBUG [fa024cebecec4d42] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:51:57.598 [http-nio-8080-exec-8] DEBUG [fa024cebecec4d42] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:51:57.600 [http-nio-8080-exec-8] DEBUG [fa024cebecec4d42] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:51:57.600 [http-nio-8080-exec-8] DEBUG [fa024cebecec4d42] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:51:57.608 [http-nio-8080-exec-8] DEBUG [fa024cebecec4d42] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:52:17.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:52:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:52:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:52:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:52:27.406 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:52:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:52:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:52:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:52:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:52:57.592 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:52:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:52:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:52:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:52:57.594 [http-nio-8080-exec-9] DEBUG [057ad098cb1c45e2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:52:57.594 [http-nio-8080-exec-9] DEBUG [057ad098cb1c45e2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:52:57.595 [http-nio-8080-exec-9] DEBUG [057ad098cb1c45e2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:52:57.595 [http-nio-8080-exec-9] DEBUG [057ad098cb1c45e2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:52:57.596 [http-nio-8080-exec-9] DEBUG [057ad098cb1c45e2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:52:58.385 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:53:26.508 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:53:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:53:26.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:53:26.788 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:53:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:53:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:53:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:53:56.948 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:53:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:53:57.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:53:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:53:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:53:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:53:57.593 [http-nio-8080-exec-10] DEBUG [cbb87aab01bb4da8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:53:57.594 [http-nio-8080-exec-10] DEBUG [cbb87aab01bb4da8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:53:57.595 [http-nio-8080-exec-10] DEBUG [cbb87aab01bb4da8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:53:57.595 [http-nio-8080-exec-10] DEBUG [cbb87aab01bb4da8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:53:57.596 [http-nio-8080-exec-10] DEBUG [cbb87aab01bb4da8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:54:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:54:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:54:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:54:30.454 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:54:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:54:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:54:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:54:57.590 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:54:57.591 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:54:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:54:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:54:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:54:57.592 [http-nio-8080-exec-1] DEBUG [cd5b862292394df4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:54:57.593 [http-nio-8080-exec-1] DEBUG [cd5b862292394df4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:54:57.594 [http-nio-8080-exec-1] DEBUG [cd5b862292394df4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:54:57.594 [http-nio-8080-exec-1] DEBUG [cd5b862292394df4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:54:57.595 [http-nio-8080-exec-1] DEBUG [cd5b862292394df4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:55:02.110 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:55:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:55:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:55:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:55:28.274 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:55:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:55:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:55:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:55:57.591 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:55:57.591 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:55:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:55:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:55:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:55:57.593 [http-nio-8080-exec-2] DEBUG [395b19aebc974abd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:55:57.593 [http-nio-8080-exec-2] DEBUG [395b19aebc974abd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:55:57.595 [http-nio-8080-exec-2] DEBUG [395b19aebc974abd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:55:57.595 [http-nio-8080-exec-2] DEBUG [395b19aebc974abd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:55:57.596 [http-nio-8080-exec-2] DEBUG [395b19aebc974abd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:56:12.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:56:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:56:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:56:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:56:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:56:57.596 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:56:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:56:57.597 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:56:57.598 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:56:57.599 [http-nio-8080-exec-3] DEBUG [aa588432501a4266] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:56:57.600 [http-nio-8080-exec-3] DEBUG [aa588432501a4266] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:56:57.603 [http-nio-8080-exec-3] DEBUG [aa588432501a4266] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:56:57.604 [http-nio-8080-exec-3] DEBUG [aa588432501a4266] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:56:57.606 [http-nio-8080-exec-3] DEBUG [aa588432501a4266] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:56:58.115 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:56:58.116 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:56:58.117 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:56:58.118 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:56:59.564 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:57:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:57:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:57:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:57:28.619 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:57:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:57:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:57:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:57:56.741 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:57:57.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:57:57.591 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:57:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:57:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:57:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:57:57.593 [http-nio-8080-exec-4] DEBUG [f920c878945e4b9e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:57:57.593 [http-nio-8080-exec-4] DEBUG [f920c878945e4b9e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:57:57.594 [http-nio-8080-exec-4] DEBUG [f920c878945e4b9e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:57:57.594 [http-nio-8080-exec-4] DEBUG [f920c878945e4b9e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:57:57.595 [http-nio-8080-exec-4] DEBUG [f920c878945e4b9e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:58:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:58:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:58:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:58:29.412 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:58:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:58:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:58:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:58:57.590 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:58:57.591 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:58:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:58:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:58:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:58:57.592 [http-nio-8080-exec-5] DEBUG [beeaf82fc62242eb] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:58:57.592 [http-nio-8080-exec-5] DEBUG [beeaf82fc62242eb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:58:57.593 [http-nio-8080-exec-5] DEBUG [beeaf82fc62242eb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:58:57.593 [http-nio-8080-exec-5] DEBUG [beeaf82fc62242eb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:58:57.594 [http-nio-8080-exec-5] DEBUG [beeaf82fc62242eb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 13:59:07.468 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:59:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:59:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:59:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:59:54.565 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:59:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 13:59:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 13:59:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 13:59:56.822 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:59:57.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 13:59:57.594 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 13:59:57.595 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 13:59:57.595 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 13:59:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 13:59:57.596 [http-nio-8080-exec-6] DEBUG [13d91e69a2674850] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 13:59:57.597 [http-nio-8080-exec-6] DEBUG [13d91e69a2674850] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 13:59:57.598 [http-nio-8080-exec-6] DEBUG [13d91e69a2674850] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 13:59:57.599 [http-nio-8080-exec-6] DEBUG [13d91e69a2674850] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 13:59:57.600 [http-nio-8080-exec-6] DEBUG [13d91e69a2674850] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:00:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:00:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:00:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:00:28.667 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:00:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:00:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:00:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:00:56.652 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:00:57.590 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:00:57.591 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:00:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:00:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:00:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:00:57.592 [http-nio-8080-exec-7] DEBUG [7aba1acc4212426c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:00:57.592 [http-nio-8080-exec-7] DEBUG [7aba1acc4212426c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:00:57.593 [http-nio-8080-exec-7] DEBUG [7aba1acc4212426c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:00:57.593 [http-nio-8080-exec-7] DEBUG [7aba1acc4212426c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:00:57.594 [http-nio-8080-exec-7] DEBUG [7aba1acc4212426c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:01:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:01:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:01:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:01:26.659 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:01:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:01:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:01:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:01:57.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:01:57.591 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:01:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:01:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:01:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:01:57.593 [http-nio-8080-exec-8] DEBUG [103b5d2434824e4a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:01:57.594 [http-nio-8080-exec-8] DEBUG [103b5d2434824e4a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:01:57.595 [http-nio-8080-exec-8] DEBUG [103b5d2434824e4a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:01:57.595 [http-nio-8080-exec-8] DEBUG [103b5d2434824e4a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:01:57.599 [http-nio-8080-exec-8] DEBUG [103b5d2434824e4a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:01:57.612 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:02:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:02:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:02:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:02:37.181 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:02:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:02:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:02:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:02:57.590 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:02:57.591 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:02:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:02:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:02:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:02:57.592 [http-nio-8080-exec-9] DEBUG [040ff2b7a39a4984] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:02:57.593 [http-nio-8080-exec-9] DEBUG [040ff2b7a39a4984] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:02:57.593 [http-nio-8080-exec-9] DEBUG [040ff2b7a39a4984] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:02:57.594 [http-nio-8080-exec-9] DEBUG [040ff2b7a39a4984] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:02:57.594 [http-nio-8080-exec-9] DEBUG [040ff2b7a39a4984] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:03:15.666 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:03:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:03:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:03:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:03:57.590 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:03:57.591 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:03:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:03:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:03:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:03:57.593 [http-nio-8080-exec-10] DEBUG [cd6904911e864e5e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:03:57.593 [http-nio-8080-exec-10] DEBUG [cd6904911e864e5e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:03:57.594 [http-nio-8080-exec-10] DEBUG [cd6904911e864e5e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:03:57.594 [http-nio-8080-exec-10] DEBUG [cd6904911e864e5e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:03:57.595 [http-nio-8080-exec-10] DEBUG [cd6904911e864e5e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:04:09.152 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:04:09.153 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:04:09.155 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:04:09.155 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:04:17.192 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:04:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:04:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:04:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:04:29.247 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:04:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:04:56.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:04:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:04:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:04:57.592 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:04:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:04:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:04:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:04:57.593 [http-nio-8080-exec-1] DEBUG [f7d6ff2c05e44695] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:04:57.594 [http-nio-8080-exec-1] DEBUG [f7d6ff2c05e44695] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:04:57.595 [http-nio-8080-exec-1] DEBUG [f7d6ff2c05e44695] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:04:57.595 [http-nio-8080-exec-1] DEBUG [f7d6ff2c05e44695] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:04:57.596 [http-nio-8080-exec-1] DEBUG [f7d6ff2c05e44695] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:04:58.394 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:05:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:05:26.507 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:05:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:05:43.681 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:05:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:05:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:05:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:05:57.162 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:05:57.590 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:05:57.591 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:05:57.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:05:57.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:05:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:05:57.592 [http-nio-8080-exec-2] DEBUG [33b7dfd2419f4c71] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:05:57.592 [http-nio-8080-exec-2] DEBUG [33b7dfd2419f4c71] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:05:57.593 [http-nio-8080-exec-2] DEBUG [33b7dfd2419f4c71] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:05:57.594 [http-nio-8080-exec-2] DEBUG [33b7dfd2419f4c71] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:05:57.594 [http-nio-8080-exec-2] DEBUG [33b7dfd2419f4c71] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:06:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:06:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:06:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:06:29.385 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:06:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:06:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:06:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:06:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:06:57.592 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:06:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:06:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:06:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:06:57.593 [http-nio-8080-exec-3] DEBUG [e4997b63add94eb1] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:06:57.594 [http-nio-8080-exec-3] DEBUG [e4997b63add94eb1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:06:57.595 [http-nio-8080-exec-3] DEBUG [e4997b63add94eb1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:06:57.595 [http-nio-8080-exec-3] DEBUG [e4997b63add94eb1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:06:57.596 [http-nio-8080-exec-3] DEBUG [e4997b63add94eb1] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:06:58.474 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:07:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:07:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:07:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:07:27.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:07:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:07:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:07:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:07:57.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:07:57.591 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:07:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:07:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:07:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:07:57.593 [http-nio-8080-exec-4] DEBUG [0c5a660645654879] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:07:57.593 [http-nio-8080-exec-4] DEBUG [0c5a660645654879] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:07:57.594 [http-nio-8080-exec-4] DEBUG [0c5a660645654879] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:07:57.594 [http-nio-8080-exec-4] DEBUG [0c5a660645654879] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:07:57.595 [http-nio-8080-exec-4] DEBUG [0c5a660645654879] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:07:57.621 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:08:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:08:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:08:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:08:33.791 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:08:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:08:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:08:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:08:56.870 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:08:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:08:57.591 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:08:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:08:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:08:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:08:57.593 [http-nio-8080-exec-5] DEBUG [6845cd17c0514fac] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:08:57.593 [http-nio-8080-exec-5] DEBUG [6845cd17c0514fac] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:08:57.595 [http-nio-8080-exec-5] DEBUG [6845cd17c0514fac] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:08:57.595 [http-nio-8080-exec-5] DEBUG [6845cd17c0514fac] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:08:57.596 [http-nio-8080-exec-5] DEBUG [6845cd17c0514fac] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:09:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:09:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:09:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:09:46.673 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:09:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:09:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:09:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:09:57.590 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:09:57.591 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:09:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:09:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:09:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:09:57.592 [http-nio-8080-exec-6] DEBUG [0119ade870554b4f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:09:57.593 [http-nio-8080-exec-6] DEBUG [0119ade870554b4f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:09:57.593 [http-nio-8080-exec-6] DEBUG [0119ade870554b4f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:09:57.594 [http-nio-8080-exec-6] DEBUG [0119ade870554b4f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:09:57.594 [http-nio-8080-exec-6] DEBUG [0119ade870554b4f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:10:25.140 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:10:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:10:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:10:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:10:57.594 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:10:57.595 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:10:57.596 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:10:57.596 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:10:57.597 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:10:57.598 [http-nio-8080-exec-7] DEBUG [720267e5a03d446d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:10:57.598 [http-nio-8080-exec-7] DEBUG [720267e5a03d446d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:10:57.600 [http-nio-8080-exec-7] DEBUG [720267e5a03d446d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:10:57.600 [http-nio-8080-exec-7] DEBUG [720267e5a03d446d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:10:57.602 [http-nio-8080-exec-7] DEBUG [720267e5a03d446d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:11:13.681 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:11:13.682 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:11:13.683 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:11:13.684 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:11:15.774 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:11:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:11:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:11:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:11:28.778 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:11:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:11:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:11:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:11:57.562 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:11:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:11:57.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:11:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:11:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:11:57.595 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:11:57.595 [http-nio-8080-exec-8] DEBUG [db96209a79d14b3d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:11:57.596 [http-nio-8080-exec-8] DEBUG [db96209a79d14b3d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:11:57.597 [http-nio-8080-exec-8] DEBUG [db96209a79d14b3d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:11:57.598 [http-nio-8080-exec-8] DEBUG [db96209a79d14b3d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:11:57.601 [http-nio-8080-exec-8] DEBUG [db96209a79d14b3d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:12:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:12:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:12:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:12:27.230 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:12:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:12:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:12:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:12:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:12:57.593 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:12:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:12:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:12:57.594 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:12:57.594 [http-nio-8080-exec-9] DEBUG [c267784b3eed420e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:12:57.595 [http-nio-8080-exec-9] DEBUG [c267784b3eed420e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:12:57.596 [http-nio-8080-exec-9] DEBUG [c267784b3eed420e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:12:57.596 [http-nio-8080-exec-9] DEBUG [c267784b3eed420e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:12:57.597 [http-nio-8080-exec-9] DEBUG [c267784b3eed420e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:13:38.024 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:13:38.025 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:13:38.026 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:13:38.027 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:13:50.058 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:13:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:13:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:13:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:13:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:13:57.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:13:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:13:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:13:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:13:57.593 [http-nio-8080-exec-10] DEBUG [46727756d79d4369] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:13:57.594 [http-nio-8080-exec-10] DEBUG [46727756d79d4369] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:13:57.595 [http-nio-8080-exec-10] DEBUG [46727756d79d4369] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:13:57.595 [http-nio-8080-exec-10] DEBUG [46727756d79d4369] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:13:57.596 [http-nio-8080-exec-10] DEBUG [46727756d79d4369] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:13:58.305 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:14:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:14:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:14:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:14:57.572 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:14:57.573 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:14:57.574 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:14:57.575 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:14:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:14:57.597 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:14:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:14:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:14:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:14:57.600 [http-nio-8080-exec-1] DEBUG [e1b1a29e0ddb4765] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:14:57.601 [http-nio-8080-exec-1] DEBUG [e1b1a29e0ddb4765] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:14:57.603 [http-nio-8080-exec-1] DEBUG [e1b1a29e0ddb4765] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:14:57.603 [http-nio-8080-exec-1] DEBUG [e1b1a29e0ddb4765] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:14:57.604 [http-nio-8080-exec-1] DEBUG [e1b1a29e0ddb4765] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:14:58.247 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:15:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:15:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:15:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:15:30.027 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:15:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:15:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:15:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:15:57.591 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:15:57.592 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:15:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:15:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:15:57.593 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:15:57.593 [http-nio-8080-exec-2] DEBUG [279c793466304e84] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:15:57.593 [http-nio-8080-exec-2] DEBUG [279c793466304e84] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:15:57.594 [http-nio-8080-exec-2] DEBUG [279c793466304e84] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:15:57.594 [http-nio-8080-exec-2] DEBUG [279c793466304e84] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:15:57.595 [http-nio-8080-exec-2] DEBUG [279c793466304e84] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:16:18.962 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:16:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:16:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:16:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:16:38.886 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:16:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:16:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:16:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:16:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:16:57.592 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:16:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:16:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:16:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:16:57.593 [http-nio-8080-exec-3] DEBUG [40b3affdcd474844] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:16:57.593 [http-nio-8080-exec-3] DEBUG [40b3affdcd474844] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:16:57.594 [http-nio-8080-exec-3] DEBUG [40b3affdcd474844] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:16:57.595 [http-nio-8080-exec-3] DEBUG [40b3affdcd474844] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:16:57.595 [http-nio-8080-exec-3] DEBUG [40b3affdcd474844] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:16:57.715 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:17:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:17:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:17:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:17:55.330 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:17:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:17:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:17:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:17:56.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:17:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:17:57.594 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:17:57.595 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:17:57.595 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:17:57.596 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:17:57.597 [http-nio-8080-exec-4] DEBUG [091ed5f775ac4e56] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:17:57.597 [http-nio-8080-exec-4] DEBUG [091ed5f775ac4e56] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:17:57.599 [http-nio-8080-exec-4] DEBUG [091ed5f775ac4e56] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:17:57.599 [http-nio-8080-exec-4] DEBUG [091ed5f775ac4e56] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:17:57.600 [http-nio-8080-exec-4] DEBUG [091ed5f775ac4e56] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:18:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:18:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:18:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:18:27.554 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:18:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:18:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:18:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:18:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:18:57.591 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:18:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:18:57.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:18:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:18:57.593 [http-nio-8080-exec-5] DEBUG [8d33295d4762423b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:18:57.593 [http-nio-8080-exec-5] DEBUG [8d33295d4762423b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:18:57.594 [http-nio-8080-exec-5] DEBUG [8d33295d4762423b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:18:57.594 [http-nio-8080-exec-5] DEBUG [8d33295d4762423b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:18:57.595 [http-nio-8080-exec-5] DEBUG [8d33295d4762423b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:18:58.267 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:19:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:19:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:19:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:19:34.323 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:19:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:19:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:19:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:19:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:19:57.592 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:19:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:19:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:19:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:19:57.593 [http-nio-8080-exec-7] DEBUG [18a14efef3074eec] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:19:57.593 [http-nio-8080-exec-7] DEBUG [18a14efef3074eec] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:19:57.594 [http-nio-8080-exec-7] DEBUG [18a14efef3074eec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:19:57.594 [http-nio-8080-exec-7] DEBUG [18a14efef3074eec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:19:57.595 [http-nio-8080-exec-7] DEBUG [18a14efef3074eec] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:19:58.435 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:20:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:20:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:20:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:20:27.581 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:20:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:20:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:20:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:20:57.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:20:57.592 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:20:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:20:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:20:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:20:57.593 [http-nio-8080-exec-8] DEBUG [543f05f2bb564ecd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:20:57.593 [http-nio-8080-exec-8] DEBUG [543f05f2bb564ecd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:20:57.594 [http-nio-8080-exec-8] DEBUG [543f05f2bb564ecd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:20:57.594 [http-nio-8080-exec-8] DEBUG [543f05f2bb564ecd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:20:57.595 [http-nio-8080-exec-8] DEBUG [543f05f2bb564ecd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:21:04.249 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:21:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:21:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:21:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:21:41.481 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:21:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:21:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:21:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:21:56.710 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:21:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:21:57.591 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:21:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:21:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:21:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:21:57.593 [http-nio-8080-exec-9] DEBUG [2a86d72c25244e57] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:21:57.593 [http-nio-8080-exec-9] DEBUG [2a86d72c25244e57] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:21:57.594 [http-nio-8080-exec-9] DEBUG [2a86d72c25244e57] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:21:57.594 [http-nio-8080-exec-9] DEBUG [2a86d72c25244e57] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:21:57.595 [http-nio-8080-exec-9] DEBUG [2a86d72c25244e57] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:22:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:22:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:22:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:22:27.823 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:22:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:22:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:22:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:22:57.590 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:22:57.591 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:22:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:22:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:22:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:22:57.592 [http-nio-8080-exec-10] DEBUG [f1047ab655f24539] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:22:57.592 [http-nio-8080-exec-10] DEBUG [f1047ab655f24539] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:22:57.593 [http-nio-8080-exec-10] DEBUG [f1047ab655f24539] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:22:57.593 [http-nio-8080-exec-10] DEBUG [f1047ab655f24539] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:22:57.594 [http-nio-8080-exec-10] DEBUG [f1047ab655f24539] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:23:07.671 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:23:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:23:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:23:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:23:31.687 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:23:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:23:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:23:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:23:57.411 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:23:57.590 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:23:57.591 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:23:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:23:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:23:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:23:57.592 [http-nio-8080-exec-1] DEBUG [0174106a248b48bd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:23:57.593 [http-nio-8080-exec-1] DEBUG [0174106a248b48bd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:23:57.593 [http-nio-8080-exec-1] DEBUG [0174106a248b48bd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:23:57.594 [http-nio-8080-exec-1] DEBUG [0174106a248b48bd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:23:57.594 [http-nio-8080-exec-1] DEBUG [0174106a248b48bd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:24:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:24:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:24:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:24:29.433 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:24:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:24:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:24:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:24:57.590 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:24:57.591 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:24:57.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:24:57.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:24:57.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:24:57.592 [http-nio-8080-exec-2] DEBUG [0aa7df64e4c54e34] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:24:57.592 [http-nio-8080-exec-2] DEBUG [0aa7df64e4c54e34] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:24:57.593 [http-nio-8080-exec-2] DEBUG [0aa7df64e4c54e34] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:24:57.594 [http-nio-8080-exec-2] DEBUG [0aa7df64e4c54e34] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:24:57.594 [http-nio-8080-exec-2] DEBUG [0aa7df64e4c54e34] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:24:58.858 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:25:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:25:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:25:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:25:26.888 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:25:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:25:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:25:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:25:57.590 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:25:57.591 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:25:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:25:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:25:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:25:57.592 [http-nio-8080-exec-3] DEBUG [08b5254552a24df8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:25:57.592 [http-nio-8080-exec-3] DEBUG [08b5254552a24df8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:25:57.593 [http-nio-8080-exec-3] DEBUG [08b5254552a24df8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:25:57.593 [http-nio-8080-exec-3] DEBUG [08b5254552a24df8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:25:57.593 [http-nio-8080-exec-3] DEBUG [08b5254552a24df8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:25:58.467 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:26:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:26:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:26:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:26:38.756 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:26:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:26:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:26:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:26:57.538 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:26:57.590 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:26:57.591 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:26:57.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:26:57.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:26:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:26:57.592 [http-nio-8080-exec-4] DEBUG [5aa8d342293c4403] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:26:57.593 [http-nio-8080-exec-4] DEBUG [5aa8d342293c4403] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:26:57.594 [http-nio-8080-exec-4] DEBUG [5aa8d342293c4403] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:26:57.594 [http-nio-8080-exec-4] DEBUG [5aa8d342293c4403] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:26:57.595 [http-nio-8080-exec-4] DEBUG [5aa8d342293c4403] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:27:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:27:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:27:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:27:56.975 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:27:56.976 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:27:56.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:27:56.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:27:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:27:57.594 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:27:57.594 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:27:57.595 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:27:57.596 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:27:57.596 [http-nio-8080-exec-5] DEBUG [6e66391f12a9428b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:27:57.597 [http-nio-8080-exec-5] DEBUG [6e66391f12a9428b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:27:57.598 [http-nio-8080-exec-5] DEBUG [6e66391f12a9428b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:27:57.599 [http-nio-8080-exec-5] DEBUG [6e66391f12a9428b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:27:57.600 [http-nio-8080-exec-5] DEBUG [6e66391f12a9428b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:28:27.624 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:28:27.625 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:28:27.626 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:28:27.626 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:28:28.546 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:28:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:28:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:28:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:28:57.271 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:28:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:28:57.591 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:28:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:28:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:28:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:28:57.592 [http-nio-8080-exec-6] DEBUG [30ea6832f79a4d16] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:28:57.593 [http-nio-8080-exec-6] DEBUG [30ea6832f79a4d16] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:28:57.594 [http-nio-8080-exec-6] DEBUG [30ea6832f79a4d16] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:28:57.594 [http-nio-8080-exec-6] DEBUG [30ea6832f79a4d16] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:28:57.594 [http-nio-8080-exec-6] DEBUG [30ea6832f79a4d16] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:29:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:29:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:29:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:29:31.055 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:29:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:29:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:29:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:29:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:29:57.591 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:29:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:29:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:29:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:29:57.593 [http-nio-8080-exec-7] DEBUG [9f14b5878f994a50] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:29:57.593 [http-nio-8080-exec-7] DEBUG [9f14b5878f994a50] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:29:57.594 [http-nio-8080-exec-7] DEBUG [9f14b5878f994a50] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:29:57.594 [http-nio-8080-exec-7] DEBUG [9f14b5878f994a50] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:29:57.595 [http-nio-8080-exec-7] DEBUG [9f14b5878f994a50] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:30:13.727 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:30:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:30:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:30:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:30:40.570 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:30:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:30:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:30:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:30:57.384 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:30:57.590 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:30:57.591 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:30:57.591 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:30:57.591 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:30:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:30:57.592 [http-nio-8080-exec-8] DEBUG [940d8946b80e4e8c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:30:57.592 [http-nio-8080-exec-8] DEBUG [940d8946b80e4e8c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:30:57.593 [http-nio-8080-exec-8] DEBUG [940d8946b80e4e8c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:30:57.593 [http-nio-8080-exec-8] DEBUG [940d8946b80e4e8c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:30:57.594 [http-nio-8080-exec-8] DEBUG [940d8946b80e4e8c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:31:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:31:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:31:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:31:28.413 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:31:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:31:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:31:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:31:56.883 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:31:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:31:57.591 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:31:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:31:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:31:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:31:57.593 [http-nio-8080-exec-9] DEBUG [5d8e5cb89f704340] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:31:57.593 [http-nio-8080-exec-9] DEBUG [5d8e5cb89f704340] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:31:57.595 [http-nio-8080-exec-9] DEBUG [5d8e5cb89f704340] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:31:57.595 [http-nio-8080-exec-9] DEBUG [5d8e5cb89f704340] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:31:57.596 [http-nio-8080-exec-9] DEBUG [5d8e5cb89f704340] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:32:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:32:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:32:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:32:28.098 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:32:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:32:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:32:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:32:57.590 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:32:57.591 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:32:57.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:32:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:32:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:32:57.592 [http-nio-8080-exec-10] DEBUG [d736e7e1fb884564] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:32:57.593 [http-nio-8080-exec-10] DEBUG [d736e7e1fb884564] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:32:57.594 [http-nio-8080-exec-10] DEBUG [d736e7e1fb884564] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:32:57.594 [http-nio-8080-exec-10] DEBUG [d736e7e1fb884564] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:32:57.595 [http-nio-8080-exec-10] DEBUG [d736e7e1fb884564] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:33:18.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:33:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:33:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:33:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:33:41.503 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:33:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:33:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:33:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:33:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:33:57.591 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:33:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:33:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:33:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:33:57.593 [http-nio-8080-exec-1] DEBUG [e718164e0ae44f02] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:33:57.593 [http-nio-8080-exec-1] DEBUG [e718164e0ae44f02] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:33:57.594 [http-nio-8080-exec-1] DEBUG [e718164e0ae44f02] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:33:57.594 [http-nio-8080-exec-1] DEBUG [e718164e0ae44f02] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:33:57.595 [http-nio-8080-exec-1] DEBUG [e718164e0ae44f02] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:34:27.412 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:34:27.413 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:34:27.414 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:34:27.414 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:34:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:34:57.596 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:34:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:34:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:34:57.597 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:34:57.598 [http-nio-8080-exec-2] DEBUG [7cdee15b0a714c78] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:34:57.598 [http-nio-8080-exec-2] DEBUG [7cdee15b0a714c78] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:34:57.600 [http-nio-8080-exec-2] DEBUG [7cdee15b0a714c78] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:34:57.600 [http-nio-8080-exec-2] DEBUG [7cdee15b0a714c78] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:34:57.601 [http-nio-8080-exec-2] DEBUG [7cdee15b0a714c78] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:34:58.855 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:34:58.856 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:34:58.857 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:34:58.857 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:35:00.953 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:35:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:35:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:35:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:35:27.977 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:35:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:35:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:35:56.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:35:56.711 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:35:57.590 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:35:57.591 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:35:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:35:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:35:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:35:57.592 [http-nio-8080-exec-3] DEBUG [7a801106cf42450c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:35:57.593 [http-nio-8080-exec-3] DEBUG [7a801106cf42450c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:35:57.594 [http-nio-8080-exec-3] DEBUG [7a801106cf42450c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:35:57.594 [http-nio-8080-exec-3] DEBUG [7a801106cf42450c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:35:57.595 [http-nio-8080-exec-3] DEBUG [7a801106cf42450c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:36:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:36:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:36:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:36:35.214 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:36:56.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:36:56.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:36:56.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:37:08.075 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:37:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:37:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:37:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:37:40.357 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:37:40.358 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:37:40.358 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:37:40.359 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:37:40.360 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:37:40.361 [http-nio-8080-exec-5] DEBUG [c085f0419d3b483b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:37:40.362 [http-nio-8080-exec-5] DEBUG [c085f0419d3b483b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:37:40.365 [http-nio-8080-exec-5] DEBUG [c085f0419d3b483b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:37:40.366 [http-nio-8080-exec-5] DEBUG [c085f0419d3b483b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:37:40.368 [http-nio-8080-exec-5] DEBUG [c085f0419d3b483b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:37:57.594 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:37:57.595 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:37:57.595 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:37:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:37:57.597 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:37:57.597 [http-nio-8080-exec-6] DEBUG [5950193f56bf445d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:37:57.598 [http-nio-8080-exec-6] DEBUG [5950193f56bf445d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:37:57.600 [http-nio-8080-exec-6] DEBUG [5950193f56bf445d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:37:57.600 [http-nio-8080-exec-6] DEBUG [5950193f56bf445d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:37:57.602 [http-nio-8080-exec-6] DEBUG [5950193f56bf445d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:38:21.407 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:38:21.408 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:38:21.409 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:38:21.410 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:38:22.676 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:38:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:38:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:38:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:38:57.594 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:38:57.595 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:38:57.596 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:38:57.596 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:38:57.598 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:38:57.598 [http-nio-8080-exec-7] DEBUG [e2cd172beb004da4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:38:57.599 [http-nio-8080-exec-7] DEBUG [e2cd172beb004da4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:38:57.601 [http-nio-8080-exec-7] DEBUG [e2cd172beb004da4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:38:57.602 [http-nio-8080-exec-7] DEBUG [e2cd172beb004da4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:38:57.603 [http-nio-8080-exec-7] DEBUG [e2cd172beb004da4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:38:57.823 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:38:57.824 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:38:57.825 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:38:57.825 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:38:59.335 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:39:03.462 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:03.463 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:03.463 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:03.463 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:03.465 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:03.466 [http-nio-8080-exec-8] DEBUG [f71eb16739dc418c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:03.466 [http-nio-8080-exec-8] DEBUG [f71eb16739dc418c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:03.468 [http-nio-8080-exec-8] DEBUG [f71eb16739dc418c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:03.468 [http-nio-8080-exec-8] DEBUG [f71eb16739dc418c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:03.469 [http-nio-8080-exec-8] DEBUG [f71eb16739dc418c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:04.205 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:04.206 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:04.206 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:04.206 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:04.207 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:04.207 [http-nio-8080-exec-9] DEBUG [511f0befaf924ca3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:04.208 [http-nio-8080-exec-9] DEBUG [511f0befaf924ca3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:04.209 [http-nio-8080-exec-9] DEBUG [511f0befaf924ca3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:04.209 [http-nio-8080-exec-9] DEBUG [511f0befaf924ca3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:04.209 [http-nio-8080-exec-9] DEBUG [511f0befaf924ca3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:09.208 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:09.209 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:09.209 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:09.209 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:09.210 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:09.211 [http-nio-8080-exec-10] DEBUG [094075bc4e4043be] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:09.211 [http-nio-8080-exec-10] DEBUG [094075bc4e4043be] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:09.214 [http-nio-8080-exec-10] DEBUG [094075bc4e4043be] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:09.214 [http-nio-8080-exec-10] DEBUG [094075bc4e4043be] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:09.217 [http-nio-8080-exec-10] DEBUG [094075bc4e4043be] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:13.275 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 14:39:13.276 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:13.277 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:13.288 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 14:39:13.289 [http-nio-8080-exec-1] DEBUG [defebdc33c8f43a7] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 14:39:13.294 [http-nio-8080-exec-1] DEBUG [defebdc33c8f43a7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-03 14:39:13.295 [http-nio-8080-exec-1] DEBUG [defebdc33c8f43a7] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:39:13.296 [http-nio-8080-exec-1] DEBUG [defebdc33c8f43a7] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:39:13.862 [http-nio-8080-exec-1] DEBUG [defebdc33c8f43a7] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:39:13.865 [http-nio-8080-exec-1] DEBUG [defebdc33c8f43a7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 14:39:13.865 [http-nio-8080-exec-1] DEBUG [defebdc33c8f43a7] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@17e9eacf]
2025-11-03 14:39:13.866 [http-nio-8080-exec-1] DEBUG [defebdc33c8f43a7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:14.077 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 14:39:14.077 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:14.078 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:14.206 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:14.207 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:14.207 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:14.207 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:14.208 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:14.208 [http-nio-8080-exec-3] DEBUG [f891f6baa28140ae] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:14.208 [http-nio-8080-exec-3] DEBUG [f891f6baa28140ae] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:14.210 [http-nio-8080-exec-3] DEBUG [f891f6baa28140ae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:14.210 [http-nio-8080-exec-3] DEBUG [f891f6baa28140ae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:14.211 [http-nio-8080-exec-3] DEBUG [f891f6baa28140ae] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:19.207 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:19.208 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:19.209 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:19.209 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:19.210 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:19.210 [http-nio-8080-exec-4] DEBUG [5b3631d938d1449e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:19.211 [http-nio-8080-exec-4] DEBUG [5b3631d938d1449e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:19.213 [http-nio-8080-exec-4] DEBUG [5b3631d938d1449e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:19.213 [http-nio-8080-exec-4] DEBUG [5b3631d938d1449e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:19.216 [http-nio-8080-exec-4] DEBUG [5b3631d938d1449e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:24.207 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:24.369 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:24.496 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:24.496 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:24.497 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:24.498 [http-nio-8080-exec-5] DEBUG [08e7f71dbb934810] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:24.498 [http-nio-8080-exec-5] DEBUG [08e7f71dbb934810] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:24.499 [http-nio-8080-exec-5] DEBUG [08e7f71dbb934810] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:24.500 [http-nio-8080-exec-5] DEBUG [08e7f71dbb934810] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:24.500 [http-nio-8080-exec-5] DEBUG [08e7f71dbb934810] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:26.507 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:39:26.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:39:26.509 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:39:27.008 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:39:29.207 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:29.208 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:29.208 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:29.209 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:29.209 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:29.210 [http-nio-8080-exec-6] DEBUG [4d4ab207b986493e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:29.210 [http-nio-8080-exec-6] DEBUG [4d4ab207b986493e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:29.212 [http-nio-8080-exec-6] DEBUG [4d4ab207b986493e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:29.212 [http-nio-8080-exec-6] DEBUG [4d4ab207b986493e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:29.213 [http-nio-8080-exec-6] DEBUG [4d4ab207b986493e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:34.206 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:34.206 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:34.206 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:34.206 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:34.207 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:34.207 [http-nio-8080-exec-7] DEBUG [8ea337a3cc044ebe] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:34.208 [http-nio-8080-exec-7] DEBUG [8ea337a3cc044ebe] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:34.209 [http-nio-8080-exec-7] DEBUG [8ea337a3cc044ebe] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:34.209 [http-nio-8080-exec-7] DEBUG [8ea337a3cc044ebe] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:34.210 [http-nio-8080-exec-7] DEBUG [8ea337a3cc044ebe] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:39.207 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:39.208 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:39.209 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:39.209 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:39.210 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:39.211 [http-nio-8080-exec-8] DEBUG [073baf5e0f6b4d98] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:39.211 [http-nio-8080-exec-8] DEBUG [073baf5e0f6b4d98] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:39.212 [http-nio-8080-exec-8] DEBUG [073baf5e0f6b4d98] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:39.213 [http-nio-8080-exec-8] DEBUG [073baf5e0f6b4d98] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:39.214 [http-nio-8080-exec-8] DEBUG [073baf5e0f6b4d98] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:44.208 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:44.208 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:44.208 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:44.208 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:44.209 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:44.209 [http-nio-8080-exec-9] DEBUG [20cdd5b85c94490a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:44.210 [http-nio-8080-exec-9] DEBUG [20cdd5b85c94490a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:44.210 [http-nio-8080-exec-9] DEBUG [20cdd5b85c94490a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:44.211 [http-nio-8080-exec-9] DEBUG [20cdd5b85c94490a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:44.212 [http-nio-8080-exec-9] DEBUG [20cdd5b85c94490a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:49.206 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:39:49.207 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:39:49.207 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:39:49.207 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:39:49.208 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:39:49.208 [http-nio-8080-exec-10] DEBUG [02260ac922ca494e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:39:49.208 [http-nio-8080-exec-10] DEBUG [02260ac922ca494e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:39:49.209 [http-nio-8080-exec-10] DEBUG [02260ac922ca494e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:39:49.209 [http-nio-8080-exec-10] DEBUG [02260ac922ca494e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:39:49.210 [http-nio-8080-exec-10] DEBUG [02260ac922ca494e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:39:53.478 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 14:39:53.569 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 14:39:53.640 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:39:53.673 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:39:53.714 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:39:53.715 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:39:53.717 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:39:53.718 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:39:53.719 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:39:53.810 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 14:39:53.811 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 14:39:53.813 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 14:40:26.265 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 63000 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 14:40:26.271 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 14:40:26.273 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 14:40:26.562 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 14:40:26.563 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 14:40:32.981 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 14:40:33.277 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 136 ms. Found 5 JPA repository interfaces.
2025-11-03 14:40:35.071 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 14:40:35.141 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:40:35.145 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 14:40:35.146 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 14:40:35.234 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 14:40:35.235 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 8671 ms
2025-11-03 14:40:36.440 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 14:40:36.442 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 14:40:36.443 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 14:40:38.912 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 14:40:39.144 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 14:40:39.739 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 14:40:39.743 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 14:40:39.901 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 14:40:42.138 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:40:42.142 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:40:42.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:40:42.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:40:42.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:40:42.144 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:40:42.198 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 14:40:42.235 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 14:40:42.244 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 14:40:42.248 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 14:40:42.250 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 14:40:42.252 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 14:40:42.257 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 14:40:42.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 14:40:42.300 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 14:40:42.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:40:42.304 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:40:42.311 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:40:43.033 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 14:40:44.973 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 14:40:46.064 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 14:40:46.162 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 14:40:46.418 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 14:40:46.585 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 14:40:46.747 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 14:40:47.117 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 14:40:47.617 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 14:40:47.878 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 14:40:48.017 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 14:40:48.047 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 14:40:48.076 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 24.581 seconds (process running for 25.921)
2025-11-03 14:40:48.089 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:40:48.273 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:40:48.363 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:40:49.400 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 14:40:49.401 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 14:40:49.401 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 14:40:49.402 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 14:40:49.402 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 14:40:49.405 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3cc068b1
2025-11-03 14:40:49.407 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@55badc76
2025-11-03 14:40:49.408 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 14:40:49.409 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-11-03 14:40:49.449 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:40:49.478 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:40:49.483 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:40:49.484 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:40:49.501 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:40:49.506 [http-nio-8080-exec-1] DEBUG [603a4c2f915444b2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:40:49.510 [http-nio-8080-exec-1] DEBUG [603a4c2f915444b2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:40:49.544 [http-nio-8080-exec-1] DEBUG [603a4c2f915444b2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:40:49.546 [http-nio-8080-exec-1] DEBUG [603a4c2f915444b2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:40:49.588 [http-nio-8080-exec-1] DEBUG [603a4c2f915444b2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:40:49.818 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:40:54.211 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:40:54.214 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:40:54.215 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:40:54.216 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:40:54.220 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:40:54.222 [http-nio-8080-exec-3] DEBUG [60bc019e5e1c4f9e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:40:54.223 [http-nio-8080-exec-3] DEBUG [60bc019e5e1c4f9e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:40:54.228 [http-nio-8080-exec-3] DEBUG [60bc019e5e1c4f9e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:40:54.229 [http-nio-8080-exec-3] DEBUG [60bc019e5e1c4f9e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:40:54.232 [http-nio-8080-exec-3] DEBUG [60bc019e5e1c4f9e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:40:59.209 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:40:59.212 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:40:59.214 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:40:59.214 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:40:59.218 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:40:59.219 [http-nio-8080-exec-4] DEBUG [03d538d56c72441b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:40:59.221 [http-nio-8080-exec-4] DEBUG [03d538d56c72441b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:40:59.225 [http-nio-8080-exec-4] DEBUG [03d538d56c72441b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:40:59.226 [http-nio-8080-exec-4] DEBUG [03d538d56c72441b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:40:59.230 [http-nio-8080-exec-4] DEBUG [03d538d56c72441b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:03.796 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 14:41:03.800 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:03.807 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:03.811 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 14:41:03.812 [http-nio-8080-exec-2] DEBUG [2deebf80dc9e4418] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 14:41:03.821 [http-nio-8080-exec-2] DEBUG [2deebf80dc9e4418] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-03 14:41:03.867 [http-nio-8080-exec-2] DEBUG [2deebf80dc9e4418] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:41:03.868 [http-nio-8080-exec-2] DEBUG [2deebf80dc9e4418] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:41:04.207 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:04.208 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:04.209 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:04.209 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:04.210 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:04.210 [http-nio-8080-exec-5] DEBUG [1b6968d4da8b42c2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:04.211 [http-nio-8080-exec-5] DEBUG [1b6968d4da8b42c2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:04.216 [http-nio-8080-exec-5] DEBUG [1b6968d4da8b42c2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:04.216 [http-nio-8080-exec-5] DEBUG [1b6968d4da8b42c2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:04.218 [http-nio-8080-exec-5] DEBUG [1b6968d4da8b42c2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:09.208 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:09.209 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:09.210 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:09.210 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:09.212 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:09.213 [http-nio-8080-exec-6] DEBUG [0181916a4e3f4576] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:09.214 [http-nio-8080-exec-6] DEBUG [0181916a4e3f4576] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:09.217 [http-nio-8080-exec-6] DEBUG [0181916a4e3f4576] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:09.218 [http-nio-8080-exec-6] DEBUG [0181916a4e3f4576] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:09.221 [http-nio-8080-exec-6] DEBUG [0181916a4e3f4576] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:14.208 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:14.210 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:14.210 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:14.210 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:14.212 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:14.212 [http-nio-8080-exec-7] DEBUG [20102fd96baa45aa] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:14.213 [http-nio-8080-exec-7] DEBUG [20102fd96baa45aa] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:14.215 [http-nio-8080-exec-7] DEBUG [20102fd96baa45aa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:14.217 [http-nio-8080-exec-7] DEBUG [20102fd96baa45aa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:14.219 [http-nio-8080-exec-7] DEBUG [20102fd96baa45aa] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:18.072 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:41:18.074 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:41:18.075 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:41:19.208 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:19.210 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:19.210 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:19.210 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:19.212 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:19.213 [http-nio-8080-exec-8] DEBUG [621b853fee304254] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:19.214 [http-nio-8080-exec-8] DEBUG [621b853fee304254] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:19.215 [http-nio-8080-exec-8] DEBUG [621b853fee304254] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:19.216 [http-nio-8080-exec-8] DEBUG [621b853fee304254] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:19.217 [http-nio-8080-exec-8] DEBUG [621b853fee304254] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:24.208 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:24.209 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:24.210 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:24.210 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:24.211 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:24.212 [http-nio-8080-exec-10] DEBUG [db05d8146a3343e9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:24.212 [http-nio-8080-exec-10] DEBUG [db05d8146a3343e9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:24.213 [http-nio-8080-exec-10] DEBUG [db05d8146a3343e9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:24.214 [http-nio-8080-exec-10] DEBUG [db05d8146a3343e9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:24.215 [http-nio-8080-exec-10] DEBUG [db05d8146a3343e9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:29.208 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:29.209 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:29.210 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:29.210 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:29.212 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:29.212 [http-nio-8080-exec-9] DEBUG [55587abbd63c4b4a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:29.213 [http-nio-8080-exec-9] DEBUG [55587abbd63c4b4a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:29.215 [http-nio-8080-exec-9] DEBUG [55587abbd63c4b4a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:29.215 [http-nio-8080-exec-9] DEBUG [55587abbd63c4b4a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:29.217 [http-nio-8080-exec-9] DEBUG [55587abbd63c4b4a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:34.207 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:34.208 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:34.209 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:34.209 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:34.210 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:34.211 [http-nio-8080-exec-1] DEBUG [91075dbe52a3409a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:34.211 [http-nio-8080-exec-1] DEBUG [91075dbe52a3409a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:34.213 [http-nio-8080-exec-1] DEBUG [91075dbe52a3409a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:34.213 [http-nio-8080-exec-1] DEBUG [91075dbe52a3409a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:34.215 [http-nio-8080-exec-1] DEBUG [91075dbe52a3409a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:36.113 [http-nio-8080-exec-2] DEBUG [2deebf80dc9e4418] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:41:36.115 [http-nio-8080-exec-2] WARN  [2deebf80dc9e4418] o.s.b.a.health.HealthEndpointSupport - Health contributor com.deliverytech.delivery.health.ExternalServiceHealthIndicator (externalService) took 32246ms to respond
2025-11-03 14:41:36.131 [http-nio-8080-exec-2] DEBUG [2deebf80dc9e4418] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 14:41:36.183 [http-nio-8080-exec-2] DEBUG [2deebf80dc9e4418] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@2f67037]
2025-11-03 14:41:36.192 [http-nio-8080-exec-2] DEBUG [2deebf80dc9e4418] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:36.334 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 14:41:36.339 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:36.344 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:37.410 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 14:41:37.411 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 4 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 14:41:39.208 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:39.211 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:39.211 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:39.211 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:39.214 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:39.216 [http-nio-8080-exec-4] DEBUG [d7cc0a644e634ff0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:39.218 [http-nio-8080-exec-4] DEBUG [d7cc0a644e634ff0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:39.222 [http-nio-8080-exec-4] DEBUG [d7cc0a644e634ff0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:39.224 [http-nio-8080-exec-4] DEBUG [d7cc0a644e634ff0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:39.226 [http-nio-8080-exec-4] DEBUG [d7cc0a644e634ff0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:44.211 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:44.214 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:44.216 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:44.230 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:44.239 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:44.240 [http-nio-8080-exec-5] DEBUG [73d9655de4434668] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:44.240 [http-nio-8080-exec-5] DEBUG [73d9655de4434668] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:44.243 [http-nio-8080-exec-5] DEBUG [73d9655de4434668] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:44.244 [http-nio-8080-exec-5] DEBUG [73d9655de4434668] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:44.251 [http-nio-8080-exec-5] DEBUG [73d9655de4434668] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:48.479 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:41:48.480 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:41:48.482 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:41:48.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:41:49.207 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:49.208 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:49.208 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:49.208 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:49.209 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:49.210 [http-nio-8080-exec-6] DEBUG [4ed74c9876934ca4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:49.210 [http-nio-8080-exec-6] DEBUG [4ed74c9876934ca4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:49.211 [http-nio-8080-exec-6] DEBUG [4ed74c9876934ca4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:49.211 [http-nio-8080-exec-6] DEBUG [4ed74c9876934ca4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:49.213 [http-nio-8080-exec-6] DEBUG [4ed74c9876934ca4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:54.206 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:54.207 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:54.207 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:54.207 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:54.208 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:54.208 [http-nio-8080-exec-7] DEBUG [c8595c117bdc4dd5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:54.209 [http-nio-8080-exec-7] DEBUG [c8595c117bdc4dd5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:54.210 [http-nio-8080-exec-7] DEBUG [c8595c117bdc4dd5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:54.210 [http-nio-8080-exec-7] DEBUG [c8595c117bdc4dd5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:54.211 [http-nio-8080-exec-7] DEBUG [c8595c117bdc4dd5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:41:59.208 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:41:59.209 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:41:59.210 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:41:59.210 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:41:59.212 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:41:59.213 [http-nio-8080-exec-8] DEBUG [2ae6f9e25bb7458f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:41:59.214 [http-nio-8080-exec-8] DEBUG [2ae6f9e25bb7458f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:41:59.217 [http-nio-8080-exec-8] DEBUG [2ae6f9e25bb7458f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:41:59.217 [http-nio-8080-exec-8] DEBUG [2ae6f9e25bb7458f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:41:59.220 [http-nio-8080-exec-8] DEBUG [2ae6f9e25bb7458f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:04.206 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:04.207 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:04.208 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:04.208 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:04.209 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:04.209 [http-nio-8080-exec-10] DEBUG [5bafc37eb9404260] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:04.210 [http-nio-8080-exec-10] DEBUG [5bafc37eb9404260] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:04.211 [http-nio-8080-exec-10] DEBUG [5bafc37eb9404260] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:04.211 [http-nio-8080-exec-10] DEBUG [5bafc37eb9404260] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:04.213 [http-nio-8080-exec-10] DEBUG [5bafc37eb9404260] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:09.208 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:09.209 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:09.210 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:09.210 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:09.211 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:09.212 [http-nio-8080-exec-9] DEBUG [22e3781c903a421c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:09.213 [http-nio-8080-exec-9] DEBUG [22e3781c903a421c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:09.216 [http-nio-8080-exec-9] DEBUG [22e3781c903a421c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:09.217 [http-nio-8080-exec-9] DEBUG [22e3781c903a421c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:09.218 [http-nio-8080-exec-9] DEBUG [22e3781c903a421c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:14.207 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:14.208 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:14.208 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:14.208 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:14.210 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:14.211 [http-nio-8080-exec-1] DEBUG [ecac3a766cb84387] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:14.211 [http-nio-8080-exec-1] DEBUG [ecac3a766cb84387] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:14.213 [http-nio-8080-exec-1] DEBUG [ecac3a766cb84387] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:14.213 [http-nio-8080-exec-1] DEBUG [ecac3a766cb84387] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:14.217 [http-nio-8080-exec-1] DEBUG [ecac3a766cb84387] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:19.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:19.594 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:19.594 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:19.594 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:19.595 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:19.596 [http-nio-8080-exec-2] DEBUG [9a210f954dd4468f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:19.596 [http-nio-8080-exec-2] DEBUG [9a210f954dd4468f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:19.598 [http-nio-8080-exec-2] DEBUG [9a210f954dd4468f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:19.598 [http-nio-8080-exec-2] DEBUG [9a210f954dd4468f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:19.600 [http-nio-8080-exec-2] DEBUG [9a210f954dd4468f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:24.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:24.594 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:24.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:24.596 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:24.598 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:24.600 [http-nio-8080-exec-3] DEBUG [e6fd1ebc5a0d40f4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:24.601 [http-nio-8080-exec-3] DEBUG [e6fd1ebc5a0d40f4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:24.605 [http-nio-8080-exec-3] DEBUG [e6fd1ebc5a0d40f4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:24.606 [http-nio-8080-exec-3] DEBUG [e6fd1ebc5a0d40f4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:24.608 [http-nio-8080-exec-3] DEBUG [e6fd1ebc5a0d40f4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:29.593 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:29.594 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:29.595 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:29.595 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:29.597 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:29.598 [http-nio-8080-exec-4] DEBUG [dc5f2d4b74dd454a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:29.603 [http-nio-8080-exec-4] DEBUG [dc5f2d4b74dd454a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:29.607 [http-nio-8080-exec-4] DEBUG [dc5f2d4b74dd454a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:29.607 [http-nio-8080-exec-4] DEBUG [dc5f2d4b74dd454a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:29.609 [http-nio-8080-exec-4] DEBUG [dc5f2d4b74dd454a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:34.594 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:34.595 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:34.596 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:34.596 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:34.598 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:34.599 [http-nio-8080-exec-5] DEBUG [93c615c3391f4936] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:34.600 [http-nio-8080-exec-5] DEBUG [93c615c3391f4936] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:34.603 [http-nio-8080-exec-5] DEBUG [93c615c3391f4936] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:34.604 [http-nio-8080-exec-5] DEBUG [93c615c3391f4936] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:34.606 [http-nio-8080-exec-5] DEBUG [93c615c3391f4936] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:39.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:39.593 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:39.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:39.595 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:39.597 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:39.597 [http-nio-8080-exec-7] DEBUG [5159bc1e038548d3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:39.598 [http-nio-8080-exec-7] DEBUG [5159bc1e038548d3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:39.601 [http-nio-8080-exec-7] DEBUG [5159bc1e038548d3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:39.601 [http-nio-8080-exec-7] DEBUG [5159bc1e038548d3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:39.606 [http-nio-8080-exec-7] DEBUG [5159bc1e038548d3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:40.365 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:42:40.366 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:42:40.367 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:42:40.368 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:42:40.687 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:42:44.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:44.592 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:44.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:44.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:44.593 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:44.593 [http-nio-8080-exec-8] DEBUG [6170a2fdc80e4e8d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:44.594 [http-nio-8080-exec-8] DEBUG [6170a2fdc80e4e8d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:44.595 [http-nio-8080-exec-8] DEBUG [6170a2fdc80e4e8d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:44.595 [http-nio-8080-exec-8] DEBUG [6170a2fdc80e4e8d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:44.596 [http-nio-8080-exec-8] DEBUG [6170a2fdc80e4e8d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:48.072 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:42:48.073 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:42:48.074 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:42:49.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:49.594 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:49.595 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:49.595 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:49.597 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:49.598 [http-nio-8080-exec-10] DEBUG [3c1a08ee2e9846f3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:49.599 [http-nio-8080-exec-10] DEBUG [3c1a08ee2e9846f3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:49.601 [http-nio-8080-exec-10] DEBUG [3c1a08ee2e9846f3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:49.602 [http-nio-8080-exec-10] DEBUG [3c1a08ee2e9846f3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:49.604 [http-nio-8080-exec-10] DEBUG [3c1a08ee2e9846f3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:52.714 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:42:54.594 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:54.595 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:54.596 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:54.597 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:54.600 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:54.602 [http-nio-8080-exec-9] DEBUG [3dabef93b08c4eec] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:54.603 [http-nio-8080-exec-9] DEBUG [3dabef93b08c4eec] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:54.605 [http-nio-8080-exec-9] DEBUG [3dabef93b08c4eec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:54.605 [http-nio-8080-exec-9] DEBUG [3dabef93b08c4eec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:54.620 [http-nio-8080-exec-9] DEBUG [3dabef93b08c4eec] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:42:59.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:42:59.596 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:42:59.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:42:59.597 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:42:59.601 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:42:59.602 [http-nio-8080-exec-1] DEBUG [3130957012274a94] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:42:59.603 [http-nio-8080-exec-1] DEBUG [3130957012274a94] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:42:59.606 [http-nio-8080-exec-1] DEBUG [3130957012274a94] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:42:59.607 [http-nio-8080-exec-1] DEBUG [3130957012274a94] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:42:59.608 [http-nio-8080-exec-1] DEBUG [3130957012274a94] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:43:00.634 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 14:43:00.637 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 14:43:00.647 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:43:00.648 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:43:00.650 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:43:00.651 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:43:00.652 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:43:00.653 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:43:00.653 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:43:00.661 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 14:43:00.662 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 14:43:00.665 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 14:51:00.347 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 14:51:00.349 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 14:51:00.350 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 14:51:00.425 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 14:51:00.427 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 14:51:01.950 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 14:51:02.049 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 87 ms. Found 5 JPA repository interfaces.
2025-11-03 14:51:02.884 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 14:51:02.913 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:51:02.917 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 14:51:02.918 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 14:51:03.002 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 14:51:03.002 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2574 ms
2025-11-03 14:51:03.679 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 14:51:03.681 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 14:51:03.682 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 14:51:04.205 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 14:51:04.241 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 14:51:04.435 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 14:51:04.439 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 14:51:04.470 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 14:51:05.761 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:51:05.766 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:51:05.766 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:51:05.767 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:51:05.767 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:51:05.768 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:51:05.778 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 14:51:05.797 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 14:51:05.806 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 14:51:05.814 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 14:51:05.817 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 14:51:05.820 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 14:51:05.828 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 14:51:05.845 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 14:51:05.848 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 14:51:05.850 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:51:05.855 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:51:05.864 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:51:06.303 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 14:51:08.405 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 14:51:09.056 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 14:51:09.133 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 14:51:09.321 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 14:51:09.458 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 14:51:09.561 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 14:51:09.686 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 14:51:10.054 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 14:51:10.306 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 14:51:10.599 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 14:51:10.646 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 14:51:10.696 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 11.018 seconds (process running for 11.604)
2025-11-03 14:51:10.704 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:51:10.750 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:51:10.817 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:51:21.655 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:51:40.688 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:51:40.690 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:51:40.692 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:51:42.573 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:51:45.793 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 14:51:45.794 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 14:51:45.794 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 14:51:45.795 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 14:51:45.795 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 14:51:45.798 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2b03ca50
2025-11-03 14:51:45.799 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@509cfc11
2025-11-03 14:51:45.799 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 14:51:45.800 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-11-03 14:51:45.841 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 14:51:45.865 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:51:45.871 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:51:46.110 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 14:51:46.112 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:51:46.113 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:51:57.606 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:51:57.609 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:51:57.610 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:51:57.610 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:51:57.626 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:51:57.633 [http-nio-8080-exec-3] DEBUG [5d29548d6ed649e5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:51:57.642 [http-nio-8080-exec-3] DEBUG [5d29548d6ed649e5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:51:57.680 [http-nio-8080-exec-3] DEBUG [5d29548d6ed649e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:51:57.682 [http-nio-8080-exec-3] DEBUG [5d29548d6ed649e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:51:57.726 [http-nio-8080-exec-3] DEBUG [5d29548d6ed649e5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:51:58.648 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 14:51:58.649 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 5 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 14:52:10.688 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:52:10.690 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:52:10.692 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:52:17.693 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 14:52:17.696 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:52:17.697 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:52:17.764 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 14:52:17.766 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:52:17.771 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:52:34.162 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 14:52:34.184 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 14:52:34.199 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:52:34.202 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 14:52:34.203 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 14:53:00.586 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:53:00.603 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:53:00.604 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:53:00.609 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:53:00.613 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:53:00.616 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:53:00.618 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:53:00.620 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:53:00.632 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 14:53:00.633 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 14:53:00.636 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 14:53:00.917 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 14:53:00.918 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 14:53:00.918 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 14:53:01.470 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 14:53:01.501 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 5 JPA repository interfaces.
2025-11-03 14:53:01.723 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 14:53:01.724 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:53:01.725 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 14:53:01.725 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 14:53:01.739 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 14:53:01.739 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 819 ms
2025-11-03 14:53:01.933 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 14:53:01.934 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 14:53:01.934 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 14:53:02.029 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 14:53:02.055 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-03 14:53:02.079 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 14:53:02.080 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-03 14:53:02.081 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 14:53:02.331 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:53:02.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:53:02.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:53:02.333 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:53:02.333 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:53:02.333 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:53:02.334 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 14:53:02.336 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 14:53:02.339 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 14:53:02.345 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 14:53:02.347 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 14:53:02.351 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 14:53:02.353 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 14:53:02.356 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 14:53:02.362 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 14:53:02.365 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:53:02.373 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:53:02.382 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:53:02.805 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 14:53:03.157 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 14:53:03.218 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 14:53:03.325 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 14:53:03.433 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 14:53:03.488 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 14:53:03.539 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 14:53:03.702 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 14:53:03.785 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 14:53:03.820 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 14:53:03.822 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 14:53:03.839 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:53:03.839 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.98 seconds (process running for 124.748)
2025-11-03 14:53:03.840 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:53:03.842 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:53:03.845 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 14:53:04.308 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:53:05.198 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 14:53:05.201 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 14:53:05.202 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:53:05.203 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 14:53:05.204 [Thread-7] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 14:53:05.211 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:53:05.212 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:53:05.214 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:53:05.216 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:53:05.218 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:53:05.219 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:53:05.220 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:53:05.222 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 14:53:05.223 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-03 14:53:05.225 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-03 14:53:06.415 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 14:53:06.415 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 14:53:06.415 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 14:53:06.879 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 14:53:06.909 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 5 JPA repository interfaces.
2025-11-03 14:53:07.104 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 14:53:07.105 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:53:07.106 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 14:53:07.106 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 14:53:07.118 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 14:53:07.119 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 701 ms
2025-11-03 14:53:07.309 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 14:53:07.309 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 14:53:07.309 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 14:53:07.389 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 14:53:07.390 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-03 14:53:07.392 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 14:53:07.393 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-03 14:53:07.393 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 14:53:07.577 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:53:07.577 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:53:07.578 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:53:07.578 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:53:07.578 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:53:07.579 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:53:07.580 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 14:53:07.582 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 14:53:07.584 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 14:53:07.588 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 14:53:07.590 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 14:53:07.596 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 14:53:07.598 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 14:53:07.602 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 14:53:07.606 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 14:53:07.612 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:53:07.619 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:53:07.623 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:53:08.067 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 14:53:08.392 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 14:53:08.437 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 14:53:08.632 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 14:53:08.777 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 14:53:08.828 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 14:53:08.880 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 14:53:09.031 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 14:53:09.106 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 14:53:09.139 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 14:53:09.141 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 14:53:09.158 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:53:09.159 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.79 seconds (process running for 130.068)
2025-11-03 14:53:09.159 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:53:09.163 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:53:09.167 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 14:53:09.575 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:53:16.686 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 14:53:16.687 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 14:53:16.688 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 14:53:16.691 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 14:53:16.691 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 14:53:16.693 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@127a6613
2025-11-03 14:53:16.695 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@63685cda
2025-11-03 14:53:16.695 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 14:53:16.696 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-11-03 14:53:16.700 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 14:53:16.705 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:53:16.706 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:53:16.713 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 14:53:16.716 [http-nio-8080-exec-1] DEBUG [bbab448c227446c9] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 14:53:16.733 [http-nio-8080-exec-1] DEBUG [bbab448c227446c9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-03 14:53:16.753 [http-nio-8080-exec-1] DEBUG [bbab448c227446c9] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:53:16.756 [http-nio-8080-exec-1] DEBUG [bbab448c227446c9] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:53:17.567 [http-nio-8080-exec-1] DEBUG [bbab448c227446c9] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:53:17.578 [http-nio-8080-exec-1] DEBUG [bbab448c227446c9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 14:53:17.603 [http-nio-8080-exec-1] DEBUG [bbab448c227446c9] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@62225687]
2025-11-03 14:53:17.609 [http-nio-8080-exec-1] DEBUG [bbab448c227446c9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:53:17.654 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 14:53:17.656 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:53:17.657 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:53:39.158 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:53:39.159 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:53:39.160 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:53:40.958 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:53:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:53:57.596 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:53:57.597 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:53:57.597 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:53:57.600 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:53:57.601 [http-nio-8080-exec-3] DEBUG [941edb4efa49471f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:53:57.602 [http-nio-8080-exec-3] DEBUG [941edb4efa49471f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:53:57.610 [http-nio-8080-exec-3] DEBUG [941edb4efa49471f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:53:57.611 [http-nio-8080-exec-3] DEBUG [941edb4efa49471f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:53:57.617 [http-nio-8080-exec-3] DEBUG [941edb4efa49471f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:54:09.157 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:54:09.159 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:54:09.160 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:54:10.809 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:54:39.157 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:54:39.158 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:54:39.159 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:54:39.389 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:54:41.061 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 14:54:41.065 [Thread-12] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 14:54:41.065 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:54:41.066 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 14:54:41.067 [Thread-12] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 14:54:41.073 [Thread-12] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:54:41.073 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:54:41.075 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:54:41.076 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:54:41.077 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:54:41.077 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:54:41.078 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:54:41.081 [Thread-12] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 14:54:41.082 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-03 14:54:41.083 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-03 14:54:42.486 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 14:54:42.487 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 14:54:42.488 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 14:54:43.443 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 14:54:43.514 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 69 ms. Found 5 JPA repository interfaces.
2025-11-03 14:54:44.397 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 14:54:44.403 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:54:44.406 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 14:54:44.409 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 14:54:44.442 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 14:54:44.443 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1950 ms
2025-11-03 14:54:44.761 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 14:54:44.761 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 14:54:44.761 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 14:54:44.841 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 14:54:44.842 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-03 14:54:44.844 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 14:54:44.845 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-03 14:54:44.845 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 14:54:45.003 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:54:45.004 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:54:45.004 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:54:45.004 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:54:45.004 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:54:45.005 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:54:45.005 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 14:54:45.007 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 14:54:45.009 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 14:54:45.010 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 14:54:45.012 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 14:54:45.016 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 14:54:45.018 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 14:54:45.020 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 14:54:45.024 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 14:54:45.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:54:45.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:54:45.032 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:54:45.444 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 14:54:45.740 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 14:54:45.786 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 14:54:45.897 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 14:54:46.017 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 14:54:46.074 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 14:54:46.133 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 14:54:46.306 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 14:54:46.410 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 14:54:46.445 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 14:54:46.448 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 14:54:46.470 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.1 seconds (process running for 227.379)
2025-11-03 14:54:46.471 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:54:46.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:54:46.474 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:54:46.476 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 14:54:47.816 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 14:54:47.818 [Thread-16] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 14:54:47.819 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:54:47.820 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 14:54:47.820 [Thread-16] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 14:54:50.854 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:54:50.862 [Thread-16] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:54:50.863 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:54:50.865 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:54:50.866 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:54:50.868 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:54:50.869 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:54:50.870 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:54:50.872 [Thread-16] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 14:54:50.874 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-03 14:54:50.875 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-03 14:54:52.074 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 14:54:52.074 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 14:54:52.074 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 14:54:52.488 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 14:54:52.515 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-03 14:54:52.727 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 14:54:52.728 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:54:52.729 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 14:54:52.729 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 14:54:52.742 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 14:54:52.742 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 666 ms
2025-11-03 14:54:53.043 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 14:54:53.043 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 14:54:53.044 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 14:54:53.195 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 14:54:53.196 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-03 14:54:53.200 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 14:54:53.200 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-03 14:54:53.201 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 14:54:53.410 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:54:53.411 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:54:53.411 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:54:53.411 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:54:53.411 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:54:53.411 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:54:53.412 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 14:54:53.414 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 14:54:53.416 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 14:54:53.418 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 14:54:53.419 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 14:54:53.421 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 14:54:53.423 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 14:54:53.425 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 14:54:53.427 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 14:54:53.429 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:54:53.431 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:54:53.438 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:54:53.876 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 14:54:54.151 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 14:54:54.198 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 14:54:54.317 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 14:54:54.461 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 14:54:54.520 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 14:54:54.584 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 14:54:54.749 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 14:54:54.830 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 14:54:54.869 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 14:54:54.873 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 14:54:54.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:54:54.892 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.857 seconds (process running for 235.8)
2025-11-03 14:54:54.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:54:54.895 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:54:54.900 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 14:54:55.407 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:54:57.591 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 14:54:57.591 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 14:54:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 14:54:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 14:54:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 14:54:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@528e0ee2
2025-11-03 14:54:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@67d3e904
2025-11-03 14:54:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 14:54:57.595 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-03 14:54:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:54:57.600 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:54:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:54:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:54:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:54:57.604 [http-nio-8080-exec-1] DEBUG [dfd294f135484a50] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:54:57.605 [http-nio-8080-exec-1] DEBUG [dfd294f135484a50] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:54:57.609 [http-nio-8080-exec-1] DEBUG [dfd294f135484a50] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:54:57.609 [http-nio-8080-exec-1] DEBUG [dfd294f135484a50] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:54:57.616 [http-nio-8080-exec-1] DEBUG [dfd294f135484a50] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:55:06.300 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 14:55:06.305 [Thread-20] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 14:55:06.305 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:55:06.307 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 14:55:06.308 [Thread-20] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 14:55:06.315 [Thread-20] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:55:06.316 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:55:06.317 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:55:06.318 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:55:06.319 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:55:06.320 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:55:06.321 [Thread-20] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:55:06.324 [Thread-20] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 14:55:06.324 [Thread-20] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-03 14:55:06.326 [Thread-20] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-03 14:55:07.496 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 14:55:07.497 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 14:55:07.497 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 14:55:07.890 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 14:55:07.919 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 5 JPA repository interfaces.
2025-11-03 14:55:08.197 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 14:55:08.198 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:55:08.198 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 14:55:08.198 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 14:55:08.210 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 14:55:08.210 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 711 ms
2025-11-03 14:55:08.426 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 14:55:08.426 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 14:55:08.426 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 14:55:08.517 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 14:55:08.518 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-03 14:55:08.521 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 14:55:08.521 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-03 14:55:08.522 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 14:55:08.699 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:55:08.700 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:55:08.700 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:55:08.700 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:55:08.700 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:55:08.701 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:55:08.702 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 14:55:08.704 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 14:55:08.705 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 14:55:08.707 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 14:55:08.708 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 14:55:08.710 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 14:55:08.712 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 14:55:08.714 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 14:55:08.716 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 14:55:08.718 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:55:08.720 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:55:08.723 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:55:09.129 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 14:55:09.411 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 14:55:09.484 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 14:55:09.692 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 14:55:09.897 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 14:55:09.952 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 14:55:10.004 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 14:55:10.153 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 14:55:10.228 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 14:55:10.260 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 14:55:10.283 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 14:55:10.301 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.842 seconds (process running for 251.21)
2025-11-03 14:55:10.302 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:55:10.305 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:55:10.305 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 14:55:10.308 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:55:12.346 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:55:40.299 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:55:40.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:55:40.302 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:55:40.732 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:55:41.738 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 14:55:41.738 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 14:55:57.594 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 14:55:57.595 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 14:55:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 14:55:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 14:55:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 14:55:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@389b9635
2025-11-03 14:55:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@42c35b86
2025-11-03 14:55:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 14:55:57.599 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-03 14:55:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:55:57.604 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:55:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:55:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:55:57.608 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:55:57.610 [http-nio-8080-exec-1] DEBUG [21e788d8ee6547f2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:55:57.611 [http-nio-8080-exec-1] DEBUG [21e788d8ee6547f2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:55:57.618 [http-nio-8080-exec-1] DEBUG [21e788d8ee6547f2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:55:57.619 [http-nio-8080-exec-1] DEBUG [21e788d8ee6547f2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:55:57.623 [http-nio-8080-exec-1] DEBUG [21e788d8ee6547f2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:56:10.299 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:56:10.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:56:10.302 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:56:14.051 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:56:40.299 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:56:40.300 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:56:40.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:56:42.666 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:56:56.282 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 14:56:56.285 [Thread-24] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 14:56:56.286 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:56:56.287 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 14:56:56.287 [Thread-24] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 14:56:56.292 [Thread-24] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:56:56.293 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:56:56.294 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:56:56.295 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:56:56.296 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:56:56.296 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:56:56.297 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:56:56.298 [Thread-24] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 14:56:56.299 [Thread-24] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-03 14:56:56.300 [Thread-24] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-03 14:56:56.932 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 14:56:56.932 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 14:56:56.933 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 14:56:57.334 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 14:56:57.360 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 14:56:57.551 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 14:56:57.552 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 14:56:57.553 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 14:56:57.553 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 14:56:57.591 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 14:56:57.591 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 657 ms
2025-11-03 14:56:57.780 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 14:56:57.780 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 14:56:57.780 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 14:56:57.866 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 14:56:57.867 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-03 14:56:57.869 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 14:56:57.869 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-03 14:56:57.870 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 14:56:58.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 14:56:58.067 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 14:56:58.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 14:56:58.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 14:56:58.068 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 14:56:58.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 14:56:58.069 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 14:56:58.073 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 14:56:58.076 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 14:56:58.079 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 14:56:58.081 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 14:56:58.082 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 14:56:58.084 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 14:56:58.087 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 14:56:58.096 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 14:56:58.098 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:56:58.103 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 14:56:58.107 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 14:56:58.533 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 14:56:58.795 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 14:56:58.842 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 14:56:58.957 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 14:56:59.082 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 14:56:59.139 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 14:56:59.198 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 14:56:59.377 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 14:56:59.483 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 14:56:59.520 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 14:56:59.523 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 14:56:59.540 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:56:59.541 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.64 seconds (process running for 360.45)
2025-11-03 14:56:59.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:56:59.547 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:56:59.546 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 14:57:01.156 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:57:29.540 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:57:29.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:57:29.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:57:29.747 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:57:57.592 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 14:57:57.592 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 14:57:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 14:57:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 14:57:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 14:57:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@694527fe
2025-11-03 14:57:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6fc8c8
2025-11-03 14:57:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 14:57:57.597 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 14:57:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:57:57.601 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:57:57.602 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:57:57.602 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:57:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:57:57.607 [http-nio-8080-exec-1] DEBUG [3a8765b3f87d445e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:57:57.607 [http-nio-8080-exec-1] DEBUG [3a8765b3f87d445e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:57:57.614 [http-nio-8080-exec-1] DEBUG [3a8765b3f87d445e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:57:57.615 [http-nio-8080-exec-1] DEBUG [3a8765b3f87d445e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:57:57.618 [http-nio-8080-exec-1] DEBUG [3a8765b3f87d445e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:57:59.540 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:57:59.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:57:59.543 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:58:01.710 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:58:02.714 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 14:58:02.715 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 14:58:29.540 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:58:29.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:58:29.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:58:30.184 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:58:34.985 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 14:58:34.987 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:58:34.988 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:58:34.988 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:58:35.610 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 14:58:35.611 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:58:35.611 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:58:35.611 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:58:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:58:57.595 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:58:57.596 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:58:57.596 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:58:57.598 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:58:57.599 [http-nio-8080-exec-4] DEBUG [43e3401fcebc4758] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:58:57.605 [http-nio-8080-exec-4] DEBUG [43e3401fcebc4758] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:58:57.609 [http-nio-8080-exec-4] DEBUG [43e3401fcebc4758] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:58:57.611 [http-nio-8080-exec-4] DEBUG [43e3401fcebc4758] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:58:57.613 [http-nio-8080-exec-4] DEBUG [43e3401fcebc4758] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:58:59.540 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:58:59.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:58:59.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:59:02.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:59:29.540 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:59:29.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:59:29.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 14:59:32.044 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 14:59:57.594 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 14:59:57.595 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 14:59:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 14:59:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 14:59:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 14:59:57.599 [http-nio-8080-exec-6] DEBUG [8520b1057463440b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 14:59:57.600 [http-nio-8080-exec-6] DEBUG [8520b1057463440b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 14:59:57.603 [http-nio-8080-exec-6] DEBUG [8520b1057463440b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 14:59:57.603 [http-nio-8080-exec-6] DEBUG [8520b1057463440b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 14:59:57.605 [http-nio-8080-exec-6] DEBUG [8520b1057463440b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 14:59:59.540 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 14:59:59.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 14:59:59.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:00:00.780 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:00:29.540 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:00:29.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:00:29.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:00:31.476 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:00:57.590 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:00:57.591 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:00:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:00:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:00:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:00:57.593 [http-nio-8080-exec-7] DEBUG [7786880f8da44688] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:00:57.593 [http-nio-8080-exec-7] DEBUG [7786880f8da44688] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:00:57.594 [http-nio-8080-exec-7] DEBUG [7786880f8da44688] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:00:57.594 [http-nio-8080-exec-7] DEBUG [7786880f8da44688] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:00:57.596 [http-nio-8080-exec-7] DEBUG [7786880f8da44688] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:00:59.540 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:00:59.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:00:59.542 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:01:00.964 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:01:29.541 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:01:29.547 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:01:29.549 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:01:41.690 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:01:53.523 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:01:53.533 [Thread-28] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:01:53.535 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:01:53.537 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:01:53.538 [Thread-28] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:01:53.546 [Thread-28] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:01:53.572 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:01:53.576 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:01:53.583 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:01:53.584 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:01:53.584 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:01:53.585 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:01:53.604 [Thread-28] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:01:53.604 [Thread-28] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-03 15:01:53.606 [Thread-28] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-03 15:01:54.163 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:01:54.164 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:01:54.164 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:01:54.739 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:01:54.782 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 5 JPA repository interfaces.
2025-11-03 15:01:55.211 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:01:55.219 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:01:55.219 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:01:55.220 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:01:55.250 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:01:55.252 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1085 ms
2025-11-03 15:01:55.663 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:01:55.664 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:01:55.664 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:01:55.796 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:01:55.798 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-03 15:01:55.800 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn70: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:01:55.801 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-03 15:01:55.802 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:01:56.009 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:01:56.011 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:01:56.013 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:01:56.015 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:01:56.017 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:01:56.020 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:01:56.023 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:01:56.035 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:01:56.040 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:01:56.042 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:01:56.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:01:56.047 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:01:56.049 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:01:56.051 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:01:56.053 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:01:56.056 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:01:56.065 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:01:56.068 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:01:56.737 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:01:56.989 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:01:57.033 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:01:57.141 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:01:57.274 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:01:57.323 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:01:57.375 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:01:57.567 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:01:57.645 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:01:57.677 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:01:57.680 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:01:57.694 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:01:57.695 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.588 seconds (process running for 658.604)
2025-11-03 15:01:57.696 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:01:57.697 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:01:57.701 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:01:59.054 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:01:59.057 [Thread-32] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:01:59.058 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:01:59.060 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:01:59.061 [Thread-32] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:02:15.170 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:02:15.174 [Thread-32] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:02:15.174 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:02:15.175 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:02:15.176 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:02:15.176 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:02:15.177 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:02:15.177 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:02:15.178 [Thread-32] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:02:15.179 [Thread-32] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-03 15:02:15.180 [Thread-32] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-03 15:02:16.382 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:02:16.383 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:02:16.383 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:02:16.835 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:02:16.861 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-03 15:02:17.071 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:02:17.072 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:02:17.072 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:02:17.072 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:02:17.085 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:02:17.086 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 701 ms
2025-11-03 15:02:17.266 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:02:17.266 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:02:17.266 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:02:17.349 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:02:17.350 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-11-03 15:02:17.353 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn80: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:02:17.353 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-11-03 15:02:17.354 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:02:17.517 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:02:17.518 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:02:17.518 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:02:17.518 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:02:17.518 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:02:17.518 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:02:17.519 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:02:17.522 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:02:17.523 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:02:17.525 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:02:17.527 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:02:17.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:02:17.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:02:17.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:02:17.538 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:02:17.540 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:02:17.542 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:02:17.545 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:02:17.951 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:02:18.218 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:02:18.267 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:02:18.395 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:02:18.523 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:02:18.596 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:02:18.692 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:02:18.910 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:02:18.979 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:02:19.007 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:02:19.009 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:02:19.024 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:02:19.025 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.677 seconds (process running for 679.933)
2025-11-03 15:02:19.026 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:02:19.027 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:02:19.029 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:02:34.450 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:02:34.454 [Thread-36] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:02:34.455 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:02:34.456 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:02:34.456 [Thread-36] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:02:43.121 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:02:43.147 [Thread-36] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:02:43.148 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:02:43.153 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:02:43.157 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:02:43.166 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:02:43.171 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:02:43.180 [Thread-36] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:02:43.209 [Thread-36] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:02:43.220 [Thread-36] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-11-03 15:02:43.243 [Thread-36] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-11-03 15:02:44.540 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:02:44.541 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:02:44.541 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:02:45.215 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:02:45.243 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-11-03 15:02:45.564 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:02:45.565 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:02:45.566 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:02:45.566 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:02:45.578 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:02:45.579 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1036 ms
2025-11-03 15:02:45.811 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:02:45.811 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:02:45.811 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:02:45.910 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:02:45.911 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-11-03 15:02:45.936 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn90: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:02:45.937 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-11-03 15:02:45.937 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:02:46.135 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:02:46.136 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:02:46.136 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:02:46.136 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:02:46.136 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:02:46.136 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:02:46.137 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:02:46.139 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:02:46.140 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:02:46.142 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:02:46.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:02:46.145 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:02:46.146 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:02:46.148 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:02:46.150 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:02:46.154 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:02:46.161 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:02:46.166 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:02:46.778 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:02:47.217 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:02:47.273 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:02:47.395 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:02:47.567 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:02:47.629 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:02:47.688 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:02:47.895 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:02:47.976 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:02:48.011 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:02:48.017 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:02:48.043 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:02:48.044 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.559 seconds (process running for 708.952)
2025-11-03 15:02:48.045 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:02:48.047 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:02:48.051 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:02:48.381 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:02:48.381 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:02:48.381 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:02:48.381 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:02:48.381 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:02:48.387 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1208336a
2025-11-03 15:02:48.388 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4f9dbf48
2025-11-03 15:02:48.389 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:02:48.390 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-11-03 15:02:48.404 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:02:48.407 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:02:48.407 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:02:48.599 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:02:48.600 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:02:48.600 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:02:48.601 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:02:48.882 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:02:51.386 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:02:51.387 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:02:51.387 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:02:51.465 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:02:51.467 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:02:51.472 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:02:51.472 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:02:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:02:57.592 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:02:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:02:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:02:57.595 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:02:57.596 [http-nio-8080-exec-5] DEBUG [189aee8b05134616] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:02:57.596 [http-nio-8080-exec-5] DEBUG [189aee8b05134616] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:02:57.601 [http-nio-8080-exec-5] DEBUG [189aee8b05134616] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:02:57.602 [http-nio-8080-exec-5] DEBUG [189aee8b05134616] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:02:57.605 [http-nio-8080-exec-5] DEBUG [189aee8b05134616] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:02:58.598 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 15:02:58.599 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 5 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 15:03:18.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:03:18.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:03:18.044 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:03:21.039 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:03:48.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:03:48.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:03:48.044 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:03:50.084 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:03:57.594 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:03:57.595 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:03:57.601 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:03:57.602 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:03:57.604 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:03:57.609 [http-nio-8080-exec-7] DEBUG [05010a94a22c425a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:03:57.611 [http-nio-8080-exec-7] DEBUG [05010a94a22c425a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:03:57.622 [http-nio-8080-exec-7] DEBUG [05010a94a22c425a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:03:57.628 [http-nio-8080-exec-7] DEBUG [05010a94a22c425a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:03:57.639 [http-nio-8080-exec-7] DEBUG [05010a94a22c425a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:03:59.282 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-03 15:03:59.529 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:03:59.531 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:03:59.535 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-03 15:03:59.539 [http-nio-8080-exec-8] DEBUG [2b56899525f147df] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-03 15:03:59.545 [http-nio-8080-exec-8] DEBUG [2b56899525f147df] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-03 15:04:00.331 [http-nio-8080-exec-8] DEBUG [2b56899525f147df] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, application/xml;q=0.9, */*;q=0.8]
2025-11-03 15:04:03.127 [http-nio-8080-exec-8] DEBUG [2b56899525f147df] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:04:05.500 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:04:05.501 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:04:05.502 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:04:05.504 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:04:05.505 [http-nio-8080-exec-9] DEBUG [6db4cd2795bb4b0e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:04:05.505 [http-nio-8080-exec-9] DEBUG [6db4cd2795bb4b0e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:04:05.507 [http-nio-8080-exec-9] DEBUG [6db4cd2795bb4b0e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:04:05.508 [http-nio-8080-exec-9] DEBUG [6db4cd2795bb4b0e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:04:05.510 [http-nio-8080-exec-9] DEBUG [6db4cd2795bb4b0e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:04:09.994 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:04:09.995 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:04:09.996 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:04:09.997 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:04:09.997 [http-nio-8080-exec-10] DEBUG [bc02820b3d324459] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:04:09.998 [http-nio-8080-exec-10] DEBUG [bc02820b3d324459] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:04:09.999 [http-nio-8080-exec-10] DEBUG [bc02820b3d324459] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:04:10.000 [http-nio-8080-exec-10] DEBUG [bc02820b3d324459] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:04:10.001 [http-nio-8080-exec-10] DEBUG [bc02820b3d324459] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:04:18.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:04:18.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:04:18.044 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:04:18.838 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:04:48.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:04:48.052 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:04:48.053 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:04:50.701 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:04:57.590 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:04:57.591 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:04:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:04:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:04:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:04:57.593 [http-nio-8080-exec-1] DEBUG [67c70b50b41349ab] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:04:57.594 [http-nio-8080-exec-1] DEBUG [67c70b50b41349ab] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:04:57.595 [http-nio-8080-exec-1] DEBUG [67c70b50b41349ab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:04:57.595 [http-nio-8080-exec-1] DEBUG [67c70b50b41349ab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:04:57.597 [http-nio-8080-exec-1] DEBUG [67c70b50b41349ab] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:05:18.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:05:18.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:05:18.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:05:37.165 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:05:48.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:05:48.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:05:48.045 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:05:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:05:57.593 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:05:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:05:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:05:57.597 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:05:57.598 [http-nio-8080-exec-3] DEBUG [b69d7bd7c75d4738] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:05:57.599 [http-nio-8080-exec-3] DEBUG [b69d7bd7c75d4738] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:05:57.603 [http-nio-8080-exec-3] DEBUG [b69d7bd7c75d4738] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:05:57.603 [http-nio-8080-exec-3] DEBUG [b69d7bd7c75d4738] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:05:57.606 [http-nio-8080-exec-3] DEBUG [b69d7bd7c75d4738] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:06:30.490 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:06:30.492 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:06:30.493 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:06:30.494 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:06:30.652 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:06:48.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:06:48.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:06:48.045 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:06:49.152 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:06:57.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:06:57.592 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:06:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:06:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:06:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:06:57.594 [http-nio-8080-exec-4] DEBUG [6ea8589ffc7246da] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:06:57.596 [http-nio-8080-exec-4] DEBUG [6ea8589ffc7246da] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:06:57.597 [http-nio-8080-exec-4] DEBUG [6ea8589ffc7246da] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:06:57.597 [http-nio-8080-exec-4] DEBUG [6ea8589ffc7246da] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:06:57.599 [http-nio-8080-exec-4] DEBUG [6ea8589ffc7246da] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:07:18.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:07:18.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:07:18.044 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:07:21.223 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:07:48.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:07:48.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:07:48.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:07:50.512 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:07:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:07:57.594 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:07:57.594 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:07:57.594 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:07:57.600 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:07:57.601 [http-nio-8080-exec-5] DEBUG [e5e390319e9346ae] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:07:57.602 [http-nio-8080-exec-5] DEBUG [e5e390319e9346ae] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:07:57.603 [http-nio-8080-exec-5] DEBUG [e5e390319e9346ae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:07:57.604 [http-nio-8080-exec-5] DEBUG [e5e390319e9346ae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:07:57.606 [http-nio-8080-exec-5] DEBUG [e5e390319e9346ae] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:08:18.042 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:08:18.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:08:18.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:08:19.856 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:08:36.031 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:08:36.041 [Thread-40] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:08:36.053 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:08:36.058 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:08:36.063 [Thread-40] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:08:36.070 [Thread-40] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:08:36.074 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:08:36.097 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:08:36.102 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:08:36.106 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:08:36.109 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:08:36.111 [Thread-40] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:08:36.115 [Thread-40] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:08:36.117 [Thread-40] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-11-03 15:08:36.130 [Thread-40] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-11-03 15:08:36.940 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:08:36.940 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:08:36.941 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:08:37.551 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:08:37.579 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 5 JPA repository interfaces.
2025-11-03 15:08:37.950 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:08:37.951 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:08:37.951 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:08:37.951 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:08:37.964 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:08:37.964 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1021 ms
2025-11-03 15:08:38.303 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:08:38.308 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:08:38.308 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:08:38.463 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:08:38.464 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-11-03 15:08:38.466 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn100: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:08:38.467 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-11-03 15:08:38.467 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:08:38.653 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:08:38.653 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:08:38.654 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:08:38.654 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:08:38.654 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:08:38.654 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:08:38.655 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:08:38.657 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:08:38.658 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:08:38.659 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:08:38.660 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:08:38.661 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:08:38.663 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:08:38.664 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:08:38.666 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:08:38.667 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:08:38.669 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:08:38.672 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:08:39.109 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:08:39.444 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:08:39.508 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:08:39.612 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:08:39.782 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:08:39.837 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:08:39.894 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:08:40.063 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:08:40.141 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:08:40.177 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:08:40.179 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:08:40.197 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:08:40.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:08:40.200 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.319 seconds (process running for 1061.109)
2025-11-03 15:08:40.201 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:08:40.210 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:08:41.015 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:08:49.873 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:08:49.874 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:08:49.874 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:08:49.874 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:08:49.874 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:08:49.877 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@f8eac25
2025-11-03 15:08:49.878 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5b1b22f5
2025-11-03 15:08:49.879 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:08:49.881 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-11-03 15:08:49.883 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:08:49.886 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:08:49.887 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:08:49.888 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:08:49.891 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:08:49.892 [http-nio-8080-exec-1] DEBUG [e9236f271ed74faf] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:08:49.893 [http-nio-8080-exec-1] DEBUG [e9236f271ed74faf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:08:49.899 [http-nio-8080-exec-1] DEBUG [e9236f271ed74faf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:08:49.900 [http-nio-8080-exec-1] DEBUG [e9236f271ed74faf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:08:49.903 [http-nio-8080-exec-1] DEBUG [e9236f271ed74faf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:08:54.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:08:54.593 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:08:54.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:08:54.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:08:54.594 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:08:54.594 [http-nio-8080-exec-2] DEBUG [58895450454844c4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:08:54.595 [http-nio-8080-exec-2] DEBUG [58895450454844c4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:08:54.596 [http-nio-8080-exec-2] DEBUG [58895450454844c4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:08:54.597 [http-nio-8080-exec-2] DEBUG [58895450454844c4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:08:54.598 [http-nio-8080-exec-2] DEBUG [58895450454844c4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:08:57.747 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:08:57.748 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:08:57.748 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:08:58.291 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:08:58.292 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:08:58.292 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:08:58.292 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:08:58.756 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 15:08:58.757 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 4 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 15:08:59.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:08:59.592 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:08:59.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:08:59.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:08:59.593 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:08:59.593 [http-nio-8080-exec-5] DEBUG [559b42fbf7644719] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:08:59.594 [http-nio-8080-exec-5] DEBUG [559b42fbf7644719] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:08:59.595 [http-nio-8080-exec-5] DEBUG [559b42fbf7644719] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:08:59.596 [http-nio-8080-exec-5] DEBUG [559b42fbf7644719] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:08:59.597 [http-nio-8080-exec-5] DEBUG [559b42fbf7644719] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:04.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:04.592 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:04.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:04.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:04.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:04.593 [http-nio-8080-exec-6] DEBUG [8a6f864a60344b8d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:04.594 [http-nio-8080-exec-6] DEBUG [8a6f864a60344b8d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:04.595 [http-nio-8080-exec-6] DEBUG [8a6f864a60344b8d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:04.595 [http-nio-8080-exec-6] DEBUG [8a6f864a60344b8d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:04.596 [http-nio-8080-exec-6] DEBUG [8a6f864a60344b8d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:09.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:09.593 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:09.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:09.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:09.595 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:09.596 [http-nio-8080-exec-7] DEBUG [0c2d1cf33e0641fc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:09.596 [http-nio-8080-exec-7] DEBUG [0c2d1cf33e0641fc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:09.598 [http-nio-8080-exec-7] DEBUG [0c2d1cf33e0641fc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:09.599 [http-nio-8080-exec-7] DEBUG [0c2d1cf33e0641fc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:09.601 [http-nio-8080-exec-7] DEBUG [0c2d1cf33e0641fc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:10.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:09:10.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:09:10.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:09:14.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:14.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:14.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:14.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:14.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:14.596 [http-nio-8080-exec-8] DEBUG [ac46255b2cf74820] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:14.596 [http-nio-8080-exec-8] DEBUG [ac46255b2cf74820] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:14.598 [http-nio-8080-exec-8] DEBUG [ac46255b2cf74820] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:14.599 [http-nio-8080-exec-8] DEBUG [ac46255b2cf74820] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:14.600 [http-nio-8080-exec-8] DEBUG [ac46255b2cf74820] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:19.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:19.595 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:19.595 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:19.596 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:19.597 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:19.598 [http-nio-8080-exec-9] DEBUG [321501d074a142cf] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:19.599 [http-nio-8080-exec-9] DEBUG [321501d074a142cf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:19.602 [http-nio-8080-exec-9] DEBUG [321501d074a142cf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:19.602 [http-nio-8080-exec-9] DEBUG [321501d074a142cf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:19.604 [http-nio-8080-exec-9] DEBUG [321501d074a142cf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:24.590 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:24.591 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:24.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:24.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:24.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:24.593 [http-nio-8080-exec-10] DEBUG [a673843b48974a81] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:24.594 [http-nio-8080-exec-10] DEBUG [a673843b48974a81] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:24.595 [http-nio-8080-exec-10] DEBUG [a673843b48974a81] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:24.595 [http-nio-8080-exec-10] DEBUG [a673843b48974a81] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:24.596 [http-nio-8080-exec-10] DEBUG [a673843b48974a81] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:29.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:29.591 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:29.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:29.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:29.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:29.593 [http-nio-8080-exec-1] DEBUG [3b0c96bc56e345e0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:29.593 [http-nio-8080-exec-1] DEBUG [3b0c96bc56e345e0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:29.594 [http-nio-8080-exec-1] DEBUG [3b0c96bc56e345e0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:29.595 [http-nio-8080-exec-1] DEBUG [3b0c96bc56e345e0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:29.596 [http-nio-8080-exec-1] DEBUG [3b0c96bc56e345e0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:34.589 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:34.590 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:34.590 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:34.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:34.591 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:34.591 [http-nio-8080-exec-2] DEBUG [df20bf75ee444f75] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:34.592 [http-nio-8080-exec-2] DEBUG [df20bf75ee444f75] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:34.593 [http-nio-8080-exec-2] DEBUG [df20bf75ee444f75] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:34.593 [http-nio-8080-exec-2] DEBUG [df20bf75ee444f75] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:34.594 [http-nio-8080-exec-2] DEBUG [df20bf75ee444f75] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:35.541 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:09:39.590 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:39.591 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:39.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:39.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:39.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:39.592 [http-nio-8080-exec-3] DEBUG [7e9da37e41754dbd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:39.593 [http-nio-8080-exec-3] DEBUG [7e9da37e41754dbd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:39.594 [http-nio-8080-exec-3] DEBUG [7e9da37e41754dbd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:39.594 [http-nio-8080-exec-3] DEBUG [7e9da37e41754dbd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:39.595 [http-nio-8080-exec-3] DEBUG [7e9da37e41754dbd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:40.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:09:40.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:09:40.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:09:43.407 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:09:44.590 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:44.591 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:44.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:44.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:44.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:44.592 [http-nio-8080-exec-4] DEBUG [922adc1d063b48e0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:44.593 [http-nio-8080-exec-4] DEBUG [922adc1d063b48e0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:44.594 [http-nio-8080-exec-4] DEBUG [922adc1d063b48e0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:44.594 [http-nio-8080-exec-4] DEBUG [922adc1d063b48e0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:44.595 [http-nio-8080-exec-4] DEBUG [922adc1d063b48e0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:49.590 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:49.591 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:49.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:49.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:49.592 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:49.592 [http-nio-8080-exec-5] DEBUG [09d01cca6065435d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:49.593 [http-nio-8080-exec-5] DEBUG [09d01cca6065435d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:49.594 [http-nio-8080-exec-5] DEBUG [09d01cca6065435d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:49.594 [http-nio-8080-exec-5] DEBUG [09d01cca6065435d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:49.596 [http-nio-8080-exec-5] DEBUG [09d01cca6065435d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:09:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:09:57.592 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:09:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:09:57.593 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:09:57.594 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:09:57.595 [http-nio-8080-exec-6] DEBUG [9d3c6da58ce64074] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:09:57.595 [http-nio-8080-exec-6] DEBUG [9d3c6da58ce64074] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:09:57.597 [http-nio-8080-exec-6] DEBUG [9d3c6da58ce64074] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:09:57.598 [http-nio-8080-exec-6] DEBUG [9d3c6da58ce64074] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:09:57.608 [http-nio-8080-exec-6] DEBUG [9d3c6da58ce64074] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:10:10.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:10:10.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:10:10.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:10:10.363 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:10:40.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:10:40.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:10:40.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:10:40.989 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:10:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:10:57.592 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:10:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:10:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:10:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:10:57.594 [http-nio-8080-exec-8] DEBUG [92164b423e684de0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:10:57.594 [http-nio-8080-exec-8] DEBUG [92164b423e684de0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:10:57.595 [http-nio-8080-exec-8] DEBUG [92164b423e684de0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:10:57.595 [http-nio-8080-exec-8] DEBUG [92164b423e684de0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:10:57.596 [http-nio-8080-exec-8] DEBUG [92164b423e684de0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:11:10.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:11:10.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:11:10.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:11:13.060 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:11:40.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:11:40.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:11:40.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:11:41.498 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:11:57.594 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:11:57.595 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:11:57.596 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:11:57.596 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:11:57.598 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:11:57.599 [http-nio-8080-exec-9] DEBUG [41fd8e9055e64c41] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:11:57.600 [http-nio-8080-exec-9] DEBUG [41fd8e9055e64c41] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:11:57.610 [http-nio-8080-exec-9] DEBUG [41fd8e9055e64c41] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:11:57.611 [http-nio-8080-exec-9] DEBUG [41fd8e9055e64c41] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:11:57.613 [http-nio-8080-exec-9] DEBUG [41fd8e9055e64c41] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:12:10.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:12:10.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:12:10.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:12:37.277 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:12:40.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:12:40.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:12:40.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:12:40.990 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:12:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:12:57.593 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:12:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:12:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:12:57.594 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:12:57.594 [http-nio-8080-exec-10] DEBUG [7fa2d2c6e48c4ac8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:12:57.595 [http-nio-8080-exec-10] DEBUG [7fa2d2c6e48c4ac8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:12:57.596 [http-nio-8080-exec-10] DEBUG [7fa2d2c6e48c4ac8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:12:57.597 [http-nio-8080-exec-10] DEBUG [7fa2d2c6e48c4ac8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:12:57.598 [http-nio-8080-exec-10] DEBUG [7fa2d2c6e48c4ac8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:13:10.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:13:10.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:13:10.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:13:11.323 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:13:40.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:13:40.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:13:40.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:13:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:13:57.602 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:13:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:13:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:13:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:13:57.606 [http-nio-8080-exec-1] DEBUG [5cd6c3133a874713] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:13:57.607 [http-nio-8080-exec-1] DEBUG [5cd6c3133a874713] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:13:57.609 [http-nio-8080-exec-1] DEBUG [5cd6c3133a874713] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:13:57.609 [http-nio-8080-exec-1] DEBUG [5cd6c3133a874713] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:13:57.613 [http-nio-8080-exec-1] DEBUG [5cd6c3133a874713] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:14:07.380 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:14:07.382 [Thread-44] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:14:07.383 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:14:07.384 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:14:07.384 [Thread-44] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:14:25.704 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:14:25.710 [Thread-44] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:14:25.710 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:14:25.712 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:14:25.713 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:14:25.714 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:14:25.714 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:14:25.715 [Thread-44] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:14:25.716 [Thread-44] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:14:25.717 [Thread-44] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-11-03 15:14:25.719 [Thread-44] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-11-03 15:14:32.164 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:14:32.164 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:14:32.164 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:14:33.016 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:14:33.041 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 5 JPA repository interfaces.
2025-11-03 15:14:33.662 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:14:33.665 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:14:33.666 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:14:33.666 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:14:33.679 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:14:33.680 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1513 ms
2025-11-03 15:14:33.897 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:14:33.898 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:14:33.898 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:14:35.048 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:14:35.051 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-11-03 15:14:35.054 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn110: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:14:35.055 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-11-03 15:14:35.056 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:14:35.210 [restartedMain] ERROR [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
2025-11-03 15:14:35.211 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
2025-11-03 15:14:35.212 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:14:35.212 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-11-03 15:14:35.217 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-11-03 15:14:36.218 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 15:14:36.622 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 15:14:36.654 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 15:14:40.280 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 18 common frames omitted
Caused by: java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.lambda$processJpa$3(JpaMetamodelImpl.java:663)
	at java.base/java.util.concurrent.ConcurrentHashMap$ValuesView.forEach(ConcurrentHashMap.java:4783)
	at org.hibernate.type.descriptor.java.spi.JavaTypeRegistry.forEachDescriptor(JavaTypeRegistry.java:76)
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.processJpa(JpaMetamodelImpl.java:658)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:216)
	at org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:373)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:302)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 22 common frames omitted
2025-11-03 15:14:41.871 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:14:41.871 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:14:41.871 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:14:42.356 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:14:42.381 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 15:14:42.622 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:14:42.624 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:14:42.624 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:14:42.624 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:14:42.637 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:14:42.637 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 764 ms
2025-11-03 15:14:42.837 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:14:42.838 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:14:42.838 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:14:42.922 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:14:42.923 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Starting...
2025-11-03 15:14:42.924 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-13 - Added connection conn113: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:14:42.925 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Start completed.
2025-11-03 15:14:42.925 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:14:43.102 [restartedMain] ERROR [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
2025-11-03 15:14:43.102 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
2025-11-03 15:14:43.102 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:14:43.103 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-11-03 15:14:43.117 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
2025-11-03 15:14:44.118 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 15:14:44.119 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 15:14:44.137 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 15:14:44.141 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 18 common frames omitted
Caused by: java.lang.NullPointerException: Cannot read the array length because "<local5>" is null
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.lambda$processJpa$3(JpaMetamodelImpl.java:663)
	at java.base/java.util.concurrent.ConcurrentHashMap$ValuesView.forEach(ConcurrentHashMap.java:4783)
	at org.hibernate.type.descriptor.java.spi.JavaTypeRegistry.forEachDescriptor(JavaTypeRegistry.java:76)
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.processJpa(JpaMetamodelImpl.java:658)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:216)
	at org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:373)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:302)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 22 common frames omitted
2025-11-03 15:14:51.872 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 67023 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:14:51.872 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:14:51.872 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:14:52.318 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:14:52.399 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 5 JPA repository interfaces.
2025-11-03 15:14:52.583 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:14:52.583 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:14:52.584 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:14:52.584 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:14:52.595 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:14:52.595 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 721 ms
2025-11-03 15:14:52.769 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:14:52.769 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:14:52.769 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:14:52.840 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:14:52.841 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Starting...
2025-11-03 15:14:52.842 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-14 - Added connection conn117: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:14:52.843 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Start completed.
2025-11-03 15:14:52.843 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:14:54.018 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:14:54.022 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:14:54.024 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:14:54.024 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:14:54.024 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:14:54.024 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:14:54.025 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:14:54.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:14:54.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:14:54.030 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:14:54.031 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:14:54.033 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:14:54.037 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:14:54.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:14:54.046 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:14:54.049 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:14:54.051 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:14:54.054 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:14:54.670 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:14:55.309 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:14:55.345 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:14:55.442 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:14:55.549 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:14:55.601 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:14:55.650 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:14:55.964 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:14:56.148 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:14:56.211 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:14:56.384 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:14:56.385 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.8 seconds (process running for 1437.294)
2025-11-03 15:14:56.385 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:14:56.386 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:14:56.387 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:14:56.388 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:14:56.389 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:15:13.707 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:15:13.716 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:15:13.717 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:15:13.718 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:15:13.719 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:15:13.719 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:15:13.720 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:15:13.720 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:15:13.722 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:15:13.723 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown initiated...
2025-11-03 15:15:13.724 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown completed.
2025-11-03 15:20:10.388 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 80545 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:20:10.390 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:20:10.391 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:20:12.563 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 15:20:12.563 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 15:20:33.585 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:20:34.107 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 364 ms. Found 5 JPA repository interfaces.
2025-11-03 15:20:39.496 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:20:39.554 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:20:39.559 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:20:39.560 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:20:39.659 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:20:39.660 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 27095 ms
2025-11-03 15:20:41.016 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:20:41.018 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:20:41.018 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:20:42.641 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:20:42.775 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 15:20:43.233 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:20:43.236 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 15:20:43.340 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:20:46.114 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:20:46.119 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:20:46.119 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:20:46.119 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:20:46.120 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:20:46.120 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:20:46.151 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:20:46.178 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:20:46.187 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:20:46.191 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:20:46.194 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:20:46.198 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:20:46.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:20:46.240 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:20:46.243 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:20:46.247 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:20:46.252 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:20:46.267 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:20:47.111 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 15:20:49.161 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:20:50.217 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:20:50.304 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:20:50.520 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:20:50.695 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:20:50.864 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:20:51.110 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:20:51.665 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:20:52.065 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:20:52.160 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:20:52.208 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:20:52.238 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 55.748 seconds (process running for 63.006)
2025-11-03 15:20:52.248 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:20:52.387 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:20:52.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:20:55.733 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:20:58.012 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:20:58.012 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:20:58.013 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:20:58.014 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:20:58.015 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:20:58.020 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4b44d1ec
2025-11-03 15:20:58.022 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3922d706
2025-11-03 15:20:58.023 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:20:58.024 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 11 ms
2025-11-03 15:20:58.077 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:20:58.104 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:20:58.110 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:20:58.111 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:20:58.126 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:20:58.132 [http-nio-8080-exec-1] DEBUG [3ceddd6a8c344e52] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:20:58.136 [http-nio-8080-exec-1] DEBUG [3ceddd6a8c344e52] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:20:58.172 [http-nio-8080-exec-1] DEBUG [3ceddd6a8c344e52] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:20:58.174 [http-nio-8080-exec-1] DEBUG [3ceddd6a8c344e52] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:20:58.215 [http-nio-8080-exec-1] DEBUG [3ceddd6a8c344e52] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:21:13.338 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:21:13.341 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:21:13.342 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:21:13.452 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:21:13.460 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:21:13.461 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:21:13.462 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:21:17.650 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:21:17.655 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:21:17.657 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:21:17.738 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:21:17.742 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:21:17.743 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:21:17.745 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:21:18.711 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 15:21:18.712 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 4 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 15:21:22.235 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:21:22.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:21:22.239 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:21:24.953 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:21:24.956 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:21:25.097 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:21:25.099 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:21:25.100 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:21:27.576 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:21:52.235 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:21:52.238 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:21:52.240 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:21:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:21:57.596 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:21:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:21:57.598 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:21:57.604 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:21:57.606 [http-nio-8080-exec-8] DEBUG [8b09e3abb7d848ab] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:21:57.607 [http-nio-8080-exec-8] DEBUG [8b09e3abb7d848ab] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:21:57.612 [http-nio-8080-exec-8] DEBUG [8b09e3abb7d848ab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:21:57.614 [http-nio-8080-exec-8] DEBUG [8b09e3abb7d848ab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:21:57.618 [http-nio-8080-exec-8] DEBUG [8b09e3abb7d848ab] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:21:57.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:22:22.235 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:22:22.236 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:22:22.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:22:32.540 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:22:52.235 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:22:52.236 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:22:52.238 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:22:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:22:57.594 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:22:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:22:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:22:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:22:57.599 [http-nio-8080-exec-1] DEBUG [530e4160c32b42b7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:22:57.601 [http-nio-8080-exec-1] DEBUG [530e4160c32b42b7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:22:57.604 [http-nio-8080-exec-1] DEBUG [530e4160c32b42b7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:22:57.604 [http-nio-8080-exec-1] DEBUG [530e4160c32b42b7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:22:57.606 [http-nio-8080-exec-1] DEBUG [530e4160c32b42b7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:23:11.851 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:23:22.235 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:23:22.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:23:22.238 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:23:25.007 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:23:52.235 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:23:52.236 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:23:52.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:23:56.607 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:23:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:23:57.597 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:23:57.598 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:23:57.598 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:23:57.601 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:23:57.601 [http-nio-8080-exec-2] DEBUG [4906a9e5d636407b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:23:57.603 [http-nio-8080-exec-2] DEBUG [4906a9e5d636407b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:23:57.607 [http-nio-8080-exec-2] DEBUG [4906a9e5d636407b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:23:57.607 [http-nio-8080-exec-2] DEBUG [4906a9e5d636407b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:23:57.609 [http-nio-8080-exec-2] DEBUG [4906a9e5d636407b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:24:22.235 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:24:22.236 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:24:22.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:24:24.142 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:24:46.797 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:24:46.825 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:24:46.827 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:24:46.850 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:24:46.857 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:24:46.873 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:24:46.875 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:24:46.880 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:24:46.882 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:24:46.884 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:24:46.886 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:24:46.887 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:24:46.923 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:24:46.925 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 15:24:46.929 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 15:24:48.010 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 80545 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:24:48.010 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:24:48.010 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:24:48.622 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:24:48.665 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 5 JPA repository interfaces.
2025-11-03 15:24:49.033 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:24:49.035 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:24:49.036 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:24:49.036 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:24:49.051 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:24:49.051 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1037 ms
2025-11-03 15:24:49.374 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:24:49.375 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:24:49.375 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:24:49.622 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:24:49.625 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-03 15:24:49.631 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:24:49.633 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-03 15:24:49.635 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:24:50.074 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:24:50.075 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:24:50.076 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:24:50.076 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:24:50.085 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:24:50.088 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:24:50.094 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:24:50.098 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:24:50.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:24:50.123 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:24:50.131 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:24:50.137 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:24:50.140 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:24:50.143 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:24:50.152 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:24:50.169 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:24:50.177 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:24:50.181 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:24:50.694 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:24:51.250 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:24:51.307 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:24:51.557 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:24:51.695 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:24:51.762 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:24:51.820 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:24:52.040 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:24:52.137 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:24:52.176 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:24:52.179 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:24:52.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:24:52.196 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.269 seconds (process running for 302.964)
2025-11-03 15:24:52.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:24:52.199 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:24:52.202 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:24:53.209 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:24:57.595 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:24:57.596 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:24:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:24:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:24:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:24:57.602 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@45804332
2025-11-03 15:24:57.606 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@16c22760
2025-11-03 15:24:57.606 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:24:57.606 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-11-03 15:24:57.610 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:24:57.613 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:24:57.614 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:24:57.615 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:24:57.621 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:24:57.623 [http-nio-8080-exec-1] DEBUG [2f428ebfe7434a66] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:24:57.623 [http-nio-8080-exec-1] DEBUG [2f428ebfe7434a66] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:24:57.629 [http-nio-8080-exec-1] DEBUG [2f428ebfe7434a66] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:24:57.630 [http-nio-8080-exec-1] DEBUG [2f428ebfe7434a66] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:24:57.636 [http-nio-8080-exec-1] DEBUG [2f428ebfe7434a66] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:25:22.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:25:22.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:25:22.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:25:23.630 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:25:42.795 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:25:42.798 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:25:42.799 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:25:42.801 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:25:42.801 [Thread-7] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:25:42.806 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:25:42.807 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:25:42.809 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:25:42.810 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:25:42.812 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:25:42.812 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:25:42.813 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:25:42.815 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:25:42.816 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-03 15:25:42.817 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-03 15:25:44.013 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 80545 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:25:44.014 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:25:44.014 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:25:44.431 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:25:44.460 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 5 JPA repository interfaces.
2025-11-03 15:25:44.746 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:25:44.747 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:25:44.748 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:25:44.748 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:25:44.760 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:25:44.760 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 743 ms
2025-11-03 15:25:44.954 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:25:44.955 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:25:44.955 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:25:45.044 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:25:45.045 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-03 15:25:45.048 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:25:45.048 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-03 15:25:45.049 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:25:45.265 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:25:45.265 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:25:45.266 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:25:45.266 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:25:45.266 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:25:45.266 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:25:45.267 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:25:45.270 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:25:45.273 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:25:45.276 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:25:45.277 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:25:45.280 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:25:45.282 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:25:45.285 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:25:45.287 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:25:45.289 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:25:45.292 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:25:45.295 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:25:45.748 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:25:46.001 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problem: 
	The method withDefaults() is undefined for the type SecurityConfig

2025-11-03 15:25:46.002 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:25:46.003 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:25:46.004 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:25:46.004 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:25:46.005 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:25:46.005 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:25:46.006 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:25:46.008 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:25:46.008 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-03 15:25:46.014 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-03 15:25:47.016 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 15:25:47.017 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 15:25:47.033 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 15:25:47.113 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problem: 
	The method withDefaults() is undefined for the type SecurityConfig

	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problem: 
	The method withDefaults() is undefined for the type SecurityConfig

	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:200)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:89)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problem: 
	The method withDefaults() is undefined for the type SecurityConfig

	at com.deliverytech.delivery.config.SecurityConfig.securityFilterChain(SecurityConfig.java:113)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$2(<generated>)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:172)
	... 27 common frames omitted
2025-11-03 15:26:16.783 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 80545 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:26:16.784 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:26:16.784 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:26:17.480 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:26:17.523 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 5 JPA repository interfaces.
2025-11-03 15:26:17.847 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:26:17.849 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:26:17.850 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:26:17.850 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:26:17.862 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:26:17.862 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1074 ms
2025-11-03 15:26:18.042 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:26:18.043 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:26:18.043 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:26:18.124 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:26:18.125 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-03 15:26:18.128 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:26:18.128 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-03 15:26:18.129 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:26:18.299 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:26:18.300 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:26:18.300 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:26:18.300 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:26:18.300 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:26:18.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:26:18.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:26:18.303 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:26:18.305 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:26:18.307 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:26:18.309 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:26:18.311 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:26:18.313 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:26:18.317 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:26:18.320 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:26:18.323 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:26:18.326 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:26:18.330 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:26:18.779 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:26:19.038 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:26:19.075 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:26:19.172 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:26:19.299 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:26:19.356 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:26:19.419 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:26:19.631 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:26:19.728 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:26:19.764 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:26:19.766 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:26:19.783 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.086 seconds (process running for 390.551)
2025-11-03 15:26:19.783 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:26:19.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:26:19.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:26:19.786 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:26:30.484 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:26:30.485 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:26:30.486 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:26:30.486 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:26:30.486 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:26:30.489 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@55ad2d93
2025-11-03 15:26:30.490 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1dcab115
2025-11-03 15:26:30.491 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:26:30.491 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-11-03 15:26:30.496 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:26:30.499 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:30.500 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:26:30.576 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:26:30.578 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:26:30.579 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:30.580 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:26:31.342 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:26:31.344 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:31.344 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:26:31.435 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:26:31.439 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:26:31.440 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:31.440 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:26:31.517 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 15:26:31.517 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 4 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 15:26:32.216 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:26:32.218 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:32.218 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:26:32.281 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:26:32.283 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:26:32.284 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:32.284 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:26:34.038 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:26:34.040 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:34.041 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:26:34.114 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:26:34.117 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:26:34.118 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:34.119 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:26:38.920 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:26:40.090 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:26:40.092 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:40.155 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:26:40.156 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:26:40.156 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:26:49.782 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:26:49.785 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:26:49.786 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:26:50.401 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:26:52.562 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:26:52.564 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:26:52.574 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:26:52.574 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:26:52.576 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:26:52.577 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:26:52.578 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:26:52.579 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:26:52.579 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:26:52.581 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:26:52.582 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-03 15:26:52.583 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-03 15:27:14.592 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:27:14.594 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:27:14.596 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:27:14.673 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 15:27:14.674 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 15:27:18.000 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:27:18.181 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 141 ms. Found 5 JPA repository interfaces.
2025-11-03 15:27:19.548 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:27:19.564 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:27:19.569 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:27:19.570 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:27:19.627 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:27:19.628 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4953 ms
2025-11-03 15:27:21.687 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:27:21.689 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:27:21.689 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:27:24.153 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:27:24.302 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 15:27:24.725 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:27:24.729 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 15:27:24.776 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:27:27.038 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:27:27.043 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:27:27.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:27:27.044 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:27:27.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:27:27.045 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:27:27.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:27:27.140 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:27:27.149 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:27:27.153 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:27:27.156 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:27:27.159 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:27:27.165 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:27:27.186 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:27:27.191 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:27:27.194 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:27:27.198 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:27:27.207 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:27:27.813 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 15:27:29.944 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:27:31.010 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:27:31.081 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:27:31.271 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:27:31.474 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:27:31.630 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:27:31.867 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:27:32.690 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:27:33.611 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:27:33.739 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:27:33.831 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:27:33.877 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 20.37 seconds (process running for 21.436)
2025-11-03 15:27:33.889 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:27:33.964 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:27:34.030 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:27:35.088 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:27:43.791 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:27:43.792 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:27:43.793 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:27:43.793 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:27:43.793 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:27:43.801 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@478b28d8
2025-11-03 15:27:43.803 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@61eebb62
2025-11-03 15:27:43.804 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:27:43.804 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 11 ms
2025-11-03 15:27:43.843 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:27:43.873 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:27:44.324 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:27:44.326 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:27:44.327 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:27:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:27:57.598 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:27:57.600 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:27:57.600 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:27:57.606 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:27:57.611 [http-nio-8080-exec-3] DEBUG [2ec94d639d8f4703] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:27:57.615 [http-nio-8080-exec-3] DEBUG [2ec94d639d8f4703] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:27:57.656 [http-nio-8080-exec-3] DEBUG [2ec94d639d8f4703] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:27:57.658 [http-nio-8080-exec-3] DEBUG [2ec94d639d8f4703] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:27:57.701 [http-nio-8080-exec-3] DEBUG [2ec94d639d8f4703] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:28:03.874 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:28:03.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:28:03.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:28:04.196 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:28:23.474 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:28:23.483 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:28:23.583 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:28:23.585 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:28:23.586 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:28:24.623 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 15:28:24.623 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 4 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 15:28:26.938 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:28:26.940 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:28:26.999 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:28:27.001 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:28:27.001 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:28:33.874 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:28:33.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:28:33.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:28:34.942 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:28:34.947 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:28:34.948 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:28:35.039 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:28:35.042 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:28:35.048 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:28:35.049 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:28:39.163 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:28:57.597 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:28:57.600 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:28:57.601 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:28:57.602 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:28:57.605 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:28:57.607 [http-nio-8080-exec-2] DEBUG [e0d1690647cf4622] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:28:57.611 [http-nio-8080-exec-2] DEBUG [e0d1690647cf4622] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:28:57.618 [http-nio-8080-exec-2] DEBUG [e0d1690647cf4622] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:28:57.619 [http-nio-8080-exec-2] DEBUG [e0d1690647cf4622] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:28:57.627 [http-nio-8080-exec-2] DEBUG [e0d1690647cf4622] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:29:03.874 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:29:03.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:29:03.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:29:14.687 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:29:33.873 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:29:33.874 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:29:33.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:29:36.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:29:57.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:29:57.593 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:29:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:29:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:29:57.595 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:29:57.596 [http-nio-8080-exec-5] DEBUG [b2df85a6a8d24084] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:29:57.597 [http-nio-8080-exec-5] DEBUG [b2df85a6a8d24084] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:29:57.599 [http-nio-8080-exec-5] DEBUG [b2df85a6a8d24084] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:29:57.601 [http-nio-8080-exec-5] DEBUG [b2df85a6a8d24084] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:29:57.605 [http-nio-8080-exec-5] DEBUG [b2df85a6a8d24084] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:30:03.873 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:30:03.874 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:30:03.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:30:29.841 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:30:33.873 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:30:33.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:30:33.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:30:35.664 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:30:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:30:57.620 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:30:57.621 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:30:57.622 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:30:57.625 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:30:57.625 [http-nio-8080-exec-6] DEBUG [21cfe3285fa54f11] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:30:57.626 [http-nio-8080-exec-6] DEBUG [21cfe3285fa54f11] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:30:57.628 [http-nio-8080-exec-6] DEBUG [21cfe3285fa54f11] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:30:57.628 [http-nio-8080-exec-6] DEBUG [21cfe3285fa54f11] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:30:57.636 [http-nio-8080-exec-6] DEBUG [21cfe3285fa54f11] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:31:03.874 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:31:03.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:31:03.878 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:31:05.603 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:31:33.873 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:31:33.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:31:33.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:31:34.851 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:31:57.599 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:31:57.601 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:31:57.603 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:31:57.603 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:31:57.605 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:31:57.608 [http-nio-8080-exec-7] DEBUG [e70044f7d38540ca] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:31:57.609 [http-nio-8080-exec-7] DEBUG [e70044f7d38540ca] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:31:57.612 [http-nio-8080-exec-7] DEBUG [e70044f7d38540ca] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:31:57.613 [http-nio-8080-exec-7] DEBUG [e70044f7d38540ca] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:31:57.615 [http-nio-8080-exec-7] DEBUG [e70044f7d38540ca] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:32:03.873 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:32:03.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:32:03.876 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:32:06.100 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:32:33.873 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:32:33.874 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:32:33.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:32:37.210 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:32:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:32:57.592 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:32:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:32:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:32:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:32:57.594 [http-nio-8080-exec-8] DEBUG [7dfae89619ed4a05] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:32:57.595 [http-nio-8080-exec-8] DEBUG [7dfae89619ed4a05] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:32:57.596 [http-nio-8080-exec-8] DEBUG [7dfae89619ed4a05] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:32:57.596 [http-nio-8080-exec-8] DEBUG [7dfae89619ed4a05] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:32:57.598 [http-nio-8080-exec-8] DEBUG [7dfae89619ed4a05] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:32:59.939 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:32:59.967 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:32:59.981 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:32:59.995 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:32:59.996 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:33:00.012 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:00.021 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:00.036 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:00.045 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:00.053 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:00.057 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:00.061 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:00.080 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:33:00.082 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 15:33:00.090 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 15:33:00.881 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:33:00.882 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:33:00.882 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:33:01.383 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:33:01.422 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 5 JPA repository interfaces.
2025-11-03 15:33:01.715 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:33:01.717 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:33:01.717 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:33:01.718 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:33:01.732 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:33:01.733 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 848 ms
2025-11-03 15:33:01.991 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:33:01.991 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:33:01.991 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:33:02.081 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:33:02.082 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-03 15:33:02.085 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:33:02.085 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-03 15:33:02.086 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:33:02.419 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:02.420 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:02.420 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:02.420 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:02.421 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:02.421 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:02.422 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:33:02.429 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:33:02.432 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:33:02.435 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:33:02.437 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:33:02.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:33:02.440 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:33:02.443 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:33:02.445 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:33:02.449 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:02.451 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:02.454 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:02.479 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
2025-11-03 15:33:02.479 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:02.480 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:02.481 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:02.482 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:02.484 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:02.484 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:02.487 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:02.488 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:33:02.489 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-03 15:33:02.490 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-03 15:33:03.491 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 15:33:03.492 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 15:33:03.506 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 15:33:03.527 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:321)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:309)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:146)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:318)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problem: 
	The method withDefaults() is undefined for the type HttpBasicConfigurer<HttpSecurity>

	at com.deliverytech.delivery.config.SecurityConfig.<init>(SecurityConfig.java:55)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.<init>(<generated>)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:210)
	... 26 common frames omitted
2025-11-03 15:33:25.150 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:33:25.150 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:33:25.150 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:33:25.753 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:33:25.780 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-03 15:33:26.113 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:33:26.116 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:33:26.117 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:33:26.117 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:33:26.144 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:33:26.144 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 992 ms
2025-11-03 15:33:26.463 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:33:26.463 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:33:26.463 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:33:26.630 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:33:26.631 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-03 15:33:26.634 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:33:26.634 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-03 15:33:26.635 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:33:26.830 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:26.831 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:26.831 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:26.831 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:26.832 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:26.832 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:26.833 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:33:26.835 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:33:26.838 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:33:26.840 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:33:26.842 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:33:26.843 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:33:26.846 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:33:26.848 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:33:26.851 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:33:26.853 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:26.857 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:26.860 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:26.881 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
2025-11-03 15:33:26.882 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:26.882 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:26.883 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:26.884 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:26.885 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:26.886 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:26.886 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:26.888 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:33:26.888 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-03 15:33:26.921 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-03 15:33:27.922 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 15:33:27.922 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 15:33:27.942 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 15:33:27.946 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:321)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:309)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:146)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:318)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problem: 
	The method withDefaults() is undefined for the type HttpBasicConfigurer<HttpSecurity>

	at com.deliverytech.delivery.config.SecurityConfig.<init>(SecurityConfig.java:56)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.<init>(<generated>)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:210)
	... 26 common frames omitted
2025-11-03 15:33:30.410 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:33:30.410 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:33:30.410 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:33:30.996 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:33:31.043 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 5 JPA repository interfaces.
2025-11-03 15:33:31.291 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:33:31.292 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:33:31.292 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:33:31.292 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:33:31.305 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:33:31.305 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 892 ms
2025-11-03 15:33:31.601 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:33:31.601 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:33:31.601 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:33:31.679 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:33:31.680 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-03 15:33:31.684 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn27: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:33:31.684 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-03 15:33:31.685 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:33:31.910 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:31.910 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:31.911 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:31.911 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:31.911 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:31.911 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:31.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:33:31.914 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:33:31.915 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:33:31.918 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:33:31.920 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:33:31.922 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:33:31.924 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:33:31.928 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:33:31.930 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:33:31.932 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:31.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:31.938 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:31.954 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
2025-11-03 15:33:31.954 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:31.954 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:31.955 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:31.956 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:31.957 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:31.957 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:31.957 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:31.959 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:33:31.959 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-03 15:33:31.984 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-03 15:33:32.985 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 15:33:32.986 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 15:33:33.014 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 15:33:33.029 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:321)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:309)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:146)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:318)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problem: 
	The method withDefaults() is undefined for the type HttpBasicConfigurer<HttpSecurity>

	at com.deliverytech.delivery.config.SecurityConfig.<init>(SecurityConfig.java:56)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.<init>(<generated>)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:210)
	... 26 common frames omitted
2025-11-03 15:33:35.520 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:33:35.520 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:33:35.520 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:33:35.975 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:33:36.008 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 5 JPA repository interfaces.
2025-11-03 15:33:36.254 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:33:36.255 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:33:36.255 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:33:36.256 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:33:36.269 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:33:36.269 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 747 ms
2025-11-03 15:33:36.635 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:33:36.636 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:33:36.636 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:33:36.730 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:33:36.732 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-03 15:33:36.734 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn34: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:33:36.734 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-03 15:33:36.735 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:33:36.890 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:36.891 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:36.891 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:36.891 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:36.892 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:36.892 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:36.894 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:33:36.896 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:33:36.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:33:36.900 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:33:36.902 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:33:36.904 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:33:36.906 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:33:36.908 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:33:36.910 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:33:36.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:36.916 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:36.919 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:36.942 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
2025-11-03 15:33:36.943 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:36.943 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:36.944 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:36.945 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:36.945 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:36.946 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:36.947 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:36.948 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:33:36.948 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-03 15:33:36.963 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-03 15:33:37.964 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 15:33:37.965 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 15:33:37.983 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 15:33:37.986 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:321)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:309)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:146)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:318)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problem: 
	The method withDefaults() is undefined for the type HttpBasicConfigurer<HttpSecurity>

	at com.deliverytech.delivery.config.SecurityConfig.<init>(SecurityConfig.java:55)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.<init>(<generated>)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:210)
	... 26 common frames omitted
2025-11-03 15:33:42.452 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:33:42.452 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:33:42.453 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:33:42.990 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:33:43.016 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 15:33:43.214 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:33:43.215 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:33:43.215 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:33:43.215 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:33:43.227 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:33:43.227 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 773 ms
2025-11-03 15:33:43.410 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:33:43.410 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:33:43.410 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:33:43.484 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:33:43.485 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-03 15:33:43.487 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn39: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:33:43.487 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-03 15:33:43.488 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:33:43.680 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:33:43.681 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:33:43.681 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:33:43.681 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:33:43.681 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:33:43.682 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:33:43.683 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:33:43.685 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:33:43.687 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:33:43.689 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:33:43.691 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:33:43.692 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:33:43.695 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:33:43.697 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:33:43.700 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:33:43.702 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:43.703 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:33:43.706 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:33:44.203 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:33:44.493 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:33:44.538 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:33:44.649 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:33:44.782 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:33:44.848 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:33:44.938 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:33:45.225 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:33:45.420 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:33:45.488 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:33:45.495 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:33:45.518 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.103 seconds (process running for 393.078)
2025-11-03 15:33:45.528 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:33:45.530 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:33:45.531 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:33:45.534 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:33:46.302 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:33:57.591 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:33:57.591 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:33:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:33:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:33:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:33:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@346453fc
2025-11-03 15:33:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@494c8b5d
2025-11-03 15:33:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:33:57.594 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-03 15:33:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:33:57.599 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:33:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:33:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:33:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:33:57.604 [http-nio-8080-exec-1] DEBUG [0868223d26c44c42] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:33:57.605 [http-nio-8080-exec-1] DEBUG [0868223d26c44c42] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:33:57.610 [http-nio-8080-exec-1] DEBUG [0868223d26c44c42] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:33:57.610 [http-nio-8080-exec-1] DEBUG [0868223d26c44c42] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:33:57.616 [http-nio-8080-exec-1] DEBUG [0868223d26c44c42] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:34:15.517 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:34:15.518 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:34:15.518 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:34:57.594 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:34:57.595 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:34:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:34:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:34:57.598 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:34:57.599 [http-nio-8080-exec-2] DEBUG [8a77af451b444487] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:34:57.600 [http-nio-8080-exec-2] DEBUG [8a77af451b444487] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:34:57.602 [http-nio-8080-exec-2] DEBUG [8a77af451b444487] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:34:57.602 [http-nio-8080-exec-2] DEBUG [8a77af451b444487] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:34:57.604 [http-nio-8080-exec-2] DEBUG [8a77af451b444487] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:35:05.344 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:35:05.347 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:35:05.348 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:35:05.349 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:35:05.349 [Thread-7] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:35:08.481 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:35:08.488 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:35:08.488 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:35:08.490 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:35:08.490 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:35:08.491 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:35:08.492 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:35:08.493 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:35:08.494 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:35:08.496 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-03 15:35:08.498 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-03 15:35:09.739 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:35:09.740 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:35:09.740 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:35:10.392 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:35:10.419 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-03 15:35:10.637 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:35:10.638 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:35:10.638 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:35:10.639 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:35:10.650 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:35:10.650 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 908 ms
2025-11-03 15:35:10.881 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:35:10.882 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:35:10.882 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:35:10.979 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:35:10.980 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-03 15:35:10.983 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn49: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:35:10.983 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-03 15:35:10.984 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:35:11.171 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:35:11.172 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:35:11.172 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:35:11.172 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:35:11.172 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:35:11.172 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:35:11.173 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:35:11.174 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:35:11.175 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:35:11.177 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:35:11.179 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:35:11.181 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:35:11.183 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:35:11.185 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:35:11.187 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:35:11.189 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:35:11.191 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:35:11.194 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:35:11.687 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:35:11.943 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:35:11.996 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:35:12.085 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:35:12.191 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:35:12.238 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:35:12.285 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:35:12.425 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:35:12.495 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:35:12.526 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:35:12.529 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:35:12.543 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:35:12.544 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.849 seconds (process running for 480.103)
2025-11-03 15:35:12.545 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:35:12.546 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:35:12.548 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:35:23.963 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:35:23.966 [Thread-24] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:35:23.966 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:35:23.967 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:35:23.968 [Thread-24] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:35:41.493 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:35:41.499 [Thread-24] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:35:41.499 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:35:41.501 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:35:41.503 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:35:41.504 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:35:41.504 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:35:41.506 [Thread-24] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:35:41.509 [Thread-24] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:35:41.510 [Thread-24] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-03 15:35:41.512 [Thread-24] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-03 15:35:42.696 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:35:42.696 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:35:42.696 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:35:43.252 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:35:43.285 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 5 JPA repository interfaces.
2025-11-03 15:35:43.485 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:35:43.486 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:35:43.486 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:35:43.487 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:35:43.499 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:35:43.499 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 801 ms
2025-11-03 15:35:43.805 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:35:43.805 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:35:43.806 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:35:43.924 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:35:43.925 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-03 15:35:43.927 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn59: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:35:43.928 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-03 15:35:43.928 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:35:44.095 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:35:44.096 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:35:44.096 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:35:44.096 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:35:44.096 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:35:44.097 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:35:44.097 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:35:44.099 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:35:44.101 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:35:44.103 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:35:44.104 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:35:44.106 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:35:44.107 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:35:44.109 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:35:44.111 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:35:44.113 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:35:44.116 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:35:44.119 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:35:44.556 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 15:35:44.827 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:35:44.865 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:35:44.955 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:35:45.094 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:35:45.150 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:35:45.204 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:35:45.370 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:35:45.444 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:35:45.479 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:35:45.483 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:35:45.501 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:35:45.502 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.843 seconds (process running for 513.061)
2025-11-03 15:35:45.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:35:45.503 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:35:45.506 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:35:50.880 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:35:51.886 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 15:35:51.886 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 15:35:57.591 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:35:57.591 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:35:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:35:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:35:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:35:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1f0c232f
2025-11-03 15:35:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@309341f9
2025-11-03 15:35:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:35:57.594 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-03 15:35:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:35:57.599 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:35:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:35:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:35:57.602 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:35:57.603 [http-nio-8080-exec-1] DEBUG [e5fe26cfab264e65] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:35:57.604 [http-nio-8080-exec-1] DEBUG [e5fe26cfab264e65] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:35:57.609 [http-nio-8080-exec-1] DEBUG [e5fe26cfab264e65] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:35:57.609 [http-nio-8080-exec-1] DEBUG [e5fe26cfab264e65] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:35:57.612 [http-nio-8080-exec-1] DEBUG [e5fe26cfab264e65] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:36:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:36:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:36:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:36:17.918 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:36:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:36:45.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:36:45.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:36:45.664 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:36:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:36:57.598 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:36:57.599 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:36:57.600 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:36:57.604 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:36:57.605 [http-nio-8080-exec-2] DEBUG [7e8bd731d0b54c7b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:36:57.607 [http-nio-8080-exec-2] DEBUG [7e8bd731d0b54c7b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:36:57.611 [http-nio-8080-exec-2] DEBUG [7e8bd731d0b54c7b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:36:57.612 [http-nio-8080-exec-2] DEBUG [7e8bd731d0b54c7b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:36:57.615 [http-nio-8080-exec-2] DEBUG [7e8bd731d0b54c7b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:37:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:37:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:37:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:37:55.697 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:37:55.698 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:37:55.700 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:37:55.701 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:37:56.964 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:37:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:37:57.593 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:37:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:37:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:37:57.600 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:37:57.601 [http-nio-8080-exec-3] DEBUG [2c6b02c2398a4a94] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:37:57.601 [http-nio-8080-exec-3] DEBUG [2c6b02c2398a4a94] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:37:57.603 [http-nio-8080-exec-3] DEBUG [2c6b02c2398a4a94] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:37:57.604 [http-nio-8080-exec-3] DEBUG [2c6b02c2398a4a94] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:37:57.613 [http-nio-8080-exec-3] DEBUG [2c6b02c2398a4a94] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:38:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:38:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:38:15.503 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:38:15.640 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:38:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:38:45.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:38:45.503 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:38:46.325 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:38:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:38:57.594 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:38:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:38:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:38:57.595 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:38:57.595 [http-nio-8080-exec-4] DEBUG [198e140d346a4401] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:38:57.596 [http-nio-8080-exec-4] DEBUG [198e140d346a4401] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:38:57.597 [http-nio-8080-exec-4] DEBUG [198e140d346a4401] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:38:57.597 [http-nio-8080-exec-4] DEBUG [198e140d346a4401] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:38:57.599 [http-nio-8080-exec-4] DEBUG [198e140d346a4401] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:39:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:39:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:39:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:39:17.776 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:39:36.416 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:39:36.417 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:39:36.417 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:36.417 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:36.433 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:39:36.439 [http-nio-8080-exec-5] DEBUG [373fd31ecef0462c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:39:36.440 [http-nio-8080-exec-5] DEBUG [373fd31ecef0462c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:39:36.442 [http-nio-8080-exec-5] DEBUG [373fd31ecef0462c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:39:36.442 [http-nio-8080-exec-5] DEBUG [373fd31ecef0462c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:39:36.445 [http-nio-8080-exec-5] DEBUG [373fd31ecef0462c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:39:39.208 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:39:39.209 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:39:39.210 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:39.210 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:39.211 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:39:39.212 [http-nio-8080-exec-6] DEBUG [f9b98cfc4f5a40cc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:39:39.212 [http-nio-8080-exec-6] DEBUG [f9b98cfc4f5a40cc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:39:39.214 [http-nio-8080-exec-6] DEBUG [f9b98cfc4f5a40cc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:39:39.214 [http-nio-8080-exec-6] DEBUG [f9b98cfc4f5a40cc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:39:39.216 [http-nio-8080-exec-6] DEBUG [f9b98cfc4f5a40cc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:39:39.580 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard
2025-11-03 15:39:39.581 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:39:39.582 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:39.582 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:39.583 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard
2025-11-03 15:39:39.583 [http-nio-8080-exec-7] DEBUG [b38591f5d84c4c3b] o.s.web.servlet.DispatcherServlet - GET "/dashboard", parameters={}
2025-11-03 15:39:39.584 [http-nio-8080-exec-7] DEBUG [b38591f5d84c4c3b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#dashboard()
2025-11-03 15:39:39.724 [http-nio-8080-exec-7] DEBUG [b38591f5d84c4c3b] o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-11-03 15:39:40.062 [http-nio-8080-exec-7] DEBUG [b38591f5d84c4c3b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:39:40.889 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:39:40.889 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:39:40.890 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:40.890 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:40.891 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:39:40.892 [http-nio-8080-exec-8] DEBUG [93af918b95cb466f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:39:40.892 [http-nio-8080-exec-8] DEBUG [93af918b95cb466f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:39:40.894 [http-nio-8080-exec-8] DEBUG [93af918b95cb466f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:39:40.894 [http-nio-8080-exec-8] DEBUG [93af918b95cb466f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:39:40.896 [http-nio-8080-exec-8] DEBUG [93af918b95cb466f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:39:40.974 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:39:40.975 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:39:40.976 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:40.976 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:39:45.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:39:45.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:39:46.591 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:39:46.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:39:46.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:46.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:46.594 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:39:46.595 [http-nio-8080-exec-10] DEBUG [ae20dd6182ff4e42] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:39:46.595 [http-nio-8080-exec-10] DEBUG [ae20dd6182ff4e42] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:39:46.598 [http-nio-8080-exec-10] DEBUG [ae20dd6182ff4e42] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:39:46.598 [http-nio-8080-exec-10] DEBUG [ae20dd6182ff4e42] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:39:46.599 [http-nio-8080-exec-10] DEBUG [ae20dd6182ff4e42] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:39:48.110 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:39:48.294 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:39:48.296 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:48.296 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:48.383 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:39:48.385 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:39:48.387 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:48.387 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:51.590 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:39:51.592 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:39:51.593 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:51.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:51.595 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:39:51.595 [http-nio-8080-exec-3] DEBUG [c9fc60e14deb4af6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:39:51.596 [http-nio-8080-exec-3] DEBUG [c9fc60e14deb4af6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:39:51.597 [http-nio-8080-exec-3] DEBUG [c9fc60e14deb4af6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:39:51.597 [http-nio-8080-exec-3] DEBUG [c9fc60e14deb4af6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:39:51.598 [http-nio-8080-exec-3] DEBUG [c9fc60e14deb4af6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:39:56.593 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:39:56.594 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:39:56.595 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:39:56.595 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:39:56.597 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:39:56.597 [http-nio-8080-exec-4] DEBUG [167bcfd6e19c487e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:39:56.598 [http-nio-8080-exec-4] DEBUG [167bcfd6e19c487e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:39:56.600 [http-nio-8080-exec-4] DEBUG [167bcfd6e19c487e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:39:56.601 [http-nio-8080-exec-4] DEBUG [167bcfd6e19c487e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:39:56.604 [http-nio-8080-exec-4] DEBUG [167bcfd6e19c487e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:01.606 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:01.607 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:01.608 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:01.609 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:01.613 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:01.615 [http-nio-8080-exec-5] DEBUG [68f79a30eff64a9d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:01.615 [http-nio-8080-exec-5] DEBUG [68f79a30eff64a9d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:01.617 [http-nio-8080-exec-5] DEBUG [68f79a30eff64a9d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:01.617 [http-nio-8080-exec-5] DEBUG [68f79a30eff64a9d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:01.618 [http-nio-8080-exec-5] DEBUG [68f79a30eff64a9d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:06.590 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:06.591 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:06.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:06.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:06.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:06.593 [http-nio-8080-exec-6] DEBUG [84dc5f1a633f4686] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:06.594 [http-nio-8080-exec-6] DEBUG [84dc5f1a633f4686] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:06.595 [http-nio-8080-exec-6] DEBUG [84dc5f1a633f4686] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:06.602 [http-nio-8080-exec-6] DEBUG [84dc5f1a633f4686] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:06.605 [http-nio-8080-exec-6] DEBUG [84dc5f1a633f4686] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:11.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:11.593 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:11.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:11.595 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:11.597 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:11.607 [http-nio-8080-exec-7] DEBUG [af1b95fa05384330] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:11.609 [http-nio-8080-exec-7] DEBUG [af1b95fa05384330] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:11.612 [http-nio-8080-exec-7] DEBUG [af1b95fa05384330] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:11.614 [http-nio-8080-exec-7] DEBUG [af1b95fa05384330] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:11.616 [http-nio-8080-exec-7] DEBUG [af1b95fa05384330] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:40:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:40:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:40:16.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:16.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:16.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:16.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:16.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:16.595 [http-nio-8080-exec-8] DEBUG [36877b0803b54e0e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:16.596 [http-nio-8080-exec-8] DEBUG [36877b0803b54e0e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:16.598 [http-nio-8080-exec-8] DEBUG [36877b0803b54e0e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:16.598 [http-nio-8080-exec-8] DEBUG [36877b0803b54e0e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:16.604 [http-nio-8080-exec-8] DEBUG [36877b0803b54e0e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:21.590 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:21.591 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:21.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:21.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:21.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:21.594 [http-nio-8080-exec-9] DEBUG [adaccd79e2ec4712] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:21.594 [http-nio-8080-exec-9] DEBUG [adaccd79e2ec4712] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:21.595 [http-nio-8080-exec-9] DEBUG [adaccd79e2ec4712] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:21.595 [http-nio-8080-exec-9] DEBUG [adaccd79e2ec4712] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:21.596 [http-nio-8080-exec-9] DEBUG [adaccd79e2ec4712] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:26.591 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:26.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:26.594 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:26.595 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:26.597 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:26.599 [http-nio-8080-exec-10] DEBUG [c9e63e294e904441] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:26.600 [http-nio-8080-exec-10] DEBUG [c9e63e294e904441] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:26.603 [http-nio-8080-exec-10] DEBUG [c9e63e294e904441] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:26.607 [http-nio-8080-exec-10] DEBUG [c9e63e294e904441] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:26.619 [http-nio-8080-exec-10] DEBUG [c9e63e294e904441] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:31.480 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:40:31.590 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:31.590 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:31.591 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:31.591 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:31.592 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:31.592 [http-nio-8080-exec-1] DEBUG [08500b1a66f6499e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:31.592 [http-nio-8080-exec-1] DEBUG [08500b1a66f6499e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:31.593 [http-nio-8080-exec-1] DEBUG [08500b1a66f6499e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:31.594 [http-nio-8080-exec-1] DEBUG [08500b1a66f6499e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:31.595 [http-nio-8080-exec-1] DEBUG [08500b1a66f6499e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:36.590 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:36.591 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:36.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:36.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:36.593 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:36.593 [http-nio-8080-exec-2] DEBUG [98a7cb2bc9574685] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:36.594 [http-nio-8080-exec-2] DEBUG [98a7cb2bc9574685] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:36.595 [http-nio-8080-exec-2] DEBUG [98a7cb2bc9574685] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:36.595 [http-nio-8080-exec-2] DEBUG [98a7cb2bc9574685] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:36.596 [http-nio-8080-exec-2] DEBUG [98a7cb2bc9574685] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:41.590 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:41.591 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:41.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:41.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:41.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:41.592 [http-nio-8080-exec-4] DEBUG [e5160ae7219c4a87] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:41.593 [http-nio-8080-exec-4] DEBUG [e5160ae7219c4a87] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:41.594 [http-nio-8080-exec-4] DEBUG [e5160ae7219c4a87] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:41.594 [http-nio-8080-exec-4] DEBUG [e5160ae7219c4a87] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:41.595 [http-nio-8080-exec-4] DEBUG [e5160ae7219c4a87] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:40:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:40:45.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:40:45.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:40:46.820 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:40:57.594 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:40:57.596 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:40:57.597 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:40:57.598 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:40:57.600 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:40:57.601 [http-nio-8080-exec-5] DEBUG [fa99c8a52c314adb] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:40:57.602 [http-nio-8080-exec-5] DEBUG [fa99c8a52c314adb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:40:57.605 [http-nio-8080-exec-5] DEBUG [fa99c8a52c314adb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:40:57.605 [http-nio-8080-exec-5] DEBUG [fa99c8a52c314adb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:40:57.606 [http-nio-8080-exec-5] DEBUG [fa99c8a52c314adb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:41:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:41:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:41:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:41:35.040 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:41:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:41:45.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:41:45.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:41:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:41:57.598 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:41:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:41:57.599 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:41:57.601 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:41:57.602 [http-nio-8080-exec-6] DEBUG [5c32b26b34a944b2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:41:57.604 [http-nio-8080-exec-6] DEBUG [5c32b26b34a944b2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:41:57.607 [http-nio-8080-exec-6] DEBUG [5c32b26b34a944b2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:41:57.609 [http-nio-8080-exec-6] DEBUG [5c32b26b34a944b2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:41:57.611 [http-nio-8080-exec-6] DEBUG [5c32b26b34a944b2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:41:58.771 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:42:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:42:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:42:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:42:36.508 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:42:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:42:45.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:42:45.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:42:55.044 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:42:57.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:42:57.592 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:42:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:42:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:42:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:42:57.596 [http-nio-8080-exec-7] DEBUG [1b08d1c4bfc74c8f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:42:57.597 [http-nio-8080-exec-7] DEBUG [1b08d1c4bfc74c8f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:42:57.600 [http-nio-8080-exec-7] DEBUG [1b08d1c4bfc74c8f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:42:57.602 [http-nio-8080-exec-7] DEBUG [1b08d1c4bfc74c8f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:42:57.603 [http-nio-8080-exec-7] DEBUG [1b08d1c4bfc74c8f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:43:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:43:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:43:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:43:30.135 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:43:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:43:45.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:43:45.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:43:57.595 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:43:57.595 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:43:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:43:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:43:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:43:57.597 [http-nio-8080-exec-8] DEBUG [f2da636d97304012] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:43:57.598 [http-nio-8080-exec-8] DEBUG [f2da636d97304012] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:43:57.599 [http-nio-8080-exec-8] DEBUG [f2da636d97304012] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:43:57.600 [http-nio-8080-exec-8] DEBUG [f2da636d97304012] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:43:57.601 [http-nio-8080-exec-8] DEBUG [f2da636d97304012] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:44:11.387 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:44:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:44:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:44:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:44:32.150 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:44:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:44:45.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:44:45.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:44:48.813 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:44:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:44:57.593 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:44:57.594 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:44:57.594 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:44:57.595 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:44:57.596 [http-nio-8080-exec-9] DEBUG [58c908042f11489f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:44:57.596 [http-nio-8080-exec-9] DEBUG [58c908042f11489f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:44:57.598 [http-nio-8080-exec-9] DEBUG [58c908042f11489f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:44:57.599 [http-nio-8080-exec-9] DEBUG [58c908042f11489f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:44:57.601 [http-nio-8080-exec-9] DEBUG [58c908042f11489f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:45:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:45:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:45:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:45:17.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:45:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:45:45.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:45:45.503 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:45:46.482 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:45:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:45:57.597 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:45:57.598 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:45:57.599 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:45:57.600 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:45:57.601 [http-nio-8080-exec-10] DEBUG [e797578d56084b3d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:45:57.601 [http-nio-8080-exec-10] DEBUG [e797578d56084b3d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:45:57.603 [http-nio-8080-exec-10] DEBUG [e797578d56084b3d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:45:57.604 [http-nio-8080-exec-10] DEBUG [e797578d56084b3d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:45:57.609 [http-nio-8080-exec-10] DEBUG [e797578d56084b3d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:46:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:46:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:46:15.503 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:46:16.656 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:46:45.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:46:45.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:46:45.503 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:46:47.088 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:46:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:46:57.594 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:46:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:46:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:46:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:46:57.596 [http-nio-8080-exec-1] DEBUG [9f735afb2c3b4388] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:46:57.597 [http-nio-8080-exec-1] DEBUG [9f735afb2c3b4388] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:46:57.598 [http-nio-8080-exec-1] DEBUG [9f735afb2c3b4388] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:46:57.599 [http-nio-8080-exec-1] DEBUG [9f735afb2c3b4388] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:46:57.601 [http-nio-8080-exec-1] DEBUG [9f735afb2c3b4388] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:47:15.500 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:47:15.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:47:15.502 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:47:47.592 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:47:47.593 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:47:47.594 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:47:47.594 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:47:55.157 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:47:55.160 [Thread-28] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:47:55.161 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:47:55.162 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:47:55.162 [Thread-28] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:48:09.265 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:48:09.270 [Thread-28] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:48:09.270 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:48:09.273 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:48:09.274 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:48:09.275 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:48:09.276 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:48:09.277 [Thread-28] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:48:09.281 [Thread-28] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:48:09.282 [Thread-28] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-03 15:48:09.285 [Thread-28] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-03 15:48:10.328 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:48:10.328 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:48:10.328 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:48:10.923 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:48:10.952 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-11-03 15:48:11.229 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:48:11.231 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:48:11.232 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:48:11.232 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:48:11.246 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:48:11.246 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 913 ms
2025-11-03 15:48:11.546 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:48:11.547 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:48:11.548 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:48:11.848 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:48:11.850 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-11-03 15:48:11.878 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn69: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:48:11.880 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-11-03 15:48:11.883 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:48:12.225 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:48:12.226 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:48:12.227 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:48:12.227 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:48:12.227 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:48:12.227 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:48:12.228 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:48:12.232 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:48:12.234 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:48:12.236 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:48:12.240 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:48:12.243 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:48:12.245 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:48:12.261 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:48:12.264 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:48:12.274 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:48:12.284 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:48:12.288 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:48:12.959 [restartedMain] WARN  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Found 2 UserDetailsService beans, with names [authService, userDetailsService]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-11-03 15:48:12.959 [restartedMain] DEBUG [] o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-11-03 15:48:13.414 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:48:13.457 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:48:13.582 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:48:13.752 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:48:13.755 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userDetailsService' defined in class path resource [com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Factory method 'userDetailsService' threw exception with message: Unresolved compilation problem: 
	User cannot be resolved

2025-11-03 15:48:13.756 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:48:13.757 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:48:13.757 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:48:13.759 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:48:13.760 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:48:13.760 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:48:13.761 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:48:13.762 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:48:13.763 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-11-03 15:48:13.765 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-11-03 15:48:14.766 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 15:48:14.767 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 15:48:14.787 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 15:48:14.792 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userDetailsService' defined in class path resource [com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Factory method 'userDetailsService' threw exception with message: Unresolved compilation problem: 
	User cannot be resolved

	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Factory method 'userDetailsService' threw exception with message: Unresolved compilation problem: 
	User cannot be resolved

	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:200)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:89)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problem: 
	User cannot be resolved

	at com.deliverytech.delivery.config.SecurityConfig.userDetailsService(SecurityConfig.java:141)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$userDetailsService$4(<generated>)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.userDetailsService(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:172)
	... 27 common frames omitted
2025-11-03 15:48:38.409 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:48:38.410 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:48:38.410 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:48:38.935 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:48:38.959 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 5 JPA repository interfaces.
2025-11-03 15:48:39.160 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:48:39.161 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:48:39.162 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:48:39.162 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:48:39.174 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:48:39.175 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 762 ms
2025-11-03 15:48:39.362 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:48:39.363 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:48:39.363 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:48:39.450 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:48:39.451 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-11-03 15:48:39.452 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn79: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:48:39.453 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-11-03 15:48:39.454 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:48:39.601 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:48:39.602 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:48:39.602 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:48:39.602 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:48:39.602 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:48:39.603 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:48:39.604 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:48:39.606 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:48:39.607 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:48:39.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:48:39.609 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:48:39.610 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:48:39.612 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:48:39.613 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:48:39.615 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:48:39.617 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:48:39.618 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:48:39.623 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:48:39.983 [restartedMain] WARN  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Found 2 UserDetailsService beans, with names [authService, userDetailsService]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-11-03 15:48:39.983 [restartedMain] DEBUG [] o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-11-03 15:48:40.433 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:48:40.477 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:48:40.578 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:48:40.693 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:48:40.933 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:48:40.981 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:48:41.179 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:48:41.259 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:48:41.291 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:48:41.293 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:48:41.308 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:48:41.310 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.969 seconds (process running for 1288.869)
2025-11-03 15:48:41.310 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:48:41.311 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:48:41.313 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:48:46.687 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:48:46.690 [Thread-32] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:48:46.691 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:48:46.693 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:48:46.694 [Thread-32] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:48:58.725 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:48:58.730 [Thread-32] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:48:58.730 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:48:58.732 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:48:58.732 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:48:58.733 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:48:58.735 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:48:58.735 [Thread-32] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:48:58.736 [Thread-32] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:48:58.737 [Thread-32] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-11-03 15:48:58.739 [Thread-32] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-11-03 15:48:59.972 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:48:59.973 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:48:59.973 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:49:00.437 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:49:00.463 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 15:49:00.677 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:49:00.678 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:49:00.679 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:49:00.679 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:49:00.691 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:49:00.691 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 714 ms
2025-11-03 15:49:00.946 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:49:00.947 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:49:00.947 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:49:01.050 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:49:01.051 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-11-03 15:49:01.058 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn89: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:49:01.059 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-11-03 15:49:01.060 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:49:01.272 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:49:01.272 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:49:01.273 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:49:01.273 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:49:01.273 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:49:01.274 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:49:01.275 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:49:01.277 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:49:01.279 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:49:01.281 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:49:01.283 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:49:01.283 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:49:01.285 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:49:01.287 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:49:01.289 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:49:01.291 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:49:01.293 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:49:01.296 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:49:01.949 [restartedMain] WARN  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Found 2 UserDetailsService beans, with names [authService, userDetailsService]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-11-03 15:49:01.950 [restartedMain] DEBUG [] o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-11-03 15:49:02.419 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:49:02.466 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:49:02.586 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:49:02.702 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:49:02.862 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:49:02.925 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:49:03.089 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:49:03.158 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:49:03.187 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:49:03.191 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:49:03.206 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:49:03.206 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.275 seconds (process running for 1310.765)
2025-11-03 15:49:03.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:49:03.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:49:03.209 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:49:03.243 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:49:03.243 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:49:03.243 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:49:03.243 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:49:03.243 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:49:03.246 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6de0d4a0
2025-11-03 15:49:03.249 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@75c59499
2025-11-03 15:49:03.250 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:49:03.251 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-11-03 15:49:03.253 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:49:03.257 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:03.258 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:03.348 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:49:03.349 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:49:03.350 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:03.350 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:22.002 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:49:31.042 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:49:31.045 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:31.046 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:31.161 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:49:31.162 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:49:31.162 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:31.162 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:31.905 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:49:31.908 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:31.909 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:31.979 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:49:31.980 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:49:31.980 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:31.981 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:32.586 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:49:32.589 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:32.590 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:32.662 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:49:32.667 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:49:32.667 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:32.669 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:32.939 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:49:32.941 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:32.942 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:33.060 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:49:33.061 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:49:33.062 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:33.062 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:33.134 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:49:33.135 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:33.136 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:33.199 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:49:33.200 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:49:33.200 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:33.200 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:33.205 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:49:33.206 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:49:33.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:49:33.677 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 15:49:33.677 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 4 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 15:49:46.565 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:49:57.594 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:49:57.595 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:49:57.596 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:49:57.596 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:49:57.598 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:49:57.600 [http-nio-8080-exec-5] DEBUG [7a42e2d531a44af5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:49:57.601 [http-nio-8080-exec-5] DEBUG [7a42e2d531a44af5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:49:57.611 [http-nio-8080-exec-5] DEBUG [7a42e2d531a44af5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:49:57.612 [http-nio-8080-exec-5] DEBUG [7a42e2d531a44af5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:49:57.618 [http-nio-8080-exec-5] DEBUG [7a42e2d531a44af5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:50:03.205 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:50:03.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:50:03.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:50:04.760 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:50:33.205 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:50:33.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:50:33.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:50:34.595 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:50:57.595 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:50:57.596 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:50:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:50:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:50:57.599 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:50:57.600 [http-nio-8080-exec-6] DEBUG [a371779348434b89] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:50:57.600 [http-nio-8080-exec-6] DEBUG [a371779348434b89] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:50:57.602 [http-nio-8080-exec-6] DEBUG [a371779348434b89] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:50:57.603 [http-nio-8080-exec-6] DEBUG [a371779348434b89] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:50:57.605 [http-nio-8080-exec-6] DEBUG [a371779348434b89] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:51:03.205 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:51:03.206 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:51:03.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:51:22.032 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:51:33.205 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:51:33.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:51:33.209 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:51:57.597 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:51:57.598 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:51:57.599 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:51:57.600 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:51:57.602 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:51:57.602 [http-nio-8080-exec-7] DEBUG [01ea1bf539c242ae] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:51:57.604 [http-nio-8080-exec-7] DEBUG [01ea1bf539c242ae] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:51:57.608 [http-nio-8080-exec-7] DEBUG [01ea1bf539c242ae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:51:57.608 [http-nio-8080-exec-7] DEBUG [01ea1bf539c242ae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:51:57.611 [http-nio-8080-exec-7] DEBUG [01ea1bf539c242ae] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:52:07.858 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:52:07.860 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:52:07.861 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:52:07.863 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:52:10.188 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:52:33.205 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:52:33.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:52:33.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:52:34.323 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:52:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:52:57.595 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:52:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:52:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:52:57.598 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:52:57.599 [http-nio-8080-exec-8] DEBUG [2f6b38b3184a471f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:52:57.599 [http-nio-8080-exec-8] DEBUG [2f6b38b3184a471f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:52:57.602 [http-nio-8080-exec-8] DEBUG [2f6b38b3184a471f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:52:57.604 [http-nio-8080-exec-8] DEBUG [2f6b38b3184a471f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:52:57.606 [http-nio-8080-exec-8] DEBUG [2f6b38b3184a471f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:53:03.205 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:53:03.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:53:03.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:53:16.092 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:53:33.205 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:53:33.206 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:53:33.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:53:34.215 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:53:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:53:57.592 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:53:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:53:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:53:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:53:57.594 [http-nio-8080-exec-9] DEBUG [c0b127c2ae7d452d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:53:57.594 [http-nio-8080-exec-9] DEBUG [c0b127c2ae7d452d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:53:57.597 [http-nio-8080-exec-9] DEBUG [c0b127c2ae7d452d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:53:57.598 [http-nio-8080-exec-9] DEBUG [c0b127c2ae7d452d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:53:57.599 [http-nio-8080-exec-9] DEBUG [c0b127c2ae7d452d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:54:03.205 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:54:03.206 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:54:03.207 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:54:03.929 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:54:21.499 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:54:21.502 [Thread-39] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:54:21.504 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:54:21.505 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:54:21.506 [Thread-39] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:54:21.515 [Thread-39] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:54:21.515 [Thread-39] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:54:21.517 [Thread-39] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:54:21.517 [Thread-39] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:54:21.518 [Thread-39] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:54:21.518 [Thread-39] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:54:21.519 [Thread-39] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:54:21.520 [Thread-39] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:54:21.521 [Thread-39] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-11-03 15:54:21.523 [Thread-39] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-11-03 15:54:21.920 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:54:21.921 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:54:21.921 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:54:22.390 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:54:22.420 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-03 15:54:22.658 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:54:22.660 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:54:22.661 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:54:22.661 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:54:22.674 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:54:22.674 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 751 ms
2025-11-03 15:54:22.902 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:54:22.902 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:54:22.902 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:54:23.000 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:54:23.001 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-11-03 15:54:23.003 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn99: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:54:23.004 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-11-03 15:54:23.005 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:54:23.181 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:54:23.182 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:54:23.182 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:54:23.182 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:54:23.182 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:54:23.182 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:54:23.183 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:54:23.185 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:54:23.186 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:54:23.187 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:54:23.188 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:54:23.191 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:54:23.192 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:54:23.194 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:54:23.195 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:54:23.197 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:54:23.198 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:54:23.205 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:54:23.552 [restartedMain] WARN  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Found 2 UserDetailsService beans, with names [authService, userDetailsService]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-11-03 15:54:23.552 [restartedMain] DEBUG [] o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-11-03 15:54:23.889 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:54:23.932 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:54:24.039 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:54:24.146 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:54:24.308 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:54:24.364 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:54:24.542 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:54:24.621 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:54:24.654 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:54:24.657 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:54:24.673 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:54:24.674 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.796 seconds (process running for 1632.233)
2025-11-03 15:54:24.678 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:54:24.678 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:54:24.680 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:54:32.733 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:54:32.734 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:54:32.734 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:54:32.734 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:54:32.734 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:54:32.737 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6409c496
2025-11-03 15:54:32.739 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4a988600
2025-11-03 15:54:32.739 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:54:32.739 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 15:54:32.743 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:32.753 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:32.754 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:32.755 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:32.846 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:32.847 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:32.848 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:32.848 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:33.710 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:33.711 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:33.712 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:33.712 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:33.769 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 15:54:33.769 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 4 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 15:54:33.789 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:33.789 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:33.790 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:33.790 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:34.263 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:34.264 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:34.265 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:34.265 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:34.323 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:34.324 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:34.324 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:34.324 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:34.463 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:34.464 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:34.464 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:34.464 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:34.522 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:34.523 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:34.523 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:34.523 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:34.654 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:34.655 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:34.655 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:34.656 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:34.724 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:34.725 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:34.726 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:34.726 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:34.835 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:34.835 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:34.835 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:34.835 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:34.888 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:34.889 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:34.889 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:34.889 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:34.984 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:34.985 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:34.985 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:34.985 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.043 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:35.044 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.045 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.045 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.142 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:35.143 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.143 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.143 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.204 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:35.205 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.205 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.205 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.310 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:35.310 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.311 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.311 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.374 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:35.375 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.375 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.375 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.507 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:35.508 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.508 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.508 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.557 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:35.557 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.558 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.558 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.696 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:35.697 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.697 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.697 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.752 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:35.752 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.753 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.753 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.871 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:35.871 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.872 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.872 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:35.926 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:35.926 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:35.927 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:35.927 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.055 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:36.056 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.056 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.056 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.113 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:36.113 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.114 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.114 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.255 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:36.255 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.255 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.256 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.306 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:36.307 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.307 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.307 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.410 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:36.410 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.410 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.411 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.471 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:36.471 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.472 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.473 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.606 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:36.607 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.607 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.607 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.694 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:36.695 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.695 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.695 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.911 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:36.911 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.912 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.912 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:36.974 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:36.975 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:36.975 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:36.975 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:37.109 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:37.110 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:37.110 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:37.110 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:37.194 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:37.195 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:37.195 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:37.195 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:37.338 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:37.338 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:37.339 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:37.339 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:37.407 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:37.408 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:37.408 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:37.408 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:37.545 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:37.546 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:37.546 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:37.546 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:37.607 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:37.607 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:37.607 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:37.607 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:37.734 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:37.735 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:37.736 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:37.736 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:37.790 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:37.791 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:37.791 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:37.791 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:37.945 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:37.946 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:37.946 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:37.946 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:38.003 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:38.004 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:38.004 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:38.004 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:38.151 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:38.153 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:38.153 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:38.153 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:38.224 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:38.224 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:38.225 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:38.225 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:38.343 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:38.344 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:38.344 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:38.344 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:38.403 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:38.404 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:38.404 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:38.404 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:38.537 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:38.538 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:38.538 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:38.538 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:38.603 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:38.603 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:38.604 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:38.604 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:38.698 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:38.699 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:38.699 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:38.699 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:38.762 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:38.763 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:38.763 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:38.763 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:39.030 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:39.030 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:39.030 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:39.030 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:39.091 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:39.093 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:39.093 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:39.093 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:39.317 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:39.318 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:39.318 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:39.318 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:39.374 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:39.374 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:39.374 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:39.374 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:39.554 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:54:39.555 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:39.555 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:39.555 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:39.605 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:54:39.605 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:39.605 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:39.605 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:57.214 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:54:57.217 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:54:57.219 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:54:57.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:54:57.594 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:54:57.595 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:54:57.596 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:54:57.597 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:54:57.599 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:54:57.603 [http-nio-8080-exec-9] DEBUG [2ba557fa95304afd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:54:57.605 [http-nio-8080-exec-9] DEBUG [2ba557fa95304afd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:54:57.619 [http-nio-8080-exec-9] DEBUG [2ba557fa95304afd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:54:57.621 [http-nio-8080-exec-9] DEBUG [2ba557fa95304afd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:54:57.637 [http-nio-8080-exec-9] DEBUG [2ba557fa95304afd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:55:21.003 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 15:55:21.005 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:55:21.007 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:55:21.007 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:55:21.138 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 15:55:21.139 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:55:21.139 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:55:21.139 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:55:44.824 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:55:44.825 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:55:44.826 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:55:44.826 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:55:49.863 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:55:54.672 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:55:54.673 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:55:54.674 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:55:56.576 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:55:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:55:57.597 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:55:57.597 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:55:57.598 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:55:57.607 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:55:57.608 [http-nio-8080-exec-3] DEBUG [38166a69f5a145fa] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:55:57.609 [http-nio-8080-exec-3] DEBUG [38166a69f5a145fa] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:55:57.614 [http-nio-8080-exec-3] DEBUG [38166a69f5a145fa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:55:57.616 [http-nio-8080-exec-3] DEBUG [38166a69f5a145fa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:55:57.618 [http-nio-8080-exec-3] DEBUG [38166a69f5a145fa] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:56:24.672 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:56:24.674 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:56:24.675 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:56:29.415 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:56:54.672 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:56:54.673 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:56:54.674 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:56:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:56:57.596 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:56:57.604 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:56:57.606 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:56:57.610 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:56:57.613 [http-nio-8080-exec-4] DEBUG [a5b5da40bdb5474b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:56:57.616 [http-nio-8080-exec-4] DEBUG [a5b5da40bdb5474b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:56:57.622 [http-nio-8080-exec-4] DEBUG [a5b5da40bdb5474b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:56:57.625 [http-nio-8080-exec-4] DEBUG [a5b5da40bdb5474b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:56:57.638 [http-nio-8080-exec-4] DEBUG [a5b5da40bdb5474b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:56:58.677 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:57:24.672 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:57:24.673 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:57:24.674 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:57:33.046 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 15:57:33.189 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T01:20:13Z. Current time: 2025-11-03T18:57:33Z, a difference of 149840188 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 15:57:33.190 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:57:33.191 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 15:57:33.191 [http-nio-8080-exec-6] DEBUG [5d3051cc38e8480d] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 15:57:33.191 [http-nio-8080-exec-6] DEBUG [5d3051cc38e8480d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 15:57:33.260 [http-nio-8080-exec-6] DEBUG [5d3051cc38e8480d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@1cf531b7]
2025-11-03 15:57:33.349 [http-nio-8080-exec-6] DEBUG [5d3051cc38e8480d] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-03 15:57:33.370 [http-nio-8080-exec-6] DEBUG [5d3051cc38e8480d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:57:33.372 [http-nio-8080-exec-6] DEBUG [5d3051cc38e8480d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@62287450]
2025-11-03 15:57:33.378 [http-nio-8080-exec-6] WARN  [5d3051cc38e8480d] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.login(com.deliverytech.delivery.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'email': rejected value [admin]; codes [Email.loginRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@27dc4444,.*]; default message [Email deve ter formato válido]] ]
2025-11-03 15:57:33.379 [http-nio-8080-exec-6] DEBUG [5d3051cc38e8480d] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-03 15:57:37.955 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:57:54.672 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:57:54.674 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:57:54.675 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:57:55.398 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:57:57.597 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:57:57.604 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:57:57.612 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:57:57.612 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:57:57.613 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:57:57.614 [http-nio-8080-exec-7] DEBUG [e2f49c8691214a2c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:57:57.614 [http-nio-8080-exec-7] DEBUG [e2f49c8691214a2c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:57:57.616 [http-nio-8080-exec-7] DEBUG [e2f49c8691214a2c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:57:57.617 [http-nio-8080-exec-7] DEBUG [e2f49c8691214a2c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:57:57.627 [http-nio-8080-exec-7] DEBUG [e2f49c8691214a2c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:58:08.324 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:58:08.340 [Thread-43] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:58:08.348 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:58:08.353 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:58:08.356 [Thread-43] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:58:08.372 [Thread-43] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:58:08.375 [Thread-43] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:58:08.377 [Thread-43] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:58:08.378 [Thread-43] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:58:08.379 [Thread-43] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:58:08.380 [Thread-43] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:58:08.380 [Thread-43] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:58:08.382 [Thread-43] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:58:08.383 [Thread-43] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-11-03 15:58:08.410 [Thread-43] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-11-03 15:58:09.239 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:58:09.240 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:58:09.241 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:58:10.113 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:58:10.144 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 5 JPA repository interfaces.
2025-11-03 15:58:10.564 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:58:10.585 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:58:10.586 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:58:10.586 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:58:10.611 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:58:10.611 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1365 ms
2025-11-03 15:58:11.068 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:58:11.069 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:58:11.069 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:58:11.225 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:58:11.226 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Starting...
2025-11-03 15:58:11.229 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-13 - Added connection conn109: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:58:11.231 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Start completed.
2025-11-03 15:58:11.232 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:58:11.397 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:58:11.397 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:58:11.397 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:58:11.397 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:58:11.398 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:58:11.398 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:58:11.398 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:58:11.399 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:58:11.400 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:58:11.401 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:58:11.402 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:58:11.403 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:58:11.405 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:58:11.406 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:58:11.408 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:58:11.411 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:58:11.413 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:58:11.416 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:58:12.171 [restartedMain] WARN  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Found 2 UserDetailsService beans, with names [authService, userDetailsService]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-11-03 15:58:12.172 [restartedMain] DEBUG [] o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-11-03 15:58:12.536 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:58:12.622 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:58:12.800 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:58:12.975 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:58:13.151 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:58:13.216 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:58:13.544 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:58:13.748 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:58:13.787 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:58:13.790 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:58:13.808 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:58:13.809 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.629 seconds (process running for 1861.368)
2025-11-03 15:58:13.809 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:58:13.810 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:58:13.813 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:58:15.277 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:58:16.331 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:58:16.331 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:58:16.331 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:58:16.331 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:58:16.332 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:58:16.334 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@288187b5
2025-11-03 15:58:16.334 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@e37eedf
2025-11-03 15:58:16.335 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:58:16.335 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-03 15:58:16.336 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 15:58:16.343 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T01:20:13Z. Current time: 2025-11-03T18:58:16Z, a difference of 149883343 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 15:58:16.344 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:58:16.347 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 15:58:16.352 [http-nio-8080-exec-2] DEBUG [eb072de9baa846c3] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 15:58:16.353 [http-nio-8080-exec-2] DEBUG [eb072de9baa846c3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 15:58:16.357 [http-nio-8080-exec-2] DEBUG [eb072de9baa846c3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@6bf64b70]
2025-11-03 15:58:16.368 [http-nio-8080-exec-2] DEBUG [eb072de9baa846c3] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-03 15:58:16.379 [http-nio-8080-exec-2] DEBUG [eb072de9baa846c3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:58:16.380 [http-nio-8080-exec-2] DEBUG [eb072de9baa846c3] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6462d525]
2025-11-03 15:58:16.389 [http-nio-8080-exec-2] WARN  [eb072de9baa846c3] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.login(com.deliverytech.delivery.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'email': rejected value [admin]; codes [Email.loginRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@27dc4444,.*]; default message [Email deve ter formato válido]] ]
2025-11-03 15:58:16.390 [http-nio-8080-exec-2] DEBUG [eb072de9baa846c3] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-03 15:58:18.655 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 15:58:18.658 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T01:20:13Z. Current time: 2025-11-03T18:58:18Z, a difference of 149885657 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 15:58:18.658 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:58:18.659 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 15:58:18.659 [http-nio-8080-exec-3] DEBUG [3f9340b2a9a04ca1] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 15:58:18.660 [http-nio-8080-exec-3] DEBUG [3f9340b2a9a04ca1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 15:58:18.661 [http-nio-8080-exec-3] DEBUG [3f9340b2a9a04ca1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@2b203bb0]
2025-11-03 15:58:18.664 [http-nio-8080-exec-3] DEBUG [3f9340b2a9a04ca1] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-03 15:58:18.666 [http-nio-8080-exec-3] DEBUG [3f9340b2a9a04ca1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:58:18.667 [http-nio-8080-exec-3] DEBUG [3f9340b2a9a04ca1] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4cfb2645]
2025-11-03 15:58:18.669 [http-nio-8080-exec-3] WARN  [3f9340b2a9a04ca1] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.login(com.deliverytech.delivery.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'email': rejected value [admin]; codes [Email.loginRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@27dc4444,.*]; default message [Email deve ter formato válido]] ]
2025-11-03 15:58:18.675 [http-nio-8080-exec-3] DEBUG [3f9340b2a9a04ca1] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-03 15:58:21.302 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 15:58:21.304 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T01:20:13Z. Current time: 2025-11-03T18:58:21Z, a difference of 149888304 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 15:58:21.305 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:58:21.305 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 15:58:21.306 [http-nio-8080-exec-5] DEBUG [9e9fb605612142d2] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 15:58:21.306 [http-nio-8080-exec-5] DEBUG [9e9fb605612142d2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 15:58:21.307 [http-nio-8080-exec-5] DEBUG [9e9fb605612142d2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@388133c1]
2025-11-03 15:58:21.308 [http-nio-8080-exec-5] DEBUG [9e9fb605612142d2] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-03 15:58:21.310 [http-nio-8080-exec-5] DEBUG [9e9fb605612142d2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:58:21.310 [http-nio-8080-exec-5] DEBUG [9e9fb605612142d2] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@526c3b9b]
2025-11-03 15:58:21.311 [http-nio-8080-exec-5] WARN  [9e9fb605612142d2] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.login(com.deliverytech.delivery.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'email': rejected value [admin]; codes [Email.loginRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@27dc4444,.*]; default message [Email deve ter formato válido]] ]
2025-11-03 15:58:21.312 [http-nio-8080-exec-5] DEBUG [9e9fb605612142d2] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-03 15:58:41.313 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 15:58:41.315 [Thread-47] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 15:58:41.316 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:58:41.317 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 15:58:41.317 [Thread-47] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 15:58:41.324 [Thread-47] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:58:41.324 [Thread-47] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:58:41.326 [Thread-47] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:58:41.326 [Thread-47] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:58:41.327 [Thread-47] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:58:41.328 [Thread-47] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:58:41.328 [Thread-47] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:58:41.330 [Thread-47] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 15:58:41.330 [Thread-47] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-11-03 15:58:41.332 [Thread-47] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
2025-11-03 15:58:42.564 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 15:58:42.564 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 15:58:42.565 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 15:58:42.976 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 15:58:43.002 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 15:58:43.222 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 15:58:43.223 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 15:58:43.223 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 15:58:43.223 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 15:58:43.235 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 15:58:43.236 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 669 ms
2025-11-03 15:58:43.421 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 15:58:43.421 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 15:58:43.421 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 15:58:43.509 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 15:58:43.510 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Starting...
2025-11-03 15:58:43.512 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-14 - Added connection conn119: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 15:58:43.513 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Start completed.
2025-11-03 15:58:43.513 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 15:58:43.682 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 15:58:43.683 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 15:58:43.683 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 15:58:43.684 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 15:58:43.684 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 15:58:43.684 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 15:58:43.685 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 15:58:43.687 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 15:58:43.688 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 15:58:43.690 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 15:58:43.692 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 15:58:43.693 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 15:58:43.695 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 15:58:43.697 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 15:58:43.698 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 15:58:43.700 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:58:43.702 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 15:58:43.706 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 15:58:44.294 [restartedMain] WARN  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Found 2 UserDetailsService beans, with names [authService, userDetailsService]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-11-03 15:58:44.294 [restartedMain] DEBUG [] o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-11-03 15:58:44.639 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 15:58:44.696 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 15:58:44.821 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 15:58:44.939 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 15:58:45.111 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 15:58:45.179 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 15:58:45.350 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 15:58:45.433 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 15:58:45.486 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 15:58:45.494 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 15:58:45.511 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:58:45.511 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.98 seconds (process running for 1893.07)
2025-11-03 15:58:45.513 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:58:45.514 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:58:45.517 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 15:58:57.594 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 15:58:57.594 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 15:58:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 15:58:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 15:58:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 15:58:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@500c1b96
2025-11-03 15:58:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@748b6b2b
2025-11-03 15:58:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 15:58:57.599 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 15:58:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:58:57.605 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:58:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:58:57.606 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:58:57.609 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:58:57.611 [http-nio-8080-exec-1] DEBUG [f6e0c56fb89d4b26] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:58:57.612 [http-nio-8080-exec-1] DEBUG [f6e0c56fb89d4b26] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:58:57.618 [http-nio-8080-exec-1] DEBUG [f6e0c56fb89d4b26] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:58:57.619 [http-nio-8080-exec-1] DEBUG [f6e0c56fb89d4b26] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:58:57.624 [http-nio-8080-exec-1] DEBUG [f6e0c56fb89d4b26] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 15:59:07.359 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 15:59:07.363 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T01:20:13Z. Current time: 2025-11-03T18:59:07Z, a difference of 149934362 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 15:59:07.363 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:59:07.365 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 15:59:07.365 [http-nio-8080-exec-3] DEBUG [584052979a1b46cc] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 15:59:07.366 [http-nio-8080-exec-3] DEBUG [584052979a1b46cc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 15:59:07.370 [http-nio-8080-exec-3] DEBUG [584052979a1b46cc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@fe95260]
2025-11-03 15:59:07.381 [http-nio-8080-exec-3] DEBUG [584052979a1b46cc] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-03 15:59:07.390 [http-nio-8080-exec-3] DEBUG [584052979a1b46cc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:59:07.391 [http-nio-8080-exec-3] DEBUG [584052979a1b46cc] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@5f1911e8]
2025-11-03 15:59:07.399 [http-nio-8080-exec-3] WARN  [584052979a1b46cc] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.deliverytech.delivery.controller.auth.AuthController.login(com.deliverytech.delivery.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'email': rejected value [actuator]; codes [Email.loginRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@27dc4444,.*]; default message [Email deve ter formato válido]] ]
2025-11-03 15:59:07.399 [http-nio-8080-exec-3] DEBUG [584052979a1b46cc] o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-11-03 15:59:08.377 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 15:59:08.379 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 5 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 15:59:12.426 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:59:15.509 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:59:15.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:59:15.511 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:59:17.152 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:59:45.509 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 15:59:45.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 15:59:45.511 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 15:59:47.293 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 15:59:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 15:59:57.593 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 15:59:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 15:59:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 15:59:57.596 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 15:59:57.597 [http-nio-8080-exec-4] DEBUG [1003d3636ae24db5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 15:59:57.598 [http-nio-8080-exec-4] DEBUG [1003d3636ae24db5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 15:59:57.601 [http-nio-8080-exec-4] DEBUG [1003d3636ae24db5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 15:59:57.602 [http-nio-8080-exec-4] DEBUG [1003d3636ae24db5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 15:59:57.603 [http-nio-8080-exec-4] DEBUG [1003d3636ae24db5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:00:15.509 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:00:15.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:00:15.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:00:43.615 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:00:45.509 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:00:45.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:00:45.510 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:00:46.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:00:49.535 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:00:49.537 [Thread-51] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:00:49.538 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:00:49.539 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:00:49.539 [Thread-51] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:00:49.544 [Thread-51] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:00:49.544 [Thread-51] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:00:49.545 [Thread-51] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:00:49.545 [Thread-51] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:00:49.548 [Thread-51] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:00:49.548 [Thread-51] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:00:49.549 [Thread-51] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:00:49.550 [Thread-51] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:00:49.551 [Thread-51] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown initiated...
2025-11-03 16:00:49.552 [Thread-51] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown completed.
2025-11-03 16:00:50.655 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:00:50.655 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:00:50.656 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:00:51.207 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:00:51.238 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 5 JPA repository interfaces.
2025-11-03 16:00:51.523 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:00:51.524 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:00:51.525 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:00:51.525 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:00:51.542 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:00:51.542 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 881 ms
2025-11-03 16:00:52.018 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:00:52.019 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:00:52.019 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:00:52.120 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:00:52.121 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Starting...
2025-11-03 16:00:52.123 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-15 - Added connection conn129: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:00:52.123 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Start completed.
2025-11-03 16:00:52.124 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:00:52.318 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:00:52.319 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:00:52.321 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:00:52.322 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:00:52.322 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:00:52.323 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:00:52.324 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:00:52.326 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:00:52.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:00:52.329 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:00:52.330 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:00:52.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:00:52.334 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:00:52.339 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:00:52.352 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:00:52.356 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:00:52.361 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:00:52.363 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:00:52.879 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:00:53.290 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:00:53.336 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:00:53.456 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 16:00:53.575 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:00:53.634 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:00:53.686 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:00:53.887 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:00:54.016 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:00:54.072 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:00:54.075 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:00:54.091 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:00:54.092 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.476 seconds (process running for 2021.651)
2025-11-03 16:00:54.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:00:54.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:00:54.096 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:00:57.592 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:00:57.592 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:00:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:00:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:00:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:00:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@48edd631
2025-11-03 16:00:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2fdae20a
2025-11-03 16:00:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:00:57.594 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-03 16:00:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:00:57.597 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:00:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:00:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:00:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:00:57.599 [http-nio-8080-exec-1] DEBUG [b580ef374d5b42d1] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:00:57.600 [http-nio-8080-exec-1] DEBUG [b580ef374d5b42d1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:00:57.604 [http-nio-8080-exec-1] DEBUG [b580ef374d5b42d1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:00:57.605 [http-nio-8080-exec-1] DEBUG [b580ef374d5b42d1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:00:57.610 [http-nio-8080-exec-1] DEBUG [b580ef374d5b42d1] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:01:03.850 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:01:08.476 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:01:08.479 [Thread-55] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:01:08.479 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:01:08.480 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:01:08.481 [Thread-55] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:01:08.486 [Thread-55] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:01:08.487 [Thread-55] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:01:08.488 [Thread-55] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:01:08.489 [Thread-55] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:01:08.489 [Thread-55] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:01:08.489 [Thread-55] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:01:08.490 [Thread-55] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:01:08.491 [Thread-55] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:01:08.491 [Thread-55] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown initiated...
2025-11-03 16:01:08.493 [Thread-55] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown completed.
2025-11-03 16:01:09.792 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:01:09.792 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:01:09.792 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:01:10.364 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:01:10.399 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 5 JPA repository interfaces.
2025-11-03 16:01:10.752 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:01:10.754 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:01:10.755 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:01:10.755 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:01:10.769 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:01:10.770 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 976 ms
2025-11-03 16:01:11.046 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:01:11.047 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:01:11.047 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:01:11.141 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:01:11.141 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Starting...
2025-11-03 16:01:11.143 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-16 - Added connection conn139: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:01:11.144 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Start completed.
2025-11-03 16:01:11.144 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:01:11.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:01:11.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:01:11.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:01:11.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:01:11.329 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:01:11.329 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:01:11.329 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:01:11.331 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:01:11.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:01:11.333 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:01:11.334 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:01:11.335 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:01:11.337 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:01:11.338 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:01:11.340 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:01:11.341 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:01:11.343 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:01:11.345 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:01:12.056 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:01:12.334 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:01:12.387 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:01:12.508 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 16:01:12.647 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:01:12.712 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:01:12.789 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:01:13.021 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:01:13.131 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:01:13.174 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:01:13.176 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:01:13.191 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:01:13.192 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.442 seconds (process running for 2040.751)
2025-11-03 16:01:13.193 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:01:13.195 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:01:13.197 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:01:15.860 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:01:43.191 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:01:43.191 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:01:43.192 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:01:57.595 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:01:57.595 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:01:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:01:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:01:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:01:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2e708a88
2025-11-03 16:01:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@618a0cba
2025-11-03 16:01:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:01:57.598 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-03 16:01:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:01:57.600 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:01:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:01:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:01:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:01:57.604 [http-nio-8080-exec-1] DEBUG [21a851158e9140aa] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:01:57.604 [http-nio-8080-exec-1] DEBUG [21a851158e9140aa] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:01:57.608 [http-nio-8080-exec-1] DEBUG [21a851158e9140aa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:01:57.608 [http-nio-8080-exec-1] DEBUG [21a851158e9140aa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:01:57.611 [http-nio-8080-exec-1] DEBUG [21a851158e9140aa] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:01:59.791 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:01:59.793 [Thread-59] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:01:59.794 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:01:59.795 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:01:59.795 [Thread-59] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:02:14.669 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:02:14.675 [Thread-59] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:02:14.676 [Thread-59] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:02:14.677 [Thread-59] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:02:14.677 [Thread-59] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:02:14.677 [Thread-59] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:02:14.678 [Thread-59] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:02:14.679 [Thread-59] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:02:14.680 [Thread-59] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:02:14.681 [Thread-59] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown initiated...
2025-11-03 16:02:14.683 [Thread-59] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown completed.
2025-11-03 16:02:16.109 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:02:16.110 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:02:16.110 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:02:16.721 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:02:16.751 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-03 16:02:17.031 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:02:17.032 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:02:17.032 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:02:17.033 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:02:17.044 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:02:17.044 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 930 ms
2025-11-03 16:02:17.354 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:02:17.354 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:02:17.355 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:02:17.536 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:02:17.537 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Starting...
2025-11-03 16:02:17.539 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-17 - Added connection conn149: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:02:17.540 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Start completed.
2025-11-03 16:02:17.540 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:02:17.714 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:02:17.714 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:02:17.714 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:02:17.715 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:02:17.715 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:02:17.715 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:02:17.715 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:02:17.717 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:02:17.718 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:02:17.719 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:02:17.720 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:02:17.721 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:02:17.722 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:02:17.724 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:02:17.726 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:02:17.727 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:02:17.728 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:02:17.730 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:02:18.206 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:02:18.493 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:02:18.548 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:02:18.676 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 16:02:18.825 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:02:18.893 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:02:18.960 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:02:19.143 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:02:19.216 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:02:19.248 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:02:19.250 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:02:19.264 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:02:19.265 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.212 seconds (process running for 2106.825)
2025-11-03 16:02:19.266 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:02:19.267 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:02:19.270 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:02:22.233 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:02:30.667 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:02:30.670 [Thread-63] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:02:30.671 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:02:30.671 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:02:30.672 [Thread-63] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:02:30.675 [Thread-63] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:02:30.676 [Thread-63] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:02:30.677 [Thread-63] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:02:30.677 [Thread-63] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:02:30.677 [Thread-63] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:02:30.677 [Thread-63] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:02:30.678 [Thread-63] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:02:30.678 [Thread-63] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:02:30.679 [Thread-63] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown initiated...
2025-11-03 16:02:30.680 [Thread-63] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown completed.
2025-11-03 16:02:32.177 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:02:32.178 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:02:32.178 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:02:32.781 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:02:32.818 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 5 JPA repository interfaces.
2025-11-03 16:02:33.089 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:02:33.090 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:02:33.090 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:02:33.091 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:02:33.106 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:02:33.106 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 924 ms
2025-11-03 16:02:33.356 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:02:33.357 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:02:33.357 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:02:33.499 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:02:33.500 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Starting...
2025-11-03 16:02:33.502 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-18 - Added connection conn159: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:02:33.503 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Start completed.
2025-11-03 16:02:33.504 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:02:33.723 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:02:33.724 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:02:33.724 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:02:33.725 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:02:33.725 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:02:33.726 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:02:33.727 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:02:33.729 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:02:33.733 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:02:33.735 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:02:33.737 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:02:33.739 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:02:33.740 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:02:33.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:02:33.743 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:02:33.745 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:02:33.746 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:02:33.748 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:02:34.205 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:02:34.595 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:02:34.665 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:02:34.809 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-11-03 16:02:35.004 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:02:35.083 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:02:35.155 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:02:35.363 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:02:35.456 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:02:35.492 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:02:35.504 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:02:35.526 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.411 seconds (process running for 2123.085)
2025-11-03 16:02:35.531 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:02:35.534 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:02:35.536 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:02:35.538 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:02:36.228 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:02:38.455 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:02:38.455 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:02:38.455 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:02:38.455 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:02:38.455 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:02:38.457 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6cf50b99
2025-11-03 16:02:38.458 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5f5d5125
2025-11-03 16:02:38.458 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:02:38.458 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-03 16:02:38.460 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:02:38.461 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:02:38.462 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:02:38.462 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:02:38.779 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:02:38.780 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:02:38.780 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:02:38.780 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:02:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:02:57.593 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:02:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:02:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:02:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:02:57.598 [http-nio-8080-exec-3] DEBUG [19c8dfd9faae48f3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:02:57.598 [http-nio-8080-exec-3] DEBUG [19c8dfd9faae48f3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:02:57.606 [http-nio-8080-exec-3] DEBUG [19c8dfd9faae48f3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:02:57.606 [http-nio-8080-exec-3] DEBUG [19c8dfd9faae48f3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:02:57.610 [http-nio-8080-exec-3] DEBUG [19c8dfd9faae48f3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:03:00.076 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 16:03:00.081 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T01:20:13Z. Current time: 2025-11-03T19:03:00Z, a difference of 150167080 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 16:03:00.081 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:03:00.083 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 16:03:00.083 [http-nio-8080-exec-5] DEBUG [33f63e1d9bf242de] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 16:03:00.084 [http-nio-8080-exec-5] DEBUG [33f63e1d9bf242de] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 16:03:00.088 [http-nio-8080-exec-5] DEBUG [33f63e1d9bf242de] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@284bb56b]
2025-11-03 16:03:01.258 [http-nio-8080-exec-5] DEBUG [33f63e1d9bf242de] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:03:01.872 [http-nio-8080-exec-5] DEBUG [33f63e1d9bf242de] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 16:03:02.201 [http-nio-8080-exec-5] DEBUG [33f63e1d9bf242de] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:03:02.201 [http-nio-8080-exec-5] DEBUG [33f63e1d9bf242de] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@2d06326]
2025-11-03 16:03:02.268 [http-nio-8080-exec-5] DEBUG [33f63e1d9bf242de] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:03:05.524 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:03:05.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:03:05.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:03:06.022 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:03:20.815 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 16:03:20.820 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:03:20.831 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 16:03:20.832 [http-nio-8080-exec-7] DEBUG [62f68bd0927b437f] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 16:03:20.832 [http-nio-8080-exec-7] DEBUG [62f68bd0927b437f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 16:03:20.836 [http-nio-8080-exec-7] DEBUG [62f68bd0927b437f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@5305cfdd]
2025-11-03 16:03:20.843 [http-nio-8080-exec-7] DEBUG [62f68bd0927b437f] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:03:20.988 [http-nio-8080-exec-7] DEBUG [62f68bd0927b437f] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 16:03:20.991 [http-nio-8080-exec-7] DEBUG [62f68bd0927b437f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:03:20.992 [http-nio-8080-exec-7] DEBUG [62f68bd0927b437f] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@5c34db32]
2025-11-03 16:03:20.994 [http-nio-8080-exec-7] DEBUG [62f68bd0927b437f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:03:34.954 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:03:34.956 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:03:34.957 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:03:34.958 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:03:35.068 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:03:35.069 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:03:35.069 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:03:35.070 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:03:35.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:03:35.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:03:35.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:03:36.797 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:03:36.799 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:03:36.799 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:03:36.800 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:03:36.864 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:03:36.865 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:03:36.865 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:03:36.866 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:03:37.466 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:03:39.788 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:03:39.789 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:03:39.789 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:03:39.789 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:03:40.005 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:03:40.006 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:03:40.006 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:03:40.007 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:03:57.643 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:03:57.646 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:03:57.646 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:03:57.646 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:03:57.647 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:03:57.647 [http-nio-8080-exec-4] DEBUG [7864b50d35a64b6e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:03:57.647 [http-nio-8080-exec-4] DEBUG [7864b50d35a64b6e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:03:57.651 [http-nio-8080-exec-4] DEBUG [7864b50d35a64b6e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:03:57.652 [http-nio-8080-exec-4] DEBUG [7864b50d35a64b6e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:03:57.653 [http-nio-8080-exec-4] DEBUG [7864b50d35a64b6e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:04:05.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:04:05.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:04:05.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:04:07.575 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:04:35.524 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:04:35.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:04:35.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:04:37.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:04:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:04:57.597 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:04:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:04:57.598 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:04:57.600 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:04:57.600 [http-nio-8080-exec-8] DEBUG [e4151dfda51c422a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:04:57.604 [http-nio-8080-exec-8] DEBUG [e4151dfda51c422a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:04:57.606 [http-nio-8080-exec-8] DEBUG [e4151dfda51c422a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:04:57.607 [http-nio-8080-exec-8] DEBUG [e4151dfda51c422a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:04:57.613 [http-nio-8080-exec-8] DEBUG [e4151dfda51c422a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:05:05.525 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:05:05.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:05:05.527 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:05:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:05:57.594 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:05:57.595 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:05:57.595 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:05:57.618 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:05:57.619 [http-nio-8080-exec-9] DEBUG [f6a2360bdcb447f0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:05:57.619 [http-nio-8080-exec-9] DEBUG [f6a2360bdcb447f0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:05:57.621 [http-nio-8080-exec-9] DEBUG [f6a2360bdcb447f0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:05:57.621 [http-nio-8080-exec-9] DEBUG [f6a2360bdcb447f0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:05:57.622 [http-nio-8080-exec-9] DEBUG [f6a2360bdcb447f0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:05:58.637 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:05:58.637 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 5 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:05:58.791 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:05:58.792 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:05:58.793 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:05:58.794 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:06:00.344 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:06:05.524 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:06:05.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:06:05.526 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:06:07.879 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:06:29.918 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:06:29.921 [Thread-67] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:06:29.921 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:06:29.922 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:06:29.923 [Thread-67] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:06:29.932 [Thread-67] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:06:29.932 [Thread-67] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:06:29.935 [Thread-67] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:06:29.935 [Thread-67] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:06:29.936 [Thread-67] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:06:29.936 [Thread-67] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:06:29.937 [Thread-67] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:06:29.938 [Thread-67] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:06:29.939 [Thread-67] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown initiated...
2025-11-03 16:06:29.941 [Thread-67] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown completed.
2025-11-03 16:06:31.182 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:06:31.183 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:06:31.183 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:06:32.994 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:06:33.068 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72 ms. Found 5 JPA repository interfaces.
2025-11-03 16:06:33.696 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:06:33.699 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:06:33.699 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:06:33.699 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:06:33.737 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:06:33.737 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2552 ms
2025-11-03 16:06:34.111 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:06:34.112 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:06:34.112 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:06:34.449 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:06:34.451 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Starting...
2025-11-03 16:06:34.454 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-19 - Added connection conn169: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:06:34.454 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Start completed.
2025-11-03 16:06:34.455 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:06:34.682 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:06:34.683 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:06:34.683 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:06:34.683 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:06:34.683 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:06:34.684 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:06:34.684 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:06:34.685 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:06:34.686 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:06:34.687 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:06:34.687 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:06:34.688 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:06:34.689 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:06:34.691 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:06:34.692 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:06:34.694 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:06:34.696 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:06:34.699 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:06:35.185 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:06:35.548 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:06:35.602 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:06:36.086 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:06:36.306 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:06:36.375 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:06:36.439 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:06:36.662 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:06:36.806 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:06:36.918 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:06:36.955 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:06:36.983 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 5.856 seconds (process running for 2364.543)
2025-11-03 16:06:36.991 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:06:36.993 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:06:36.994 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:06:37.032 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   EnvironmentEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpointWebExtension matched:
      - @ConditionalOnBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) found bean 'environmentEndpoint'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpointWebExtension; SearchStrategy: all) did not find any beans (OnBeanCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoEndpointAutoConfiguration#infoEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.InfoEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   LoggersEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   LoggersEndpointAutoConfiguration#loggersEndpoint matched:
      - Logging System enabled (LoggersEndpointAutoConfiguration.OnEnabledLoggingSystemCondition)
      - @ConditionalOnBean (types: org.springframework.boot.logging.LoggingSystem; SearchStrategy: all) found bean 'springBootLoggingSystem'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.logging.LoggersEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MetricsEndpointAutoConfiguration matched:
      - @ConditionalOnClass found required class 'io.micrometer.core.annotation.Timed' (OnClassCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   MetricsEndpointAutoConfiguration#metricsEndpoint matched:
      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean 'prometheusMeterRegistry'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.MetricsEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration#prometheusEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.export.prometheus.PrometheusScrapeEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

    None


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-03 16:06:48.909 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:06:48.909 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:06:48.909 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:06:48.909 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:06:48.910 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:06:48.912 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@290d88fd
2025-11-03 16:06:48.912 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@54cfa44e
2025-11-03 16:06:48.913 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:06:48.913 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-03 16:06:48.915 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:06:48.917 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:06:48.918 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:06:48.919 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:06:49.088 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:06:49.088 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:06:49.089 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:06:49.089 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:06:49.783 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:06:49.784 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:06:49.784 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:06:49.784 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:06:49.848 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:06:49.849 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:06:49.849 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:06:49.849 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:06:49.993 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:06:49.993 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 16 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:06:52.815 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:06:52.816 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:06:52.816 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:06:52.816 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:06:52.879 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:06:52.880 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:06:52.880 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:06:52.880 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:06:53.347 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:06:57.597 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:06:57.598 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:06:57.599 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:06:57.599 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:06:57.600 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:06:57.602 [http-nio-8080-exec-7] DEBUG [fb44ba294929497d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:06:57.602 [http-nio-8080-exec-7] DEBUG [fb44ba294929497d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:06:57.608 [http-nio-8080-exec-7] DEBUG [fb44ba294929497d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:06:57.608 [http-nio-8080-exec-7] DEBUG [fb44ba294929497d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:06:57.611 [http-nio-8080-exec-7] DEBUG [fb44ba294929497d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:07:06.982 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:07:06.983 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:07:06.984 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:07:07.869 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:07:08.340 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (1 addition, 1 deletion, 1 modification)
2025-11-03 16:07:08.342 [Thread-71] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:07:08.343 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:07:08.344 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:07:08.344 [Thread-71] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:07:08.350 [Thread-71] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:07:08.350 [Thread-71] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:07:08.351 [Thread-71] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:07:08.352 [Thread-71] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:07:08.352 [Thread-71] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:07:08.352 [Thread-71] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:07:08.352 [Thread-71] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:07:08.353 [Thread-71] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:07:08.354 [Thread-71] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown initiated...
2025-11-03 16:07:08.354 [Thread-71] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown completed.
2025-11-03 16:07:09.289 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:07:09.289 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:07:09.290 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:07:09.738 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:07:09.767 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-03 16:07:10.011 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:07:10.012 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:07:10.012 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:07:10.012 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:07:10.025 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:07:10.025 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 733 ms
2025-11-03 16:07:10.306 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:07:10.306 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:07:10.306 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:07:10.416 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:07:10.417 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Starting...
2025-11-03 16:07:10.420 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-20 - Added connection conn179: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:07:10.420 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Start completed.
2025-11-03 16:07:10.421 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:07:10.607 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:07:10.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:07:10.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:07:10.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:07:10.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:07:10.608 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:07:10.609 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:07:10.611 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:07:10.613 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:07:10.614 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:07:10.616 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:07:10.617 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:07:10.618 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:07:10.620 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:07:10.621 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:07:10.623 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:07:10.625 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:07:10.627 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:07:11.179 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:07:11.483 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:07:11.530 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:07:11.810 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:07:12.000 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:07:12.056 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:07:12.113 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:07:12.264 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:07:12.347 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:07:12.398 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:07:12.401 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:07:12.423 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:07:12.423 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.167 seconds (process running for 2399.983)
2025-11-03 16:07:12.424 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:07:12.425 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:07:12.427 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:07:12.514 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:07:12.514 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:07:12.514 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:07:12.514 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:07:12.514 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:07:12.516 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@19da7ace
2025-11-03 16:07:12.517 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4ac49d26
2025-11-03 16:07:12.517 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:07:12.517 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-03 16:07:12.519 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:07:12.521 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:12.522 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:12.522 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:12.639 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:07:12.640 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:12.640 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:12.640 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:13.326 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:07:13.542 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:07:13.543 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 10 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:07:18.719 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 16:07:18.723 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-03T19:04:20Z. Current time: 2025-11-03T19:07:18Z, a difference of 178723 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 16:07:18.723 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:18.724 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 16:07:18.725 [http-nio-8080-exec-4] DEBUG [22096585b90941fa] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 16:07:18.726 [http-nio-8080-exec-4] DEBUG [22096585b90941fa] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 16:07:18.732 [http-nio-8080-exec-4] DEBUG [22096585b90941fa] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@402ded5a]
2025-11-03 16:07:19.138 [http-nio-8080-exec-4] DEBUG [22096585b90941fa] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:07:19.272 [http-nio-8080-exec-4] DEBUG [22096585b90941fa] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 16:07:19.279 [http-nio-8080-exec-4] DEBUG [22096585b90941fa] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:07:19.279 [http-nio-8080-exec-4] DEBUG [22096585b90941fa] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@706b76f]
2025-11-03 16:07:19.290 [http-nio-8080-exec-4] DEBUG [22096585b90941fa] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:07:36.697 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 16:07:36.740 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-02T00:04:41Z. Current time: 2025-11-03T19:07:36Z, a difference of 154975740 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 16:07:36.741 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:42.422 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:07:42.423 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:07:42.424 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:07:44.363 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 16:07:44.395 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:07:44.403 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 16:07:44.404 [http-nio-8080-exec-6] DEBUG [f22ca40018534627] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-03 16:07:44.404 [http-nio-8080-exec-6] DEBUG [f22ca40018534627] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 16:07:44.441 [http-nio-8080-exec-6] DEBUG [f22ca40018534627] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@2fd7598b]
2025-11-03 16:07:45.023 [http-nio-8080-exec-6] DEBUG [f22ca40018534627] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 16:07:45.295 [http-nio-8080-exec-6] DEBUG [f22ca40018534627] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@4f956ca0 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENTE')]
2025-11-03 16:07:45.296 [http-nio-8080-exec-6] DEBUG [f22ca40018534627] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-03 16:07:45.300 [http-nio-8080-exec-6] DEBUG [f22ca40018534627] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:07:45.302 [http-nio-8080-exec-6] DEBUG [f22ca40018534627] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@64c63141]
2025-11-03 16:07:45.303 [http-nio-8080-exec-6] WARN  [f22ca40018534627] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-03 16:07:45.304 [http-nio-8080-exec-6] DEBUG [f22ca40018534627] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-03 16:07:51.756 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:07:51.757 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:51.757 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:51.757 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:51.824 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:07:51.825 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:51.825 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:51.825 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:52.654 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:07:52.655 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:52.655 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:52.655 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:52.717 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:07:52.718 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:52.718 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:52.718 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:53.290 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:07:53.291 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:53.291 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:53.291 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:53.358 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:07:53.360 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:53.361 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:53.361 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:53.511 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:07:53.512 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:53.512 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:53.512 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:53.583 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:07:53.583 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:53.583 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:53.583 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:53.699 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:07:53.699 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:53.700 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:53.700 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:53.758 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:07:53.759 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:53.759 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:53.759 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:53.894 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:07:53.895 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:53.895 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:53.895 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:53.953 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:07:53.953 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:53.953 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:53.953 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:54.199 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:07:54.200 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:54.200 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:54.200 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:54.256 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:07:54.256 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:54.257 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:54.257 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:56.746 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:07:56.748 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:56.749 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:56.749 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:56.841 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:07:56.843 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:56.844 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:56.844 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:07:57.593 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:07:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:07:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:07:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:07:57.595 [http-nio-8080-exec-3] DEBUG [a1a98e37fd0d4b88] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:07:57.596 [http-nio-8080-exec-3] DEBUG [a1a98e37fd0d4b88] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:07:57.599 [http-nio-8080-exec-3] DEBUG [a1a98e37fd0d4b88] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:07:57.600 [http-nio-8080-exec-3] DEBUG [a1a98e37fd0d4b88] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:07:57.602 [http-nio-8080-exec-3] DEBUG [a1a98e37fd0d4b88] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:08:14.429 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:08:14.430 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:08:14.431 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:08:14.431 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:08:17.175 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:08:42.422 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:08:42.424 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:08:42.425 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:08:57.126 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:08:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:08:57.592 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:08:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:08:57.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:08:57.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:08:57.593 [http-nio-8080-exec-6] DEBUG [5a59b1ca5f7d442a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:08:57.594 [http-nio-8080-exec-6] DEBUG [5a59b1ca5f7d442a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:08:57.595 [http-nio-8080-exec-6] DEBUG [5a59b1ca5f7d442a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:08:57.595 [http-nio-8080-exec-6] DEBUG [5a59b1ca5f7d442a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:08:57.596 [http-nio-8080-exec-6] DEBUG [5a59b1ca5f7d442a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:09:12.422 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:09:12.424 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:09:12.425 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:09:13.874 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:09:21.516 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 1 deletion, 1 modification)
2025-11-03 16:09:21.518 [Thread-75] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:09:21.518 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:09:21.519 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:09:21.519 [Thread-75] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:09:21.524 [Thread-75] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:09:21.524 [Thread-75] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:09:21.525 [Thread-75] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:09:21.525 [Thread-75] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:09:21.526 [Thread-75] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:09:21.526 [Thread-75] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:09:21.526 [Thread-75] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:09:21.527 [Thread-75] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:09:21.527 [Thread-75] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown initiated...
2025-11-03 16:09:21.528 [Thread-75] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown completed.
2025-11-03 16:09:22.103 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:09:22.104 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:09:22.104 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:09:22.549 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:09:22.577 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-11-03 16:09:22.871 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:09:22.872 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:09:22.872 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:09:22.872 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:09:22.885 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:09:22.885 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 779 ms
2025-11-03 16:09:23.158 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:09:23.159 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:09:23.159 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:09:23.282 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:09:23.283 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Starting...
2025-11-03 16:09:23.286 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-21 - Added connection conn189: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:09:23.287 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Start completed.
2025-11-03 16:09:23.287 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:09:23.560 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:09:23.638 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:09:23.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:09:23.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:09:23.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:09:23.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:09:23.640 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:09:23.647 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:09:23.666 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:09:23.668 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:09:23.669 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:09:23.670 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:09:23.672 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:09:23.675 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:09:23.687 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:09:23.695 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:09:23.698 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:09:23.702 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:09:24.415 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:09:24.716 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:09:24.761 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:09:24.890 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:09:25.022 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:09:25.081 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:09:25.137 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:09:25.306 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:09:25.386 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:09:25.420 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:09:25.426 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:09:25.441 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:09:25.442 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.393 seconds (process running for 2533.001)
2025-11-03 16:09:25.445 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:09:25.447 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:09:25.448 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:09:30.071 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:09:31.076 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:09:31.076 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:09:35.854 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:09:35.856 [Thread-79] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:09:35.857 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:09:35.858 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:09:35.858 [Thread-79] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:09:35.861 [Thread-79] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:09:35.862 [Thread-79] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:09:35.863 [Thread-79] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:09:35.863 [Thread-79] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:09:35.863 [Thread-79] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:09:35.863 [Thread-79] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:09:35.864 [Thread-79] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:09:35.864 [Thread-79] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:09:35.865 [Thread-79] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown initiated...
2025-11-03 16:09:35.866 [Thread-79] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown completed.
2025-11-03 16:09:36.489 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:09:36.489 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:09:36.490 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:09:37.133 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:09:37.158 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 16:09:37.374 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:09:37.374 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:09:37.375 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:09:37.375 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:09:37.387 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:09:37.387 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 894 ms
2025-11-03 16:09:37.596 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:09:37.596 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:09:37.596 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:09:37.715 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:09:37.716 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Starting...
2025-11-03 16:09:37.719 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-22 - Added connection conn199: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:09:37.719 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Start completed.
2025-11-03 16:09:37.721 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:09:37.896 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:09:37.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:09:37.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:09:37.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:09:37.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:09:37.897 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:09:37.898 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:09:37.900 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:09:37.901 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:09:37.903 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:09:37.905 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:09:37.907 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:09:37.908 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:09:37.910 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:09:37.912 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:09:37.914 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:09:37.916 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:09:37.919 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:09:38.534 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:09:38.812 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:09:38.856 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:09:38.985 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:09:39.106 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:09:39.160 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:09:39.217 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:09:39.350 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:09:39.428 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:09:39.463 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:09:39.465 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:09:39.485 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.053 seconds (process running for 2547.044)
2025-11-03 16:09:39.486 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:09:39.492 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:09:39.494 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:09:39.495 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:09:44.656 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:09:45.662 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:09:45.663 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:09:57.598 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:09:57.599 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:09:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:09:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:09:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:09:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@10540d07
2025-11-03 16:09:57.608 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@339cb9f1
2025-11-03 16:09:57.608 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:09:57.608 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-11-03 16:09:57.614 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:09:57.618 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:09:57.619 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:09:57.619 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:09:57.623 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:09:57.624 [http-nio-8080-exec-1] DEBUG [5091b4a92d0a4b30] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:09:57.626 [http-nio-8080-exec-1] DEBUG [5091b4a92d0a4b30] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:09:57.634 [http-nio-8080-exec-1] DEBUG [5091b4a92d0a4b30] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:09:57.634 [http-nio-8080-exec-1] DEBUG [5091b4a92d0a4b30] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:09:57.638 [http-nio-8080-exec-1] DEBUG [5091b4a92d0a4b30] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:09:59.574 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 16:09:59.579 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-03T19:08:19Z. Current time: 2025-11-03T19:09:59Z, a difference of 100578 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 16:09:59.580 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:09:59.582 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 16:09:59.583 [http-nio-8080-exec-3] DEBUG [b6a3bd754cf44292] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 16:09:59.584 [http-nio-8080-exec-3] DEBUG [b6a3bd754cf44292] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 16:09:59.592 [http-nio-8080-exec-3] DEBUG [b6a3bd754cf44292] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@23547028]
2025-11-03 16:10:00.036 [http-nio-8080-exec-3] DEBUG [b6a3bd754cf44292] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:10:00.160 [http-nio-8080-exec-3] DEBUG [b6a3bd754cf44292] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 16:10:00.170 [http-nio-8080-exec-3] DEBUG [b6a3bd754cf44292] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:10:00.171 [http-nio-8080-exec-3] DEBUG [b6a3bd754cf44292] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@57c5a1ad]
2025-11-03 16:10:00.181 [http-nio-8080-exec-3] DEBUG [b6a3bd754cf44292] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:10:09.481 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:10:09.482 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:10:09.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:10:22.158 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 16:10:22.163 [http-nio-8080-exec-4] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:10:22.171 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 16:10:22.172 [http-nio-8080-exec-4] DEBUG [2f3569d4f4f842ba] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-03 16:10:22.173 [http-nio-8080-exec-4] DEBUG [2f3569d4f4f842ba] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 16:10:22.187 [http-nio-8080-exec-4] DEBUG [2f3569d4f4f842ba] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@40c04395]
2025-11-03 16:10:22.251 [http-nio-8080-exec-4] DEBUG [2f3569d4f4f842ba] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 16:10:22.274 [http-nio-8080-exec-4] DEBUG [2f3569d4f4f842ba] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@17b60302 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENTE')]
2025-11-03 16:10:22.276 [http-nio-8080-exec-4] DEBUG [2f3569d4f4f842ba] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException, WebRequest)
2025-11-03 16:10:22.286 [http-nio-8080-exec-4] DEBUG [2f3569d4f4f842ba] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:10:22.288 [http-nio-8080-exec-4] DEBUG [2f3569d4f4f842ba] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@12394e35]
2025-11-03 16:10:22.295 [http-nio-8080-exec-4] WARN  [2f3569d4f4f842ba] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-11-03 16:10:22.295 [http-nio-8080-exec-4] DEBUG [2f3569d4f4f842ba] o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
2025-11-03 16:10:24.842 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:10:39.481 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:10:39.482 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:10:39.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:10:47.350 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 16:10:47.355 [http-nio-8080-exec-5] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:10:47.361 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 16:10:47.362 [http-nio-8080-exec-5] DEBUG [5ee6c93eee964695] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 16:10:47.363 [http-nio-8080-exec-5] DEBUG [5ee6c93eee964695] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 16:10:47.364 [http-nio-8080-exec-5] DEBUG [5ee6c93eee964695] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@35db4730]
2025-11-03 16:10:47.367 [http-nio-8080-exec-5] DEBUG [5ee6c93eee964695] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:10:47.547 [http-nio-8080-exec-5] DEBUG [5ee6c93eee964695] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 16:10:47.550 [http-nio-8080-exec-5] DEBUG [5ee6c93eee964695] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:10:47.551 [http-nio-8080-exec-5] DEBUG [5ee6c93eee964695] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@4bf53307]
2025-11-03 16:10:47.555 [http-nio-8080-exec-5] DEBUG [5ee6c93eee964695] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:10:53.053 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:10:57.600 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:10:57.602 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:10:57.603 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:10:57.604 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:10:57.606 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:10:57.607 [http-nio-8080-exec-6] DEBUG [fa9430ca0d074c10] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:10:57.611 [http-nio-8080-exec-6] DEBUG [fa9430ca0d074c10] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:10:57.613 [http-nio-8080-exec-6] DEBUG [fa9430ca0d074c10] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:10:57.613 [http-nio-8080-exec-6] DEBUG [fa9430ca0d074c10] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:10:57.615 [http-nio-8080-exec-6] DEBUG [fa9430ca0d074c10] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:11:00.609 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 16:11:00.619 [http-nio-8080-exec-7] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:11:00.635 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 16:11:00.636 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-03 16:11:00.637 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 16:11:00.641 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@565bcd73]
2025-11-03 16:11:00.643 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 16:11:00.653 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 16:11:01.455 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 16:11:01.656 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-03 16:11:01.662 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 16:11:02.001 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 16:11:02.192 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-03 16:11:02.722 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-03 16:11:02.847 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:11:02.847 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@bc38cbd]
2025-11-03 16:11:02.931 [http-nio-8080-exec-7] DEBUG [54f8a765aade405d] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-03 16:11:08.017 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:11:08.020 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:11:08.026 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:11:08.026 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:11:08.145 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:11:08.146 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:11:08.146 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:11:08.146 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:11:09.481 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:11:09.510 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] HIGH_RESPONSE_TIME: Tempo de resposta alto: 1512,84ms (Limite: 1000,00ms)
2025-11-03 16:11:09.512 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:11:09.512 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:11:11.182 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:11:11.184 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:11:11.184 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:11:11.184 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:11:11.281 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:11:11.282 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:11:11.283 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:11:11.283 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:11:11.619 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:11:39.481 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:11:39.482 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] HIGH_RESPONSE_TIME: Tempo de resposta alto: 1512,84ms (Limite: 1000,00ms)
2025-11-03 16:11:39.482 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:11:39.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:11:40.740 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:11:57.597 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:11:57.599 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:11:57.600 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:11:57.600 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:11:57.602 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:11:57.603 [http-nio-8080-exec-2] DEBUG [22481531ed8b4f8e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:11:57.604 [http-nio-8080-exec-2] DEBUG [22481531ed8b4f8e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:11:57.607 [http-nio-8080-exec-2] DEBUG [22481531ed8b4f8e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:11:57.608 [http-nio-8080-exec-2] DEBUG [22481531ed8b4f8e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=1512.835142, receita_total=40.9, ped (truncated)...]
2025-11-03 16:11:57.611 [http-nio-8080-exec-2] DEBUG [22481531ed8b4f8e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:12:09.481 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:12:09.482 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] HIGH_RESPONSE_TIME: Tempo de resposta alto: 1512,84ms (Limite: 1000,00ms)
2025-11-03 16:12:09.482 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:12:09.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:12:13.919 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:12:15.723 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 16:12:15.724 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:12:15.724 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:12:15.724 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:12:15.725 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 16:12:15.725 [http-nio-8080-exec-5] DEBUG [9653713228bd4fae] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 16:12:15.780 [http-nio-8080-exec-5] DEBUG [9653713228bd4fae] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-03 16:12:15.923 [http-nio-8080-exec-5] DEBUG [9653713228bd4fae] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:12:15.924 [http-nio-8080-exec-5] DEBUG [9653713228bd4fae] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:12:16.158 [http-nio-8080-exec-5] DEBUG [9653713228bd4fae] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:12:16.303 [http-nio-8080-exec-5] DEBUG [9653713228bd4fae] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 16:12:16.336 [http-nio-8080-exec-5] DEBUG [9653713228bd4fae] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@662e0a00]
2025-11-03 16:12:16.356 [http-nio-8080-exec-5] DEBUG [9653713228bd4fae] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:12:16.424 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:12:16.425 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:12:16.425 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:12:16.425 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:12:39.481 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:12:39.482 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] HIGH_RESPONSE_TIME: Tempo de resposta alto: 1512,84ms (Limite: 1000,00ms)
2025-11-03 16:12:39.482 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:12:39.483 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:12:41.744 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:12:55.205 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:12:55.206 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:12:55.206 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:12:55.207 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:12:56.038 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:12:56.039 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:12:56.039 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:12:56.039 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:12:57.591 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:12:57.592 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:12:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:12:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:12:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:12:57.594 [http-nio-8080-exec-9] DEBUG [285e998a8c6c468a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:12:57.594 [http-nio-8080-exec-9] DEBUG [285e998a8c6c468a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:12:57.595 [http-nio-8080-exec-9] DEBUG [285e998a8c6c468a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:12:57.595 [http-nio-8080-exec-9] DEBUG [285e998a8c6c468a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=1512.835142, receita_total=40.9, ped (truncated)...]
2025-11-03 16:12:57.596 [http-nio-8080-exec-9] DEBUG [285e998a8c6c468a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:13:09.481 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:13:09.483 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] HIGH_RESPONSE_TIME: Tempo de resposta alto: 1512,84ms (Limite: 1000,00ms)
2025-11-03 16:13:09.484 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:13:09.485 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:13:10.849 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:13:34.248 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:13:34.256 [Thread-83] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:13:34.257 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:13:34.261 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:13:34.262 [Thread-83] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:13:34.268 [Thread-83] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:13:34.268 [Thread-83] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:13:34.270 [Thread-83] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:13:34.271 [Thread-83] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:13:34.272 [Thread-83] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:13:34.273 [Thread-83] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:13:34.273 [Thread-83] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:13:34.275 [Thread-83] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:13:34.277 [Thread-83] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown initiated...
2025-11-03 16:13:34.279 [Thread-83] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown completed.
2025-11-03 16:13:35.337 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:13:35.337 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:13:35.338 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:13:35.885 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:13:35.912 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-03 16:13:36.165 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:13:36.168 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:13:36.168 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:13:36.168 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:13:36.180 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:13:36.181 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 840 ms
2025-11-03 16:13:36.415 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:13:36.415 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:13:36.415 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:13:36.509 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:13:36.510 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Starting...
2025-11-03 16:13:36.512 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-23 - Added connection conn209: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:13:36.513 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Start completed.
2025-11-03 16:13:36.514 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:13:36.788 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:13:36.788 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:13:36.789 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:13:36.789 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:13:36.789 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:13:36.789 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:13:36.790 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:13:36.792 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:13:36.794 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:13:36.796 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:13:36.797 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:13:36.798 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:13:36.799 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:13:36.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:13:36.803 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:13:36.804 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:13:36.805 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:13:36.808 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:13:37.427 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:13:37.776 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:13:37.824 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:13:37.979 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:13:38.117 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:13:38.186 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:13:38.246 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:13:38.487 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:13:38.579 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:13:38.622 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:13:38.624 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:13:38.638 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:13:38.639 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.56 seconds (process running for 2786.199)
2025-11-03 16:13:38.640 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:13:38.641 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:13:38.644 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:13:47.269 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:13:47.269 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:13:47.269 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:13:47.269 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:13:47.269 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:13:47.272 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@56fbaf7c
2025-11-03 16:13:47.273 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@73f39d00
2025-11-03 16:13:47.274 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:13:47.274 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 16:13:47.276 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 16:13:47.278 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:13:47.280 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:13:47.280 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:13:47.283 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 16:13:47.368 [http-nio-8080-exec-1] DEBUG [f7caa8014a2d411b] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 16:13:47.370 [http-nio-8080-exec-1] DEBUG [f7caa8014a2d411b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-03 16:13:47.372 [http-nio-8080-exec-1] DEBUG [f7caa8014a2d411b] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:13:47.372 [http-nio-8080-exec-1] DEBUG [f7caa8014a2d411b] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:13:47.922 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:13:48.370 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:13:48.370 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 4 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:13:51.510 [http-nio-8080-exec-1] DEBUG [f7caa8014a2d411b] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:13:51.512 [http-nio-8080-exec-1] DEBUG [f7caa8014a2d411b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 16:13:51.515 [http-nio-8080-exec-1] DEBUG [f7caa8014a2d411b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@55dcd80a]
2025-11-03 16:13:51.522 [http-nio-8080-exec-1] DEBUG [f7caa8014a2d411b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:13:51.597 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:13:51.599 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:13:51.600 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:13:51.601 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:13:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:13:57.595 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:13:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:13:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:13:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:13:57.597 [http-nio-8080-exec-3] DEBUG [d65a07275cae4c6b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:13:57.597 [http-nio-8080-exec-3] DEBUG [d65a07275cae4c6b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:13:57.604 [http-nio-8080-exec-3] DEBUG [d65a07275cae4c6b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:13:57.605 [http-nio-8080-exec-3] DEBUG [d65a07275cae4c6b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:13:57.608 [http-nio-8080-exec-3] DEBUG [d65a07275cae4c6b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:13:59.086 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-03 16:13:59.088 [Thread-87] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:13:59.089 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:13:59.090 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:13:59.090 [Thread-87] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:13:59.095 [Thread-87] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:13:59.095 [Thread-87] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:13:59.096 [Thread-87] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:13:59.097 [Thread-87] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:13:59.097 [Thread-87] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:13:59.097 [Thread-87] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:13:59.097 [Thread-87] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:13:59.098 [Thread-87] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:13:59.099 [Thread-87] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown initiated...
2025-11-03 16:13:59.101 [Thread-87] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown completed.
2025-11-03 16:13:59.874 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:13:59.875 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:13:59.875 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:14:00.319 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:14:00.347 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-11-03 16:14:00.567 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:14:00.568 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:14:00.568 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:14:00.569 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:14:00.583 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:14:00.583 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 705 ms
2025-11-03 16:14:00.811 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:14:00.811 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:14:00.811 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:14:00.912 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:14:00.913 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Starting...
2025-11-03 16:14:00.915 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-24 - Added connection conn219: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:14:00.916 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Start completed.
2025-11-03 16:14:00.916 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:14:01.100 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:14:01.101 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:14:01.101 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:14:01.102 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:14:01.102 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:14:01.102 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:14:01.103 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:14:01.108 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:14:01.112 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:14:01.118 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:14:01.120 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:14:01.123 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:14:01.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:14:01.128 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:14:01.131 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:14:01.136 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:14:01.150 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:14:01.159 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:14:01.757 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:14:02.111 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:14:02.156 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:14:02.296 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:14:02.418 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:14:02.477 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:14:02.531 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:14:02.694 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:14:02.778 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:14:02.813 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:14:02.815 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:14:02.835 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.006 seconds (process running for 2810.394)
2025-11-03 16:14:02.835 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:14:02.837 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:14:02.837 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:14:02.839 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:14:03.153 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:14:03.153 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:14:03.153 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:14:03.153 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:14:03.153 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:14:03.157 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5d6c7438
2025-11-03 16:14:03.161 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3dd4c8ad
2025-11-03 16:14:03.162 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:14:03.162 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-11-03 16:14:03.166 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:14:03.169 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:03.170 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:03.171 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:03.252 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:14:03.252 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:03.252 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:03.253 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:03.935 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:14:03.936 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:03.937 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:03.938 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:04.025 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:14:04.026 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:04.026 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:04.027 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:04.211 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:14:04.212 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 16 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:14:04.681 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:14:04.682 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:04.683 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:04.683 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:04.740 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:14:04.741 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:04.741 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:04.741 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:06.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:06.592 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:06.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:06.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:06.594 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:06.596 [http-nio-8080-exec-7] DEBUG [ee8255b12ad146fb] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:06.597 [http-nio-8080-exec-7] DEBUG [ee8255b12ad146fb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:06.603 [http-nio-8080-exec-7] DEBUG [ee8255b12ad146fb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:06.604 [http-nio-8080-exec-7] DEBUG [ee8255b12ad146fb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:06.608 [http-nio-8080-exec-7] DEBUG [ee8255b12ad146fb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:16.534 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:14:18.562 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:18.564 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:18.566 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:18.567 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:18.569 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:18.570 [http-nio-8080-exec-8] DEBUG [a0883d2326014bc9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:18.571 [http-nio-8080-exec-8] DEBUG [a0883d2326014bc9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:18.574 [http-nio-8080-exec-8] DEBUG [a0883d2326014bc9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:18.576 [http-nio-8080-exec-8] DEBUG [a0883d2326014bc9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:18.577 [http-nio-8080-exec-8] DEBUG [a0883d2326014bc9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:18.595 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:18.596 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:18.597 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:18.597 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:18.598 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:18.599 [http-nio-8080-exec-9] DEBUG [f8a29c23728549b8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:18.600 [http-nio-8080-exec-9] DEBUG [f8a29c23728549b8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:18.602 [http-nio-8080-exec-9] DEBUG [f8a29c23728549b8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:18.602 [http-nio-8080-exec-9] DEBUG [f8a29c23728549b8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:18.609 [http-nio-8080-exec-9] DEBUG [f8a29c23728549b8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:23.651 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:23.652 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:23.652 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:23.652 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:23.653 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:23.653 [http-nio-8080-exec-10] DEBUG [64ac7373a87c4464] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:23.654 [http-nio-8080-exec-10] DEBUG [64ac7373a87c4464] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:23.655 [http-nio-8080-exec-10] DEBUG [64ac7373a87c4464] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:23.655 [http-nio-8080-exec-10] DEBUG [64ac7373a87c4464] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:23.656 [http-nio-8080-exec-10] DEBUG [64ac7373a87c4464] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:26.594 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:26.595 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:26.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:26.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:26.597 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:26.598 [http-nio-8080-exec-1] DEBUG [3d5b871ab95a4bc2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:26.598 [http-nio-8080-exec-1] DEBUG [3d5b871ab95a4bc2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:26.600 [http-nio-8080-exec-1] DEBUG [3d5b871ab95a4bc2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:26.601 [http-nio-8080-exec-1] DEBUG [3d5b871ab95a4bc2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:26.602 [http-nio-8080-exec-1] DEBUG [3d5b871ab95a4bc2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:31.591 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:31.591 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:31.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:31.592 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:31.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:31.593 [http-nio-8080-exec-2] DEBUG [10e6803bda5f4b33] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:31.593 [http-nio-8080-exec-2] DEBUG [10e6803bda5f4b33] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:31.594 [http-nio-8080-exec-2] DEBUG [10e6803bda5f4b33] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:31.595 [http-nio-8080-exec-2] DEBUG [10e6803bda5f4b33] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:31.598 [http-nio-8080-exec-2] DEBUG [10e6803bda5f4b33] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:14:32.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:14:32.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:14:36.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:36.609 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:36.611 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:36.611 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:36.613 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:36.614 [http-nio-8080-exec-3] DEBUG [ef62b62feb384404] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:36.617 [http-nio-8080-exec-3] DEBUG [ef62b62feb384404] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:36.625 [http-nio-8080-exec-3] DEBUG [ef62b62feb384404] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:36.625 [http-nio-8080-exec-3] DEBUG [ef62b62feb384404] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:36.626 [http-nio-8080-exec-3] DEBUG [ef62b62feb384404] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:48.437 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:48.438 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:48.438 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:48.438 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:48.439 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:48.440 [http-nio-8080-exec-4] DEBUG [d480ce53633e402a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:48.440 [http-nio-8080-exec-4] DEBUG [d480ce53633e402a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:48.442 [http-nio-8080-exec-4] DEBUG [d480ce53633e402a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:48.445 [http-nio-8080-exec-4] DEBUG [d480ce53633e402a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:48.447 [http-nio-8080-exec-4] DEBUG [d480ce53633e402a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:48.449 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:48.450 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:48.450 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:48.450 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:48.451 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:48.451 [http-nio-8080-exec-5] DEBUG [07e1c5810e064da6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:48.452 [http-nio-8080-exec-5] DEBUG [07e1c5810e064da6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:48.453 [http-nio-8080-exec-5] DEBUG [07e1c5810e064da6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:48.454 [http-nio-8080-exec-5] DEBUG [07e1c5810e064da6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:48.455 [http-nio-8080-exec-5] DEBUG [07e1c5810e064da6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:51.592 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:51.593 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:51.593 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:51.593 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:51.598 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:51.599 [http-nio-8080-exec-6] DEBUG [542aa09f482448b1] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:51.600 [http-nio-8080-exec-6] DEBUG [542aa09f482448b1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:51.603 [http-nio-8080-exec-6] DEBUG [542aa09f482448b1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:51.604 [http-nio-8080-exec-6] DEBUG [542aa09f482448b1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:51.605 [http-nio-8080-exec-6] DEBUG [542aa09f482448b1] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:14:56.590 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:14:56.591 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:14:56.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:14:56.593 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:14:56.595 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:14:56.597 [http-nio-8080-exec-7] DEBUG [1be1c87ca1c247a4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:14:56.599 [http-nio-8080-exec-7] DEBUG [1be1c87ca1c247a4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:14:56.601 [http-nio-8080-exec-7] DEBUG [1be1c87ca1c247a4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:14:56.603 [http-nio-8080-exec-7] DEBUG [1be1c87ca1c247a4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:14:56.610 [http-nio-8080-exec-7] DEBUG [1be1c87ca1c247a4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:15:14.564 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:15:14.565 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:15:14.566 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:15:14.567 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:15:15.326 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:15:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:15:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:15:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:15:36.063 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:15:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:15:57.593 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:15:57.594 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:15:57.594 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:15:57.595 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:15:57.595 [http-nio-8080-exec-10] DEBUG [bd9376578eea42d9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:15:57.596 [http-nio-8080-exec-10] DEBUG [bd9376578eea42d9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:15:57.598 [http-nio-8080-exec-10] DEBUG [bd9376578eea42d9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:15:57.598 [http-nio-8080-exec-10] DEBUG [bd9376578eea42d9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:15:57.599 [http-nio-8080-exec-10] DEBUG [bd9376578eea42d9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:16:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:16:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:16:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:16:05.368 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:16:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:16:32.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:16:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:16:38.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:16:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:16:57.600 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:16:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:16:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:16:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:16:57.604 [http-nio-8080-exec-1] DEBUG [ebaff15797094541] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:16:57.605 [http-nio-8080-exec-1] DEBUG [ebaff15797094541] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:16:57.607 [http-nio-8080-exec-1] DEBUG [ebaff15797094541] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:16:57.608 [http-nio-8080-exec-1] DEBUG [ebaff15797094541] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:16:57.609 [http-nio-8080-exec-1] DEBUG [ebaff15797094541] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:17:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:17:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:17:02.836 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:17:07.961 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:17:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:17:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:17:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:17:46.501 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:17:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:17:57.598 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:17:57.598 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:17:57.599 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:17:57.600 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:17:57.600 [http-nio-8080-exec-2] DEBUG [99cdfeb397f84044] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:17:57.601 [http-nio-8080-exec-2] DEBUG [99cdfeb397f84044] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:17:57.603 [http-nio-8080-exec-2] DEBUG [99cdfeb397f84044] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:17:57.604 [http-nio-8080-exec-2] DEBUG [99cdfeb397f84044] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:17:57.606 [http-nio-8080-exec-2] DEBUG [99cdfeb397f84044] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:18:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:18:02.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:18:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:18:07.266 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:18:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:18:32.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:18:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:18:34.062 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:18:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:18:57.597 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:18:57.598 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:18:57.598 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:18:57.599 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:18:57.600 [http-nio-8080-exec-3] DEBUG [3423a75c5d984a34] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:18:57.601 [http-nio-8080-exec-3] DEBUG [3423a75c5d984a34] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:18:57.604 [http-nio-8080-exec-3] DEBUG [3423a75c5d984a34] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:18:57.605 [http-nio-8080-exec-3] DEBUG [3423a75c5d984a34] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:18:57.606 [http-nio-8080-exec-3] DEBUG [3423a75c5d984a34] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:19:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:19:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:19:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:19:04.760 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:19:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:19:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:19:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:19:34.242 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:19:57.595 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:19:57.597 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:19:57.597 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:19:57.597 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:19:57.599 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:19:57.599 [http-nio-8080-exec-5] DEBUG [d490184bf5e14be9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:19:57.600 [http-nio-8080-exec-5] DEBUG [d490184bf5e14be9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:19:57.602 [http-nio-8080-exec-5] DEBUG [d490184bf5e14be9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:19:57.602 [http-nio-8080-exec-5] DEBUG [d490184bf5e14be9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:19:57.605 [http-nio-8080-exec-5] DEBUG [d490184bf5e14be9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:20:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:20:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:20:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:20:08.301 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:20:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:20:32.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:20:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:20:44.663 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:20:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:20:57.600 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:20:57.601 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:20:57.601 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:20:57.603 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:20:57.603 [http-nio-8080-exec-6] DEBUG [7c6cc4c9c6054ba1] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:20:57.604 [http-nio-8080-exec-6] DEBUG [7c6cc4c9c6054ba1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:20:57.607 [http-nio-8080-exec-6] DEBUG [7c6cc4c9c6054ba1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:20:57.607 [http-nio-8080-exec-6] DEBUG [7c6cc4c9c6054ba1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:20:57.609 [http-nio-8080-exec-6] DEBUG [7c6cc4c9c6054ba1] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:21:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:21:02.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:21:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:21:32.848 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:21:32.849 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:21:32.850 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:21:32.851 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:21:51.459 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:21:51.460 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:51.460 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:51.460 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:51.461 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:21:51.462 [http-nio-8080-exec-7] DEBUG [f66e8e66e8474756] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:21:51.462 [http-nio-8080-exec-7] DEBUG [f66e8e66e8474756] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:21:51.464 [http-nio-8080-exec-7] DEBUG [f66e8e66e8474756] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:21:51.465 [http-nio-8080-exec-7] DEBUG [f66e8e66e8474756] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:21:51.466 [http-nio-8080-exec-7] DEBUG [f66e8e66e8474756] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:21:52.618 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:21:54.349 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:54.350 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:54.350 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:54.351 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:54.430 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:54.431 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:54.431 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:54.431 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:55.047 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:55.048 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:55.049 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:55.049 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:55.160 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:55.161 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:55.161 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:55.162 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:55.391 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:55.392 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:55.392 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:55.392 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:55.457 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:55.458 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:55.458 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:55.458 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:55.595 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:55.595 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:55.596 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:55.596 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:55.653 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:55.653 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:55.653 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:55.654 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:55.810 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:55.811 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:55.811 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:55.812 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:55.890 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:55.891 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:55.891 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:55.891 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.042 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:56.042 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.042 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.043 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.091 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:56.092 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.092 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.092 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.200 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:56.201 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.201 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.201 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.265 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:56.266 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.266 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.267 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.396 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:56.397 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.397 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.397 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.459 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:56.460 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.460 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.460 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.590 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:21:56.591 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:21:56.592 [http-nio-8080-exec-4] DEBUG [e3da6bba80a24764] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:21:56.593 [http-nio-8080-exec-4] DEBUG [e3da6bba80a24764] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:21:56.594 [http-nio-8080-exec-4] DEBUG [e3da6bba80a24764] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:21:56.594 [http-nio-8080-exec-4] DEBUG [e3da6bba80a24764] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:21:56.599 [http-nio-8080-exec-4] DEBUG [e3da6bba80a24764] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:21:56.679 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:56.680 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.680 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.680 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.743 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:56.744 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.744 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.744 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.923 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:56.924 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.924 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.924 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:56.982 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:56.983 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:56.983 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:56.984 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:57.217 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:57.220 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:57.220 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:57.220 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:57.297 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:57.298 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:57.299 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:57.300 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:57.451 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:57.451 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:57.452 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:57.452 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:57.537 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:57.537 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:57.540 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:57.542 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:57.675 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:57.676 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:57.676 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:57.676 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:57.732 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:57.733 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:57.733 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:57.733 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:57.842 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:57.843 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:57.843 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:57.843 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:57.893 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:57.893 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:57.894 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:57.894 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:58.097 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:58.097 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:58.097 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:58.098 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:58.150 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:58.151 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:58.151 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:58.151 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:58.314 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:58.314 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:58.319 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:58.319 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:58.398 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:58.399 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:58.399 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:58.399 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:58.524 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:58.525 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:58.525 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:58.525 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:58.579 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:58.580 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:58.581 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:58.581 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:58.729 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:58.729 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:58.730 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:58.730 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:58.790 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:58.791 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:58.791 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:58.791 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:58.930 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:58.931 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:58.931 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:58.931 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.006 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:59.008 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.008 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.008 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.123 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:59.123 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.123 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.123 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.178 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:59.178 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.179 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.179 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.310 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:59.310 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.310 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.311 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.376 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:59.376 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.376 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.376 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.486 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:59.486 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.487 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.487 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.544 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:59.544 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.544 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.545 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.646 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:59.647 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.647 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.647 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.700 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:59.700 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.701 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.701 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.836 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:21:59.837 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.837 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.837 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:21:59.954 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:21:59.955 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:21:59.955 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:21:59.956 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.003 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:00.004 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.004 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.004 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.068 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:00.069 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.069 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.069 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.192 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:00.192 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.193 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.193 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.249 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:00.250 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.251 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.251 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.376 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:00.377 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.377 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.377 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.433 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:00.435 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.435 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.436 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.556 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:00.556 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.556 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.556 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.608 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:00.609 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.609 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.609 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.745 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:00.745 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.745 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.745 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.794 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:00.794 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.795 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.795 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.894 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:00.895 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.895 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.895 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:00.960 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:00.961 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:00.961 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:00.961 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:01.062 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:01.063 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:01.063 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:01.063 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:01.125 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:01.125 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:01.126 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:01.126 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:01.242 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:01.242 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:01.242 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:01.243 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:01.294 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:01.294 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:01.295 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:01.295 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:01.589 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:01.590 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:01.590 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:01.590 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:01.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:01.591 [http-nio-8080-exec-3] DEBUG [8daad0db5f5c40f0] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:01.591 [http-nio-8080-exec-3] DEBUG [8daad0db5f5c40f0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:01.592 [http-nio-8080-exec-3] DEBUG [8daad0db5f5c40f0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:01.592 [http-nio-8080-exec-3] DEBUG [8daad0db5f5c40f0] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:01.593 [http-nio-8080-exec-3] DEBUG [8daad0db5f5c40f0] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:22:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:22:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:22:03.043 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:22:06.590 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:06.590 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:06.590 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:06.590 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:06.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:06.591 [http-nio-8080-exec-4] DEBUG [54b6adab60b64e19] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:06.592 [http-nio-8080-exec-4] DEBUG [54b6adab60b64e19] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:06.592 [http-nio-8080-exec-4] DEBUG [54b6adab60b64e19] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:06.593 [http-nio-8080-exec-4] DEBUG [54b6adab60b64e19] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:06.593 [http-nio-8080-exec-4] DEBUG [54b6adab60b64e19] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:11.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:11.592 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:11.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:11.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:11.594 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:11.594 [http-nio-8080-exec-5] DEBUG [5aa7f2135d244a65] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:11.595 [http-nio-8080-exec-5] DEBUG [5aa7f2135d244a65] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:11.596 [http-nio-8080-exec-5] DEBUG [5aa7f2135d244a65] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:11.597 [http-nio-8080-exec-5] DEBUG [5aa7f2135d244a65] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:11.599 [http-nio-8080-exec-5] DEBUG [5aa7f2135d244a65] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:16.590 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:16.590 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:16.591 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:16.591 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:16.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:16.592 [http-nio-8080-exec-6] DEBUG [24e22713f59a4c17] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:16.592 [http-nio-8080-exec-6] DEBUG [24e22713f59a4c17] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:16.593 [http-nio-8080-exec-6] DEBUG [24e22713f59a4c17] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:16.594 [http-nio-8080-exec-6] DEBUG [24e22713f59a4c17] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:16.595 [http-nio-8080-exec-6] DEBUG [24e22713f59a4c17] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:19.384 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 16:22:19.391 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-03T19:20:47Z. Current time: 2025-11-03T19:22:19Z, a difference of 92390 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 16:22:19.400 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:21.593 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:21.594 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:21.595 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:21.595 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:21.596 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:21.597 [http-nio-8080-exec-9] DEBUG [75526ce67878451a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:21.597 [http-nio-8080-exec-9] DEBUG [75526ce67878451a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:21.601 [http-nio-8080-exec-9] DEBUG [75526ce67878451a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:21.601 [http-nio-8080-exec-9] DEBUG [75526ce67878451a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:21.603 [http-nio-8080-exec-9] DEBUG [75526ce67878451a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:26.589 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:26.590 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:26.590 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:26.590 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:26.591 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:26.591 [http-nio-8080-exec-10] DEBUG [7cea3a42f2934942] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:26.592 [http-nio-8080-exec-10] DEBUG [7cea3a42f2934942] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:26.592 [http-nio-8080-exec-10] DEBUG [7cea3a42f2934942] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:26.593 [http-nio-8080-exec-10] DEBUG [7cea3a42f2934942] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:26.593 [http-nio-8080-exec-10] DEBUG [7cea3a42f2934942] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:27.794 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 16:22:27.797 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-03T19:20:00Z. Current time: 2025-11-03T19:22:27Z, a difference of 147796 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 16:22:27.797 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:27.798 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 16:22:27.798 [http-nio-8080-exec-1] DEBUG [07340b8b86234b07] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 16:22:27.798 [http-nio-8080-exec-1] DEBUG [07340b8b86234b07] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 16:22:27.810 [http-nio-8080-exec-1] DEBUG [07340b8b86234b07] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@50f4c852]
2025-11-03 16:22:27.999 [http-nio-8080-exec-1] DEBUG [07340b8b86234b07] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:22:28.122 [http-nio-8080-exec-1] DEBUG [07340b8b86234b07] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 16:22:28.130 [http-nio-8080-exec-1] DEBUG [07340b8b86234b07] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:28.130 [http-nio-8080-exec-1] DEBUG [07340b8b86234b07] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@52ac449a]
2025-11-03 16:22:28.138 [http-nio-8080-exec-1] DEBUG [07340b8b86234b07] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:31.590 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:31.591 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:31.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:31.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:31.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:31.592 [http-nio-8080-exec-2] DEBUG [8fcf50ee059848cc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:31.593 [http-nio-8080-exec-2] DEBUG [8fcf50ee059848cc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:31.595 [http-nio-8080-exec-2] DEBUG [8fcf50ee059848cc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:31.595 [http-nio-8080-exec-2] DEBUG [8fcf50ee059848cc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:31.603 [http-nio-8080-exec-2] DEBUG [8fcf50ee059848cc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:22:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:22:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:22:36.590 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:36.590 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:36.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:36.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:36.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:36.592 [http-nio-8080-exec-3] DEBUG [6b2f198753164b15] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:36.592 [http-nio-8080-exec-3] DEBUG [6b2f198753164b15] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:36.593 [http-nio-8080-exec-3] DEBUG [6b2f198753164b15] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:36.593 [http-nio-8080-exec-3] DEBUG [6b2f198753164b15] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:36.594 [http-nio-8080-exec-3] DEBUG [6b2f198753164b15] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:41.590 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:41.590 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:41.590 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:41.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:41.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:41.591 [http-nio-8080-exec-4] DEBUG [6d55ae5929244e1c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:41.591 [http-nio-8080-exec-4] DEBUG [6d55ae5929244e1c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:41.592 [http-nio-8080-exec-4] DEBUG [6d55ae5929244e1c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:41.593 [http-nio-8080-exec-4] DEBUG [6d55ae5929244e1c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:41.593 [http-nio-8080-exec-4] DEBUG [6d55ae5929244e1c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:46.590 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:46.591 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:46.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:46.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:46.592 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:46.593 [http-nio-8080-exec-5] DEBUG [934d9f066a12420c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:46.593 [http-nio-8080-exec-5] DEBUG [934d9f066a12420c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:46.594 [http-nio-8080-exec-5] DEBUG [934d9f066a12420c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:46.594 [http-nio-8080-exec-5] DEBUG [934d9f066a12420c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:22:46.595 [http-nio-8080-exec-5] DEBUG [934d9f066a12420c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:47.581 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 16:22:47.586 [http-nio-8080-exec-6] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 16:22:47.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 16:22:47.594 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] o.s.web.servlet.DispatcherServlet - POST "/api/pedidos", parameters={}
2025-11-03 16:22:47.594 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 16:22:47.608 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@7b117de4]
2025-11-03 16:22:47.655 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 16:22:47.659 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 16:22:47.680 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 16:22:47.685 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-03 16:22:47.690 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 16:22:47.711 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 16:22:47.717 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-03 16:22:47.743 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-03 16:22:47.748 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:47.748 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@4ff4c1cb]
2025-11-03 16:22:47.756 [http-nio-8080-exec-6] DEBUG [8c682f05c17948ef] o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-11-03 16:22:51.600 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:51.601 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:51.601 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:51.601 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:51.602 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:51.603 [http-nio-8080-exec-7] DEBUG [6aa45ac2c9f74a0f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:51.605 [http-nio-8080-exec-7] DEBUG [6aa45ac2c9f74a0f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:51.609 [http-nio-8080-exec-7] DEBUG [6aa45ac2c9f74a0f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:51.610 [http-nio-8080-exec-7] DEBUG [6aa45ac2c9f74a0f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=63.335298, receita_total=40.9, pedid (truncated)...]
2025-11-03 16:22:51.612 [http-nio-8080-exec-7] DEBUG [6aa45ac2c9f74a0f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:22:52.403 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:52.403 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:52.403 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:52.404 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:52.480 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:52.481 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:52.481 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:52.481 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:53.252 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/prometheus
2025-11-03 16:22:53.254 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:53.255 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:53.256 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:53.313 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:22:53.314 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:53.314 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:53.314 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:56.467 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:22:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:22:57.591 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:22:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:22:57.591 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:22:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:22:57.592 [http-nio-8080-exec-3] DEBUG [2149192a8fa74010] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:22:57.592 [http-nio-8080-exec-3] DEBUG [2149192a8fa74010] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:22:57.593 [http-nio-8080-exec-3] DEBUG [2149192a8fa74010] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:22:57.593 [http-nio-8080-exec-3] DEBUG [2149192a8fa74010] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=63.335298, receita_total=40.9, pedid (truncated)...]
2025-11-03 16:22:57.594 [http-nio-8080-exec-3] DEBUG [2149192a8fa74010] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:23:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:23:02.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:23:02.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:23:04.910 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:23:08.840 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 16:23:08.843 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-01T20:33:22Z. Current time: 2025-11-03T19:23:08Z, a difference of 168586843 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 16:23:08.844 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:23:08.848 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 16:23:08.848 [http-nio-8080-exec-4] DEBUG [702500ea17f84477] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 16:23:08.908 [http-nio-8080-exec-4] DEBUG [702500ea17f84477] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{email=admin@delivery.com, senha=123456}]
2025-11-03 16:23:08.909 [http-nio-8080-exec-4] DEBUG [702500ea17f84477] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:23:08.910 [http-nio-8080-exec-4] DEBUG [702500ea17f84477] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:23:19.986 [http-nio-8080-exec-4] DEBUG [702500ea17f84477] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:23:19.989 [http-nio-8080-exec-4] WARN  [702500ea17f84477] o.s.b.a.health.HealthEndpointSupport - Health contributor com.deliverytech.delivery.health.ExternalServiceHealthIndicator (externalService) took 11077ms to respond
2025-11-03 16:23:19.990 [http-nio-8080-exec-4] DEBUG [702500ea17f84477] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 16:23:19.992 [http-nio-8080-exec-4] DEBUG [702500ea17f84477] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@2962c8cf]
2025-11-03 16:23:20.011 [http-nio-8080-exec-4] DEBUG [702500ea17f84477] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:23:32.583 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-11-03 16:23:32.584 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:23:32.584 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:23:32.584 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:23:32.587 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-11-03 16:23:32.587 [http-nio-8080-exec-5] DEBUG [ac73c192274d4215] o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-11-03 16:23:32.588 [http-nio-8080-exec-5] DEBUG [ac73c192274d4215] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-11-03 16:23:32.589 [http-nio-8080-exec-5] DEBUG [ac73c192274d4215] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:23:32.590 [http-nio-8080-exec-5] DEBUG [ac73c192274d4215] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:23:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:23:32.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:23:32.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:23:34.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:23:46.931 [http-nio-8080-exec-5] DEBUG [ac73c192274d4215] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:23:46.931 [http-nio-8080-exec-5] WARN  [ac73c192274d4215] o.s.b.a.health.HealthEndpointSupport - Health contributor com.deliverytech.delivery.health.ExternalServiceHealthIndicator (externalService) took 14342ms to respond
2025-11-03 16:23:46.933 [http-nio-8080-exec-5] DEBUG [ac73c192274d4215] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 16:23:46.933 [http-nio-8080-exec-5] DEBUG [ac73c192274d4215] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@7eedda0a]
2025-11-03 16:23:46.935 [http-nio-8080-exec-5] DEBUG [ac73c192274d4215] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:23:47.052 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:23:47.053 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:23:47.054 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:23:47.054 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:23:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:23:57.596 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:23:57.597 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:23:57.597 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:23:57.599 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:23:57.599 [http-nio-8080-exec-7] DEBUG [16dc67f287c442e5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:23:57.600 [http-nio-8080-exec-7] DEBUG [16dc67f287c442e5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:23:57.603 [http-nio-8080-exec-7] DEBUG [16dc67f287c442e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:23:57.603 [http-nio-8080-exec-7] DEBUG [16dc67f287c442e5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=63.335298, receita_total=40.9, pedid (truncated)...]
2025-11-03 16:23:57.605 [http-nio-8080-exec-7] DEBUG [16dc67f287c442e5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:24:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:24:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:24:02.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:24:09.621 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:24:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:24:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:24:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:24:34.239 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:24:57.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:24:57.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:24:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:24:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:24:57.593 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:24:57.594 [http-nio-8080-exec-10] DEBUG [669e69bab28947bd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:24:57.594 [http-nio-8080-exec-10] DEBUG [669e69bab28947bd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:24:57.595 [http-nio-8080-exec-10] DEBUG [669e69bab28947bd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:24:57.595 [http-nio-8080-exec-10] DEBUG [669e69bab28947bd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=63.335298, receita_total=40.9, pedid (truncated)...]
2025-11-03 16:24:57.596 [http-nio-8080-exec-10] DEBUG [669e69bab28947bd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:25:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:25:02.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:25:02.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:25:33.687 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:25:33.688 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:25:33.689 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:25:33.690 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:25:35.333 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:25:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:25:57.592 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:25:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:25:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:25:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:25:57.593 [http-nio-8080-exec-1] DEBUG [5595fb58b784434d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:25:57.594 [http-nio-8080-exec-1] DEBUG [5595fb58b784434d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:25:57.595 [http-nio-8080-exec-1] DEBUG [5595fb58b784434d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:25:57.595 [http-nio-8080-exec-1] DEBUG [5595fb58b784434d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=63.335298, receita_total=40.9, pedid (truncated)...]
2025-11-03 16:25:57.596 [http-nio-8080-exec-1] DEBUG [5595fb58b784434d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:26:02.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:26:02.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:26:02.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:26:05.721 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:26:32.833 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:26:32.834 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:26:32.835 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:26:41.907 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-03 16:26:41.909 [Thread-91] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:26:41.910 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:26:41.911 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:26:41.912 [Thread-91] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:26:46.103 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:26:46.108 [Thread-91] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:26:46.109 [Thread-91] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:26:46.110 [Thread-91] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:26:46.111 [Thread-91] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:26:46.111 [Thread-91] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:26:46.112 [Thread-91] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:26:46.112 [Thread-91] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:26:46.114 [Thread-91] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:26:46.115 [Thread-91] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown initiated...
2025-11-03 16:26:46.117 [Thread-91] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown completed.
2025-11-03 16:26:46.930 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:26:46.930 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:26:46.930 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:26:47.586 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:26:47.611 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 5 JPA repository interfaces.
2025-11-03 16:26:47.886 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:26:47.888 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:26:47.888 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:26:47.888 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:26:47.905 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:26:47.905 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 972 ms
2025-11-03 16:26:48.108 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:26:48.108 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:26:48.109 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:26:48.207 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:26:48.209 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Starting...
2025-11-03 16:26:48.212 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-25 - Added connection conn229: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:26:48.212 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Start completed.
2025-11-03 16:26:48.213 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:26:48.375 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:26:48.375 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:26:48.375 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:26:48.375 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:26:48.375 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:26:48.375 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:26:48.376 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:26:48.377 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:26:48.378 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:26:48.379 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:26:48.379 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:26:48.380 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:26:48.380 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:26:48.382 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:26:48.383 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:26:48.384 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:26:48.385 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:26:48.387 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:26:48.748 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:26:49.105 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:26:49.166 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:26:49.407 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:26:49.532 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:26:49.592 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:26:49.655 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:26:49.858 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:26:49.966 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:26:50.002 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:26:50.005 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:26:50.023 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:26:50.024 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.141 seconds (process running for 3577.583)
2025-11-03 16:26:50.024 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:26:50.025 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:26:50.029 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:26:53.013 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:26:54.017 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:26:54.017 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:26:57.624 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:26:57.624 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:26:57.625 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:26:57.625 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:26:57.625 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:26:57.627 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5e6fa9c6
2025-11-03 16:26:57.628 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@d9b1af
2025-11-03 16:26:57.628 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:26:57.628 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-03 16:26:57.630 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:26:57.633 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:26:57.637 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:26:57.639 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:26:57.645 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:26:57.655 [http-nio-8080-exec-1] DEBUG [42d5613cafcf4acb] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:26:57.656 [http-nio-8080-exec-1] DEBUG [42d5613cafcf4acb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:26:57.660 [http-nio-8080-exec-1] DEBUG [42d5613cafcf4acb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:26:57.660 [http-nio-8080-exec-1] DEBUG [42d5613cafcf4acb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:26:57.690 [http-nio-8080-exec-1] DEBUG [42d5613cafcf4acb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:27:20.023 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:27:20.024 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:27:20.024 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:27:22.362 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:27:47.663 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:27:47.666 [Thread-95] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:27:47.667 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:27:47.669 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:27:47.670 [Thread-95] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:27:47.683 [Thread-95] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:27:47.684 [Thread-95] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:27:47.685 [Thread-95] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:27:47.685 [Thread-95] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:27:47.685 [Thread-95] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:27:47.686 [Thread-95] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:27:47.686 [Thread-95] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:27:47.687 [Thread-95] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:27:47.688 [Thread-95] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown initiated...
2025-11-03 16:27:47.689 [Thread-95] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown completed.
2025-11-03 16:27:48.524 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:27:48.524 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:27:48.524 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:27:49.096 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:27:49.143 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 5 JPA repository interfaces.
2025-11-03 16:27:49.565 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:27:49.576 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:27:49.578 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:27:49.579 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:27:49.617 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:27:49.627 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1100 ms
2025-11-03 16:27:49.951 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:27:49.952 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:27:49.952 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:27:50.037 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:27:50.038 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Starting...
2025-11-03 16:27:50.040 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-26 - Added connection conn239: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:27:50.040 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Start completed.
2025-11-03 16:27:50.041 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:27:50.191 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:27:50.192 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:27:50.192 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:27:50.192 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:27:50.192 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:27:50.192 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:27:50.193 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:27:50.194 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:27:50.195 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:27:50.195 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:27:50.196 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:27:50.197 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:27:50.199 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:27:50.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:27:50.201 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:27:50.203 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:27:50.204 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:27:50.207 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:27:50.644 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:27:50.962 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:27:51.020 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:27:51.262 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:27:51.375 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:27:51.435 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:27:51.493 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:27:51.654 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:27:51.741 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:27:51.779 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:27:51.786 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:27:51.806 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:27:51.808 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.328 seconds (process running for 3639.367)
2025-11-03 16:27:51.809 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:27:51.810 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:27:51.813 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:27:53.032 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:27:54.050 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:27:54.051 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:27:57.603 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:27:57.603 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:27:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:27:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:27:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:27:57.618 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3170631f
2025-11-03 16:27:57.623 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@682c1c43
2025-11-03 16:27:57.625 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:27:57.626 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 23 ms
2025-11-03 16:27:57.633 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:27:57.635 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:27:57.635 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:27:57.635 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:27:57.643 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:27:57.645 [http-nio-8080-exec-1] DEBUG [904f216a2ac24da5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:27:57.651 [http-nio-8080-exec-1] DEBUG [904f216a2ac24da5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:27:57.656 [http-nio-8080-exec-1] DEBUG [904f216a2ac24da5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:27:57.656 [http-nio-8080-exec-1] DEBUG [904f216a2ac24da5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:27:57.662 [http-nio-8080-exec-1] DEBUG [904f216a2ac24da5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:28:21.806 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:28:21.807 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:28:21.808 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:28:25.199 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:28:51.806 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:28:51.807 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:28:51.808 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:28:57.594 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:28:57.595 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:28:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:28:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:28:57.597 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:28:57.597 [http-nio-8080-exec-2] DEBUG [ca7c1006afa449c6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:28:57.598 [http-nio-8080-exec-2] DEBUG [ca7c1006afa449c6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:28:57.600 [http-nio-8080-exec-2] DEBUG [ca7c1006afa449c6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:28:57.600 [http-nio-8080-exec-2] DEBUG [ca7c1006afa449c6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:28:57.601 [http-nio-8080-exec-2] DEBUG [ca7c1006afa449c6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:29:21.063 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:29:21.066 [Thread-99] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:29:21.066 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:29:21.067 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:29:21.068 [Thread-99] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:29:42.683 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:29:42.688 [Thread-99] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:29:42.688 [Thread-99] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:29:42.689 [Thread-99] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:29:42.690 [Thread-99] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:29:42.690 [Thread-99] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:29:42.691 [Thread-99] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:29:42.691 [Thread-99] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:29:42.693 [Thread-99] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:29:42.694 [Thread-99] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Shutdown initiated...
2025-11-03 16:29:42.695 [Thread-99] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Shutdown completed.
2025-11-03 16:29:43.439 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:29:43.439 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:29:43.439 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:29:43.883 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:29:43.910 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-03 16:29:44.114 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:29:44.115 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:29:44.115 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:29:44.115 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:29:44.127 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:29:44.127 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 686 ms
2025-11-03 16:29:44.313 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:29:44.314 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:29:44.314 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:29:44.398 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:29:44.399 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Starting...
2025-11-03 16:29:44.401 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-27 - Added connection conn249: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:29:44.401 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Start completed.
2025-11-03 16:29:44.402 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:29:44.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:29:44.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:29:44.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:29:44.528 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:29:44.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:29:44.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:29:44.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:29:44.531 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:29:44.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:29:44.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:29:44.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:29:44.534 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:29:44.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:29:44.536 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:29:44.537 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:29:44.538 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:29:44.539 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:29:44.540 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:29:44.955 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:29:45.283 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:29:45.356 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:29:45.507 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:29:45.622 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:29:45.673 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:29:45.729 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:29:45.874 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:29:45.953 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:29:45.988 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:29:45.991 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:29:46.009 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.602 seconds (process running for 3753.569)
2025-11-03 16:29:46.014 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:29:46.015 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:29:46.017 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:29:46.018 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:29:52.420 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:29:52.420 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:29:52.421 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:29:52.421 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:29:52.421 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:29:52.423 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@79ee0dfd
2025-11-03 16:29:52.424 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3497a46c
2025-11-03 16:29:52.424 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:29:52.424 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-03 16:29:52.426 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:29:52.427 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:29:52.428 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:29:52.428 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:29:52.439 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:29:52.440 [http-nio-8080-exec-1] DEBUG [2ef463be5247443d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:29:52.441 [http-nio-8080-exec-1] DEBUG [2ef463be5247443d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:29:52.447 [http-nio-8080-exec-1] DEBUG [2ef463be5247443d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:29:52.451 [http-nio-8080-exec-1] DEBUG [2ef463be5247443d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:29:52.466 [http-nio-8080-exec-1] DEBUG [2ef463be5247443d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:29:53.451 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:29:53.451 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 5 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:29:56.590 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:29:56.590 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:29:56.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:29:56.591 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:29:56.591 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:29:56.592 [http-nio-8080-exec-2] DEBUG [c154e292561f44f7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:29:56.592 [http-nio-8080-exec-2] DEBUG [c154e292561f44f7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:29:56.593 [http-nio-8080-exec-2] DEBUG [c154e292561f44f7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:29:56.593 [http-nio-8080-exec-2] DEBUG [c154e292561f44f7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:29:56.594 [http-nio-8080-exec-2] DEBUG [c154e292561f44f7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:01.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:01.594 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:01.597 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:01.597 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:01.599 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:01.600 [http-nio-8080-exec-3] DEBUG [7b49d940213d4cff] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:01.600 [http-nio-8080-exec-3] DEBUG [7b49d940213d4cff] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:01.602 [http-nio-8080-exec-3] DEBUG [7b49d940213d4cff] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:01.603 [http-nio-8080-exec-3] DEBUG [7b49d940213d4cff] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:01.605 [http-nio-8080-exec-3] DEBUG [7b49d940213d4cff] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:06.590 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:06.592 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:06.595 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:06.595 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:06.597 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:06.601 [http-nio-8080-exec-4] DEBUG [e4c565f4dfb34218] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:06.603 [http-nio-8080-exec-4] DEBUG [e4c565f4dfb34218] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:06.608 [http-nio-8080-exec-4] DEBUG [e4c565f4dfb34218] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:06.610 [http-nio-8080-exec-4] DEBUG [e4c565f4dfb34218] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:06.612 [http-nio-8080-exec-4] DEBUG [e4c565f4dfb34218] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:11.592 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:11.593 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:11.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:11.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:11.595 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:11.595 [http-nio-8080-exec-5] DEBUG [8b7b715bfeff404b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:11.596 [http-nio-8080-exec-5] DEBUG [8b7b715bfeff404b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:11.597 [http-nio-8080-exec-5] DEBUG [8b7b715bfeff404b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:11.597 [http-nio-8080-exec-5] DEBUG [8b7b715bfeff404b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:11.598 [http-nio-8080-exec-5] DEBUG [8b7b715bfeff404b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:15.962 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:30:16.006 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:30:16.007 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:30:16.007 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:30:16.589 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:16.590 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:16.590 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:16.590 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:16.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:16.591 [http-nio-8080-exec-6] DEBUG [542a133e54ae4aa3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:16.591 [http-nio-8080-exec-6] DEBUG [542a133e54ae4aa3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:16.592 [http-nio-8080-exec-6] DEBUG [542a133e54ae4aa3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:16.592 [http-nio-8080-exec-6] DEBUG [542a133e54ae4aa3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:16.593 [http-nio-8080-exec-6] DEBUG [542a133e54ae4aa3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:20.867 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:30:21.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:21.592 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:21.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:21.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:21.593 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:21.593 [http-nio-8080-exec-7] DEBUG [50ce541919de4790] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:21.594 [http-nio-8080-exec-7] DEBUG [50ce541919de4790] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:21.595 [http-nio-8080-exec-7] DEBUG [50ce541919de4790] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:21.596 [http-nio-8080-exec-7] DEBUG [50ce541919de4790] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:21.603 [http-nio-8080-exec-7] DEBUG [50ce541919de4790] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:26.589 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:26.590 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:26.590 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:26.590 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:26.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:26.591 [http-nio-8080-exec-8] DEBUG [a540a101dc9140b2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:26.591 [http-nio-8080-exec-8] DEBUG [a540a101dc9140b2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:26.592 [http-nio-8080-exec-8] DEBUG [a540a101dc9140b2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:26.592 [http-nio-8080-exec-8] DEBUG [a540a101dc9140b2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:26.593 [http-nio-8080-exec-8] DEBUG [a540a101dc9140b2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:31.589 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:31.603 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:31.604 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:31.606 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:31.610 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:31.611 [http-nio-8080-exec-9] DEBUG [2cd1c7c5b05e41f1] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:31.612 [http-nio-8080-exec-9] DEBUG [2cd1c7c5b05e41f1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:31.613 [http-nio-8080-exec-9] DEBUG [2cd1c7c5b05e41f1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:31.614 [http-nio-8080-exec-9] DEBUG [2cd1c7c5b05e41f1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:31.621 [http-nio-8080-exec-9] DEBUG [2cd1c7c5b05e41f1] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:36.591 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:36.592 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:36.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:36.593 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:36.594 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:36.595 [http-nio-8080-exec-10] DEBUG [69e6fa12060d4f84] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:36.595 [http-nio-8080-exec-10] DEBUG [69e6fa12060d4f84] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:36.597 [http-nio-8080-exec-10] DEBUG [69e6fa12060d4f84] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:36.597 [http-nio-8080-exec-10] DEBUG [69e6fa12060d4f84] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:36.605 [http-nio-8080-exec-10] DEBUG [69e6fa12060d4f84] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:41.590 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:41.591 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:41.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:41.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:41.592 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:41.593 [http-nio-8080-exec-1] DEBUG [93a7570dfd344d46] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:41.593 [http-nio-8080-exec-1] DEBUG [93a7570dfd344d46] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:41.594 [http-nio-8080-exec-1] DEBUG [93a7570dfd344d46] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:41.594 [http-nio-8080-exec-1] DEBUG [93a7570dfd344d46] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:41.595 [http-nio-8080-exec-1] DEBUG [93a7570dfd344d46] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:42.061 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:30:42.064 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:42.064 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:42.144 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:30:42.144 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:42.144 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:42.144 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:46.006 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:30:46.008 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:30:46.008 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:30:46.589 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:46.590 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:46.590 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:46.590 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:46.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:46.591 [http-nio-8080-exec-4] DEBUG [604b537c15154f72] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:46.591 [http-nio-8080-exec-4] DEBUG [604b537c15154f72] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:46.593 [http-nio-8080-exec-4] DEBUG [604b537c15154f72] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:46.594 [http-nio-8080-exec-4] DEBUG [604b537c15154f72] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:46.594 [http-nio-8080-exec-4] DEBUG [604b537c15154f72] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:51.592 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:51.593 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:51.594 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:51.594 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:51.596 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:51.596 [http-nio-8080-exec-5] DEBUG [ca6c06cd127245a7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:51.597 [http-nio-8080-exec-5] DEBUG [ca6c06cd127245a7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:51.600 [http-nio-8080-exec-5] DEBUG [ca6c06cd127245a7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:51.601 [http-nio-8080-exec-5] DEBUG [ca6c06cd127245a7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:51.602 [http-nio-8080-exec-5] DEBUG [ca6c06cd127245a7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:30:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:30:57.597 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:30:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:30:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:30:57.599 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:30:57.600 [http-nio-8080-exec-6] DEBUG [9c851f43f2484feb] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:30:57.600 [http-nio-8080-exec-6] DEBUG [9c851f43f2484feb] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:30:57.602 [http-nio-8080-exec-6] DEBUG [9c851f43f2484feb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:30:57.603 [http-nio-8080-exec-6] DEBUG [9c851f43f2484feb] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:30:57.604 [http-nio-8080-exec-6] DEBUG [9c851f43f2484feb] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:31:02.008 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:31:16.006 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:31:16.007 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:31:16.008 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:31:16.833 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:31:46.006 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:31:46.007 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:31:46.008 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:31:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:31:57.600 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:31:57.618 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:31:57.618 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:31:57.628 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:31:57.629 [http-nio-8080-exec-8] DEBUG [d9e4e0d5a7a349ab] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:31:57.629 [http-nio-8080-exec-8] DEBUG [d9e4e0d5a7a349ab] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:31:57.635 [http-nio-8080-exec-8] DEBUG [d9e4e0d5a7a349ab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:31:57.636 [http-nio-8080-exec-8] DEBUG [d9e4e0d5a7a349ab] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:31:57.637 [http-nio-8080-exec-8] DEBUG [d9e4e0d5a7a349ab] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:32:18.322 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:32:18.324 [Thread-103] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:32:18.324 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:32:18.325 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:32:18.326 [Thread-103] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:32:21.998 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:32:22.002 [Thread-103] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:32:22.003 [Thread-103] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:32:22.004 [Thread-103] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:32:22.005 [Thread-103] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:32:22.005 [Thread-103] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:32:22.006 [Thread-103] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:32:22.006 [Thread-103] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:32:22.007 [Thread-103] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:32:22.008 [Thread-103] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Shutdown initiated...
2025-11-03 16:32:22.010 [Thread-103] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Shutdown completed.
2025-11-03 16:32:23.058 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:32:23.058 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:32:23.058 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:32:23.650 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:32:23.692 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 5 JPA repository interfaces.
2025-11-03 16:32:24.474 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:32:24.480 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:32:24.483 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:32:24.485 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:32:24.528 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:32:24.531 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1470 ms
2025-11-03 16:32:25.041 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:32:25.043 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:32:25.045 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:32:25.178 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:32:25.180 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Starting...
2025-11-03 16:32:25.183 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-28 - Added connection conn259: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:32:25.183 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Start completed.
2025-11-03 16:32:25.184 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:32:25.326 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:32:25.327 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:32:25.327 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:32:25.327 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:32:25.327 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:32:25.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:32:25.328 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:32:25.330 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:32:25.331 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:32:25.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:32:25.333 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:32:25.334 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:32:25.335 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:32:25.336 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:32:25.337 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:32:25.337 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:32:25.339 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:32:25.340 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:32:25.744 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:32:25.962 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token(s), misplaced construct(s)
	Syntax error on token ""/api/produtos/**"", invalid (
	Syntax error, insert ")" to complete MethodInvocation

2025-11-03 16:32:25.963 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:32:25.964 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:32:25.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:32:25.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:32:25.965 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:32:25.966 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:32:25.966 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:32:25.967 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:32:25.967 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Shutdown initiated...
2025-11-03 16:32:25.968 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Shutdown completed.
2025-11-03 16:32:26.969 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 16:32:26.971 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 16:32:26.986 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 16:32:26.990 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token(s), misplaced construct(s)
	Syntax error on token ""/api/produtos/**"", invalid (
	Syntax error, insert ")" to complete MethodInvocation

	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token(s), misplaced construct(s)
	Syntax error on token ""/api/produtos/**"", invalid (
	Syntax error, insert ")" to complete MethodInvocation

	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:200)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:89)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Syntax error on token(s), misplaced construct(s)
	Syntax error on token ""/api/produtos/**"", invalid (
	Syntax error, insert ")" to complete MethodInvocation

	at com.deliverytech.delivery.config.SecurityConfig.securityFilterChain(SecurityConfig.java:122)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$2(<generated>)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:172)
	... 27 common frames omitted
2025-11-03 16:37:30.684 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:37:30.684 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:37:30.685 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:37:31.202 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:37:31.229 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2025-11-03 16:37:31.465 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:37:31.466 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:37:31.466 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:37:31.466 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:37:31.477 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:37:31.478 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 791 ms
2025-11-03 16:37:31.676 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:37:31.676 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:37:31.676 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:37:31.760 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:37:31.761 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Starting...
2025-11-03 16:37:31.763 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-29 - Added connection conn269: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:37:31.763 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Start completed.
2025-11-03 16:37:31.763 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:37:31.886 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:37:31.886 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:37:31.886 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:37:31.886 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:37:31.886 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:37:31.887 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:37:31.887 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:37:31.888 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:37:31.889 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:37:31.889 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:37:31.890 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:37:31.891 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:37:31.892 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:37:31.893 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:37:31.894 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:37:31.895 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:37:31.896 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:37:31.898 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:37:32.314 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:37:32.768 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:37:32.844 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:37:33.170 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:37:33.353 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:37:33.459 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:37:33.560 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:37:33.769 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:37:33.852 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:37:33.887 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:37:33.890 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:37:33.911 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.274 seconds (process running for 4221.471)
2025-11-03 16:37:33.916 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:37:33.918 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:37:33.919 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:37:33.920 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:37:50.183 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:37:51.188 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:37:51.188 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:37:57.596 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:37:57.596 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:37:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:37:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:37:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:37:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@28254f0f
2025-11-03 16:37:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@fa7e081
2025-11-03 16:37:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:37:57.600 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-03 16:37:57.602 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:37:57.604 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:37:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:37:57.609 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:03.910 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:38:03.911 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:38:03.911 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:38:06.992 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:38:06.993 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:06.993 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:07.075 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:38:07.078 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:07.078 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:07.079 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:08.047 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:38:08.048 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:08.049 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:08.129 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:38:08.129 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:08.130 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:08.130 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:08.580 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:38:08.581 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:08.581 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:08.643 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:38:08.644 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:08.644 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:08.644 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:08.869 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:38:08.869 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:08.869 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:08.941 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:38:08.942 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:08.942 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:08.942 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.074 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:38:09.075 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.075 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.125 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:38:09.126 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:09.126 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.126 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.259 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:38:09.260 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.260 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.312 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:38:09.312 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:09.313 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.313 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.447 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:38:09.448 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.448 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.498 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:38:09.499 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:09.499 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.500 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.614 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:38:09.615 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.615 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.666 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:38:09.667 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:09.667 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.667 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.814 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:38:09.815 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.815 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:09.886 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:38:09.887 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:09.887 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:09.887 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:38:33.456 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:38:33.910 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:38:33.912 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:38:33.912 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:38:57.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:38:57.592 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:38:57.593 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:38:57.593 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:39:06.150 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:39:06.152 [Thread-107] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:39:06.152 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:39:06.153 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:39:06.154 [Thread-107] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:39:18.972 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:39:18.977 [Thread-107] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:39:18.982 [Thread-107] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:39:18.983 [Thread-107] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:39:18.984 [Thread-107] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:39:18.984 [Thread-107] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:39:18.985 [Thread-107] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:39:18.985 [Thread-107] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:39:18.986 [Thread-107] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:39:18.987 [Thread-107] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Shutdown initiated...
2025-11-03 16:39:18.988 [Thread-107] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-29 - Shutdown completed.
2025-11-03 16:39:19.576 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:39:19.577 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:39:19.577 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:39:20.119 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:39:20.172 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2025-11-03 16:39:20.363 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:39:20.364 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:39:20.364 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:39:20.364 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:39:20.376 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:39:20.376 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 797 ms
2025-11-03 16:39:20.554 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:39:20.554 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:39:20.554 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:39:20.624 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:39:20.625 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Starting...
2025-11-03 16:39:20.627 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-30 - Added connection conn279: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:39:20.627 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Start completed.
2025-11-03 16:39:20.627 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:39:20.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:39:20.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:39:20.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:39:20.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:39:20.743 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:39:20.743 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:39:20.743 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:39:20.745 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:39:20.746 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:39:20.746 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:39:20.747 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:39:20.748 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:39:20.749 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:39:20.750 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:39:20.751 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:39:20.752 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:39:20.752 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:39:20.754 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:39:21.261 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:39:21.733 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:39:21.795 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:39:21.940 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:39:22.053 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:39:22.103 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:39:22.158 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:39:22.316 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:39:22.424 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:39:22.469 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:39:22.488 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:39:22.523 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:39:22.524 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.979 seconds (process running for 4330.083)
2025-11-03 16:39:22.524 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:39:22.525 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:39:22.527 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:39:52.000 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:39:52.002 [Thread-114] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:39:52.003 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:39:52.004 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:39:52.005 [Thread-114] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:40:20.234 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:40:20.239 [Thread-114] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:40:20.241 [Thread-114] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:40:20.242 [Thread-114] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:40:20.242 [Thread-114] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:40:20.243 [Thread-114] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:40:20.243 [Thread-114] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:40:20.243 [Thread-114] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:40:20.245 [Thread-114] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:40:20.245 [Thread-114] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Shutdown initiated...
2025-11-03 16:40:20.256 [Thread-114] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-30 - Shutdown completed.
2025-11-03 16:40:21.696 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:40:21.696 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:40:21.696 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:40:22.181 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:40:22.207 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 16:40:22.483 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:40:22.487 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:40:22.488 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:40:22.488 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:40:22.505 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:40:22.505 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 807 ms
2025-11-03 16:40:22.778 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:40:22.778 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:40:22.778 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:40:22.902 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:40:22.903 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Starting...
2025-11-03 16:40:22.906 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-31 - Added connection conn289: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:40:22.908 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Start completed.
2025-11-03 16:40:22.910 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:40:23.072 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:40:23.072 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:40:23.072 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:40:23.072 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:40:23.073 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:40:23.073 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:40:23.073 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:40:23.075 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:40:23.076 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:40:23.077 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:40:23.077 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:40:23.078 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:40:23.079 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:40:23.081 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:40:23.082 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:40:23.083 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:40:23.084 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:40:23.085 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:40:23.670 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:40:24.174 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:40:24.222 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:40:24.369 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:40:24.481 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:40:24.541 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:40:24.611 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:40:24.788 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:40:24.867 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:40:24.901 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:40:24.905 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:40:24.921 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:40:24.924 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.257 seconds (process running for 4392.483)
2025-11-03 16:40:24.924 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:40:24.926 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:40:24.928 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:40:27.470 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:40:28.473 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:40:28.473 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:40:50.382 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:40:50.395 [Thread-118] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:40:50.410 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:40:50.413 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:40:50.413 [Thread-118] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:40:50.421 [Thread-118] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:40:50.421 [Thread-118] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:40:50.422 [Thread-118] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:40:50.422 [Thread-118] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:40:50.423 [Thread-118] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:40:50.423 [Thread-118] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:40:50.423 [Thread-118] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:40:50.424 [Thread-118] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:40:50.439 [Thread-118] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Shutdown initiated...
2025-11-03 16:40:50.440 [Thread-118] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-31 - Shutdown completed.
2025-11-03 16:40:51.076 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:40:51.076 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:40:51.077 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:40:51.589 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:40:51.616 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 16:40:51.808 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:40:51.809 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:40:51.809 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:40:51.810 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:40:51.822 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:40:51.822 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 742 ms
2025-11-03 16:40:52.005 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:40:52.006 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:40:52.006 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:40:52.083 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:40:52.084 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Starting...
2025-11-03 16:40:52.086 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-32 - Added connection conn299: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:40:52.087 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Start completed.
2025-11-03 16:40:52.087 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:40:52.211 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:40:52.212 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:40:52.212 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:40:52.212 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:40:52.212 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:40:52.212 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:40:52.212 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:40:52.214 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:40:52.214 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:40:52.215 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:40:52.216 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:40:52.217 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:40:52.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:40:52.219 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:40:52.220 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:40:52.221 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:40:52.222 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:40:52.224 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:40:52.771 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:40:53.129 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:40:53.183 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:40:53.428 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:40:53.541 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:40:53.599 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:40:53.653 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:40:53.781 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:40:53.853 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:40:53.883 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:40:53.885 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:40:53.899 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:40:53.900 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.863 seconds (process running for 4421.459)
2025-11-03 16:40:53.901 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:40:53.901 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:40:53.903 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:40:55.792 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:40:55.792 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:40:55.792 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:40:55.792 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:40:55.792 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:40:55.797 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3715891
2025-11-03 16:40:55.801 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@540e3d04
2025-11-03 16:40:55.802 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:40:55.802 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-11-03 16:40:55.808 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:40:55.812 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:40:55.812 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:40:55.813 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:40:56.830 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:40:56.830 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 4 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:40:57.842 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:40:59.148 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:40:59.151 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:40:59.151 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:40:59.223 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:40:59.224 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:40:59.225 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:40:59.225 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:01.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:01.592 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:01.592 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:01.593 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:06.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:06.592 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:06.592 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:06.593 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:11.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:11.595 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:11.595 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:11.595 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:16.591 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:16.592 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:16.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:16.592 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:21.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:21.592 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:21.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:21.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:23.899 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:41:23.900 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:41:23.901 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:41:26.590 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:26.591 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:26.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:26.592 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:31.590 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:31.591 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:31.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:31.592 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:36.590 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:36.591 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:36.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:36.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:38.917 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:41:38.918 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:41.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:41.593 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:41.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:41.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:42.928 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:41:43.663 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:41:43.665 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:43.666 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:46.590 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:46.591 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:46.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:46.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:51.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:51.594 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:51.595 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:51.595 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:41:53.899 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:41:53.900 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:41:53.901 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:41:56.590 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:41:56.591 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:41:56.591 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:41:56.591 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:42:15.105 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:42:23.899 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:42:23.900 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:42:23.900 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:42:50.828 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:42:53.899 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:42:53.899 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:42:53.900 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:42:57.592 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:42:57.594 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:42:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:42:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:42:57.760 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:43:23.899 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:43:23.900 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:43:23.900 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:43:25.061 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:43:40.186 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:43:40.188 [Thread-122] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:43:40.188 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:43:40.189 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:43:40.189 [Thread-122] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:43:40.194 [Thread-122] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:43:40.194 [Thread-122] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:43:40.195 [Thread-122] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:43:40.195 [Thread-122] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:43:40.196 [Thread-122] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:43:40.196 [Thread-122] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:43:40.196 [Thread-122] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:43:40.197 [Thread-122] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:43:40.198 [Thread-122] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Shutdown initiated...
2025-11-03 16:43:40.199 [Thread-122] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-32 - Shutdown completed.
2025-11-03 16:43:41.356 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:43:41.357 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:43:41.357 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:43:41.966 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:43:42.003 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 5 JPA repository interfaces.
2025-11-03 16:43:42.305 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:43:42.307 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:43:42.307 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:43:42.307 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:43:42.328 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:43:42.328 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 969 ms
2025-11-03 16:43:42.678 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:43:42.678 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:43:42.679 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:43:42.767 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:43:42.768 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Starting...
2025-11-03 16:43:42.770 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-33 - Added connection conn309: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:43:42.770 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Start completed.
2025-11-03 16:43:42.771 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:43:42.924 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:43:42.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:43:42.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:43:42.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:43:42.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:43:42.925 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:43:42.926 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:43:42.927 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:43:42.928 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:43:42.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:43:42.939 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:43:42.940 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:43:42.940 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:43:42.942 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:43:42.943 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:43:42.943 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:43:42.944 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:43:42.947 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:43:43.438 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:43:43.814 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:43:43.886 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:43:44.051 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:43:44.165 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:43:44.242 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:43:44.301 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:43:44.467 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:43:44.541 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:43:44.575 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:43:44.577 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:43:44.595 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.278 seconds (process running for 4592.154)
2025-11-03 16:43:44.595 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:43:44.597 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:43:44.598 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:43:44.600 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:43:46.700 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:43:46.700 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:43:46.700 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:43:46.700 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:43:46.700 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:43:46.703 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@252675e3
2025-11-03 16:43:46.704 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4a6c75ce
2025-11-03 16:43:46.704 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:43:46.705 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 16:43:46.707 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:46.709 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:46.709 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:46.852 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:46.853 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:46.900 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:46.901 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:46.901 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:46.901 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:47.721 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:43:47.722 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 11 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:43:47.910 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:47.911 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:47.911 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:47.917 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:47.918 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:47.974 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:47.975 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:47.975 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:47.975 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:48.914 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:48.915 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:48.915 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:48.918 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:48.919 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:48.989 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:48.990 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:48.990 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:48.990 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:49.394 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:49.395 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:49.395 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:49.402 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:49.403 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:49.461 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:49.462 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:49.462 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:49.462 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:49.638 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:49.639 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:49.639 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:49.643 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:49.644 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:49.711 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:49.712 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:49.712 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:49.712 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:49.862 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:49.863 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:49.863 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:49.867 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:49.869 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:49.915 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:49.916 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:49.916 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:49.916 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:50.177 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:50.177 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.178 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:50.181 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:50.182 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.250 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:50.253 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:50.253 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.254 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:50.381 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:50.381 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.385 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:50.388 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:50.389 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.448 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:50.450 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:50.451 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.452 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:50.561 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:50.562 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.562 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:50.564 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:50.565 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.628 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:50.629 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:50.629 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.629 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:50.748 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 16:43:50.749 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.749 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:50.751 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /error
2025-11-03 16:43:50.752 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.813 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 16:43:50.814 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:50.815 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:50.815 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:55.090 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:43:57.591 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:43:57.592 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:43:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:43:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:43:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:43:57.596 [http-nio-8080-exec-1] DEBUG [fff9be8153094e38] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:43:57.598 [http-nio-8080-exec-1] DEBUG [fff9be8153094e38] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:43:57.604 [http-nio-8080-exec-1] DEBUG [fff9be8153094e38] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:43:57.605 [http-nio-8080-exec-1] DEBUG [fff9be8153094e38] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:43:57.614 [http-nio-8080-exec-1] DEBUG [fff9be8153094e38] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:44:14.593 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:44:14.595 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:44:14.596 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:44:25.484 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:44:44.593 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:44:44.594 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:44:44.594 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:44:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:44:57.594 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:44:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:44:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:44:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:44:57.596 [http-nio-8080-exec-3] DEBUG [ae290ce23aac450e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:44:57.597 [http-nio-8080-exec-3] DEBUG [ae290ce23aac450e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:44:57.598 [http-nio-8080-exec-3] DEBUG [ae290ce23aac450e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:44:57.598 [http-nio-8080-exec-3] DEBUG [ae290ce23aac450e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:44:57.601 [http-nio-8080-exec-3] DEBUG [ae290ce23aac450e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:45:27.999 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:45:28.000 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:45:28.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:45:28.001 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:45:54.160 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:45:54.161 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:45:54.162 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:45:54.163 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:45:56.591 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:45:57.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:45:57.592 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:45:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:45:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:45:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:45:57.593 [http-nio-8080-exec-4] DEBUG [ad13d5b042114766] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:45:57.594 [http-nio-8080-exec-4] DEBUG [ad13d5b042114766] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:45:57.595 [http-nio-8080-exec-4] DEBUG [ad13d5b042114766] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:45:57.595 [http-nio-8080-exec-4] DEBUG [ad13d5b042114766] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:45:57.596 [http-nio-8080-exec-4] DEBUG [ad13d5b042114766] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:46:14.593 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:46:14.595 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:46:14.595 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:46:14.907 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:46:44.593 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:46:44.595 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:46:44.596 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:46:45.654 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:46:53.033 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:46:53.035 [Thread-126] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:46:53.035 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:46:53.036 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:46:53.036 [Thread-126] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:46:53.040 [Thread-126] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:46:53.041 [Thread-126] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:46:53.041 [Thread-126] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:46:53.042 [Thread-126] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:46:53.042 [Thread-126] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:46:53.042 [Thread-126] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:46:53.042 [Thread-126] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:46:53.043 [Thread-126] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:46:53.044 [Thread-126] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Shutdown initiated...
2025-11-03 16:46:53.044 [Thread-126] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-33 - Shutdown completed.
2025-11-03 16:46:54.205 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:46:54.205 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:46:54.205 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:46:54.736 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:46:54.767 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 5 JPA repository interfaces.
2025-11-03 16:46:54.966 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:46:54.967 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:46:54.967 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:46:54.967 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:46:54.980 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:46:54.981 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 773 ms
2025-11-03 16:46:55.116 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:46:55.116 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:46:55.116 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:46:55.178 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:46:55.179 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Starting...
2025-11-03 16:46:55.181 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-34 - Added connection conn319: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:46:55.181 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Start completed.
2025-11-03 16:46:55.182 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:46:55.296 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:46:55.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:46:55.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:46:55.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:46:55.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:46:55.297 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:46:55.298 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:46:55.299 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:46:55.299 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:46:55.300 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:46:55.300 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:46:55.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:46:55.302 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:46:55.303 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:46:55.305 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:46:55.306 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:46:55.307 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:46:55.308 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:46:55.564 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/controller/auth/AuthController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'org.springframework.security.authentication.AuthenticationManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-11-03 16:46:55.564 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:46:55.564 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:46:55.565 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:46:55.565 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:46:55.565 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:46:55.566 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:46:55.566 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:46:55.567 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:46:55.567 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Shutdown initiated...
2025-11-03 16:46:55.567 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-34 - Shutdown completed.
2025-11-03 16:46:56.568 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 16:46:56.569 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 16:46:56.608 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 16:46:56.662 [restartedMain] ERROR [] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.deliverytech.delivery.controller.auth.AuthController required a bean of type 'org.springframework.security.authentication.AuthenticationManager' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.authentication.AuthenticationManager' in your configuration.

2025-11-03 16:47:09.174 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:47:09.174 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:47:09.175 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:47:09.905 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:47:09.931 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 5 JPA repository interfaces.
2025-11-03 16:47:10.323 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:47:10.324 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:47:10.325 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:47:10.325 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:47:10.336 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-7].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:47:10.337 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1160 ms
2025-11-03 16:47:10.519 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:47:10.519 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:47:10.519 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:47:10.645 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:47:10.646 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Starting...
2025-11-03 16:47:10.649 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-35 - Added connection conn329: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:47:10.649 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Start completed.
2025-11-03 16:47:10.650 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:47:10.799 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:47:10.799 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:47:10.799 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:47:10.799 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:47:10.799 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:47:10.799 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:47:10.800 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:47:10.801 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:47:10.802 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:47:10.802 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:47:10.803 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:47:10.803 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:47:10.804 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:47:10.806 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:47:10.807 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:47:10.808 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:47:10.808 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:47:10.809 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:47:11.220 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:47:11.505 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:47:11.544 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:47:11.677 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:47:11.781 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:47:11.860 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:47:11.923 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:47:12.095 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:47:12.296 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:47:12.336 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:47:12.339 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:47:12.353 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.212 seconds (process running for 4799.913)
2025-11-03 16:47:12.353 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:47:12.355 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:47:12.356 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:47:12.357 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:47:13.586 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:47:14.590 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:47:14.591 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:47:18.736 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:47:18.761 [Thread-130] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:47:18.775 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:47:18.782 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:47:18.795 [Thread-130] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:47:18.805 [Thread-130] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:47:18.805 [Thread-130] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:47:18.806 [Thread-130] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:47:18.808 [Thread-130] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:47:18.811 [Thread-130] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:47:18.814 [Thread-130] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:47:18.814 [Thread-130] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:47:18.815 [Thread-130] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:47:18.816 [Thread-130] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Shutdown initiated...
2025-11-03 16:47:18.817 [Thread-130] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-35 - Shutdown completed.
2025-11-03 16:47:20.044 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:47:20.044 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:47:20.044 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:47:20.508 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:47:20.531 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 5 JPA repository interfaces.
2025-11-03 16:47:20.723 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:47:20.724 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:47:20.724 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:47:20.724 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:47:20.736 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-7].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:47:20.736 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 690 ms
2025-11-03 16:47:20.906 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:47:20.906 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:47:20.906 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:47:20.979 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:47:20.980 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-36 - Starting...
2025-11-03 16:47:20.982 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-36 - Added connection conn339: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:47:20.983 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-36 - Start completed.
2025-11-03 16:47:20.983 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:47:21.098 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:47:21.098 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:47:21.098 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:47:21.098 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:47:21.098 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:47:21.098 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:47:21.099 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:47:21.100 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:47:21.101 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:47:21.101 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:47:21.102 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:47:21.102 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:47:21.103 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:47:21.104 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:47:21.105 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:47:21.106 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:47:21.107 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:47:21.108 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:47:21.124 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
2025-11-03 16:47:21.124 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:47:21.124 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:47:21.124 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:47:21.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:47:21.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:47:21.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:47:21.125 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:47:21.126 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:47:21.126 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-36 - Shutdown initiated...
2025-11-03 16:47:21.144 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-36 - Shutdown completed.
2025-11-03 16:47:22.145 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 16:47:22.146 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 16:47:22.166 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 16:47:22.169 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfig' defined in file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/com/deliverytech/delivery/config/SecurityConfig.class]: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:321)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:309)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:146)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:318)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Syntax error, insert "Identifier (" to complete ConstructorHeaderName
	Syntax error, insert ")" to complete ConstructorDeclaration
	Syntax error, insert ";" to complete ConstructorDeclaration

	at com.deliverytech.delivery.config.SecurityConfig.<init>(SecurityConfig.java:24)
	at com.deliverytech.delivery.config.SecurityConfig$$SpringCGLIB$$0.<init>(<generated>)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:210)
	... 26 common frames omitted
2025-11-03 16:48:58.221 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:48:58.221 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:48:58.221 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:48:58.771 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:48:58.796 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 16:48:59.007 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:48:59.008 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:48:59.008 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:48:59.008 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:48:59.020 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:48:59.020 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 796 ms
2025-11-03 16:48:59.234 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:48:59.234 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:48:59.234 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:48:59.353 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:48:59.354 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-37 - Starting...
2025-11-03 16:48:59.356 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-37 - Added connection conn342: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:48:59.356 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-37 - Start completed.
2025-11-03 16:48:59.357 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:48:59.482 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:48:59.482 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:48:59.483 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:48:59.483 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:48:59.483 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:48:59.483 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:48:59.483 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:48:59.485 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:48:59.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:48:59.487 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:48:59.488 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:48:59.489 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:48:59.490 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:48:59.492 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:48:59.493 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:48:59.494 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:48:59.495 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:48:59.497 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:49:00.041 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:49:00.373 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:49:00.414 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:49:00.556 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:49:00.675 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:49:00.736 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:49:00.795 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:49:01.046 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:49:01.134 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:49:01.169 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:49:01.172 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:49:01.192 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:49:01.193 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.012 seconds (process running for 4908.752)
2025-11-03 16:49:01.194 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:49:01.195 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:49:01.197 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:49:01.592 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:49:01.592 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:49:01.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:49:01.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:49:01.592 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:49:01.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5d3d3cec
2025-11-03 16:49:01.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@30246d15
2025-11-03 16:49:01.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:49:01.597 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 16:49:01.599 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:49:01.601 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:49:01.601 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:49:01.601 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:49:01.605 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:49:01.607 [http-nio-8080-exec-1] DEBUG [c01efc2c932e4dcf] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:49:01.608 [http-nio-8080-exec-1] DEBUG [c01efc2c932e4dcf] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:49:01.612 [http-nio-8080-exec-1] DEBUG [c01efc2c932e4dcf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:49:01.613 [http-nio-8080-exec-1] DEBUG [c01efc2c932e4dcf] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:49:01.618 [http-nio-8080-exec-1] DEBUG [c01efc2c932e4dcf] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:49:02.608 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:49:02.608 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 5 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:49:26.205 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:49:31.192 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:49:31.193 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:49:31.194 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:49:31.768 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:49:31.773 [Thread-137] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:49:31.776 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:49:31.778 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:49:31.779 [Thread-137] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:49:33.218 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:49:33.227 [Thread-137] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:49:33.227 [Thread-137] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:49:33.229 [Thread-137] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:49:33.229 [Thread-137] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:49:33.230 [Thread-137] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:49:33.232 [Thread-137] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:49:33.232 [Thread-137] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:49:33.236 [Thread-137] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:49:33.237 [Thread-137] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-37 - Shutdown initiated...
2025-11-03 16:49:33.248 [Thread-137] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-37 - Shutdown completed.
2025-11-03 16:49:34.075 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:49:34.075 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:49:34.075 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:49:34.529 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:49:34.561 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 5 JPA repository interfaces.
2025-11-03 16:49:34.767 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:49:34.768 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:49:34.768 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:49:34.769 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:49:34.780 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:49:34.780 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 703 ms
2025-11-03 16:49:34.962 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:49:34.962 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:49:34.962 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:49:35.075 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:49:35.076 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-38 - Starting...
2025-11-03 16:49:35.079 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-38 - Added connection conn352: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:49:35.080 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-38 - Start completed.
2025-11-03 16:49:35.080 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:49:35.217 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:49:35.217 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:49:35.217 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:49:35.217 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:49:35.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:49:35.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:49:35.218 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:49:35.220 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:49:35.220 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:49:35.221 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:49:35.222 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:49:35.222 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:49:35.223 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:49:35.225 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:49:35.226 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:49:35.227 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:49:35.227 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:49:35.229 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:49:35.654 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:49:35.994 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:49:36.044 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:49:36.198 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:49:36.396 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:49:36.479 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:49:36.556 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:49:36.758 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:49:36.828 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:49:36.856 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:49:36.858 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:49:36.872 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:49:36.873 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.826 seconds (process running for 4944.432)
2025-11-03 16:49:36.874 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:49:36.874 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:49:36.876 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:49:37.704 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:49:38.709 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:49:38.709 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:49:57.597 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:49:57.597 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:49:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:49:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:49:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:49:57.602 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@c8e336a
2025-11-03 16:49:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3461a612
2025-11-03 16:49:57.611 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:49:57.611 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 14 ms
2025-11-03 16:49:57.614 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:49:57.620 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:49:57.622 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:49:57.622 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:49:57.631 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:49:57.632 [http-nio-8080-exec-1] DEBUG [9f98df1d6020424d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:49:57.633 [http-nio-8080-exec-1] DEBUG [9f98df1d6020424d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:49:57.644 [http-nio-8080-exec-1] DEBUG [9f98df1d6020424d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:49:57.645 [http-nio-8080-exec-1] DEBUG [9f98df1d6020424d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:49:57.656 [http-nio-8080-exec-1] DEBUG [9f98df1d6020424d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:50:06.872 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:50:06.873 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:50:06.873 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:50:07.642 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:50:13.452 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 16:50:13.455 [Thread-144] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 16:50:13.455 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:50:13.456 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 16:50:13.456 [Thread-144] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 16:50:13.460 [Thread-144] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:50:13.461 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:50:13.461 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:50:13.462 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:50:13.462 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:50:13.462 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:50:13.462 [Thread-144] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:50:13.463 [Thread-144] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 16:50:13.463 [Thread-144] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-38 - Shutdown initiated...
2025-11-03 16:50:13.464 [Thread-144] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-38 - Shutdown completed.
2025-11-03 16:50:14.204 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 16:50:14.205 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 16:50:14.205 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 16:50:14.685 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 16:50:14.709 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 5 JPA repository interfaces.
2025-11-03 16:50:14.932 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 16:50:14.933 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 16:50:14.933 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 16:50:14.933 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 16:50:14.946 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 16:50:14.946 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 739 ms
2025-11-03 16:50:15.155 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 16:50:15.155 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 16:50:15.155 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 16:50:15.239 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 16:50:15.240 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-39 - Starting...
2025-11-03 16:50:15.242 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-39 - Added connection conn362: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 16:50:15.243 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-39 - Start completed.
2025-11-03 16:50:15.243 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 16:50:15.383 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 16:50:15.383 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 16:50:15.383 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 16:50:15.383 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 16:50:15.383 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 16:50:15.383 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 16:50:15.384 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 16:50:15.385 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 16:50:15.386 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 16:50:15.387 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 16:50:15.388 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 16:50:15.388 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 16:50:15.389 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 16:50:15.390 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 16:50:15.392 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 16:50:15.393 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:50:15.395 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 16:50:15.398 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 16:50:15.762 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 16:50:16.071 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 16:50:16.123 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 16:50:16.270 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 16:50:16.406 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 16:50:16.466 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 16:50:16.523 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 16:50:16.753 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 16:50:16.844 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 16:50:16.874 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 16:50:16.876 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 16:50:16.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:50:16.891 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.717 seconds (process running for 4984.451)
2025-11-03 16:50:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:50:16.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:50:16.894 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 16:50:23.557 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:50:24.562 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 16:50:24.562 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 16:50:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:50:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:50:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:50:51.268 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:50:57.602 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 16:50:57.603 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 16:50:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 16:50:57.604 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 16:50:57.607 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 16:50:57.617 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@60ea00d5
2025-11-03 16:50:57.626 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7b83eee3
2025-11-03 16:50:57.631 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 16:50:57.632 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 28 ms
2025-11-03 16:50:57.635 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:50:57.648 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:50:57.651 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:50:57.651 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:50:57.664 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:50:57.667 [http-nio-8080-exec-1] DEBUG [afdeadcbafa44910] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:50:57.672 [http-nio-8080-exec-1] DEBUG [afdeadcbafa44910] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:50:57.680 [http-nio-8080-exec-1] DEBUG [afdeadcbafa44910] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:50:57.681 [http-nio-8080-exec-1] DEBUG [afdeadcbafa44910] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:50:57.692 [http-nio-8080-exec-1] DEBUG [afdeadcbafa44910] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:51:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:51:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:51:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:51:17.042 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:51:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:51:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:51:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:51:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:51:57.597 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:51:57.597 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:51:57.597 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:51:57.598 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:51:57.599 [http-nio-8080-exec-2] DEBUG [cfc15b370c4d4eb8] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:51:57.599 [http-nio-8080-exec-2] DEBUG [cfc15b370c4d4eb8] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:51:57.601 [http-nio-8080-exec-2] DEBUG [cfc15b370c4d4eb8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:51:57.601 [http-nio-8080-exec-2] DEBUG [cfc15b370c4d4eb8] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:51:57.606 [http-nio-8080-exec-2] DEBUG [cfc15b370c4d4eb8] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:52:15.970 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:52:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:52:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:52:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:52:34.982 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:52:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:52:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:52:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:52:50.071 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:52:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:52:57.597 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:52:57.597 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:52:57.598 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:52:57.599 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:52:57.599 [http-nio-8080-exec-3] DEBUG [20e2ddf777d64b29] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:52:57.600 [http-nio-8080-exec-3] DEBUG [20e2ddf777d64b29] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:52:57.601 [http-nio-8080-exec-3] DEBUG [20e2ddf777d64b29] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:52:57.601 [http-nio-8080-exec-3] DEBUG [20e2ddf777d64b29] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:52:57.603 [http-nio-8080-exec-3] DEBUG [20e2ddf777d64b29] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:53:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:53:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:53:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:53:36.768 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:53:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:53:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:53:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:53:57.169 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:53:57.595 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:53:57.597 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:53:57.597 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:53:57.597 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:53:57.598 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:53:57.599 [http-nio-8080-exec-4] DEBUG [70821b7ed9e44877] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:53:57.600 [http-nio-8080-exec-4] DEBUG [70821b7ed9e44877] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:53:57.601 [http-nio-8080-exec-4] DEBUG [70821b7ed9e44877] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:53:57.602 [http-nio-8080-exec-4] DEBUG [70821b7ed9e44877] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:53:57.603 [http-nio-8080-exec-4] DEBUG [70821b7ed9e44877] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:54:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:54:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:54:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:54:47.931 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:54:47.932 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:54:47.933 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:54:47.933 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:54:57.593 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:54:57.595 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:54:57.596 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:54:57.596 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:54:57.597 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:54:57.598 [http-nio-8080-exec-5] DEBUG [f781d76839ca48cd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:54:57.605 [http-nio-8080-exec-5] DEBUG [f781d76839ca48cd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:54:57.609 [http-nio-8080-exec-5] DEBUG [f781d76839ca48cd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:54:57.609 [http-nio-8080-exec-5] DEBUG [f781d76839ca48cd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:54:57.619 [http-nio-8080-exec-5] DEBUG [f781d76839ca48cd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:55:48.071 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 504 GATEWAY_TIMEOUT
2025-11-03 16:55:48.168 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 16:55:48.169 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:55:48.170 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:55:48.171 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:55:49.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:55:49.096 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:55:49.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:55:49.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:55:52.414 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:55:57.595 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:55:57.596 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:55:57.597 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:55:57.597 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:55:57.599 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:55:57.600 [http-nio-8080-exec-6] DEBUG [37336c5ad2594e16] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:55:57.601 [http-nio-8080-exec-6] DEBUG [37336c5ad2594e16] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:55:57.603 [http-nio-8080-exec-6] DEBUG [37336c5ad2594e16] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:55:57.604 [http-nio-8080-exec-6] DEBUG [37336c5ad2594e16] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:55:57.605 [http-nio-8080-exec-6] DEBUG [37336c5ad2594e16] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:56:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:56:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:56:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:56:17.940 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:56:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:56:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:56:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:56:57.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:56:57.593 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:56:57.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:56:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:56:57.596 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:56:57.596 [http-nio-8080-exec-7] DEBUG [64a5fb694e6f4fdd] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:56:57.597 [http-nio-8080-exec-7] DEBUG [64a5fb694e6f4fdd] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:56:57.602 [http-nio-8080-exec-7] DEBUG [64a5fb694e6f4fdd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:56:57.603 [http-nio-8080-exec-7] DEBUG [64a5fb694e6f4fdd] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:56:57.608 [http-nio-8080-exec-7] DEBUG [64a5fb694e6f4fdd] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:57:00.268 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:57:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:57:16.905 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:57:16.906 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:57:23.266 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:57:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:57:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:57:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:57:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:57:57.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:57:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:57:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:57:57.595 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:57:57.595 [http-nio-8080-exec-8] DEBUG [4198ba60e9e04cfc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:57:57.596 [http-nio-8080-exec-8] DEBUG [4198ba60e9e04cfc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:57:57.597 [http-nio-8080-exec-8] DEBUG [4198ba60e9e04cfc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:57:57.597 [http-nio-8080-exec-8] DEBUG [4198ba60e9e04cfc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:57:57.606 [http-nio-8080-exec-8] DEBUG [4198ba60e9e04cfc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:58:06.779 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:58:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:58:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:58:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:58:57.596 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:58:57.597 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:58:57.598 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:58:57.598 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:58:57.600 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:58:57.601 [http-nio-8080-exec-9] DEBUG [f96e5deebe184962] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:58:57.601 [http-nio-8080-exec-9] DEBUG [f96e5deebe184962] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:58:57.603 [http-nio-8080-exec-9] DEBUG [f96e5deebe184962] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:58:57.605 [http-nio-8080-exec-9] DEBUG [f96e5deebe184962] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:58:57.622 [http-nio-8080-exec-9] DEBUG [f96e5deebe184962] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 16:59:09.402 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:59:09.404 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:59:09.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:59:09.406 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:59:12.407 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:59:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:59:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:59:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:59:18.692 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 16:59:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 16:59:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 16:59:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 16:59:57.594 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 16:59:57.595 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 16:59:57.595 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 16:59:57.596 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 16:59:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 16:59:57.597 [http-nio-8080-exec-10] DEBUG [5a6677841d254fa5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 16:59:57.598 [http-nio-8080-exec-10] DEBUG [5a6677841d254fa5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 16:59:57.612 [http-nio-8080-exec-10] DEBUG [5a6677841d254fa5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 16:59:57.612 [http-nio-8080-exec-10] DEBUG [5a6677841d254fa5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 16:59:57.623 [http-nio-8080-exec-10] DEBUG [5a6677841d254fa5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:00:12.448 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:00:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:00:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:00:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:00:18.887 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:00:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:00:47.044 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:00:47.045 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:00:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:00:57.594 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:00:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:00:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:00:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:00:57.598 [http-nio-8080-exec-1] DEBUG [5596d55ded314e77] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:00:57.599 [http-nio-8080-exec-1] DEBUG [5596d55ded314e77] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:00:57.600 [http-nio-8080-exec-1] DEBUG [5596d55ded314e77] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:00:57.600 [http-nio-8080-exec-1] DEBUG [5596d55ded314e77] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:00:57.602 [http-nio-8080-exec-1] DEBUG [5596d55ded314e77] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:01:10.524 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:01:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:01:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:01:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:01:32.985 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:01:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:01:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:01:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:01:48.579 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:01:57.615 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:01:57.618 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:01:57.619 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:01:57.620 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:01:57.624 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:01:57.626 [http-nio-8080-exec-2] DEBUG [3a56c602de8d485a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:01:57.629 [http-nio-8080-exec-2] DEBUG [3a56c602de8d485a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:01:57.632 [http-nio-8080-exec-2] DEBUG [3a56c602de8d485a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:01:57.633 [http-nio-8080-exec-2] DEBUG [3a56c602de8d485a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:01:57.636 [http-nio-8080-exec-2] DEBUG [3a56c602de8d485a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:02:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:02:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:02:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:02:36.180 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:02:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:02:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:02:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:02:56.552 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:02:57.601 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:02:57.602 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:02:57.603 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:02:57.603 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:02:57.604 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:02:57.604 [http-nio-8080-exec-3] DEBUG [4808da3deb76492d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:02:57.605 [http-nio-8080-exec-3] DEBUG [4808da3deb76492d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:02:57.606 [http-nio-8080-exec-3] DEBUG [4808da3deb76492d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:02:57.607 [http-nio-8080-exec-3] DEBUG [4808da3deb76492d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:02:57.608 [http-nio-8080-exec-3] DEBUG [4808da3deb76492d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:03:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:03:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:03:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:03:20.662 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:03:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:03:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:03:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:03:49.089 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:04:00.414 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:04:00.488 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:04:00.488 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:04:00.488 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:04:00.490 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:04:00.491 [http-nio-8080-exec-5] DEBUG [031496ae5c0f44db] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:04:00.492 [http-nio-8080-exec-5] DEBUG [031496ae5c0f44db] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:04:00.498 [http-nio-8080-exec-5] DEBUG [031496ae5c0f44db] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:04:00.499 [http-nio-8080-exec-5] DEBUG [031496ae5c0f44db] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:04:00.501 [http-nio-8080-exec-5] DEBUG [031496ae5c0f44db] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:04:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:04:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:04:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:04:18.494 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:04:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:04:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:04:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:04:48.682 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:04:57.595 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:04:57.596 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:04:57.596 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:04:57.597 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:04:57.598 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:04:57.598 [http-nio-8080-exec-6] DEBUG [161f5b64be8f4de3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:04:57.599 [http-nio-8080-exec-6] DEBUG [161f5b64be8f4de3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:04:57.601 [http-nio-8080-exec-6] DEBUG [161f5b64be8f4de3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:04:57.601 [http-nio-8080-exec-6] DEBUG [161f5b64be8f4de3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:04:57.602 [http-nio-8080-exec-6] DEBUG [161f5b64be8f4de3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:05:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:05:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:05:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:05:17.783 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:05:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:05:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:05:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:05:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:05:57.594 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:05:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:05:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:05:57.599 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:05:57.599 [http-nio-8080-exec-7] DEBUG [af0e737c9928472e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:05:57.599 [http-nio-8080-exec-7] DEBUG [af0e737c9928472e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:05:57.601 [http-nio-8080-exec-7] DEBUG [af0e737c9928472e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:05:57.601 [http-nio-8080-exec-7] DEBUG [af0e737c9928472e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:05:57.602 [http-nio-8080-exec-7] DEBUG [af0e737c9928472e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:06:34.563 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:06:34.563 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:06:34.564 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:06:34.564 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:06:36.192 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:06:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:06:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:06:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:06:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:06:57.594 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:06:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:06:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:06:57.595 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:06:57.595 [http-nio-8080-exec-8] DEBUG [af854548ba574273] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:06:57.596 [http-nio-8080-exec-8] DEBUG [af854548ba574273] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:06:57.597 [http-nio-8080-exec-8] DEBUG [af854548ba574273] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:06:57.597 [http-nio-8080-exec-8] DEBUG [af854548ba574273] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:06:57.598 [http-nio-8080-exec-8] DEBUG [af854548ba574273] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:07:04.047 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:07:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:07:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:07:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:07:17.857 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:07:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:07:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:07:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:07:50.107 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:07:57.592 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:07:57.593 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:07:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:07:57.593 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:07:57.594 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:07:57.594 [http-nio-8080-exec-9] DEBUG [ebda5eeaf45440a3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:07:57.594 [http-nio-8080-exec-9] DEBUG [ebda5eeaf45440a3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:07:57.595 [http-nio-8080-exec-9] DEBUG [ebda5eeaf45440a3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:07:57.595 [http-nio-8080-exec-9] DEBUG [ebda5eeaf45440a3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:07:57.596 [http-nio-8080-exec-9] DEBUG [ebda5eeaf45440a3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:08:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:08:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:08:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:08:43.979 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:08:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:08:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:08:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:08:48.368 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:08:57.595 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:08:57.596 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:08:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:08:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:08:57.599 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:08:57.599 [http-nio-8080-exec-10] DEBUG [e768e8a4fc364099] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:08:57.600 [http-nio-8080-exec-10] DEBUG [e768e8a4fc364099] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:08:57.601 [http-nio-8080-exec-10] DEBUG [e768e8a4fc364099] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:08:57.602 [http-nio-8080-exec-10] DEBUG [e768e8a4fc364099] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:08:57.603 [http-nio-8080-exec-10] DEBUG [e768e8a4fc364099] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:09:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:09:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:09:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:09:17.764 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:09:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:09:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:09:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:09:48.025 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:09:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:09:57.595 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:09:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:09:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:09:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:09:57.598 [http-nio-8080-exec-1] DEBUG [8eae9c4d07a04b58] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:09:57.599 [http-nio-8080-exec-1] DEBUG [8eae9c4d07a04b58] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:09:57.600 [http-nio-8080-exec-1] DEBUG [8eae9c4d07a04b58] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:09:57.601 [http-nio-8080-exec-1] DEBUG [8eae9c4d07a04b58] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:09:57.603 [http-nio-8080-exec-1] DEBUG [8eae9c4d07a04b58] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:10:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:10:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:10:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:10:23.875 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:10:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:10:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:10:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:10:50.227 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:10:57.593 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:10:57.594 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:10:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:10:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:10:57.597 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:10:57.598 [http-nio-8080-exec-2] DEBUG [2c0beabc752a4ea3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:10:57.599 [http-nio-8080-exec-2] DEBUG [2c0beabc752a4ea3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:10:57.602 [http-nio-8080-exec-2] DEBUG [2c0beabc752a4ea3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:10:57.602 [http-nio-8080-exec-2] DEBUG [2c0beabc752a4ea3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:10:57.604 [http-nio-8080-exec-2] DEBUG [2c0beabc752a4ea3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:11:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:11:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:11:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:11:18.902 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:11:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:11:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:11:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:11:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:11:57.595 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:11:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:11:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:11:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:11:57.597 [http-nio-8080-exec-3] DEBUG [88641700b1794aec] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:11:57.597 [http-nio-8080-exec-3] DEBUG [88641700b1794aec] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:11:57.599 [http-nio-8080-exec-3] DEBUG [88641700b1794aec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:11:57.599 [http-nio-8080-exec-3] DEBUG [88641700b1794aec] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:11:57.600 [http-nio-8080-exec-3] DEBUG [88641700b1794aec] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:04.693 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:04.694 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:04.694 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:04.694 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:04.695 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:04.695 [http-nio-8080-exec-4] DEBUG [72a671a43c73494d] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:04.696 [http-nio-8080-exec-4] DEBUG [72a671a43c73494d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:04.697 [http-nio-8080-exec-4] DEBUG [72a671a43c73494d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:04.697 [http-nio-8080-exec-4] DEBUG [72a671a43c73494d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:04.698 [http-nio-8080-exec-4] DEBUG [72a671a43c73494d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:06.590 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:06.594 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:06.594 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:06.594 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:06.595 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:06.595 [http-nio-8080-exec-5] DEBUG [0ef90f12b51b4a7e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:06.596 [http-nio-8080-exec-5] DEBUG [0ef90f12b51b4a7e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:06.597 [http-nio-8080-exec-5] DEBUG [0ef90f12b51b4a7e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:06.598 [http-nio-8080-exec-5] DEBUG [0ef90f12b51b4a7e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:06.601 [http-nio-8080-exec-5] DEBUG [0ef90f12b51b4a7e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:11.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:11.592 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:11.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:11.592 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:11.593 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:11.594 [http-nio-8080-exec-6] DEBUG [09a5db785bec4cf5] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:11.594 [http-nio-8080-exec-6] DEBUG [09a5db785bec4cf5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:11.596 [http-nio-8080-exec-6] DEBUG [09a5db785bec4cf5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:11.596 [http-nio-8080-exec-6] DEBUG [09a5db785bec4cf5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:11.597 [http-nio-8080-exec-6] DEBUG [09a5db785bec4cf5] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:14.213 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:12:16.590 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:16.591 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:16.591 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:16.591 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:16.592 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:16.592 [http-nio-8080-exec-7] DEBUG [8fbd3ebb56234422] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:16.592 [http-nio-8080-exec-7] DEBUG [8fbd3ebb56234422] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:16.594 [http-nio-8080-exec-7] DEBUG [8fbd3ebb56234422] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:16.594 [http-nio-8080-exec-7] DEBUG [8fbd3ebb56234422] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:16.595 [http-nio-8080-exec-7] DEBUG [8fbd3ebb56234422] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:12:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:12:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:12:17.784 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:12:21.591 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:21.591 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:21.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:21.592 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:21.593 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:21.593 [http-nio-8080-exec-8] DEBUG [45937551d8124fb9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:21.593 [http-nio-8080-exec-8] DEBUG [45937551d8124fb9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:21.594 [http-nio-8080-exec-8] DEBUG [45937551d8124fb9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:21.595 [http-nio-8080-exec-8] DEBUG [45937551d8124fb9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:21.603 [http-nio-8080-exec-8] DEBUG [45937551d8124fb9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:26.590 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:26.590 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:26.591 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:26.591 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:26.591 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:26.592 [http-nio-8080-exec-9] DEBUG [53ddfd2e05fa4390] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:26.592 [http-nio-8080-exec-9] DEBUG [53ddfd2e05fa4390] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:26.593 [http-nio-8080-exec-9] DEBUG [53ddfd2e05fa4390] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:26.593 [http-nio-8080-exec-9] DEBUG [53ddfd2e05fa4390] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:26.594 [http-nio-8080-exec-9] DEBUG [53ddfd2e05fa4390] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:31.590 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:31.591 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:31.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:31.591 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:31.592 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:31.592 [http-nio-8080-exec-10] DEBUG [7357ac192b444089] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:31.592 [http-nio-8080-exec-10] DEBUG [7357ac192b444089] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:31.593 [http-nio-8080-exec-10] DEBUG [7357ac192b444089] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:31.593 [http-nio-8080-exec-10] DEBUG [7357ac192b444089] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:31.594 [http-nio-8080-exec-10] DEBUG [7357ac192b444089] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:36.590 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:36.591 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:36.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:36.592 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:36.594 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:36.595 [http-nio-8080-exec-1] DEBUG [40d16435aa064ca9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:36.595 [http-nio-8080-exec-1] DEBUG [40d16435aa064ca9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:36.599 [http-nio-8080-exec-1] DEBUG [40d16435aa064ca9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:36.600 [http-nio-8080-exec-1] DEBUG [40d16435aa064ca9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:36.601 [http-nio-8080-exec-1] DEBUG [40d16435aa064ca9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:41.592 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:41.593 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:41.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:41.593 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:41.594 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:41.594 [http-nio-8080-exec-2] DEBUG [aee59f8c512f4087] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:41.595 [http-nio-8080-exec-2] DEBUG [aee59f8c512f4087] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:41.596 [http-nio-8080-exec-2] DEBUG [aee59f8c512f4087] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:41.597 [http-nio-8080-exec-2] DEBUG [aee59f8c512f4087] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:41.598 [http-nio-8080-exec-2] DEBUG [aee59f8c512f4087] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:46.590 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:46.591 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:46.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:46.592 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:46.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:46.593 [http-nio-8080-exec-3] DEBUG [908b226886624a51] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:46.594 [http-nio-8080-exec-3] DEBUG [908b226886624a51] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:46.595 [http-nio-8080-exec-3] DEBUG [908b226886624a51] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:46.595 [http-nio-8080-exec-3] DEBUG [908b226886624a51] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:46.596 [http-nio-8080-exec-3] DEBUG [908b226886624a51] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:12:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:12:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:12:47.325 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:12:51.590 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:51.590 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:51.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:51.591 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:51.591 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:51.592 [http-nio-8080-exec-4] DEBUG [b983027874274d3b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:51.592 [http-nio-8080-exec-4] DEBUG [b983027874274d3b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:51.593 [http-nio-8080-exec-4] DEBUG [b983027874274d3b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:51.593 [http-nio-8080-exec-4] DEBUG [b983027874274d3b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:51.594 [http-nio-8080-exec-4] DEBUG [b983027874274d3b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:12:56.590 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:12:56.590 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:12:56.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:56.591 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:12:56.591 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:12:56.591 [http-nio-8080-exec-5] DEBUG [bb91eb1006824324] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:12:56.592 [http-nio-8080-exec-5] DEBUG [bb91eb1006824324] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:12:56.593 [http-nio-8080-exec-5] DEBUG [bb91eb1006824324] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:12:56.594 [http-nio-8080-exec-5] DEBUG [bb91eb1006824324] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:12:56.597 [http-nio-8080-exec-5] DEBUG [bb91eb1006824324] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:13:01.591 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:13:01.592 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:13:01.593 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:13:01.593 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:13:01.594 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:13:01.594 [http-nio-8080-exec-6] DEBUG [e991507bad3f43d7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:13:01.595 [http-nio-8080-exec-6] DEBUG [e991507bad3f43d7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:13:01.596 [http-nio-8080-exec-6] DEBUG [e991507bad3f43d7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:13:01.596 [http-nio-8080-exec-6] DEBUG [e991507bad3f43d7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:13:01.598 [http-nio-8080-exec-6] DEBUG [e991507bad3f43d7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:13:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:13:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:13:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:13:17.373 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:13:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:13:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:13:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:13:50.651 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:13:57.597 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:13:57.598 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:13:57.600 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:13:57.600 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:13:57.601 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:13:57.603 [http-nio-8080-exec-7] DEBUG [29eeb94d3cd54947] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:13:57.605 [http-nio-8080-exec-7] DEBUG [29eeb94d3cd54947] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:13:57.606 [http-nio-8080-exec-7] DEBUG [29eeb94d3cd54947] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:13:57.606 [http-nio-8080-exec-7] DEBUG [29eeb94d3cd54947] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:13:57.607 [http-nio-8080-exec-7] DEBUG [29eeb94d3cd54947] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:14:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:14:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:14:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:14:18.596 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:14:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:14:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:14:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:14:57.592 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:14:57.593 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:14:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:14:57.593 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:14:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:14:57.595 [http-nio-8080-exec-8] DEBUG [09088cf388e14b50] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:14:57.595 [http-nio-8080-exec-8] DEBUG [09088cf388e14b50] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:14:57.597 [http-nio-8080-exec-8] DEBUG [09088cf388e14b50] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:14:57.597 [http-nio-8080-exec-8] DEBUG [09088cf388e14b50] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:14:57.598 [http-nio-8080-exec-8] DEBUG [09088cf388e14b50] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:15:02.283 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:15:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:15:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:15:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:15:33.779 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:15:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:15:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:15:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:15:47.314 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:15:57.600 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:15:57.600 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:15:57.601 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:15:57.601 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:15:57.602 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:15:57.602 [http-nio-8080-exec-9] DEBUG [46394a58b5474d07] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:15:57.603 [http-nio-8080-exec-9] DEBUG [46394a58b5474d07] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:15:57.606 [http-nio-8080-exec-9] DEBUG [46394a58b5474d07] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:15:57.607 [http-nio-8080-exec-9] DEBUG [46394a58b5474d07] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:15:57.612 [http-nio-8080-exec-9] DEBUG [46394a58b5474d07] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:16:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:16:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:16:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:16:19.319 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:16:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:16:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:16:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:16:47.923 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:16:57.596 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:16:57.597 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:16:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:16:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:16:57.598 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:16:57.598 [http-nio-8080-exec-10] DEBUG [3b33c349a1dc4c8b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:16:57.599 [http-nio-8080-exec-10] DEBUG [3b33c349a1dc4c8b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:16:57.600 [http-nio-8080-exec-10] DEBUG [3b33c349a1dc4c8b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:16:57.600 [http-nio-8080-exec-10] DEBUG [3b33c349a1dc4c8b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:16:57.601 [http-nio-8080-exec-10] DEBUG [3b33c349a1dc4c8b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:17:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:17:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:17:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:17:20.202 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:17:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:17:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:17:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:17:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:17:57.598 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:17:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:17:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:17:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:17:57.601 [http-nio-8080-exec-1] DEBUG [88e265ef3c584000] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:17:57.602 [http-nio-8080-exec-1] DEBUG [88e265ef3c584000] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:17:57.604 [http-nio-8080-exec-1] DEBUG [88e265ef3c584000] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:17:57.605 [http-nio-8080-exec-1] DEBUG [88e265ef3c584000] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:17:57.608 [http-nio-8080-exec-1] DEBUG [88e265ef3c584000] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:18:05.017 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:18:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:18:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:18:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:18:30.427 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:18:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:18:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:18:46.893 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:18:47.227 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:18:57.598 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:18:57.600 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:18:57.601 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:18:57.602 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:18:57.604 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:18:57.606 [http-nio-8080-exec-2] DEBUG [0753de4444884b99] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:18:57.608 [http-nio-8080-exec-2] DEBUG [0753de4444884b99] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:18:57.612 [http-nio-8080-exec-2] DEBUG [0753de4444884b99] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:18:57.613 [http-nio-8080-exec-2] DEBUG [0753de4444884b99] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:18:57.616 [http-nio-8080-exec-2] DEBUG [0753de4444884b99] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:19:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:19:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:19:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:19:18.181 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:19:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:19:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:19:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:19:47.386 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:19:57.599 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:19:57.600 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:19:57.601 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:19:57.601 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:19:57.603 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:19:57.604 [http-nio-8080-exec-4] DEBUG [0c3ea2096f93411a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:19:57.604 [http-nio-8080-exec-4] DEBUG [0c3ea2096f93411a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:19:57.606 [http-nio-8080-exec-4] DEBUG [0c3ea2096f93411a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:19:57.607 [http-nio-8080-exec-4] DEBUG [0c3ea2096f93411a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:19:57.609 [http-nio-8080-exec-4] DEBUG [0c3ea2096f93411a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:20:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:20:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:20:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:20:18.023 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:20:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:20:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:20:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:20:48.481 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:20:57.597 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:20:57.599 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:20:57.600 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:20:57.600 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:20:57.601 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:20:57.602 [http-nio-8080-exec-5] DEBUG [97952d33de354819] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:20:57.603 [http-nio-8080-exec-5] DEBUG [97952d33de354819] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:20:57.606 [http-nio-8080-exec-5] DEBUG [97952d33de354819] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:20:57.607 [http-nio-8080-exec-5] DEBUG [97952d33de354819] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:20:57.608 [http-nio-8080-exec-5] DEBUG [97952d33de354819] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:21:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:21:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:21:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:21:22.200 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:21:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:21:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:21:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:21:49.311 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:21:57.609 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:21:57.610 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:21:57.611 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:21:57.611 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:21:57.615 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:21:57.617 [http-nio-8080-exec-6] DEBUG [529fe176a8e04bd3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:21:57.620 [http-nio-8080-exec-6] DEBUG [529fe176a8e04bd3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:21:57.624 [http-nio-8080-exec-6] DEBUG [529fe176a8e04bd3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:21:57.625 [http-nio-8080-exec-6] DEBUG [529fe176a8e04bd3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:21:57.627 [http-nio-8080-exec-6] DEBUG [529fe176a8e04bd3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:22:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:22:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:22:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:22:23.634 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:22:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:22:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:22:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:22:48.768 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:22:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:22:57.594 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:22:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:22:57.595 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:22:57.596 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:22:57.596 [http-nio-8080-exec-7] DEBUG [62c3cd4b004446e3] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:22:57.597 [http-nio-8080-exec-7] DEBUG [62c3cd4b004446e3] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:22:57.599 [http-nio-8080-exec-7] DEBUG [62c3cd4b004446e3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:22:57.599 [http-nio-8080-exec-7] DEBUG [62c3cd4b004446e3] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:22:57.601 [http-nio-8080-exec-7] DEBUG [62c3cd4b004446e3] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:23:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:23:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:23:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:23:57.595 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:23:57.596 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:23:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:23:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:23:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:23:57.598 [http-nio-8080-exec-8] DEBUG [7d2686862af64368] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:23:57.599 [http-nio-8080-exec-8] DEBUG [7d2686862af64368] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:23:57.600 [http-nio-8080-exec-8] DEBUG [7d2686862af64368] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:23:57.601 [http-nio-8080-exec-8] DEBUG [7d2686862af64368] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:23:57.602 [http-nio-8080-exec-8] DEBUG [7d2686862af64368] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:24:10.277 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:24:10.277 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:24:10.278 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:24:10.279 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:24:11.826 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:24:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:24:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:24:16.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:24:54.195 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:24:54.196 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:24:54.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:24:54.198 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:24:57.595 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:24:57.596 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:24:57.597 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:24:57.597 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:24:57.597 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:24:57.598 [http-nio-8080-exec-9] DEBUG [aa8737c618ed405c] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:24:57.598 [http-nio-8080-exec-9] DEBUG [aa8737c618ed405c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:24:57.600 [http-nio-8080-exec-9] DEBUG [aa8737c618ed405c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:24:57.601 [http-nio-8080-exec-9] DEBUG [aa8737c618ed405c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:24:57.604 [http-nio-8080-exec-9] DEBUG [aa8737c618ed405c] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:25:00.249 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:25:16.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:25:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:25:16.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:25:17.748 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:25:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:25:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:25:46.892 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:25:57.595 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:25:57.596 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:25:57.596 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:25:57.597 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:25:57.598 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:25:57.598 [http-nio-8080-exec-10] DEBUG [4fa0f0deb1754cad] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:25:57.599 [http-nio-8080-exec-10] DEBUG [4fa0f0deb1754cad] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:25:57.602 [http-nio-8080-exec-10] DEBUG [4fa0f0deb1754cad] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:25:57.602 [http-nio-8080-exec-10] DEBUG [4fa0f0deb1754cad] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:25:57.604 [http-nio-8080-exec-10] DEBUG [4fa0f0deb1754cad] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:26:23.349 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:26:23.350 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:26:23.351 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:26:23.352 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:26:24.873 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:26:46.890 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:26:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:26:46.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:26:47.555 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:26:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:26:57.595 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:26:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:26:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:26:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:26:57.598 [http-nio-8080-exec-1] DEBUG [656a1f0b251e4593] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:26:57.599 [http-nio-8080-exec-1] DEBUG [656a1f0b251e4593] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:26:57.600 [http-nio-8080-exec-1] DEBUG [656a1f0b251e4593] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:26:57.600 [http-nio-8080-exec-1] DEBUG [656a1f0b251e4593] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:26:57.601 [http-nio-8080-exec-1] DEBUG [656a1f0b251e4593] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:27:16.718 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 96 class path changes (0 additions, 96 deletions, 0 modifications)
2025-11-03 17:27:16.720 [Thread-148] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:27:16.721 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 17:27:16.722 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:27:16.723 [Thread-148] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 17:27:16.732 [Thread-148] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:27:16.732 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:27:16.847 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:27:16.847 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:27:16.848 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:27:16.848 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:27:16.849 [Thread-148] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:27:16.850 [Thread-148] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:27:16.851 [Thread-148] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-39 - Shutdown initiated...
2025-11-03 17:27:17.033 [Thread-148] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-39 - Shutdown completed.
2025-11-03 17:27:36.006 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:27:36.006 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:27:36.006 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:27:36.495 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:27:36.527 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 5 JPA repository interfaces.
2025-11-03 17:27:36.814 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:27:36.815 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:27:36.815 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:27:36.829 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:27:36.829 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 820 ms
2025-11-03 17:27:37.032 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:27:37.032 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:27:37.032 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:27:37.114 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:27:37.115 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-41 - Starting...
2025-11-03 17:27:37.117 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-41 - Added connection conn392: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:27:37.117 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-41 - Start completed.
2025-11-03 17:27:37.118 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:27:37.309 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:27:37.309 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:27:37.310 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:27:37.310 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:27:37.310 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:27:37.310 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:27:37.311 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:27:37.312 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:27:37.313 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:27:37.315 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:27:37.317 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:27:37.319 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:27:37.321 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:27:37.323 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:27:37.325 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:27:37.332 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:27:37.335 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:27:37.339 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:27:37.834 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:27:38.152 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:27:38.196 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:27:38.388 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:27:38.543 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:27:38.654 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:27:38.767 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:27:38.992 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:27:39.076 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:27:39.114 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:27:39.130 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:27:39.130 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.222 seconds (process running for 7226.689)
2025-11-03 17:27:39.131 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:27:39.132 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:27:39.134 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   EnvironmentEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpointWebExtension matched:
      - @ConditionalOnBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) found bean 'environmentEndpoint'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpointWebExtension; SearchStrategy: all) did not find any beans (OnBeanCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoContributorAutoConfiguration#buildInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) found a single bean 'buildProperties' (OnBeanCondition)

   InfoContributorAutoConfiguration#gitInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) found a single bean 'gitProperties'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.GitInfoContributor; SearchStrategy: all) did not find any beans (OnBeanCondition)

   InfoEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoEndpointAutoConfiguration#infoEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.InfoEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   LoggersEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   LoggersEndpointAutoConfiguration#loggersEndpoint matched:
      - Logging System enabled (LoggersEndpointAutoConfiguration.OnEnabledLoggingSystemCondition)
      - @ConditionalOnBean (types: org.springframework.boot.logging.LoggingSystem; SearchStrategy: all) found bean 'springBootLoggingSystem'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.logging.LoggersEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MetricsEndpointAutoConfiguration matched:
      - @ConditionalOnClass found required class 'io.micrometer.core.annotation.Timed' (OnClassCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   MetricsEndpointAutoConfiguration#metricsEndpoint matched:
      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean 'prometheusMeterRegistry'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.MetricsEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#buildProperties matched:
      - @ConditionalOnResource found location ${spring.info.build.location:classpath:META-INF/build-info.properties} (OnResourceCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#gitProperties matched:
      - GitResource found git info at classpath:git.properties (ProjectInfoAutoConfiguration.GitResourceAvailableCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration#prometheusEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.export.prometheus.PrometheusScrapeEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   JpaBaseConfiguration.JpaWebConfiguration:
      Did not match:
         - @ConditionalOnBooleanProperty (spring.jpa.open-in-view=true) found different value in property 'spring.jpa.open-in-view' (OnPropertyCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.web.servlet.config.annotation.WebMvcConfigurer' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' securityFilterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   UserDetailsServiceAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.security.authentication.AuthenticationManager,org.springframework.security.authentication.AuthenticationProvider,org.springframework.security.core.userdetails.UserDetailsService,org.springframework.security.authentication.AuthenticationManagerResolver,?; SearchStrategy: all) found beans of type 'org.springframework.security.authentication.AuthenticationManager' authenticationManager and found beans of type 'org.springframework.security.core.userdetails.UserDetailsService' authService (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.authentication.AuthenticationManager' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)
         - AnyNestedCondition 1 matched 2 did not; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.PasswordConfigured @ConditionalOnProperty (spring.security.user.password) did not find property 'spring.security.user.password'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.NameConfigured @ConditionalOnProperty (spring.security.user.name) did not find property 'spring.security.user.name'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.MissingAlternative @ConditionalOnMissingClass did not find unwanted classes 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository', 'org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector', 'org.springframework.security.saml2.provider.service.registration.RelyingPartyRegistrationRepository' (UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-03 17:27:39.756 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:27:40.760 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 17:27:40.761 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 17:27:57.594 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:27:57.596 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:27:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 17:27:57.597 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 17:27:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 17:27:57.616 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2a41a291
2025-11-03 17:27:57.617 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@46ac7efa
2025-11-03 17:27:57.620 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 17:27:57.621 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 25 ms
2025-11-03 17:27:57.623 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:27:57.629 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:27:57.631 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:27:57.633 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:27:57.636 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:27:57.638 [http-nio-8080-exec-1] DEBUG [d5d36937c73f4368] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:27:57.639 [http-nio-8080-exec-1] DEBUG [d5d36937c73f4368] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:27:57.644 [http-nio-8080-exec-1] DEBUG [d5d36937c73f4368] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:27:57.645 [http-nio-8080-exec-1] DEBUG [d5d36937c73f4368] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:27:57.662 [http-nio-8080-exec-1] DEBUG [d5d36937c73f4368] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:28:09.129 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:28:09.130 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:28:09.130 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:28:11.489 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:28:30.735 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 17:28:30.737 [Thread-156] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:28:30.739 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:28:30.746 [Thread-156] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:28:30.746 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:28:30.748 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:28:30.749 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:28:30.750 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:28:30.750 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:28:30.751 [Thread-156] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:28:30.752 [Thread-156] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:28:30.753 [Thread-156] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-41 - Shutdown initiated...
2025-11-03 17:28:30.754 [Thread-156] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-41 - Shutdown completed.
2025-11-03 17:28:31.275 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:28:31.275 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:28:31.275 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:28:31.841 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:28:31.874 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 5 JPA repository interfaces.
2025-11-03 17:28:32.107 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:28:32.108 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:28:32.108 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:28:32.121 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:28:32.121 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 843 ms
2025-11-03 17:28:32.364 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:28:32.365 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:28:32.365 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:28:32.440 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:28:32.442 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-42 - Starting...
2025-11-03 17:28:32.444 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-42 - Added connection conn402: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:28:32.444 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-42 - Start completed.
2025-11-03 17:28:32.445 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:28:32.658 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:28:32.659 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:28:32.660 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:28:32.661 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:28:32.661 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:28:32.661 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:28:32.662 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:28:32.664 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:28:32.667 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:28:32.672 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:28:32.675 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:28:32.680 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:28:32.682 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:28:32.685 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:28:32.687 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:28:32.690 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:28:32.692 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:28:32.695 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:28:33.155 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:28:33.455 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:28:33.505 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:28:33.647 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:28:33.765 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:28:33.825 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:28:33.882 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:28:34.042 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:28:34.140 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:28:34.178 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:28:34.194 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:28:34.195 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.975 seconds (process running for 7281.754)
2025-11-03 17:28:34.196 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:28:34.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:28:34.200 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 17:28:43.595 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 17:28:43.598 [Thread-160] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:28:43.599 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:28:45.496 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:28:45.503 [Thread-160] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:28:45.503 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:28:45.506 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:28:45.506 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:28:45.507 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:28:45.508 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:28:45.508 [Thread-160] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:28:45.510 [Thread-160] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:28:45.510 [Thread-160] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-42 - Shutdown initiated...
2025-11-03 17:28:45.511 [Thread-160] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-42 - Shutdown completed.
2025-11-03 17:28:47.180 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:28:47.180 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:28:47.180 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:28:47.710 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:28:47.739 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 5 JPA repository interfaces.
2025-11-03 17:28:48.096 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:28:48.097 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:28:48.097 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:28:48.148 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:28:48.149 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 967 ms
2025-11-03 17:28:48.439 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:28:48.440 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:28:48.440 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:28:48.524 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:28:48.525 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-43 - Starting...
2025-11-03 17:28:48.527 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-43 - Added connection conn412: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:28:48.528 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-43 - Start completed.
2025-11-03 17:28:48.528 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:28:48.739 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:28:48.740 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:28:48.740 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:28:48.741 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:28:48.741 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:28:48.741 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:28:48.742 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:28:48.744 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:28:48.745 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:28:48.746 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:28:48.747 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:28:48.749 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:28:48.750 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:28:48.751 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:28:48.753 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:28:48.754 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:28:48.756 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:28:48.759 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:28:49.264 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:28:49.646 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:28:49.740 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:28:50.184 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:28:50.515 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:28:50.601 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:28:50.692 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:28:50.905 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:28:50.991 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:28:51.044 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:28:51.062 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:28:51.063 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.931 seconds (process running for 7298.622)
2025-11-03 17:28:51.063 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:28:51.064 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:28:51.068 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 17:28:51.497 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:28:52.502 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 17:28:52.502 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 17:28:57.595 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:28:57.595 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:28:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 17:28:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 17:28:57.596 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 17:28:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2e39852b
2025-11-03 17:28:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@181e3222
2025-11-03 17:28:57.602 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 17:28:57.602 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-11-03 17:28:57.604 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:28:57.605 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:28:57.606 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:28:57.606 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:28:57.609 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:28:57.610 [http-nio-8080-exec-1] DEBUG [1682cdd971744ad7] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:28:57.611 [http-nio-8080-exec-1] DEBUG [1682cdd971744ad7] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:28:57.618 [http-nio-8080-exec-1] DEBUG [1682cdd971744ad7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:28:57.619 [http-nio-8080-exec-1] DEBUG [1682cdd971744ad7] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:28:57.629 [http-nio-8080-exec-1] DEBUG [1682cdd971744ad7] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:29:21.061 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:29:21.062 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:29:21.063 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:29:57.592 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:29:57.593 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:29:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:29:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:29:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:29:57.594 [http-nio-8080-exec-3] DEBUG [52980f27e9774fea] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:29:57.595 [http-nio-8080-exec-3] DEBUG [52980f27e9774fea] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:29:57.596 [http-nio-8080-exec-3] DEBUG [52980f27e9774fea] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:29:57.596 [http-nio-8080-exec-3] DEBUG [52980f27e9774fea] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:29:57.597 [http-nio-8080-exec-3] DEBUG [52980f27e9774fea] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:30:03.827 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:30:03.828 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:30:03.829 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:30:03.830 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:30:04.590 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:30:21.061 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:30:21.061 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:30:21.062 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:30:34.415 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-11-03 17:30:34.418 [Thread-164] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:30:34.420 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:31:04.428 [Thread-164] INFO  [] o.s.c.s.DefaultLifecycleProcessor - Shutdown phase 1073741823 ends with 1 bean still running after timeout of 30000ms: [taskScheduler]
2025-11-03 17:31:04.434 [Thread-164] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:31:04.434 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:31:04.435 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:31:04.437 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:31:04.438 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:31:04.438 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:31:04.439 [Thread-164] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:31:04.440 [Thread-164] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:31:04.441 [Thread-164] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-43 - Shutdown initiated...
2025-11-03 17:31:04.443 [Thread-164] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-43 - Shutdown completed.
2025-11-03 17:31:04.460 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 17:31:05.168 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:31:05.169 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:31:05.169 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:31:05.815 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:31:05.841 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-11-03 17:31:06.261 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:31:06.262 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:31:06.262 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:31:06.278 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:31:06.278 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1093 ms
2025-11-03 17:31:06.526 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:31:06.526 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:31:06.526 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:31:06.716 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:31:06.717 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-44 - Starting...
2025-11-03 17:31:06.723 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-44 - Added connection conn422: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:31:06.724 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-44 - Start completed.
2025-11-03 17:31:06.725 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:31:06.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:31:06.934 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:31:06.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:31:06.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:31:06.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:31:06.935 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:31:06.936 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:31:06.939 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:31:06.941 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:31:06.944 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:31:06.946 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:31:06.948 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:31:06.951 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:31:06.953 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:31:06.956 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:31:06.960 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:31:06.962 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:31:06.966 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:31:07.775 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:31:08.254 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:31:08.339 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:31:08.598 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:31:08.866 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:31:08.982 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:31:09.086 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:31:09.295 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:31:09.391 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:31:09.444 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:31:09.461 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:31:09.462 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.344 seconds (process running for 7437.021)
2025-11-03 17:31:09.464 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:31:09.465 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:31:09.470 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   CacheAutoConfiguration matched:
      - @ConditionalOnClass found required class 'org.springframework.cache.CacheManager' (OnClassCondition)
      - @ConditionalOnBean (types: org.springframework.cache.interceptor.CacheAspectSupport; SearchStrategy: all) found bean 'cacheInterceptor'; @ConditionalOnMissingBean (names: cacheResolver types: org.springframework.cache.CacheManager; SearchStrategy: all) did not find any beans (OnBeanCondition)

   CacheAutoConfiguration#cacheManagerCustomizers matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.cache.CacheManagerCustomizers; SearchStrategy: all) did not find any beans (OnBeanCondition)

   CacheAutoConfiguration.CacheManagerEntityManagerFactoryDependsOnPostProcessor matched:
      - @ConditionalOnClass found required class 'org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean' (OnClassCondition)
      - @ConditionalOnBean (types: org.springframework.orm.jpa.AbstractEntityManagerFactoryBean; SearchStrategy: all) found bean '&entityManagerFactory' (OnBeanCondition)

   CacheMetricsAutoConfiguration matched:
      - @ConditionalOnBean (types: org.springframework.cache.CacheManager; SearchStrategy: all) found bean 'cacheManager' (OnBeanCondition)


Negative matches:
-----------------

   CacheMetricsRegistrarConfiguration:
      Did not match:
         - @ConditionalOnBean (types: org.springframework.boot.actuate.metrics.cache.CacheMeterBinderProvider,io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) did not find any beans of type org.springframework.boot.actuate.metrics.cache.CacheMeterBinderProvider (OnBeanCondition)

   GenericCacheConfiguration:
      Did not match:
         - @ConditionalOnBean (types: org.springframework.cache.Cache; SearchStrategy: all) did not find any beans of type org.springframework.cache.Cache (OnBeanCondition)
      Matched:
         - Cache org.springframework.boot.autoconfigure.cache.GenericCacheConfiguration automatic cache type (CacheCondition)

   NoOpCacheConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.cache.CacheManager; SearchStrategy: all) found beans of type 'org.springframework.cache.CacheManager' cacheManager (OnBeanCondition)
      Matched:
         - Cache org.springframework.boot.autoconfigure.cache.NoOpCacheConfiguration automatic cache type (CacheCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-03 17:31:12.694 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:31:13.704 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 17:31:13.704 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 17:31:14.820 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 17:31:14.827 [Thread-168] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:31:14.844 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:31:14.855 [Thread-168] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:31:14.856 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:31:14.859 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:31:14.860 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:31:14.860 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:31:14.861 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:31:14.862 [Thread-168] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:31:14.863 [Thread-168] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:31:14.864 [Thread-168] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-44 - Shutdown initiated...
2025-11-03 17:31:14.867 [Thread-168] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-44 - Shutdown completed.
2025-11-03 17:31:16.326 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:31:16.328 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:31:16.329 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:31:17.003 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:31:17.032 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 5 JPA repository interfaces.
2025-11-03 17:31:17.307 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:31:17.308 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:31:17.309 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:31:17.325 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:31:17.325 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 991 ms
2025-11-03 17:31:17.563 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:31:17.564 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:31:17.564 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:31:17.653 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:31:17.654 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-45 - Starting...
2025-11-03 17:31:17.656 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-45 - Added connection conn432: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:31:17.657 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-45 - Start completed.
2025-11-03 17:31:17.657 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:31:17.807 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:31:17.807 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:31:17.807 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:31:17.808 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:31:17.808 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:31:17.808 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:31:17.809 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:31:17.811 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:31:17.813 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:31:17.815 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:31:17.816 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:31:17.817 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:31:17.818 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:31:17.821 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:31:17.823 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:31:17.824 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:31:17.826 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:31:17.829 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:31:18.349 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:31:19.112 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:31:19.209 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:31:19.560 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:31:19.850 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:31:20.003 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:31:20.152 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:31:20.580 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:31:20.689 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:31:20.728 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:31:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:31:20.745 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 4.5 seconds (process running for 7448.304)
2025-11-03 17:31:20.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:31:20.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:31:20.749 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   GenericCacheConfiguration matched:
      - Cache org.springframework.boot.autoconfigure.cache.GenericCacheConfiguration automatic cache type (CacheCondition)

   NoOpCacheConfiguration matched:
      - Cache org.springframework.boot.autoconfigure.cache.NoOpCacheConfiguration automatic cache type (CacheCondition)


Negative matches:
-----------------

   CacheAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (names: cacheResolver types: org.springframework.cache.CacheManager; SearchStrategy: all) found beans of type 'org.springframework.cache.CacheManager' cacheManager (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.cache.CacheManager' (OnClassCondition)

   CacheAutoConfiguration.CacheManagerEntityManagerFactoryDependsOnPostProcessor:
      Did not match:
         - Ancestor org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration did not match (ConditionEvaluationReport.AncestorsMatchedCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean' (OnClassCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-03 17:31:49.163 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:31:50.167 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 17:31:50.167 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 17:31:50.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:31:50.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:31:50.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:31:51.778 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:31:57.592 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:31:57.592 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:31:57.593 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 17:31:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 17:31:57.594 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 17:31:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4b9f4c6a
2025-11-03 17:31:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@60621365
2025-11-03 17:31:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 17:31:57.601 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-11-03 17:31:57.602 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:31:57.604 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:31:57.604 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:31:57.604 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:31:57.606 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:31:57.607 [http-nio-8080-exec-1] DEBUG [cadc115d837541af] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:31:57.608 [http-nio-8080-exec-1] DEBUG [cadc115d837541af] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:31:57.621 [http-nio-8080-exec-1] DEBUG [cadc115d837541af] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:31:57.623 [http-nio-8080-exec-1] DEBUG [cadc115d837541af] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:31:57.630 [http-nio-8080-exec-1] DEBUG [cadc115d837541af] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:32:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:32:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:32:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:32:42.104 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:32:50.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:32:50.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:32:50.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:32:51.236 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:32:57.602 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:32:57.604 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:32:57.605 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:32:57.605 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:32:57.606 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:32:57.606 [http-nio-8080-exec-2] DEBUG [1a4218bd459840e9] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:32:57.607 [http-nio-8080-exec-2] DEBUG [1a4218bd459840e9] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:32:57.609 [http-nio-8080-exec-2] DEBUG [1a4218bd459840e9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:32:57.611 [http-nio-8080-exec-2] DEBUG [1a4218bd459840e9] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:32:57.612 [http-nio-8080-exec-2] DEBUG [1a4218bd459840e9] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:33:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:33:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:33:20.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:33:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:33:57.597 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:33:57.597 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:33:57.597 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:33:57.599 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:33:57.599 [http-nio-8080-exec-3] DEBUG [4da91aef0b5d4961] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:33:57.600 [http-nio-8080-exec-3] DEBUG [4da91aef0b5d4961] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:33:57.602 [http-nio-8080-exec-3] DEBUG [4da91aef0b5d4961] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:33:57.602 [http-nio-8080-exec-3] DEBUG [4da91aef0b5d4961] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:33:57.603 [http-nio-8080-exec-3] DEBUG [4da91aef0b5d4961] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:34:09.258 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:34:09.259 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:34:09.260 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:34:09.260 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:34:11.539 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:34:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:34:20.744 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:34:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:34:21.237 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:34:50.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:34:50.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:34:50.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:34:52.571 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:34:57.592 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:34:57.593 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:34:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:34:57.593 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:34:57.594 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:34:57.594 [http-nio-8080-exec-4] DEBUG [3511451f9f8149d1] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:34:57.594 [http-nio-8080-exec-4] DEBUG [3511451f9f8149d1] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:34:57.595 [http-nio-8080-exec-4] DEBUG [3511451f9f8149d1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:34:57.596 [http-nio-8080-exec-4] DEBUG [3511451f9f8149d1] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:34:57.596 [http-nio-8080-exec-4] DEBUG [3511451f9f8149d1] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:35:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:35:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:35:20.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:35:45.994 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:35:50.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:35:50.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:35:50.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:35:52.119 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:35:57.594 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:35:57.594 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:35:57.595 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:35:57.595 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:35:57.595 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:35:57.596 [http-nio-8080-exec-5] DEBUG [197da20fa2c44ca4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:35:57.596 [http-nio-8080-exec-5] DEBUG [197da20fa2c44ca4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:35:57.597 [http-nio-8080-exec-5] DEBUG [197da20fa2c44ca4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:35:57.597 [http-nio-8080-exec-5] DEBUG [197da20fa2c44ca4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:35:57.598 [http-nio-8080-exec-5] DEBUG [197da20fa2c44ca4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:36:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:36:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:36:20.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:36:52.532 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:36:52.533 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:36:52.534 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:36:52.534 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:36:54.632 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:36:57.605 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:36:57.608 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:36:57.608 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:36:57.608 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:36:57.609 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:36:57.609 [http-nio-8080-exec-6] DEBUG [4a7cad0857f9490a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:36:57.610 [http-nio-8080-exec-6] DEBUG [4a7cad0857f9490a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:36:57.612 [http-nio-8080-exec-6] DEBUG [4a7cad0857f9490a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:36:57.615 [http-nio-8080-exec-6] DEBUG [4a7cad0857f9490a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:36:57.629 [http-nio-8080-exec-6] DEBUG [4a7cad0857f9490a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:37:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:37:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:37:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:37:48.952 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:37:50.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:37:50.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:37:50.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:37:51.997 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:37:57.599 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:37:57.600 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:37:57.601 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:37:57.601 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:37:57.604 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:37:57.604 [http-nio-8080-exec-7] DEBUG [7095aa2237494c2f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:37:57.605 [http-nio-8080-exec-7] DEBUG [7095aa2237494c2f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:37:57.607 [http-nio-8080-exec-7] DEBUG [7095aa2237494c2f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:37:57.608 [http-nio-8080-exec-7] DEBUG [7095aa2237494c2f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:37:57.609 [http-nio-8080-exec-7] DEBUG [7095aa2237494c2f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:38:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:38:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:38:20.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:38:24.397 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:38:50.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:38:50.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:38:50.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:38:51.563 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:38:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:38:57.598 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:38:57.600 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:38:57.601 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:38:57.603 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:38:57.605 [http-nio-8080-exec-8] DEBUG [1c2598e9b03d4f3a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:38:57.607 [http-nio-8080-exec-8] DEBUG [1c2598e9b03d4f3a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:38:57.609 [http-nio-8080-exec-8] DEBUG [1c2598e9b03d4f3a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:38:57.612 [http-nio-8080-exec-8] DEBUG [1c2598e9b03d4f3a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:38:57.613 [http-nio-8080-exec-8] DEBUG [1c2598e9b03d4f3a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:39:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:39:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:39:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:39:27.369 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:39:50.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:39:50.747 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:39:50.748 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:39:57.599 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:39:57.602 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:39:57.607 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:39:57.610 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:39:57.616 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:39:57.618 [http-nio-8080-exec-9] DEBUG [3d1bc65011d6497a] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:39:57.620 [http-nio-8080-exec-9] DEBUG [3d1bc65011d6497a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:39:57.622 [http-nio-8080-exec-9] DEBUG [3d1bc65011d6497a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:39:57.623 [http-nio-8080-exec-9] DEBUG [3d1bc65011d6497a] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:39:57.652 [http-nio-8080-exec-9] DEBUG [3d1bc65011d6497a] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:40:10.958 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:40:20.744 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:40:20.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:40:20.746 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:40:47.626 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 17:40:47.645 [Thread-172] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:40:47.683 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:41:00.754 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:41:00.766 [Thread-172] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:41:00.767 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:41:00.769 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:41:00.771 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:41:00.772 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:41:00.772 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:41:00.773 [Thread-172] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:41:00.775 [Thread-172] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:41:00.777 [Thread-172] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-45 - Shutdown initiated...
2025-11-03 17:41:00.781 [Thread-172] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-45 - Shutdown completed.
2025-11-03 17:41:01.866 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:41:01.867 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:41:01.867 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:41:02.885 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:41:02.909 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 5 JPA repository interfaces.
2025-11-03 17:41:03.285 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:41:03.287 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:41:03.287 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:41:03.300 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:41:03.300 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1429 ms
2025-11-03 17:41:03.529 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:41:03.529 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:41:03.529 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:41:03.628 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:41:03.629 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-46 - Starting...
2025-11-03 17:41:03.631 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-46 - Added connection conn442: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:41:03.632 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-46 - Start completed.
2025-11-03 17:41:03.633 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:41:03.772 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:41:03.773 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:41:03.773 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:41:03.773 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:41:03.773 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:41:03.773 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:41:03.774 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:41:03.775 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:41:03.776 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:41:03.777 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:41:03.778 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:41:03.778 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:41:03.780 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:41:03.781 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:41:03.783 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:41:03.785 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:41:03.786 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:41:03.788 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:41:04.287 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:41:04.670 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:41:04.724 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:41:05.009 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:41:05.239 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:41:05.333 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:41:05.404 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:41:05.611 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:41:05.704 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:41:05.739 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:41:05.754 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:41:05.755 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.958 seconds (process running for 8033.314)
2025-11-03 17:41:05.755 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:41:05.756 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:41:05.758 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 17:41:08.579 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:41:09.583 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 17:41:09.584 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 17:41:21.200 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 17:41:21.203 [Thread-176] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:41:21.204 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:41:21.210 [Thread-176] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:41:21.210 [Thread-176] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:41:21.211 [Thread-176] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:41:21.212 [Thread-176] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:41:21.212 [Thread-176] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:41:21.212 [Thread-176] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:41:21.213 [Thread-176] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:41:21.214 [Thread-176] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:41:21.215 [Thread-176] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-46 - Shutdown initiated...
2025-11-03 17:41:21.220 [Thread-176] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-46 - Shutdown completed.
2025-11-03 17:41:22.641 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:41:22.642 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:41:22.643 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:41:23.225 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:41:23.253 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-11-03 17:41:23.575 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:41:23.576 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:41:23.576 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:41:23.590 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:41:23.590 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 940 ms
2025-11-03 17:41:23.801 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:41:23.802 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:41:23.802 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:41:23.885 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:41:23.886 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-47 - Starting...
2025-11-03 17:41:23.888 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-47 - Added connection conn452: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:41:23.888 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-47 - Start completed.
2025-11-03 17:41:23.889 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:41:24.026 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:41:24.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:41:24.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:41:24.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:41:24.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:41:24.027 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:41:24.028 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:41:24.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:41:24.029 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:41:24.030 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:41:24.030 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:41:24.031 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:41:24.032 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:41:24.033 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:41:24.034 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:41:24.035 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:41:24.036 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:41:24.038 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:41:24.507 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:41:24.975 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:41:25.077 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:41:25.291 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:41:25.477 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:41:25.550 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:41:25.631 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:41:25.817 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:41:25.913 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:41:25.950 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:41:25.966 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:41:25.967 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.377 seconds (process running for 8053.526)
2025-11-03 17:41:25.968 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:41:25.969 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:41:25.971 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 17:41:27.176 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:41:28.181 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 17:41:28.181 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 17:41:55.966 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:41:55.967 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:41:55.968 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:41:57.600 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:41:57.600 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:41:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 17:41:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 17:41:57.600 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 17:41:57.603 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@44842e46
2025-11-03 17:41:57.604 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@35e3de84
2025-11-03 17:41:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 17:41:57.605 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 17:41:57.607 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:41:57.609 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:41:57.610 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:41:57.610 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:41:57.613 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:41:57.614 [http-nio-8080-exec-1] DEBUG [1215e05a724e47f4] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:41:57.615 [http-nio-8080-exec-1] DEBUG [1215e05a724e47f4] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:41:57.623 [http-nio-8080-exec-1] DEBUG [1215e05a724e47f4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:41:57.624 [http-nio-8080-exec-1] DEBUG [1215e05a724e47f4] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:41:57.637 [http-nio-8080-exec-1] DEBUG [1215e05a724e47f4] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:41:58.332 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:42:25.965 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:42:25.966 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:42:25.966 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:42:36.451 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:42:55.965 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:42:55.966 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:42:55.967 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:42:57.612 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:42:57.613 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:42:57.614 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:42:57.614 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:42:57.616 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:42:57.617 [http-nio-8080-exec-2] DEBUG [b2f7b9f779954e71] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:42:57.617 [http-nio-8080-exec-2] DEBUG [b2f7b9f779954e71] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:42:57.620 [http-nio-8080-exec-2] DEBUG [b2f7b9f779954e71] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:42:57.620 [http-nio-8080-exec-2] DEBUG [b2f7b9f779954e71] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:42:57.621 [http-nio-8080-exec-2] DEBUG [b2f7b9f779954e71] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:43:11.216 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:43:25.965 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:43:25.966 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:43:25.967 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:43:57.609 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:43:57.611 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:43:57.611 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:43:57.611 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:43:57.617 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:43:57.619 [http-nio-8080-exec-3] DEBUG [d38f9cc16b5b4e7f] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:43:57.621 [http-nio-8080-exec-3] DEBUG [d38f9cc16b5b4e7f] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:43:57.624 [http-nio-8080-exec-3] DEBUG [d38f9cc16b5b4e7f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:43:57.626 [http-nio-8080-exec-3] DEBUG [d38f9cc16b5b4e7f] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:43:57.630 [http-nio-8080-exec-3] DEBUG [d38f9cc16b5b4e7f] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:44:17.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:44:17.209 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:44:17.211 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:44:17.211 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:44:20.160 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:44:25.965 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:44:25.966 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:44:25.967 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:44:27.265 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:44:52.516 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 17:44:52.533 [Thread-180] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:44:52.559 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:44:52.571 [Thread-180] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:44:52.572 [Thread-180] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:44:52.588 [Thread-180] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:44:52.596 [Thread-180] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:44:52.597 [Thread-180] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:44:52.605 [Thread-180] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:44:52.611 [Thread-180] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:44:52.618 [Thread-180] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:44:52.619 [Thread-180] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-47 - Shutdown initiated...
2025-11-03 17:44:52.633 [Thread-180] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-47 - Shutdown completed.
2025-11-03 17:44:53.903 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:44:53.905 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:44:53.906 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:44:54.591 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:44:54.620 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 5 JPA repository interfaces.
2025-11-03 17:44:54.948 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:44:54.949 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:44:54.950 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:44:54.967 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:44:54.968 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1058 ms
2025-11-03 17:44:55.258 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:44:55.258 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:44:55.258 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:44:55.355 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:44:55.356 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-48 - Starting...
2025-11-03 17:44:55.358 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-48 - Added connection conn462: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:44:55.358 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-48 - Start completed.
2025-11-03 17:44:55.359 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:44:55.505 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:44:55.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:44:55.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:44:55.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:44:55.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:44:55.506 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:44:55.507 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:44:55.508 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:44:55.509 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:44:55.512 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:44:55.513 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:44:55.514 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:44:55.516 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:44:55.519 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:44:55.521 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:44:55.524 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:44:55.525 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:44:55.527 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:44:56.076 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:44:56.375 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:44:56.423 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:44:56.576 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:44:56.751 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:44:56.808 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:44:56.875 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:44:57.045 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:44:57.129 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:44:57.161 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:44:57.182 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:44:57.183 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.352 seconds (process running for 8264.742)
2025-11-03 17:44:57.183 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:44:57.184 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:44:57.186 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 17:44:57.595 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:44:57.595 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:44:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 17:44:57.595 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 17:44:57.596 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 17:44:57.599 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1f43d6df
2025-11-03 17:44:57.600 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5db5e79
2025-11-03 17:44:57.600 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 17:44:57.600 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 17:44:57.601 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:44:57.603 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:44:57.604 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:44:57.604 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:44:57.606 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:44:57.607 [http-nio-8080-exec-2] DEBUG [5157bd866e17431b] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:44:57.608 [http-nio-8080-exec-2] DEBUG [5157bd866e17431b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:44:57.612 [http-nio-8080-exec-2] DEBUG [5157bd866e17431b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:44:57.613 [http-nio-8080-exec-2] DEBUG [5157bd866e17431b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:44:57.616 [http-nio-8080-exec-2] DEBUG [5157bd866e17431b] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:44:58.473 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:44:58.629 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 17:44:58.629 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 7 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 17:45:27.182 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:45:27.182 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:45:27.183 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:45:29.498 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:45:57.182 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:45:57.183 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:45:57.184 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:45:57.595 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:45:57.597 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:45:57.598 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:45:57.599 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:45:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:45:57.603 [http-nio-8080-exec-1] DEBUG [351798032b0e43e2] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:45:57.605 [http-nio-8080-exec-1] DEBUG [351798032b0e43e2] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:45:57.611 [http-nio-8080-exec-1] DEBUG [351798032b0e43e2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:45:57.611 [http-nio-8080-exec-1] DEBUG [351798032b0e43e2] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:45:57.613 [http-nio-8080-exec-1] DEBUG [351798032b0e43e2] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:46:01.081 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:46:27.182 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:46:27.183 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:46:27.183 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:46:40.576 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:46:43.163 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 17:46:43.168 [Thread-184] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:46:43.171 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:46:43.176 [Thread-184] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:46:43.176 [Thread-184] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:46:43.178 [Thread-184] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:46:43.178 [Thread-184] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:46:43.178 [Thread-184] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:46:43.179 [Thread-184] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:46:43.179 [Thread-184] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:46:43.180 [Thread-184] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:46:43.181 [Thread-184] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-48 - Shutdown initiated...
2025-11-03 17:46:43.182 [Thread-184] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-48 - Shutdown completed.
2025-11-03 17:46:44.138 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:46:44.138 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:46:44.138 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:46:44.573 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:46:44.596 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 5 JPA repository interfaces.
2025-11-03 17:46:44.949 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:46:44.950 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:46:44.951 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:46:44.965 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:46:44.966 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 826 ms
2025-11-03 17:46:45.268 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:46:45.268 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:46:45.269 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:46:45.369 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:46:45.370 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-49 - Starting...
2025-11-03 17:46:45.372 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-49 - Added connection conn472: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:46:45.372 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-49 - Start completed.
2025-11-03 17:46:45.373 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:46:45.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:46:45.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:46:45.529 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:46:45.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:46:45.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:46:45.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:46:45.530 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:46:45.532 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:46:45.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:46:45.533 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:46:45.534 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:46:45.534 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:46:45.535 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:46:45.538 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:46:45.539 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:46:45.540 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:46:45.541 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:46:45.543 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:46:45.996 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:46:46.332 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:46:46.380 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:46:46.518 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:46:46.666 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:46:46.723 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:46:46.781 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:46:46.958 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:46:47.038 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:46:47.071 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:46:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:46:47.093 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 2.99 seconds (process running for 8374.652)
2025-11-03 17:46:47.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:46:47.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:46:47.097 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 17:46:52.151 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:46:53.155 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 17:46:53.155 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 17:46:57.601 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:46:57.601 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:46:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 17:46:57.601 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 17:46:57.602 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 17:46:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1c1533cc
2025-11-03 17:46:57.607 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@43c407a8
2025-11-03 17:46:57.607 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 17:46:57.607 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-11-03 17:46:57.609 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:46:57.611 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:46:57.611 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:46:57.612 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:46:57.614 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:46:57.615 [http-nio-8080-exec-1] DEBUG [7c24bc9181804627] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:46:57.616 [http-nio-8080-exec-1] DEBUG [7c24bc9181804627] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:46:57.621 [http-nio-8080-exec-1] DEBUG [7c24bc9181804627] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:46:57.622 [http-nio-8080-exec-1] DEBUG [7c24bc9181804627] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:46:57.625 [http-nio-8080-exec-1] DEBUG [7c24bc9181804627] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:47:17.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:47:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:47:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:47:19.295 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:47:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:47:47.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:47:47.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:47:57.604 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:47:57.606 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:47:57.608 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:47:57.609 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:47:57.613 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:47:57.614 [http-nio-8080-exec-2] DEBUG [1e8bada5f6cf4578] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:47:57.615 [http-nio-8080-exec-2] DEBUG [1e8bada5f6cf4578] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:47:57.617 [http-nio-8080-exec-2] DEBUG [1e8bada5f6cf4578] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:47:57.620 [http-nio-8080-exec-2] DEBUG [1e8bada5f6cf4578] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:47:57.622 [http-nio-8080-exec-2] DEBUG [1e8bada5f6cf4578] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:48:32.877 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:48:32.878 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:48:32.879 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:48:32.879 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:48:33.424 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:48:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:48:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:48:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:48:49.681 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:48:57.594 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:48:57.594 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:48:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:48:57.595 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:48:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:48:57.597 [http-nio-8080-exec-3] DEBUG [24e123eca49b4cdc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:48:57.597 [http-nio-8080-exec-3] DEBUG [24e123eca49b4cdc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:48:57.598 [http-nio-8080-exec-3] DEBUG [24e123eca49b4cdc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:48:57.598 [http-nio-8080-exec-3] DEBUG [24e123eca49b4cdc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:48:57.599 [http-nio-8080-exec-3] DEBUG [24e123eca49b4cdc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:49:17.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:49:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:49:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:49:30.034 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:49:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:49:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:49:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:49:57.599 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:49:57.600 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:49:57.601 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:49:57.601 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:49:57.602 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:49:57.603 [http-nio-8080-exec-5] DEBUG [115b576289634d2e] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:49:57.603 [http-nio-8080-exec-5] DEBUG [115b576289634d2e] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:49:57.605 [http-nio-8080-exec-5] DEBUG [115b576289634d2e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:49:57.606 [http-nio-8080-exec-5] DEBUG [115b576289634d2e] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:49:57.607 [http-nio-8080-exec-5] DEBUG [115b576289634d2e] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:50:12.459 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:50:17.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:50:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:50:17.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:50:17.275 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:50:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:50:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:50:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:50:48.140 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:50:57.599 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:50:57.600 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:50:57.601 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:50:57.601 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:50:57.610 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:50:57.610 [http-nio-8080-exec-6] DEBUG [3445d949a84448fc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:50:57.611 [http-nio-8080-exec-6] DEBUG [3445d949a84448fc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:50:57.613 [http-nio-8080-exec-6] DEBUG [3445d949a84448fc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:50:57.614 [http-nio-8080-exec-6] DEBUG [3445d949a84448fc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:50:57.615 [http-nio-8080-exec-6] DEBUG [3445d949a84448fc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:51:17.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:51:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:51:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:51:18.822 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:51:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:51:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:51:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:51:51.891 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:51:57.593 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:51:57.594 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:51:57.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:51:57.594 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:51:57.596 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:51:57.596 [http-nio-8080-exec-7] DEBUG [3bd7d9a906b54a01] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:51:57.597 [http-nio-8080-exec-7] DEBUG [3bd7d9a906b54a01] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:51:57.598 [http-nio-8080-exec-7] DEBUG [3bd7d9a906b54a01] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:51:57.598 [http-nio-8080-exec-7] DEBUG [3bd7d9a906b54a01] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:51:57.604 [http-nio-8080-exec-7] DEBUG [3bd7d9a906b54a01] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:52:17.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:52:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:52:17.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:52:19.623 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:52:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:52:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:52:47.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:52:56.373 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:52:57.594 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:52:57.595 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:52:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:52:57.596 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:52:57.597 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:52:57.598 [http-nio-8080-exec-8] DEBUG [b999f7d27f924a48] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:52:57.598 [http-nio-8080-exec-8] DEBUG [b999f7d27f924a48] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:52:57.600 [http-nio-8080-exec-8] DEBUG [b999f7d27f924a48] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:52:57.601 [http-nio-8080-exec-8] DEBUG [b999f7d27f924a48] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:52:57.603 [http-nio-8080-exec-8] DEBUG [b999f7d27f924a48] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:53:17.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:53:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:53:17.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:53:45.900 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:53:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:53:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:53:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:53:47.740 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:53:57.596 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:53:57.597 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:53:57.597 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:53:57.597 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:53:57.598 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:53:57.604 [http-nio-8080-exec-9] DEBUG [6ad4bc17e2ad4759] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:53:57.605 [http-nio-8080-exec-9] DEBUG [6ad4bc17e2ad4759] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:53:57.607 [http-nio-8080-exec-9] DEBUG [6ad4bc17e2ad4759] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:53:57.612 [http-nio-8080-exec-9] DEBUG [6ad4bc17e2ad4759] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:53:57.625 [http-nio-8080-exec-9] DEBUG [6ad4bc17e2ad4759] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:54:17.095 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:54:17.096 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:54:17.097 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:54:19.328 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:54:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:54:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:54:47.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:54:57.600 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:54:57.602 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:54:57.607 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:54:57.608 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:54:57.609 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:54:57.610 [http-nio-8080-exec-10] DEBUG [fbd66773f42144cc] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:54:57.611 [http-nio-8080-exec-10] DEBUG [fbd66773f42144cc] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:54:57.615 [http-nio-8080-exec-10] DEBUG [fbd66773f42144cc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:54:57.616 [http-nio-8080-exec-10] DEBUG [fbd66773f42144cc] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:54:57.619 [http-nio-8080-exec-10] DEBUG [fbd66773f42144cc] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:55:08.728 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:55:17.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:55:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:55:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:55:18.122 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:55:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:55:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:55:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:55:57.205 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:55:57.604 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:55:57.604 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:55:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:55:57.605 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:55:57.606 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:55:57.607 [http-nio-8080-exec-1] DEBUG [1ecfe9e2566a4e54] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:55:57.608 [http-nio-8080-exec-1] DEBUG [1ecfe9e2566a4e54] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:55:57.612 [http-nio-8080-exec-1] DEBUG [1ecfe9e2566a4e54] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:55:57.614 [http-nio-8080-exec-1] DEBUG [1ecfe9e2566a4e54] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:55:57.625 [http-nio-8080-exec-1] DEBUG [1ecfe9e2566a4e54] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:56:17.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:56:17.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:56:17.094 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:56:19.806 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:56:47.092 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:56:47.093 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:56:47.095 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:56:57.613 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:56:57.614 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:56:57.615 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:56:57.615 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:56:57.616 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:56:57.616 [http-nio-8080-exec-2] DEBUG [d9085989ae4e4646] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:56:57.616 [http-nio-8080-exec-2] DEBUG [d9085989ae4e4646] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:56:57.617 [http-nio-8080-exec-2] DEBUG [d9085989ae4e4646] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:56:57.617 [http-nio-8080-exec-2] DEBUG [d9085989ae4e4646] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:56:57.618 [http-nio-8080-exec-2] DEBUG [d9085989ae4e4646] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:57:22.184 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:57:22.185 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:57:22.186 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:57:22.186 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:57:57.593 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:57:57.596 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:57:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:57:57.596 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:57:57.598 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:57:57.598 [http-nio-8080-exec-3] DEBUG [79dc41ec11604011] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:57:57.604 [http-nio-8080-exec-3] DEBUG [79dc41ec11604011] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:57:57.613 [http-nio-8080-exec-3] DEBUG [79dc41ec11604011] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:57:57.614 [http-nio-8080-exec-3] DEBUG [79dc41ec11604011] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:57:57.615 [http-nio-8080-exec-3] DEBUG [79dc41ec11604011] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:58:20.040 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:58:20.040 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:58:20.041 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:58:20.041 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:58:55.317 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:58:55.318 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:58:55.319 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:58:55.319 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:58:57.595 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:58:57.596 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:58:57.598 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:58:57.599 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:58:57.601 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:58:57.604 [http-nio-8080-exec-4] DEBUG [fe1edb72e1174df6] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:58:57.604 [http-nio-8080-exec-4] DEBUG [fe1edb72e1174df6] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:58:57.606 [http-nio-8080-exec-4] DEBUG [fe1edb72e1174df6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:58:57.607 [http-nio-8080-exec-4] DEBUG [fe1edb72e1174df6] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:58:57.608 [http-nio-8080-exec-4] DEBUG [fe1edb72e1174df6] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:59:00.193 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:59:00.193 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:59:00.194 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:59:00.195 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:59:02.734 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:59:14.639 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 97 class path changes (0 additions, 97 deletions, 0 modifications)
2025-11-03 17:59:14.646 [Thread-188] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 17:59:14.647 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 17:59:14.653 [Thread-188] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:59:14.653 [Thread-188] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:59:14.654 [Thread-188] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:59:14.654 [Thread-188] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:59:14.655 [Thread-188] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:59:14.655 [Thread-188] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:59:14.655 [Thread-188] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:59:14.656 [Thread-188] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:59:14.657 [Thread-188] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-49 - Shutdown initiated...
2025-11-03 17:59:14.658 [Thread-188] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-49 - Shutdown completed.
2025-11-03 17:59:24.328 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:59:24.329 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:59:24.329 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:59:24.898 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:59:24.901 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2025-11-03 17:59:25.131 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:59:25.132 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:59:25.133 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:59:25.149 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:59:25.149 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 818 ms
2025-11-03 17:59:25.362 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:59:25.365 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:59:25.477 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:59:25.478 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-51 - Starting...
2025-11-03 17:59:25.485 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-51 - Added connection conn492: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:59:25.485 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-51 - Start completed.
2025-11-03 17:59:25.487 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:59:25.512 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:59:25.673 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 6 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:59:25.782 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:59:25.798 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:59:25.832 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:59:26.015 [restartedMain] WARN  [] o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 15a57011-2f13-4020-801f-f9548ce619c1

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-03 17:59:26.016 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-03 17:59:26.048 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:59:26.080 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:59:26.126 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:59:26.135 [restartedMain] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'João Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null)
2025-11-03 17:59:26.137 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:59:26.137 [restartedMain] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 17:59:26.138 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-51 - Shutdown initiated...
2025-11-03 17:59:26.140 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-51 - Shutdown completed.
2025-11-03 17:59:27.143 [restartedMain] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Timed out waiting for in-flight spans to send
2025-11-03 17:59:27.145 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 17:59:27.176 [restartedMain] INFO  [] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 17:59:27.183 [restartedMain] ERROR [] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'João Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.deliverytech.delivery.DeliveryApiApplication.main(DeliveryApiApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of file [/home/dimas/Documentos/GitHub/delivery-api/target/classes/data.sql]: INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'João Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:293)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 23 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "USUARIO" not found (this database is empty); SQL statement:
INSERT INTO usuario (id, nome, email, senha, role, ativo, data_criacao, restaurante_id) VALUES (1, 'Admin Sistema', 'admin@delivery.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ADMIN', true, NOW(), null), (2, 'João Cliente', 'joao@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (3, 'Maria Cliente', 'maria@email.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'CLIENTE', true, NOW(), null), (4, 'Pizza Palace', 'pizza@palace.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 1), (5, 'Burger King', 'burger@king.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'RESTAURANTE', true, NOW(), 2), (6, 'Carlos Entregador', 'carlos@entrega.com', '$2a$10$AkKArXqwoK8Ocri.T5C8B.4qi4FmFwDWI2aV2zTXFH3CQYwzOQULa', 'ENTREGADOR', true, NOW(), null) [42104-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7932)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7916)
	at org.h2.command.Parser.readTableOrView(Parser.java:7895)
	at org.h2.command.Parser.readTableOrView(Parser.java:7857)
	at org.h2.command.Parser.parseInsert(Parser.java:1521)
	at org.h2.command.Parser.parsePrepared(Parser.java:698)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:556)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 33 common frames omitted
2025-11-03 17:59:34.658 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 83757 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:59:34.662 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:59:34.662 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 17:59:35.824 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 17:59:35.943 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 111 ms. Found 5 JPA repository interfaces.
2025-11-03 17:59:36.641 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 17:59:36.642 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 17:59:36.643 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 17:59:36.661 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat-9].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:59:36.662 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1997 ms
2025-11-03 17:59:37.069 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:59:37.070 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 17:59:37.070 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 17:59:37.295 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 17:59:37.296 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-52 - Starting...
2025-11-03 17:59:37.299 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-52 - Added connection conn502: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 17:59:37.299 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-52 - Start completed.
2025-11-03 17:59:37.299 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 17:59:37.623 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 17:59:37.624 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 17:59:37.625 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 17:59:37.626 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 17:59:37.626 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 17:59:37.629 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 17:59:37.630 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 17:59:37.633 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 17:59:37.639 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 17:59:37.642 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 17:59:37.645 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 17:59:37.648 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 17:59:37.650 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 17:59:37.663 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 17:59:37.665 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 17:59:37.676 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:59:37.677 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 17:59:37.681 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 17:59:38.523 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 17:59:39.003 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 17:59:39.077 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 17:59:39.325 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 17:59:39.678 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 17:59:40.061 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 17:59:40.215 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 17:59:41.014 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 17:59:41.129 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 17:59:41.199 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 17:59:41.219 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 17:59:41.220 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 6.604 seconds (process running for 9148.78)
2025-11-03 17:59:41.222 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 17:59:41.224 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 17:59:41.226 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   CacheMetricsAutoConfiguration matched:
      - @ConditionalOnBean (types: org.springframework.cache.CacheManager; SearchStrategy: all) found bean 'cacheManager' (OnBeanCondition)

   EnvironmentEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   EnvironmentEndpointAutoConfiguration#environmentEndpointWebExtension matched:
      - @ConditionalOnBean (types: org.springframework.boot.actuate.env.EnvironmentEndpoint; SearchStrategy: all) found bean 'environmentEndpoint'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.env.EnvironmentEndpointWebExtension; SearchStrategy: all) did not find any beans (OnBeanCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoContributorAutoConfiguration#buildInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) found a single bean 'buildProperties' (OnBeanCondition)

   InfoContributorAutoConfiguration#gitInfoContributor matched:
      - @ConditionalOnEnabledInfoContributor management.info.defaults.enabled is considered true (OnEnabledInfoContributorCondition)
      - @ConditionalOnSingleCandidate (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) found a single bean 'gitProperties'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.GitInfoContributor; SearchStrategy: all) did not find any beans (OnBeanCondition)

   InfoEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   InfoEndpointAutoConfiguration#infoEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.info.InfoEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   LoggersEndpointAutoConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   LoggersEndpointAutoConfiguration#loggersEndpoint matched:
      - Logging System enabled (LoggersEndpointAutoConfiguration.OnEnabledLoggingSystemCondition)
      - @ConditionalOnBean (types: org.springframework.boot.logging.LoggingSystem; SearchStrategy: all) found bean 'springBootLoggingSystem'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.logging.LoggersEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MetricsEndpointAutoConfiguration matched:
      - @ConditionalOnClass found required class 'io.micrometer.core.annotation.Timed' (OnClassCondition)
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   MetricsEndpointAutoConfiguration#metricsEndpoint matched:
      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean 'prometheusMeterRegistry'; @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.MetricsEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#buildProperties matched:
      - @ConditionalOnResource found location ${spring.info.build.location:classpath:META-INF/build-info.properties} (OnResourceCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.BuildProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   ProjectInfoAutoConfiguration#gitProperties matched:
      - GitResource found git info at classpath:git.properties (ProjectInfoAutoConfiguration.GitResourceAvailableCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.info.GitProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration matched:
      - @ConditionalOnAvailableEndpoint marked as exposed by a 'management.endpoints.web.exposure' property (OnAvailableEndpointCondition)

   PrometheusMetricsExportAutoConfiguration.PrometheusScrapeEndpointConfiguration#prometheusEndpoint matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.metrics.export.prometheus.PrometheusScrapeEndpoint; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   CacheMetricsRegistrarConfiguration:
      Did not match:
         - @ConditionalOnBean (types: org.springframework.boot.actuate.metrics.cache.CacheMeterBinderProvider,io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) did not find any beans of type org.springframework.boot.actuate.metrics.cache.CacheMeterBinderProvider (OnBeanCondition)

   JpaBaseConfiguration.JpaWebConfiguration:
      Did not match:
         - @ConditionalOnBooleanProperty (spring.jpa.open-in-view=true) found different value in property 'spring.jpa.open-in-view' (OnPropertyCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.web.servlet.config.annotation.WebMvcConfigurer' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' securityFilterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   UserDetailsServiceAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.security.authentication.AuthenticationManager,org.springframework.security.authentication.AuthenticationProvider,org.springframework.security.core.userdetails.UserDetailsService,org.springframework.security.authentication.AuthenticationManagerResolver,?; SearchStrategy: all) found beans of type 'org.springframework.security.authentication.AuthenticationManager' authenticationManager and found beans of type 'org.springframework.security.core.userdetails.UserDetailsService' authService (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.authentication.AuthenticationManager' (OnClassCondition)
         - found 'session' scope (OnWebApplicationCondition)
         - AnyNestedCondition 1 matched 2 did not; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.PasswordConfigured @ConditionalOnProperty (spring.security.user.password) did not find property 'spring.security.user.password'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.NameConfigured @ConditionalOnProperty (spring.security.user.name) did not find property 'spring.security.user.name'; NestedCondition on UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured.MissingAlternative @ConditionalOnMissingClass did not find unwanted classes 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository', 'org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector', 'org.springframework.security.saml2.provider.service.registration.RelyingPartyRegistrationRepository' (UserDetailsServiceAutoConfiguration.MissingAlternativeOrUserPropertiesConfigured)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-11-03 17:59:43.391 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 17:59:44.416 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 17:59:44.416 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 17:59:57.610 [http-nio-8080-exec-1] INFO  [] o.a.c.c.C.[Tomcat-9].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:59:57.610 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:59:57.610 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 17:59:57.610 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 17:59:57.610 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 17:59:57.613 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4aa1fe26
2025-11-03 17:59:57.614 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1eca24f0
2025-11-03 17:59:57.614 [http-nio-8080-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 17:59:57.614 [http-nio-8080-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-03 17:59:57.615 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 17:59:57.617 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 17:59:57.618 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:59:57.618 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 17:59:57.620 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 17:59:57.620 [http-nio-8080-exec-1] DEBUG [1deb3e75576d45da] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 17:59:57.621 [http-nio-8080-exec-1] DEBUG [1deb3e75576d45da] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 17:59:57.654 [http-nio-8080-exec-1] DEBUG [1deb3e75576d45da] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 17:59:57.656 [http-nio-8080-exec-1] DEBUG [1deb3e75576d45da] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 17:59:57.677 [http-nio-8080-exec-1] DEBUG [1deb3e75576d45da] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 17:59:59.097 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 17:59:59.101 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 17:59:59.104 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 17:59:59.251 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@79ac50fe
2025-11-03 18:00:07.731 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:00:07.958 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 206 ms. Found 5 JPA repository interfaces.
2025-11-03 18:00:11.219 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:00:11.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:00:11.221 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:00:17.164 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:00:17.738 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 18:00:21.560 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:00:21.567 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 18:00:22.210 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:00:24.759 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:00:32.735 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:00:32.747 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:00:32.748 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:00:32.748 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:00:32.749 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:00:32.750 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:00:32.808 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:00:32.858 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:00:32.870 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:00:32.874 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:00:32.877 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:00:32.879 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:00:32.882 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:00:32.925 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:00:32.929 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:00:32.931 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:00:32.935 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:00:32.944 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:00:34.882 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 18:00:37.804 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:00:38.250 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:00:38.255 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:00:38.409 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:00:38.475 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:00:38.485 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:00:40.090 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:00:41.219 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:00:41.219 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:00:41.220 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:00:45.870 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:00:46.067 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:00:46.572 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:00:46.792 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:00:47.302 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:00:48.158 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:00:50.336 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:00:53.027 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:00:53.028 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:00:53.029 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:00:53.033 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:00:53.034 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:00:53.039 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 5 ms
2025-11-03 18:00:53.858 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 57.756 seconds (process running for 73.758)
2025-11-03 18:00:54.157 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:00:54.331 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:00:54.439 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:00:56.917 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-03 18:00:57.204 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, nome, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:00:57.594 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /dashboard/api/metrics
2025-11-03 18:00:57.598 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:00:57.599 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 18:00:57.599 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 18:00:57.600 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /dashboard/api/metrics
2025-11-03 18:00:57.600 [http-nio-8080-exec-2] DEBUG [de5ae7fc015645ad] o.s.web.servlet.DispatcherServlet - GET "/dashboard/api/metrics", parameters={}
2025-11-03 18:00:57.601 [http-nio-8080-exec-2] DEBUG [de5ae7fc015645ad] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.DashboardController#getMetricsData()
2025-11-03 18:00:57.603 [http-nio-8080-exec-2] DEBUG [de5ae7fc015645ad] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:00:57.603 [http-nio-8080-exec-2] DEBUG [de5ae7fc015645ad] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{usuarios_ativos=0.0, tempo_medio_banco=0.0, tempo_medio_pedido=0.0, receita_total=0.0, pedidos_suce (truncated)...]
2025-11-03 18:00:57.605 [http-nio-8080-exec-2] DEBUG [de5ae7fc015645ad] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 18:00:57.684 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 18:00:57.903 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:00:57.914 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 18:00:57.994 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 18:00:58.074 [main] DEBUG [8e3c5c5cbcb5451c] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 18:00:58.511 [main] DEBUG [8e3c5c5cbcb5451c] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@20fda932]
2025-11-03 18:00:58.867 [main] DEBUG [8e3c5c5cbcb5451c] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 18:00:58.963 [main] DEBUG [8e3c5c5cbcb5451c] o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-11-03 18:00:59.062 [main] DEBUG [8e3c5c5cbcb5451c] o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2025-11-03 18:00:59.141 [main] DEBUG [8e3c5c5cbcb5451c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:00:59.143 [main] DEBUG [8e3c5c5cbcb5451c] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{status=401, message=Credenciais inválidas}]
2025-11-03 18:01:01.646 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@79ac50fe, started on Mon Nov 03 17:59:59 BRT 2025
2025-11-03 18:01:01.655 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:01:01.719 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:01:01.721 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:01:01.728 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:01:01.730 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:01:01.732 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:01:01.734 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:01:01.736 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:01:01.863 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 18:01:01.868 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 18:01:01.875 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:01:02.221 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:01:02.221 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:01:02.222 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:01:02.225 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3503e802
2025-11-03 18:01:03.437 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:01:03.476 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 5 JPA repository interfaces.
2025-11-03 18:01:03.866 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:01:03.868 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-03 18:01:03.874 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:01:03.875 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-03 18:01:03.877 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:01:04.104 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:01:04.105 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:01:04.106 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:01:04.107 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:01:04.107 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:01:04.108 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:01:04.109 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:01:04.113 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:01:04.117 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:01:04.120 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:01:04.123 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:01:04.126 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:01:04.129 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:01:04.133 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:01:04.137 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:01:04.141 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:01:04.143 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:01:04.148 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:01:04.434 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:01:04.504 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:01:04.518 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:01:04.537 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:04.566 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:04.589 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:04.768 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:01:05.042 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:01:05.066 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:01:05.224 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:01:05.314 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:01:05.482 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:01:05.549 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:01:05.809 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:01:05.867 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:01:05.868 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:01:05.868 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:01:05.868 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:01:05.868 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:01:05.870 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-03 18:01:05.910 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 4.035 seconds (process running for 85.811)
2025-11-03 18:01:05.910 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:01:05.912 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:01:05.914 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:01:05.936 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-03 18:01:06.004 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-11-03 18:01:06.007 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:01:06.010 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-11-03 18:01:06.012 [main] DEBUG [c76fbc1b148a4546] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#getCurrentUser(Authentication)
2025-11-03 18:01:06.022 [main] DEBUG [c76fbc1b148a4546] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:01:06.022 [main] DEBUG [c76fbc1b148a4546] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Token inválido. Acesso negado.}]
2025-11-03 18:01:06.033 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@3503e802, started on Mon Nov 03 18:01:02 BRT 2025
2025-11-03 18:01:19.882 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:01:19.882 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:01:19.883 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:01:19.883 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:01:36.040 [main] INFO  [] o.s.c.s.DefaultLifecycleProcessor - Shutdown phase 1073741823 ends with 1 bean still running after timeout of 30000ms: [taskScheduler]
2025-11-03 18:01:36.045 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:01:36.046 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:01:36.047 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 18:01:36.049 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:01:36.051 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:01:36.053 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:01:36.055 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:01:36.056 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:01:36.058 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-03 18:01:36.060 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-03 18:01:36.065 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:01:36.141 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:01:36.141 [main] DEBUG [] c.d.d.c.a.AuthControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:01:36.142 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:01:36.145 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3927df20
2025-11-03 18:01:36.707 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:01:36.782 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72 ms. Found 5 JPA repository interfaces.
2025-11-03 18:01:37.029 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:01:37.031 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-03 18:01:37.036 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:01:37.036 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-03 18:01:37.038 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:01:37.245 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:01:37.247 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:01:37.247 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:01:37.248 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:01:37.249 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:01:37.250 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:01:37.252 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:01:37.257 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:01:37.261 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:01:37.265 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:01:37.268 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:01:37.274 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:01:37.277 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:01:37.284 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:01:37.315 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:01:37.319 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:01:37.323 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:01:37.338 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:01:37.627 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:01:37.654 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:01:37.659 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:01:37.666 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:37.671 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:37.677 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:37.906 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:01:38.445 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:01:38.497 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:01:38.746 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:01:38.799 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:01:38.883 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:01:38.929 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:01:39.121 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:01:39.181 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:01:39.182 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:01:39.182 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:01:39.183 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:01:39.184 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:01:39.186 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-03 18:01:39.240 [main] INFO  [] c.d.d.c.a.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 3.175 seconds (process running for 119.141)
2025-11-03 18:01:39.241 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:01:39.244 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:01:39.246 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:01:39.262 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0
2025-11-03 18:01:39.365 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Usuario */insert 
    into
        usuario (ativo, data_criacao, email, nome, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:39.398 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-11-03 18:01:39.402 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:01:39.403 [main] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 18:01:39.409 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-11-03 18:01:39.411 [main] DEBUG [824223eb80514ca5] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#register(RegisterRequest)
2025-11-03 18:01:39.447 [main] DEBUG [824223eb80514ca5] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.RegisterRequest@55af3295]
2025-11-03 18:01:39.583 [main] DEBUG [824223eb80514ca5] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        usuario u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-11-03 18:01:39.603 [main] DEBUG [824223eb80514ca5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:01:39.604 [main] DEBUG [824223eb80514ca5] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{message=Email já está em uso}]
2025-11-03 18:01:39.618 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@3927df20, started on Mon Nov 03 18:01:36 BRT 2025
2025-11-03 18:01:40.111 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:01:40.121 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:01:40.122 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:01:40.124 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:01:40.127 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:01:40.129 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:01:40.131 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:01:40.134 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:01:40.138 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-03 18:01:40.141 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-03 18:01:40.154 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.controller.PedidoControllerIntegrationTest]: PedidoControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-03 18:01:40.194 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.controller.PedidoControllerIntegrationTest
2025-11-03 18:01:40.213 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:01:40.286 [main] INFO  [] c.d.d.c.PedidoControllerIntegrationTest - Starting PedidoControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:01:40.286 [main] DEBUG [] c.d.d.c.PedidoControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:01:40.287 [main] INFO  [] c.d.d.c.PedidoControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:01:40.289 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@57d39416
2025-11-03 18:01:40.911 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:01:40.945 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 5 JPA repository interfaces.
2025-11-03 18:01:41.062 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 18:01:41.067 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 18:01:41.252 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:01:41.259 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-03 18:01:41.268 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:01:41.268 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-03 18:01:41.269 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:01:41.461 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:01:41.462 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:01:41.463 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:01:41.463 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:01:41.463 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:01:41.464 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:01:41.465 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:01:41.470 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:01:41.473 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:01:41.475 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:01:41.478 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:01:41.481 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:01:41.489 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:01:41.493 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:01:41.499 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:01:41.506 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:01:41.510 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:01:41.514 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:01:41.800 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:01:41.824 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:01:41.828 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:01:41.834 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:41.839 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:41.845 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:42.045 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:01:42.366 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:01:42.406 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:01:42.549 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:01:42.617 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:01:42.748 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:01:42.790 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:01:43.017 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:01:43.088 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:01:43.088 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:01:43.088 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:01:43.088 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:01:43.089 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:01:43.090 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-03 18:01:43.134 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:01:43.134 [main] INFO  [] c.d.d.c.PedidoControllerIntegrationTest - Started PedidoControllerIntegrationTest in 2.922 seconds (process running for 123.035)
2025-11-03 18:01:43.135 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:01:43.138 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:01:43.272 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
2025-11-03 18:01:43.287 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:01:43.294 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:01:43.922 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 18:01:43.924 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:01:43.926 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 18:01:43.927 [main] DEBUG [808492df70aa4bbe] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 18:01:43.939 [main] DEBUG [808492df70aa4bbe] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@7cee33a4]
2025-11-03 18:01:44.075 [main] DEBUG [808492df70aa4bbe] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 18:01:44.425 [main] DEBUG [808492df70aa4bbe] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 18:01:45.052 [main] DEBUG [808492df70aa4bbe] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Pedido */insert 
    into
        pedido (cliente_id, data_pedido, endereco_entrega, numero_pedido, observacoes, restaurante_id, status, subtotal, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:45.057 [main] DEBUG [808492df70aa4bbe] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.ItemPedido */insert 
    into
        itens_pedido (pedido_id, preco_unitario, produto_id, quantidade, subtotal, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-11-03 18:01:45.567 [main] DEBUG [808492df70aa4bbe] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:01:45.568 [main] DEBUG [808492df70aa4bbe] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@28fa8de]
2025-11-03 18:01:45.672 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
2025-11-03 18:01:45.679 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:01:45.685 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:01:45.694 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 18:01:45.696 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:01:45.701 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 18:01:45.702 [main] DEBUG [3b2617bca6a04844] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 18:01:45.703 [main] DEBUG [3b2617bca6a04844] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@128ac91a]
2025-11-03 18:01:45.909 [main] DEBUG [3b2617bca6a04844] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-03 18:01:45.921 [main] DEBUG [3b2617bca6a04844] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:01:45.922 [main] DEBUG [3b2617bca6a04844] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@2f4c401c]
2025-11-03 18:01:45.925 [main] DEBUG [3b2617bca6a04844] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.PedidoResponseDTO>> com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO) with 7 errors: [Field error in object 'pedidoDTO' on field 'enderecoEntrega': rejected value [null]; codes [NotBlank.pedidoDTO.enderecoEntrega,NotBlank.enderecoEntrega,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.enderecoEntrega,enderecoEntrega]; arguments []; default message [enderecoEntrega]]; default message [Endereço de entrega é obrigatório]] [Field error in object 'pedidoDTO' on field 'restauranteId': rejected value [null]; codes [NotNull.pedidoDTO.restauranteId,NotNull.restauranteId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.restauranteId,restauranteId]; arguments []; default message [restauranteId]]; default message [Restaurante ID é obrigatório]] [Field error in object 'pedidoDTO' on field 'formaPagamento': rejected value [null]; codes [NotBlank.pedidoDTO.formaPagamento,NotBlank.formaPagamento,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.formaPagamento,formaPagamento]; arguments []; default message [formaPagamento]]; default message [Forma de pagamento é obrigatória]] [Field error in object 'pedidoDTO' on field 'itens': rejected value [[]]; codes [NotEmpty.pedidoDTO.itens,NotEmpty.itens,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.itens,itens]; arguments []; default message [itens]]; default message [Pedido deve ter pelo menos um item]] [Field error in object 'pedidoDTO' on field 'cep': rejected value [null]; codes [ValidCEP.pedidoDTO.cep,ValidCEP.cep,ValidCEP.java.lang.String,ValidCEP]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.cep,cep]; arguments []; default message [cep]]; default message [CEP deve ter formato válido (00000-000 ou 00000000)]] [Field error in object 'pedidoDTO' on field 'clienteId': rejected value [null]; codes [NotNull.pedidoDTO.clienteId,NotNull.clienteId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.clienteId,clienteId]; arguments []; default message [clienteId]]; default message [Cliente ID é obrigatório]] [Field error in object 'pedidoDTO' on field 'cep': rejected value [null]; codes [NotBlank.pedidoDTO.cep,NotBlank.cep,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pedidoDTO.cep,cep]; arguments []; default message [cep]]; default message [CEP é obrigatório]] ]
2025-11-03 18:01:45.943 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
2025-11-03 18:01:45.949 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:01:45.954 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:01:45.960 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:45.973 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 18:01:45.975 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:01:45.978 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 18:01:45.979 [main] DEBUG [5046fdf1ea6f40ce] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 18:01:45.981 [main] DEBUG [5046fdf1ea6f40ce] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@62a1dd6a]
2025-11-03 18:01:45.983 [main] DEBUG [5046fdf1ea6f40ce] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 18:01:45.984 [main] DEBUG [5046fdf1ea6f40ce] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 18:01:45.989 [main] DEBUG [5046fdf1ea6f40ce] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleBusinessException(BusinessException, WebRequest)
2025-11-03 18:01:45.990 [main] DEBUG [5046fdf1ea6f40ce] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:01:45.991 [main] DEBUG [5046fdf1ea6f40ce] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@531e044]
2025-11-03 18:01:45.992 [main] DEBUG [5046fdf1ea6f40ce] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.BusinessException: Cliente inativo não pode fazer pedidos]
2025-11-03 18:01:46.018 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
2025-11-03 18:01:46.023 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:01:46.029 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:01:46.153 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:01:46.180 [main] DEBUG [] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-03 18:01:46.193 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 18:01:46.194 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:01:46.196 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 18:01:46.197 [main] DEBUG [17b296200d8c4fee] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 18:01:46.198 [main] DEBUG [17b296200d8c4fee] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@2e573ad7]
2025-11-03 18:01:46.199 [main] DEBUG [17b296200d8c4fee] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 18:01:46.202 [main] DEBUG [17b296200d8c4fee] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 18:01:46.207 [main] DEBUG [17b296200d8c4fee] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 18:01:46.210 [main] DEBUG [17b296200d8c4fee] org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0 
    where
        r1_0.id=?
2025-11-03 18:01:46.213 [main] DEBUG [17b296200d8c4fee] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 18:01:46.218 [main] DEBUG [17b296200d8c4fee] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleBusinessException(BusinessException, WebRequest)
2025-11-03 18:01:46.219 [main] DEBUG [17b296200d8c4fee] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:01:46.219 [main] DEBUG [17b296200d8c4fee] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@3c9a5009]
2025-11-03 18:01:46.220 [main] DEBUG [17b296200d8c4fee] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.BusinessException: Estoque insuficiente para o produto: Pizza Teste]
2025-11-03 18:01:46.236 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
2025-11-03 18:01:46.241 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:01:46.246 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:01:46.252 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:46.258 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:46.265 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/pedidos
2025-11-03 18:01:46.267 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:01:46.271 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/pedidos
2025-11-03 18:01:46.272 [main] DEBUG [c224057adfd64c91] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.PedidoController#criarPedido(PedidoDTO)
2025-11-03 18:01:46.274 [main] DEBUG [c224057adfd64c91] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.PedidoDTO@538566be]
2025-11-03 18:01:46.275 [main] DEBUG [c224057adfd64c91] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 18:01:46.277 [main] DEBUG [c224057adfd64c91] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.PedidoController.criarPedido(com.deliverytech.delivery.dto.PedidoDTO); target is of class [com.deliverytech.delivery.controller.PedidoController]
2025-11-03 18:01:46.283 [main] DEBUG [c224057adfd64c91] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleBusinessException(BusinessException, WebRequest)
2025-11-03 18:01:46.283 [main] DEBUG [c224057adfd64c91] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:01:46.284 [main] DEBUG [c224057adfd64c91] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@4bb992f3]
2025-11-03 18:01:46.285 [main] DEBUG [c224057adfd64c91] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.BusinessException: Produto não pertence ao restaurante selecionado]
2025-11-03 18:01:46.307 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.controller.ClienteControllerIntegrationTest]: ClienteControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-03 18:01:46.312 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.controller.ClienteControllerIntegrationTest
2025-11-03 18:01:46.330 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:01:46.490 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-03 18:01:46.706 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-03 18:01:46.720 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:46.729 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing DELETE /api/clientes/3
2025-11-03 18:01:46.732 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:01:46.735 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured DELETE /api/clientes/3
2025-11-03 18:01:46.736 [main] DEBUG [518b10b1dc6d45c0] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#ativarDesativarCliente(Long)
2025-11-03 18:01:46.740 [main] DEBUG [518b10b1dc6d45c0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.ativarDesativarCliente(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:01:46.742 [main] DEBUG [518b10b1dc6d45c0] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.ativarDesativarCliente(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:01:46.750 [main] DEBUG [518b10b1dc6d45c0] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 18:01:46.760 [main] DEBUG [518b10b1dc6d45c0] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Cliente */update cliente 
    set
        ativo=?,
        cpf=?,
        email=?,
        endereco=?,
        nome=?,
        telefone=? 
    where
        id=?
2025-11-03 18:01:46.764 [main] DEBUG [518b10b1dc6d45c0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:01:46.765 [main] DEBUG [518b10b1dc6d45c0] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-11-03 18:01:46.861 [main] DEBUG [] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 18:01:46.869 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@57d39416, started on Mon Nov 03 18:01:40 BRT 2025
2025-11-03 18:01:46.876 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:01:46.877 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:01:46.879 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:01:46.881 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:01:46.883 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:01:46.885 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:01:46.886 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:01:46.889 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-03 18:01:46.890 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-03 18:01:46.896 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:01:46.982 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:01:46.982 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:01:46.982 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:01:46.984 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@19abfb43
2025-11-03 18:01:47.494 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:01:47.524 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-03 18:01:47.787 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:01:47.788 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-03 18:01:47.791 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:01:47.792 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-03 18:01:47.793 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:01:47.933 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:01:47.934 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:01:47.935 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:01:47.935 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:01:47.935 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:01:47.936 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:01:47.937 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:01:47.940 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:01:47.942 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:01:47.949 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:01:47.951 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:01:47.953 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:01:47.955 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:01:47.957 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:01:47.960 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:01:47.962 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:01:47.965 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:01:47.967 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:01:48.158 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:01:48.212 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:01:48.216 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:01:48.221 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:48.225 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:48.231 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:48.373 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:01:48.592 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:01:48.613 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:01:48.735 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:01:48.795 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:01:48.879 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:01:48.918 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:01:49.091 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:01:49.146 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:01:49.146 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:01:49.146 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:01:49.146 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:01:49.146 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:01:49.147 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-11-03 18:01:49.184 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.289 seconds (process running for 129.085)
2025-11-03 18:01:49.185 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:01:49.187 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:01:49.188 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:01:49.204 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:01:49.207 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-03 18:01:49.210 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-03 18:01:49.261 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/clientes
2025-11-03 18:01:49.263 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:01:49.267 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/clientes
2025-11-03 18:01:49.269 [main] DEBUG [ab7362839ade461b] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#cadastrarCliente(ClienteDTO)
2025-11-03 18:01:49.277 [main] DEBUG [ab7362839ade461b] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.ClienteDTO@1fc006e7]
2025-11-03 18:01:49.595 [main] DEBUG [ab7362839ade461b] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.cadastrarCliente(com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:01:49.599 [main] DEBUG [ab7362839ade461b] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.cadastrarCliente(com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:01:49.617 [main] DEBUG [ab7362839ade461b] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id 
    from
        cliente c1_0 
    where
        c1_0.email=? 
    fetch
        first ? rows only
2025-11-03 18:01:49.623 [main] DEBUG [ab7362839ade461b] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id 
    from
        cliente c1_0 
    where
        c1_0.cpf=? 
    fetch
        first ? rows only
2025-11-03 18:01:49.635 [main] DEBUG [ab7362839ade461b] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:01:49.658 [main] DEBUG [ab7362839ade461b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:01:49.659 [main] DEBUG [ab7362839ade461b] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@4d23c2f2]
2025-11-03 18:01:50.353 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@19abfb43, started on Mon Nov 03 18:01:46 BRT 2025
2025-11-03 18:01:58.420 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:01:58.428 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:01:58.429 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:01:58.430 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:01:58.431 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:01:58.432 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:01:58.432 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:01:58.433 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:01:58.434 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 18:01:58.435 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-52 - Shutdown initiated...
2025-11-03 18:01:58.437 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-52 - Shutdown completed.
2025-11-03 18:02:14.363 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:02:14.367 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:02:14.367 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:02:14.369 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:02:14.371 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:02:14.372 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:02:14.373 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:02:14.374 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:02:14.376 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-03 18:02:14.377 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-11-03 18:02:14.383 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:02:14.488 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:02:14.488 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:02:14.489 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:02:14.491 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7b8b10a
2025-11-03 18:02:14.940 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:02:14.970 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-03 18:02:15.207 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:02:15.209 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-11-03 18:02:15.213 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:02:15.214 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-11-03 18:02:15.214 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:02:15.446 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:02:15.447 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:02:15.448 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:02:15.449 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:02:15.449 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:02:15.452 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:02:15.455 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:02:15.460 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:02:15.463 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:02:15.467 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:02:15.471 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:02:15.473 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:02:15.476 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:02:15.480 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:02:15.484 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:02:15.487 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:02:15.491 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:02:15.495 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:02:15.758 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:02:15.786 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:02:15.792 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:02:15.797 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:15.802 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:15.807 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:15.977 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:02:16.292 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:02:16.315 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:02:16.438 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:02:16.518 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:02:16.618 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:02:16.653 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:02:16.807 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:02:16.921 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:02:16.922 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:02:16.922 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:02:16.922 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:02:16.922 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:02:16.924 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-03 18:02:16.986 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.604 seconds (process running for 156.887)
2025-11-03 18:02:16.996 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:02:17.008 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:02:17.010 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:02:17.012 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:02:17.015 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-03 18:02:17.020 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-03 18:02:17.027 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:17.044 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/clientes/2
2025-11-03 18:02:17.046 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:02:17.049 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/clientes/2
2025-11-03 18:02:17.063 [main] DEBUG [2b84b9cb151f4831] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#buscarPorId(Long)
2025-11-03 18:02:17.069 [main] DEBUG [2b84b9cb151f4831] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:02:17.074 [main] DEBUG [2b84b9cb151f4831] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:02:17.114 [main] DEBUG [2b84b9cb151f4831] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 18:02:17.192 [main] DEBUG [2b84b9cb151f4831] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:02:17.192 [main] DEBUG [2b84b9cb151f4831] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@29050832]
2025-11-03 18:02:17.294 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@7b8b10a, started on Mon Nov 03 18:02:14 BRT 2025
2025-11-03 18:02:41.729 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:02:41.733 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:02:41.733 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:02:41.736 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:02:41.738 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:02:41.739 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:02:41.739 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:02:41.740 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:02:41.741 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-11-03 18:02:41.742 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-11-03 18:02:41.747 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:02:41.806 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:02:41.807 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:02:41.807 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:02:41.810 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@124677ef
2025-11-03 18:02:42.181 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:02:42.202 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 5 JPA repository interfaces.
2025-11-03 18:02:42.392 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:02:42.394 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-11-03 18:02:42.398 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:02:42.399 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-11-03 18:02:42.400 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:02:42.617 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:02:42.618 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:02:42.618 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:02:42.619 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:02:42.619 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:02:42.620 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:02:42.621 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:02:42.625 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:02:42.641 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:02:42.644 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:02:42.646 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:02:42.649 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:02:42.653 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:02:42.660 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:02:42.664 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:02:42.667 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:02:42.671 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:02:42.676 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:02:42.890 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:02:42.919 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:02:42.923 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:02:42.930 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:42.936 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:42.942 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:43.121 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:02:43.400 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:02:43.440 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:02:43.619 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:02:43.703 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:02:43.835 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:02:43.877 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:02:44.051 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:02:44.112 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:02:44.112 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:02:44.112 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:02:44.113 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:02:44.113 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:02:44.114 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-03 18:02:44.184 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:02:44.184 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.438 seconds (process running for 184.085)
2025-11-03 18:02:44.184 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:02:44.186 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:02:44.206 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:02:44.208 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-03 18:02:44.212 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-03 18:02:44.216 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:44.223 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing PUT /api/clientes/2
2025-11-03 18:02:44.224 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:02:44.228 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured PUT /api/clientes/2
2025-11-03 18:02:44.234 [main] DEBUG [2bab511ecf814834] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#atualizarCliente(Long, ClienteDTO)
2025-11-03 18:02:44.241 [main] DEBUG [2bab511ecf814834] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.ClienteDTO@83a9d52]
2025-11-03 18:02:44.254 [main] DEBUG [2bab511ecf814834] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.atualizarCliente(java.lang.Long,com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:02:44.257 [main] DEBUG [2bab511ecf814834] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.atualizarCliente(java.lang.Long,com.deliverytech.delivery.dto.ClienteDTO); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:02:44.268 [main] DEBUG [2bab511ecf814834] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 18:02:44.285 [main] DEBUG [2bab511ecf814834] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Cliente */update cliente 
    set
        ativo=?,
        cpf=?,
        email=?,
        endereco=?,
        nome=?,
        telefone=? 
    where
        id=?
2025-11-03 18:02:44.302 [main] DEBUG [2bab511ecf814834] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:02:44.303 [main] DEBUG [2bab511ecf814834] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ApiResponseWrapper@3560903c]
2025-11-03 18:02:44.318 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@124677ef, started on Mon Nov 03 18:02:41 BRT 2025
2025-11-03 18:02:55.219 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:02:55.222 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:02:55.223 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:02:55.224 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:02:55.225 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:02:55.226 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:02:55.227 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:02:55.228 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:02:55.229 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-11-03 18:02:55.231 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-11-03 18:02:55.234 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:02:55.291 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:02:55.291 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:02:55.291 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:02:55.294 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@9e14b54
2025-11-03 18:02:55.828 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:02:55.853 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 5 JPA repository interfaces.
2025-11-03 18:02:56.050 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:02:56.051 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-11-03 18:02:56.054 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn70: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:02:56.054 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-11-03 18:02:56.055 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:02:56.197 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:02:56.198 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:02:56.198 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:02:56.199 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:02:56.199 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:02:56.199 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:02:56.200 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:02:56.204 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:02:56.206 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:02:56.215 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:02:56.217 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:02:56.220 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:02:56.222 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:02:56.224 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:02:56.227 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:02:56.230 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:02:56.233 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:02:56.237 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:02:56.452 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:02:56.492 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:02:56.508 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:02:56.521 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:56.535 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:56.555 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:56.846 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:02:57.162 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:02:57.210 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:02:57.362 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:02:57.419 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:02:57.482 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:02:57.512 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:02:57.633 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:02:57.729 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:02:57.729 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:02:57.729 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:02:57.730 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:02:57.730 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:02:57.731 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-03 18:02:57.763 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:02:57.764 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.529 seconds (process running for 197.664)
2025-11-03 18:02:57.765 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:02:57.767 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:02:57.778 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:02:57.781 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-03 18:02:57.786 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-03 18:02:57.791 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:02:57.797 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/clientes
2025-11-03 18:02:57.800 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:02:57.803 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/clientes
2025-11-03 18:02:57.805 [main] DEBUG [43449509d37e4a1a] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#listarClientes(Pageable)
2025-11-03 18:02:57.813 [main] DEBUG [43449509d37e4a1a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.listarClientes(org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:02:57.816 [main] DEBUG [43449509d37e4a1a] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.listarClientes(org.springframework.data.domain.Pageable); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:02:57.835 [main] DEBUG [43449509d37e4a1a] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.ativo 
    fetch
        first ? rows only
2025-11-03 18:02:57.877 [main] DEBUG [43449509d37e4a1a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:02:57.878 [main] DEBUG [43449509d37e4a1a] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.PagedResponseWrapper@773d8fce]
2025-11-03 18:02:57.902 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@9e14b54, started on Mon Nov 03 18:02:55 BRT 2025
2025-11-03 18:03:16.727 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:03:16.730 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:03:16.730 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:03:16.732 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:03:16.733 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:03:16.734 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:03:16.735 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:03:16.735 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:03:16.736 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-11-03 18:03:16.737 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-11-03 18:03:16.741 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:03:16.796 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:03:16.796 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:03:16.796 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:03:16.799 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@687ce80a
2025-11-03 18:03:17.218 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:03:17.272 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2025-11-03 18:03:17.469 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:03:17.471 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-11-03 18:03:17.474 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn80: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:03:17.474 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-11-03 18:03:17.475 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:03:17.669 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:03:17.670 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:03:17.670 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:03:17.670 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:03:17.670 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:03:17.670 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:03:17.672 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:03:17.676 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:03:17.678 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:03:17.681 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:03:17.685 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:03:17.687 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:03:17.689 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:03:17.692 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:03:17.696 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:03:17.702 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:03:17.708 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:03:17.713 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:03:17.959 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:03:17.981 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:03:17.986 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:03:17.992 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:03:17.997 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:03:18.002 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:03:18.140 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:03:18.366 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:03:18.392 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:03:18.542 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:03:18.615 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:03:18.675 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:03:18.714 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:03:18.999 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:03:19.097 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:03:19.097 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:03:19.097 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:03:19.097 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:03:19.097 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:03:19.099 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-03 18:03:19.145 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.405 seconds (process running for 219.046)
2025-11-03 18:03:19.156 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:03:19.157 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:03:19.166 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:03:19.168 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:03:19.170 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-03 18:03:19.180 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-03 18:03:19.200 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api/clientes/999
2025-11-03 18:03:19.202 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:03:19.207 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api/clientes/999
2025-11-03 18:03:19.212 [main] DEBUG [84a6d17423f04162] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#buscarPorId(Long)
2025-11-03 18:03:19.216 [main] DEBUG [84a6d17423f04162] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:03:19.219 [main] DEBUG [84a6d17423f04162] o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.deliverytech.delivery.controller.ClienteController.buscarPorId(java.lang.Long); target is of class [com.deliverytech.delivery.controller.ClienteController]
2025-11-03 18:03:19.229 [main] DEBUG [84a6d17423f04162] org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.id=?
2025-11-03 18:03:19.234 [main] DEBUG [84a6d17423f04162] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleEntityNotFoundException(EntityNotFoundException, WebRequest)
2025-11-03 18:03:19.247 [main] DEBUG [84a6d17423f04162] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:03:19.248 [main] DEBUG [84a6d17423f04162] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@6bde3fd5]
2025-11-03 18:03:19.250 [main] DEBUG [84a6d17423f04162] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.deliverytech.delivery.exception.EntityNotFoundException: Cliente não encontrado com ID: 999]
2025-11-03 18:03:19.269 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@687ce80a, started on Mon Nov 03 18:03:16 BRT 2025
2025-11-03 18:03:28.581 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:03:28.586 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:03:28.586 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:03:28.590 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:03:28.591 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:03:28.593 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:03:28.594 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:03:28.594 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:03:28.596 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-11-03 18:03:28.597 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-11-03 18:03:28.604 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:03:28.648 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Starting ClienteControllerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:03:28.649 [main] DEBUG [] c.d.d.c.ClienteControllerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:03:28.650 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:03:28.652 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@16709b15
2025-11-03 18:03:29.131 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:03:29.150 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 5 JPA repository interfaces.
2025-11-03 18:03:29.342 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:03:29.344 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-11-03 18:03:29.349 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn90: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:03:29.349 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-11-03 18:03:29.350 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:03:29.502 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:03:29.503 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:03:29.503 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:03:29.503 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:03:29.503 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:03:29.504 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:03:29.504 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:03:29.507 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:03:29.509 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:03:29.512 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:03:29.514 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:03:29.516 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:03:29.518 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:03:29.522 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:03:29.525 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:03:29.528 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:03:29.530 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:03:29.534 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:03:29.727 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:03:29.745 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:03:29.749 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:03:29.753 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:03:29.758 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:03:29.763 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:03:29.907 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:03:30.113 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:03:30.135 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:03:30.233 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:03:30.289 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:03:30.403 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:03:30.437 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:03:30.666 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:03:30.731 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:03:30.731 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:03:30.731 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:03:30.732 [main] INFO  [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-11-03 18:03:30.732 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-03 18:03:30.733 [main] INFO  [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-11-03 18:03:30.772 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:03:30.772 [main] INFO  [] c.d.d.c.ClienteControllerIntegrationTest - Started ClienteControllerIntegrationTest in 2.168 seconds (process running for 230.672)
2025-11-03 18:03:30.773 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:03:30.775 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:03:30.787 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:03:30.790 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.cliente_id,
        p1_0.id,
        p1_0.data_pedido,
        p1_0.endereco_entrega,
        p1_0.numero_pedido,
        p1_0.observacoes,
        p1_0.restaurante_id,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega,
        p1_0.status,
        p1_0.subtotal,
        p1_0.taxa_entrega,
        p1_0.valor_total 
    from
        pedido p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.cliente_id=?
2025-11-03 18:03:30.800 [main] DEBUG [] org.hibernate.SQL - 
    /* delete for com.deliverytech.delivery.entity.Cliente */delete 
    from
        cliente 
    where
        id=?
2025-11-03 18:03:30.809 [main] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/clientes
2025-11-03 18:03:30.811 [main] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:03:30.814 [main] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/clientes
2025-11-03 18:03:30.816 [main] DEBUG [d292b575652b4fda] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.ClienteController#cadastrarCliente(ClienteDTO)
2025-11-03 18:03:30.822 [main] DEBUG [d292b575652b4fda] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.ClienteDTO@4b7b339f]
2025-11-03 18:03:30.839 [main] DEBUG [d292b575652b4fda] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.deliverytech.delivery.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, WebRequest)
2025-11-03 18:03:30.850 [main] DEBUG [d292b575652b4fda] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:03:30.852 [main] DEBUG [d292b575652b4fda] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.response.ErrorResponse@33f3e253]
2025-11-03 18:03:30.855 [main] DEBUG [d292b575652b4fda] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.deliverytech.delivery.dto.response.ApiResponseWrapper<com.deliverytech.delivery.dto.response.ClienteResponseDTO>> com.deliverytech.delivery.controller.ClienteController.cadastrarCliente(com.deliverytech.delivery.dto.ClienteDTO) with 6 errors: [Field error in object 'clienteDTO' on field 'nome': rejected value []; codes [NotBlank.clienteDTO.nome,NotBlank.nome,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.nome,nome]; arguments []; default message [nome]]; default message [Nome é obrigatório]] [Field error in object 'clienteDTO' on field 'telefone': rejected value [null]; codes [NotBlank.clienteDTO.telefone,NotBlank.telefone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.telefone,telefone]; arguments []; default message [telefone]]; default message [Telefone é obrigatório]] [Field error in object 'clienteDTO' on field 'email': rejected value [email-invalido]; codes [Email.clienteDTO.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@3dec4324,.*]; default message [Email deve ter formato válido]] [Field error in object 'clienteDTO' on field 'cpf': rejected value [null]; codes [NotBlank.clienteDTO.cpf,NotBlank.cpf,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.cpf,cpf]; arguments []; default message [cpf]]; default message [CPF é obrigatório]] [Field error in object 'clienteDTO' on field 'endereco': rejected value [null]; codes [NotBlank.clienteDTO.endereco,NotBlank.endereco,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.endereco,endereco]; arguments []; default message [endereco]]; default message [Endereço é obrigatório]] [Field error in object 'clienteDTO' on field 'nome': rejected value []; codes [Size.clienteDTO.nome,Size.nome,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clienteDTO.nome,nome]; arguments []; default message [nome],100,2]; default message [Nome deve ter entre 2 e 100 caracteres]] ]
2025-11-03 18:03:30.869 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@16709b15, started on Mon Nov 03 18:03:28 BRT 2025
2025-11-03 18:03:43.000 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:03:43.003 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:03:43.003 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:03:43.005 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:03:43.005 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:03:43.007 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:03:43.007 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:03:43.008 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:03:43.009 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-11-03 18:03:43.011 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-11-03 18:03:43.026 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.integration.SwaggerIntegrationTest]: SwaggerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-03 18:03:43.035 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.integration.SwaggerIntegrationTest
2025-11-03 18:03:43.118 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:03:43.279 [main] INFO  [] c.d.d.i.SwaggerIntegrationTest - Starting SwaggerIntegrationTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:03:43.279 [main] DEBUG [] c.d.d.i.SwaggerIntegrationTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:03:43.279 [main] INFO  [] c.d.d.i.SwaggerIntegrationTest - The following 1 profile is active: "test"
2025-11-03 18:03:43.869 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:03:43.886 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 5 JPA repository interfaces.
2025-11-03 18:03:49.846 [main] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-11-03 18:03:50.004 [main] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2025-11-03 18:03:50.009 [main] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 18:03:50.009 [main] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 18:03:53.374 [main] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 18:03:53.375 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 10093 ms
2025-11-03 18:03:55.456 [main] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:03:55.457 [main] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 18:03:55.459 [main] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 18:03:55.717 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:03:55.718 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-11-03 18:03:55.723 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn100: url=jdbc:h2:mem:testdb user=SA
2025-11-03 18:03:55.724 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-11-03 18:03:55.724 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:03:55.855 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:03:55.856 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:03:55.857 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:03:55.857 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:03:55.858 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:03:55.858 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:03:55.860 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:03:55.868 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:03:55.870 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:03:55.872 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:03:55.874 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:03:55.876 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:03:55.878 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:03:55.880 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:03:55.883 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:03:55.885 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:03:55.887 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:03:55.890 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:03:56.041 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        p1_0.restaurante_id 
    from
        produto p1_0
2025-11-03 18:03:56.049 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        restaurante r1_0
2025-11-03 18:03:56.053 [main] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.ativo,
        c1_0.cpf,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0
2025-11-03 18:03:56.057 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Cliente */insert 
    into
        cliente (ativo, cpf, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:03:56.061 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Restaurante */insert 
    into
        restaurante (ativo, avaliacao, categoria, endereco, horario_funcionamento, nome, taxa_entrega, telefone, tempo_entrega, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:03:56.065 [main] DEBUG [] org.hibernate.SQL - 
    /* insert for
        com.deliverytech.delivery.entity.Produto */insert 
    into
        produto (categoria, descricao, disponivel, estoque, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2025-11-03 18:03:56.190 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:03:56.442 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:03:56.472 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:03:56.568 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:03:56.718 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:03:56.750 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:03:56.777 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:03:56.895 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-11-03 18:03:57.161 [main] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-1"]
2025-11-03 18:03:57.442 [main] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 41039 (http) with context path '/'
2025-11-03 18:03:57.456 [main] INFO  [] c.d.d.i.SwaggerIntegrationTest - Started SwaggerIntegrationTest in 14.338 seconds (process running for 257.357)
2025-11-03 18:03:57.456 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:03:57.463 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:03:57.469 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:03:57.484 [main] DEBUG [] o.s.web.client.RestTemplate - HTTP GET http://localhost:41039/api-docs
2025-11-03 18:03:57.484 [main] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:03:59.093 [http-nio-auto-1-exec-1] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 18:03:59.094 [http-nio-auto-1-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 18:03:59.094 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 18:03:59.094 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 18:03:59.094 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 18:03:59.095 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2169394e
2025-11-03 18:03:59.096 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@35ae01b6
2025-11-03 18:03:59.096 [http-nio-auto-1-exec-1] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 18:03:59.096 [http-nio-auto-1-exec-1] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-03 18:03:59.106 [http-nio-auto-1-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-11-03 18:03:59.108 [http-nio-auto-1-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:03:59.108 [http-nio-auto-1-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 18:03:59.298 [http-nio-auto-1-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-11-03 18:03:59.302 [http-nio-auto-1-exec-1] DEBUG [75e52263d031483d] o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-11-03 18:03:59.304 [http-nio-auto-1-exec-1] DEBUG [75e52263d031483d] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-03 18:04:01.012 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:04:18.338 [http-nio-auto-1-exec-1] INFO  [75e52263d031483d] o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 18838 ms
2025-11-03 18:04:18.413 [http-nio-auto-1-exec-1] DEBUG [75e52263d031483d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [text/plain, application/json, application/yaml, application/*+json, */*] and supported [application/json]
2025-11-03 18:04:18.438 [http-nio-auto-1-exec-1] DEBUG [75e52263d031483d] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-03 18:04:18.446 [http-nio-auto-1-exec-1] DEBUG [75e52263d031483d] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 18:04:18.566 [main] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:04:18.567 [main] DEBUG [] o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2025-11-03 18:04:18.673 [main] DEBUG [] o.s.web.client.RestTemplate - HTTP GET http://localhost:41039/api-docs
2025-11-03 18:04:18.677 [main] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:04:18.698 [http-nio-auto-1-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-11-03 18:04:18.703 [http-nio-auto-1-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:04:18.704 [http-nio-auto-1-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 18:04:18.709 [http-nio-auto-1-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-11-03 18:04:18.711 [http-nio-auto-1-exec-2] DEBUG [3d70a493a3474607] o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-11-03 18:04:18.716 [http-nio-auto-1-exec-2] DEBUG [3d70a493a3474607] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-03 18:04:18.718 [http-nio-auto-1-exec-2] DEBUG [3d70a493a3474607] o.s.api.AbstractOpenApiResource - Fetching openApi document from cache
2025-11-03 18:04:18.792 [http-nio-auto-1-exec-2] DEBUG [3d70a493a3474607] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [text/plain, application/json, application/yaml, application/*+json, */*] and supported [application/json]
2025-11-03 18:04:18.830 [http-nio-auto-1-exec-2] DEBUG [3d70a493a3474607] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-03 18:04:19.974 [http-nio-auto-1-exec-2] DEBUG [3d70a493a3474607] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 18:04:19.976 [main] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:04:19.976 [main] DEBUG [] o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2025-11-03 18:04:19.995 [main] DEBUG [] o.s.web.client.RestTemplate - HTTP GET http://localhost:41039/swagger-ui.html
2025-11-03 18:04:19.995 [main] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:04:20.001 [http-nio-auto-1-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui.html
2025-11-03 18:04:20.003 [http-nio-auto-1-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:04:20.003 [http-nio-auto-1-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 18:04:20.005 [http-nio-auto-1-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui.html
2025-11-03 18:04:20.006 [http-nio-auto-1-exec-3] DEBUG [716f6d3c421a4c05] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui.html", parameters={}
2025-11-03 18:04:20.007 [http-nio-auto-1-exec-3] DEBUG [716f6d3c421a4c05] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerWelcomeWebMvc#redirectToUi(HttpServletRequest)
2025-11-03 18:04:20.012 [http-nio-auto-1-exec-3] DEBUG [716f6d3c421a4c05] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [text/plain, application/json, application/yaml, application/*+json, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 18:04:20.013 [http-nio-auto-1-exec-3] DEBUG [716f6d3c421a4c05] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-11-03 18:04:20.013 [http-nio-auto-1-exec-3] DEBUG [716f6d3c421a4c05] o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-11-03 18:04:20.029 [http-nio-auto-1-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-11-03 18:04:20.031 [http-nio-auto-1-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 18:04:20.031 [http-nio-auto-1-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 18:04:20.034 [http-nio-auto-1-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-11-03 18:04:20.034 [http-nio-auto-1-exec-4] DEBUG [bec6912889a94fea] o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-11-03 18:04:20.037 [http-nio-auto-1-exec-4] DEBUG [bec6912889a94fea] o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-03 18:04:20.064 [http-nio-auto-1-exec-4] DEBUG [bec6912889a94fea] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 18:04:20.067 [main] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:04:20.068 [main] DEBUG [] o.s.web.client.RestTemplate - Reading to [java.lang.String] as "text/html"
2025-11-03 18:04:20.081 [main] INFO  [] o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.deliverytech.delivery.integration.ProdutoServiceCacheTest]: ProdutoServiceCacheTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-03 18:04:20.085 [main] INFO  [] o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.deliverytech.delivery.DeliveryApiApplication for test class com.deliverytech.delivery.integration.ProdutoServiceCacheTest
2025-11-03 18:04:20.093 [main] INFO  [] o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-11-03 18:04:20.127 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - Starting ProdutoServiceCacheTest using Java 21.0.9 with PID 146705 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:04:20.127 [main] DEBUG [] c.d.d.i.ProdutoServiceCacheTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:04:20.128 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - No active profile set, falling back to 1 default profile: "default"
2025-11-03 18:04:20.130 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@68b8cc2e
2025-11-03 18:04:24.763 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:04:24.785 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 5 JPA repository interfaces.
2025-11-03 18:04:26.129 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:04:26.131 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-11-03 18:04:26.134 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn110: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 18:04:26.135 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-11-03 18:04:26.135 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:04:26.412 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:04:26.558 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:04:26.558 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:04:26.558 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:04:26.559 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:04:26.559 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:04:26.560 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:04:26.564 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:04:26.567 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:04:26.570 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:04:26.572 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:04:26.575 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:04:26.576 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:04:26.578 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:04:26.580 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:04:26.582 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:04:26.584 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:04:26.586 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:04:26.842 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:04:27.087 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:04:27.125 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:04:27.380 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:04:27.456 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:04:27.457 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:04:27.461 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:04:27.475 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:04:27.618 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:04:27.667 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:04:27.813 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:04:27.846 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 18:04:28.355 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:04:28.355 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - Started ProdutoServiceCacheTest in 8.263 seconds (process running for 288.256)
2025-11-03 18:04:28.738 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:04:28.740 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:04:31.793 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 18:04:34.839 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 18:04:34.845 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 18:04:34.854 [main] DEBUG [] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-03 18:04:37.858 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 18:04:52.497 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 18:04:52.501 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 18:04:52.505 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:04:52.506 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:04:52.508 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:04:52.509 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:04:52.510 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:04:52.511 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:04:52.512 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:04:52.513 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-11-03 18:04:52.514 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-11-03 18:04:53.051 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@68b8cc2e, started on Mon Nov 03 18:04:20 BRT 2025
2025-11-03 18:05:01.576 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:05:01.579 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:05:01.580 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:05:01.581 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:05:01.582 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:05:01.583 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:05:01.584 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:05:01.584 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:05:01.585 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-11-03 18:05:01.586 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-11-03 18:25:43.119 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - Starting ProdutoServiceCacheTest using Java 21.0.9 with PID 155956 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 18:25:43.191 [main] DEBUG [] c.d.d.i.ProdutoServiceCacheTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 18:25:43.194 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - No active profile set, falling back to 1 default profile: "default"
2025-11-03 18:25:43.507 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5be51aa
2025-11-03 18:25:50.395 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 18:25:50.661 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 239 ms. Found 5 JPA repository interfaces.
2025-11-03 18:25:55.031 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 18:25:55.276 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 18:25:56.357 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 18:25:56.367 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 18:25:56.642 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 18:26:01.217 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:26:01.226 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:26:01.226 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:26:01.227 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:26:01.227 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:26:01.228 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:26:01.266 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 18:26:01.297 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 18:26:01.315 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 18:26:01.325 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 18:26:01.329 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 18:26:01.332 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 18:26:01.336 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 18:26:01.439 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 18:26:01.442 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 18:26:01.446 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:26:01.449 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 18:26:01.459 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:26:03.571 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 18:26:06.948 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 18:26:09.476 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 18:26:09.722 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 18:26:10.285 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 18:26:10.473 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 18:26:10.872 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 18:26:11.327 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 18:26:12.132 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 18:26:12.668 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - Started ProdutoServiceCacheTest in 32.117 seconds (process running for 41.456)
2025-11-03 18:26:12.713 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 18:26:12.845 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 18:26:12.879 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 18:26:15.703 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 18:26:17.769 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 18:26:21.068 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 18:26:21.076 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 18:26:21.245 [main] DEBUG [] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-03 18:26:24.257 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 18:26:24.386 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5be51aa, started on Mon Nov 03 18:25:43 BRT 2025
2025-11-03 18:26:24.432 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 18:26:24.756 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 18:26:24.762 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 18:26:24.764 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 18:26:24.765 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 18:26:24.766 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 18:26:24.767 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 18:26:24.773 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 18:26:24.777 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 19:09:54.052 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - Starting ProdutoServiceCacheTest using Java 21.0.9 with PID 170536 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 19:09:54.182 [main] DEBUG [] c.d.d.i.ProdutoServiceCacheTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 19:09:54.184 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - No active profile set, falling back to 1 default profile: "default"
2025-11-03 19:09:54.831 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@62b0bf85
2025-11-03 19:10:13.522 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 19:10:13.538 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 19:10:14.272 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 639 ms. Found 5 JPA repository interfaces.
2025-11-03 19:10:14.432 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 19:10:14.457 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 19:10:14.556 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:10:14.557 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:10:14.559 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:10:14.560 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:10:14.564 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:10:14.565 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 0 Redis repository interfaces.
2025-11-03 19:10:22.819 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 19:10:23.379 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 19:10:24.803 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 19:10:24.810 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 19:10:25.213 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 19:10:31.331 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 19:10:31.345 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 19:10:31.346 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 19:10:31.346 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 19:10:31.347 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 19:10:31.348 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 19:10:31.385 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 19:10:31.443 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 19:10:31.466 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 19:10:31.472 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 19:10:31.476 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 19:10:31.479 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 19:10:31.484 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 19:10:31.562 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 19:10:31.566 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 19:10:31.570 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 19:10:31.574 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 19:10:31.587 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 19:10:33.656 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 19:10:38.161 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 19:10:40.444 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 19:10:40.695 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 19:10:41.228 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 19:10:41.533 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 19:10:42.134 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 19:10:43.026 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 19:10:44.281 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 19:10:44.783 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - Started ProdutoServiceCacheTest in 58.985 seconds (process running for 84.319)
2025-11-03 19:10:44.797 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 19:10:45.081 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 19:10:45.150 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 19:10:46.439 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 19:10:46.462 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 19:10:51.998 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 19:10:55.486 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 19:10:55.677 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@62b0bf85, started on Mon Nov 03 19:09:54 BRT 2025
2025-11-03 19:10:56.204 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 19:10:56.206 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 19:10:56.211 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 19:10:56.214 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 19:10:56.217 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 19:10:56.219 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 19:10:56.220 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 19:10:56.228 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 19:10:56.234 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 19:17:20.669 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - Starting ProdutoServiceCacheTest using Java 21.0.9 with PID 173257 (started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 19:17:20.732 [main] DEBUG [] c.d.d.i.ProdutoServiceCacheTest - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 19:17:20.734 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - No active profile set, falling back to 1 default profile: "default"
2025-11-03 19:17:20.878 [main] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@62b0bf85
2025-11-03 19:17:25.969 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 19:17:25.972 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 19:17:26.436 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 446 ms. Found 5 JPA repository interfaces.
2025-11-03 19:17:26.472 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 19:17:26.475 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 19:17:26.523 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:17:26.524 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:17:26.525 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:17:26.526 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:17:26.528 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 19:17:26.529 [main] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
2025-11-03 19:17:31.255 [main] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 19:17:31.475 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 19:17:32.917 [main] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 19:17:32.925 [main] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 19:17:33.204 [main] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 19:17:37.122 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 19:17:37.140 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 19:17:37.143 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 19:17:37.145 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 19:17:37.149 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 19:17:37.150 [main] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 19:17:37.295 [main] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 19:17:37.515 [main] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 19:17:37.554 [main] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 19:17:37.561 [main] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 19:17:37.565 [main] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 19:17:37.569 [main] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 19:17:37.575 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 19:17:37.659 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 19:17:37.669 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 19:17:37.677 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 19:17:37.682 [main] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 19:17:37.703 [main] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 19:17:39.223 [main] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 19:17:42.649 [main] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 19:17:45.006 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 19:17:45.253 [main] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 19:17:45.842 [main] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-11-03 19:17:46.052 [main] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 19:17:46.509 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 19:17:46.861 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 19:17:48.383 [main] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 19:17:48.822 [main] INFO  [] c.d.d.i.ProdutoServiceCacheTest - Started ProdutoServiceCacheTest in 30.175 seconds (process running for 34.726)
2025-11-03 19:17:48.891 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 19:17:49.210 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 19:17:49.299 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 19:17:50.582 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 19:17:50.625 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 19:17:55.122 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 19:17:58.473 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 19:17:58.488 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 19:17:58.631 [main] DEBUG [] org.hibernate.SQL - 
    /* update
        for com.deliverytech.delivery.entity.Produto */update produto 
    set
        categoria=?,
        descricao=?,
        disponivel=?,
        estoque=?,
        nome=?,
        preco=?,
        restaurante_id=? 
    where
        id=?
2025-11-03 19:18:01.655 [main] DEBUG [] org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.categoria,
        p1_0.descricao,
        p1_0.disponivel,
        p1_0.estoque,
        p1_0.nome,
        p1_0.preco,
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.endereco,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega 
    from
        produto p1_0 
    left join
        restaurante r1_0 
            on r1_0.id=p1_0.restaurante_id 
    where
        p1_0.id=?
2025-11-03 19:18:01.838 [SpringApplicationShutdownHook] DEBUG [] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@62b0bf85, started on Mon Nov 03 19:17:20 BRT 2025
2025-11-03 19:18:02.265 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 19:18:02.267 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 19:18:02.271 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 19:18:02.273 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 19:18:02.275 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 19:18:02.276 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 19:18:02.278 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 19:18:02.284 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 19:18:02.291 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 21:12:30.570 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 205836 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 21:12:30.646 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 21:12:30.647 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 21:12:31.003 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 21:12:31.004 [restartedMain] INFO  [] o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 21:12:36.855 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:12:36.863 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 21:12:37.393 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 501 ms. Found 5 JPA repository interfaces.
2025-11-03 21:12:37.565 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:12:37.568 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 21:12:37.606 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:12:37.607 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:12:37.608 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:12:37.609 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:12:37.611 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:12:37.612 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
2025-11-03 21:12:39.715 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 21:12:39.760 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 21:12:39.765 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 21:12:39.765 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 21:12:39.823 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 21:12:39.824 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 8819 ms
2025-11-03 21:12:40.831 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 21:12:40.833 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 21:12:40.833 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 21:12:43.193 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 21:12:43.375 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 21:12:43.956 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 21:12:43.959 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 21:12:44.146 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 21:12:47.296 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:12:47.300 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:12:47.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:12:47.301 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:12:47.302 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:12:47.302 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:12:47.354 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 21:12:47.384 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 21:12:47.393 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 21:12:47.400 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 21:12:47.403 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 21:12:47.406 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ACTUATOR','ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 21:12:47.410 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 21:12:47.466 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 21:12:47.468 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 21:12:47.470 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:12:47.473 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:12:47.483 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:12:48.236 [restartedMain] INFO  [] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 21:12:50.934 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 21:12:51.909 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 21:12:51.989 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 21:12:52.328 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 21:12:52.588 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 21:12:52.725 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 21:12:52.999 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 21:12:53.957 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 21:12:54.267 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 21:12:54.409 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 21:12:54.425 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 21:12:54.464 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 26.377 seconds (process running for 27.715)
2025-11-03 21:12:54.484 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:12:54.559 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:12:54.631 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:12:57.417 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:12:58.465 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 21:12:58.465 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 21:13:24.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:13:24.462 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:13:24.464 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:13:24.779 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:13:34.796 [http-nio-8080-exec-2] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 21:13:34.796 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 21:13:34.797 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-03 21:13:34.797 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-03 21:13:34.798 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-03 21:13:34.801 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7dff708a
2025-11-03 21:13:34.802 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1a170472
2025-11-03 21:13:34.802 [http-nio-8080-exec-2] DEBUG [] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-03 21:13:34.803 [http-nio-8080-exec-2] INFO  [] o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-11-03 21:13:34.836 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-11-03 21:13:34.956 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Token JWT expirado: JWT expired at 2025-11-03T19:20:00Z. Current time: 2025-11-04T00:13:34Z, a difference of 17614955 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-11-03 21:13:34.960 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:13:34.973 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-11-03 21:13:34.979 [http-nio-8080-exec-2] DEBUG [2eb9c3a1775f4288] o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-11-03 21:13:34.983 [http-nio-8080-exec-2] DEBUG [2eb9c3a1775f4288] o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery.controller.auth.AuthController#login(LoginRequest)
2025-11-03 21:13:35.083 [http-nio-8080-exec-2] DEBUG [2eb9c3a1775f4288] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery.dto.auth.LoginRequest@3a0d611]
2025-11-03 21:13:35.455 [http-nio-8080-exec-2] DEBUG [2eb9c3a1775f4288] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 21:13:35.730 [http-nio-8080-exec-2] DEBUG [2eb9c3a1775f4288] o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-11-03 21:13:35.782 [http-nio-8080-exec-2] DEBUG [2eb9c3a1775f4288] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-03 21:13:35.783 [http-nio-8080-exec-2] DEBUG [2eb9c3a1775f4288] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.deliverytech.delivery.dto.auth.LoginResponse@31dcee46]
2025-11-03 21:13:35.803 [http-nio-8080-exec-2] DEBUG [2eb9c3a1775f4288] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 21:13:54.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:13:54.462 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:13:54.463 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:13:55.137 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:14:24.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:14:24.463 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:14:24.464 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:14:27.313 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:14:28.545 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:14:28.554 [http-nio-8080-exec-3] DEBUG [] org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuario u1_0 
    where
        u1_0.email=? 
        and u1_0.ativo=?
2025-11-03 21:14:28.567 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Secured GET /actuator/info
2025-11-03 21:14:28.568 [http-nio-8080-exec-3] DEBUG [773f5409ee814942] o.s.web.servlet.DispatcherServlet - GET "/actuator/info", parameters={}
2025-11-03 21:14:28.574 [http-nio-8080-exec-3] DEBUG [773f5409ee814942] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{email=admin@delivery.com, senha=123456}]
2025-11-03 21:14:28.589 [http-nio-8080-exec-3] DEBUG [773f5409ee814942] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-11-03 21:14:28.595 [http-nio-8080-exec-3] DEBUG [773f5409ee814942] o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{app={name=Sistema de Delivery (Projeto Atividade), description=API REST para sistema de delivery co (truncated)...]
2025-11-03 21:14:28.600 [http-nio-8080-exec-3] DEBUG [773f5409ee814942] o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-11-03 21:14:54.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:14:54.462 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:14:54.464 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:14:55.448 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:14:55.450 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:14:55.450 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:14:55.450 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:14:56.425 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:14:57.111 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:14:57.112 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:14:57.113 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:14:57.113 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:01.649 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:01.651 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:01.652 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:01.653 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:01.827 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:01.829 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:01.830 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:01.831 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:02.586 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:02.591 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:02.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:02.594 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:02.851 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:02.852 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:02.852 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:02.853 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:03.012 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:03.013 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:03.014 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:03.014 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:03.080 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:03.082 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:03.083 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:03.083 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:03.467 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:03.469 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:03.470 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:03.470 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:03.552 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:03.554 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:03.554 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:03.554 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:03.704 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:03.705 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:03.705 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:03.705 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:03.803 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:03.807 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:03.807 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:03.807 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:03.910 [http-nio-8080-exec-6] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:03.912 [http-nio-8080-exec-6] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:03.912 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:03.912 [http-nio-8080-exec-6] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:03.968 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:03.969 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:03.970 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:03.970 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:04.125 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:04.126 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:04.126 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:04.126 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:04.175 [http-nio-8080-exec-9] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:04.176 [http-nio-8080-exec-9] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:04.177 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:04.177 [http-nio-8080-exec-9] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:04.317 [http-nio-8080-exec-10] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:04.318 [http-nio-8080-exec-10] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:04.319 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:04.319 [http-nio-8080-exec-10] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:04.400 [http-nio-8080-exec-1] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:04.402 [http-nio-8080-exec-1] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:04.402 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:04.402 [http-nio-8080-exec-1] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:04.523 [http-nio-8080-exec-2] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:04.524 [http-nio-8080-exec-2] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:04.524 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:04.525 [http-nio-8080-exec-2] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:04.619 [http-nio-8080-exec-3] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:04.620 [http-nio-8080-exec-3] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:04.621 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:04.621 [http-nio-8080-exec-3] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:04.724 [http-nio-8080-exec-4] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:04.725 [http-nio-8080-exec-4] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:04.726 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:04.726 [http-nio-8080-exec-4] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:04.793 [http-nio-8080-exec-5] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:04.793 [http-nio-8080-exec-5] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:04.794 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:04.794 [http-nio-8080-exec-5] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:24.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:15:24.461 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:15:24.461 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:15:26.347 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:15:30.417 [http-nio-8080-exec-7] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /actuator/info
2025-11-03 21:15:30.419 [http-nio-8080-exec-7] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:30.419 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:30.419 [http-nio-8080-exec-7] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:30.580 [http-nio-8080-exec-8] DEBUG [] o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-11-03 21:15:30.581 [http-nio-8080-exec-8] WARN  [] c.d.d.s.jwt.JwtAuthenticationFilter - Header 'Authorization' ausente ou mal formatado
2025-11-03 21:15:30.581 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 21:15:30.581 [http-nio-8080-exec-8] DEBUG [] o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 90DEC4D3A80A7B24FF90D4470C846192
2025-11-03 21:15:54.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:15:54.462 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:15:54.463 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:15:56.091 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:16:24.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:16:24.462 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:16:24.463 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:16:25.152 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:16:54.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:16:54.462 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:16:54.463 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:16:54.978 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:17:24.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:17:24.462 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:17:24.463 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:17:25.858 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:17:54.460 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:17:54.461 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:17:54.462 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:17:55.208 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:18:21.755 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 13 class path changes (0 additions, 0 deletions, 13 modifications)
2025-11-03 21:18:21.763 [Thread-5] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 21:18:21.764 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 21:18:21.767 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 21:18:21.768 [Thread-5] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 21:18:21.820 [Thread-5] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:18:21.821 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:18:21.824 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:18:21.826 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:18:21.827 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:18:21.829 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:18:21.830 [Thread-5] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:18:21.841 [Thread-5] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 21:18:21.843 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 21:18:21.846 [Thread-5] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 21:18:22.850 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 205836 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 21:18:22.850 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 21:18:22.850 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 21:18:23.376 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:18:23.376 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 21:18:23.409 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 5 JPA repository interfaces.
2025-11-03 21:18:23.414 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:18:23.414 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 21:18:23.423 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:18:23.423 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:18:23.423 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:18:23.424 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:18:23.424 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:18:23.424 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-03 21:18:23.691 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 21:18:23.692 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 21:18:23.692 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 21:18:23.692 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 21:18:23.709 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 21:18:23.710 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 857 ms
2025-11-03 21:18:24.061 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 21:18:24.061 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 21:18:24.061 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 21:18:24.274 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 21:18:24.277 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-03 21:18:24.280 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 21:18:24.281 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-03 21:18:24.282 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 21:18:24.580 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:18:24.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:18:24.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:18:24.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:18:24.581 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:18:24.582 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:18:24.583 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 21:18:24.585 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 21:18:24.587 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 21:18:24.590 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 21:18:24.593 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 21:18:24.596 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 21:18:24.598 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 21:18:24.601 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 21:18:24.605 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 21:18:24.607 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:18:24.615 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:18:24.618 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:18:25.256 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 21:18:25.677 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 21:18:25.732 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 21:18:25.919 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 21:18:26.068 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 21:18:26.136 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 21:18:26.197 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 21:18:26.536 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 21:18:26.663 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 21:18:26.723 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 21:18:26.725 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 21:18:26.741 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:18:26.742 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.96 seconds (process running for 359.993)
2025-11-03 21:18:26.745 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:18:26.747 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:18:26.751 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 21:18:28.204 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:18:29.210 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 21:18:29.210 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 21:18:56.741 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:18:56.743 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:18:56.744 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:18:57.733 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:19:26.740 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:19:26.742 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:19:26.743 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:19:31.392 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:19:56.579 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 21:19:56.582 [Thread-7] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 21:19:56.583 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 21:19:56.586 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 21:19:56.587 [Thread-7] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 21:19:56.593 [Thread-7] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:19:56.594 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:19:56.597 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:19:56.600 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:19:56.601 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:19:56.603 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:19:56.604 [Thread-7] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:19:56.607 [Thread-7] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 21:19:56.608 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-03 21:19:56.609 [Thread-7] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-03 21:19:57.447 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 205836 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 21:19:57.447 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 21:19:57.448 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 21:19:57.979 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:19:57.979 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 21:19:58.012 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 5 JPA repository interfaces.
2025-11-03 21:19:58.016 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:19:58.016 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 21:19:58.026 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:19:58.026 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:19:58.026 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:19:58.027 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:19:58.027 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:19:58.027 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-03 21:19:58.286 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 21:19:58.287 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 21:19:58.287 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 21:19:58.288 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 21:19:58.301 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 21:19:58.301 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 850 ms
2025-11-03 21:19:58.576 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 21:19:58.577 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 21:19:58.577 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 21:19:58.799 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 21:19:58.801 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-11-03 21:19:58.809 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 21:19:58.810 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-11-03 21:19:58.811 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 21:19:59.080 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:19:59.080 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:19:59.080 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:19:59.082 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:19:59.083 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:19:59.083 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:19:59.084 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 21:19:59.091 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 21:19:59.094 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 21:19:59.097 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 21:19:59.099 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 21:19:59.101 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 21:19:59.104 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 21:19:59.111 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 21:19:59.114 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 21:19:59.117 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:19:59.120 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:19:59.124 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:19:59.767 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 21:20:00.121 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 21:20:00.177 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 21:20:00.342 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 21:20:00.485 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 21:20:00.566 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 21:20:00.644 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 21:20:00.959 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 21:20:01.076 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 21:20:01.113 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 21:20:01.116 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 21:20:01.132 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:20:01.133 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.744 seconds (process running for 454.383)
2025-11-03 21:20:01.133 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:20:01.135 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:20:01.138 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 21:20:02.796 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:20:03.802 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 21:20:03.802 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 21:20:16.561 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 21:20:16.564 [Thread-12] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 21:20:16.564 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 21:20:16.568 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 21:20:16.568 [Thread-12] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 21:20:16.575 [Thread-12] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:20:16.575 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:20:16.577 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:20:16.578 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:20:16.579 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:20:16.580 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:20:16.581 [Thread-12] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:20:16.582 [Thread-12] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 21:20:16.583 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-11-03 21:20:16.584 [Thread-12] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-11-03 21:20:16.973 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 205836 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 21:20:16.973 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 21:20:16.973 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 21:20:17.425 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:20:17.426 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 21:20:17.456 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 5 JPA repository interfaces.
2025-11-03 21:20:17.461 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:20:17.462 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 21:20:17.468 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:17.469 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:17.469 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:17.469 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:17.470 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:17.470 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2025-11-03 21:20:17.725 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 21:20:17.725 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 21:20:17.726 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 21:20:17.726 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 21:20:17.738 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 21:20:17.738 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 763 ms
2025-11-03 21:20:18.087 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 21:20:18.088 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 21:20:18.089 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 21:20:18.248 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 21:20:18.249 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-11-03 21:20:18.253 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 21:20:18.253 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-11-03 21:20:18.254 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 21:20:18.437 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:20:18.437 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:20:18.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:20:18.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:20:18.438 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:20:18.439 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:20:18.440 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 21:20:18.443 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 21:20:18.445 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 21:20:18.447 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 21:20:18.448 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 21:20:18.449 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 21:20:18.451 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 21:20:18.453 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 21:20:18.455 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 21:20:18.457 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:20:18.460 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:20:18.463 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:20:19.160 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 21:20:19.519 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 21:20:19.578 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 21:20:19.754 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 21:20:19.927 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 21:20:19.994 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 21:20:20.069 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 21:20:20.462 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 21:20:20.571 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 21:20:20.619 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 21:20:20.621 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 21:20:20.638 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:20:20.639 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.706 seconds (process running for 473.89)
2025-11-03 21:20:20.640 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:20:20.641 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:20:20.646 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 21:20:21.613 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:20:21.980 [File Watcher] INFO  [] o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-11-03 21:20:21.982 [Thread-16] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 21:20:21.983 [tomcat-shutdown] INFO  [] o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-03 21:20:21.984 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 21:20:21.984 [Thread-16] INFO  [] o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-03 21:20:21.989 [Thread-16] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:20:21.989 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:20:21.991 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:20:21.992 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:20:21.993 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:20:21.994 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:20:21.994 [Thread-16] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:20:21.995 [Thread-16] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 21:20:21.996 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-11-03 21:20:21.998 [Thread-16] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-11-03 21:20:22.791 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 205836 (/home/dimas/Documentos/GitHub/delivery-api/target/classes started by dimas in /home/dimas/Documentos/GitHub/delivery-api)
2025-11-03 21:20:22.792 [restartedMain] DEBUG [] c.d.delivery.DeliveryApiApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-11-03 21:20:22.792 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 21:20:23.277 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:20:23.277 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 21:20:23.307 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2025-11-03 21:20:23.312 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 21:20:23.312 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 21:20:23.318 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ClienteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:23.318 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.PedidoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:23.319 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.ProdutoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:23.319 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.RestauranteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:23.319 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.deliverytech.delivery.repository.auth.UsuarioRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-03 21:20:23.319 [restartedMain] INFO  [] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2025-11-03 21:20:23.559 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-03 21:20:23.560 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-03 21:20:23.561 [restartedMain] INFO  [] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 21:20:23.561 [restartedMain] INFO  [] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-03 21:20:23.575 [restartedMain] INFO  [] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 21:20:23.576 [restartedMain] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 782 ms
2025-11-03 21:20:23.956 [restartedMain] DEBUG [] c.d.d.s.jwt.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 21:20:23.956 [restartedMain] DEBUG [] o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-11-03 21:20:23.957 [restartedMain] DEBUG [] o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-11-03 21:20:24.200 [restartedMain] INFO  [] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 21:20:24.202 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-11-03 21:20:24.206 [restartedMain] INFO  [] com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:deliverydb user=SA
2025-11-03 21:20:24.206 [restartedMain] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-11-03 21:20:24.207 [restartedMain] WARN  [] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 21:20:24.485 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:20:24.485 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:20:24.485 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:20:24.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:20:24.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:20:24.486 [restartedMain] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:20:24.487 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table cliente (
        ativo boolean not null,
        data_cadastro timestamp(6) not null,
        id bigint generated by default as identity,
        cpf varchar(11) not null unique,
        telefone varchar(15),
        email varchar(100) not null unique,
        nome varchar(100) not null,
        endereco varchar(255),
        primary key (id)
    )
2025-11-03 21:20:24.489 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2) not null,
        quantidade integer not null check (quantidade>=1),
        subtotal numeric(38,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
2025-11-03 21:20:24.491 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table pedido (
        subtotal numeric(38,2),
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint not null,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        endereco_entrega varchar(255),
        numero_pedido varchar(255) not null unique,
        observacoes TEXT,
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
2025-11-03 21:20:24.493 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table produto (
        disponivel boolean,
        estoque integer not null,
        preco numeric(38,2) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        nome varchar(100) not null,
        categoria varchar(255),
        descricao varchar(255),
        primary key (id)
    )
2025-11-03 21:20:24.495 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(3,2),
        taxa_entrega numeric(38,2),
        tempo_entrega integer,
        id bigint generated by default as identity,
        nome varchar(100) not null,
        categoria varchar(255) not null,
        endereco varchar(255) not null,
        horario_funcionamento varchar(255),
        telefone varchar(255) not null,
        primary key (id)
    )
2025-11-03 21:20:24.497 [restartedMain] DEBUG [] org.hibernate.SQL - 
    create table usuario (
        ativo boolean not null,
        data_criacao timestamp(6) not null,
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(100) not null unique,
        nome varchar(100) not null,
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE') not null,
        primary key (id)
    )
2025-11-03 21:20:24.499 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKdrlbqwi9u15b2nnaj826e229x 
       foreign key (pedido_id) 
       references pedido
2025-11-03 21:20:24.501 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK3uo2duj20r2i4mwplv4vb26u6 
       foreign key (produto_id) 
       references produto
2025-11-03 21:20:24.503 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
2025-11-03 21:20:24.507 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:20:24.511 [restartedMain] DEBUG [] org.hibernate.SQL - 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-11-03 21:20:24.515 [restartedMain] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:20:25.095 [restartedMain] INFO  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name authService
2025-11-03 21:20:25.477 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-11-03 21:20:25.532 [restartedMain] DEBUG [] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-03 21:20:25.710 [restartedMain] INFO  [] o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-11-03 21:20:25.856 [restartedMain] DEBUG [] o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-03 21:20:25.918 [restartedMain] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-03 21:20:25.983 [restartedMain] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-03 21:20:26.252 [restartedMain] INFO  [] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2025-11-03 21:20:26.345 [restartedMain] INFO  [] o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-03 21:20:26.385 [restartedMain] INFO  [] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-03 21:20:26.387 [restartedMain] INFO  [] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-03 21:20:26.403 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:20:26.404 [restartedMain] INFO  [] c.d.delivery.DeliveryApiApplication - Started DeliveryApiApplication in 3.66 seconds (process running for 479.655)
2025-11-03 21:20:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:20:26.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:20:26.409 [restartedMain] INFO  [] o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-03 21:20:27.031 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:20:28.037 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-11-03 21:20:28.037 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  [] z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 2 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 9 common frames omitted
2025-11-03 21:20:56.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:20:56.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:20:56.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:20:57.102 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:21:26.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:21:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:21:26.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:21:27.197 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:21:56.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:21:56.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:21:56.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:21:58.435 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:22:26.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:22:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:22:26.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:22:26.549 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:22:56.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:22:56.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:22:56.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:22:57.713 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:23:26.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:23:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:23:26.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:23:27.151 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:23:56.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:23:56.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:23:56.406 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:23:58.971 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:24:26.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:24:26.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:24:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:24:28.103 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:24:56.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:24:56.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:24:56.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:24:57.596 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:25:26.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:25:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:25:26.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:25:27.589 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:25:56.403 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:25:56.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:25:56.406 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:25:58.320 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-03 21:25:58.358 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 21:26:26.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:26:26.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:26:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:26:28.335 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:26:56.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:26:56.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:26:56.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:26:56.688 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:27:26.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:27:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:27:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:27:28.308 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 502 BAD_GATEWAY
2025-11-03 21:27:28.310 [scheduling-1] WARN  [] c.d.d.service.alert.AlertService - ALERTA [WARNING] EXTERNAL_SERVICE_DOWN: Serviço externo (Gateway de Pagamento) não está disponível (Status: DOWN)
2025-11-03 21:27:56.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:27:56.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:27:56.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:27:59.130 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:28:26.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:28:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:28:26.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:28:28.441 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:28:56.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:28:56.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:28:56.403 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:28:57.259 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:29:26.402 [scheduling-1] INFO  [] c.d.d.service.alert.AlertService - [ALERTS] Verificando métricas e saúde do sistema...
2025-11-03 21:29:26.404 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - HTTP GET https://httpbin.org/status/200
2025-11-03 21:29:26.405 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/yaml, application/*+json, */*]
2025-11-03 21:29:27.647 [scheduling-1] DEBUG [] o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 21:29:38.733 [SpringApplicationShutdownHook] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 21:29:38.735 [tomcat-shutdown] INFO  [] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 21:29:38.740 [SpringApplicationShutdownHook] INFO  [] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 21:29:38.740 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists cliente cascade 
2025-11-03 21:29:38.741 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2025-11-03 21:29:38.742 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists pedido cascade 
2025-11-03 21:29:38.743 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists produto cascade 
2025-11-03 21:29:38.743 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists restaurante cascade 
2025-11-03 21:29:38.744 [SpringApplicationShutdownHook] DEBUG [] org.hibernate.SQL - 
    drop table if exists usuario cascade 
2025-11-03 21:29:38.745 [SpringApplicationShutdownHook] WARN  [] o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-03 21:29:38.746 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-11-03 21:29:38.747 [SpringApplicationShutdownHook] INFO  [] com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
