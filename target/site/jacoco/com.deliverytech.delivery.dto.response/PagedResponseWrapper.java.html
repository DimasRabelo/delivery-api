<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="pt"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PagedResponseWrapper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">delivery-api</a> &gt; <a href="index.source.html" class="el_package">com.deliverytech.delivery.dto.response</a> &gt; <span class="el_source">PagedResponseWrapper.java</span></div><h1>PagedResponseWrapper.java</h1><pre class="source lang-java linenums">package com.deliverytech.delivery.dto.response;

import io.swagger.v3.oas.annotations.media.Schema;
import org.springframework.data.domain.Page;
import java.util.List;

// ==================================================
// Wrapper genérico para respostas paginadas da API
// Permite padronizar a resposta de listas paginadas
// ==================================================
@Schema(description = &quot;Wrapper para respostas paginadas&quot;)
public class PagedResponseWrapper&lt;T&gt; {

    // --------------------------------------------------
    // Conteúdo da página atual
    // Lista de elementos genéricos (T)
    // --------------------------------------------------
    @Schema(description = &quot;Lista de itens da página atual&quot;)
    private List&lt;T&gt; content;

    // --------------------------------------------------
    // Informações sobre paginação (número, tamanho, total, etc.)
    // --------------------------------------------------
    @Schema(description = &quot;Informações de paginação&quot;)
    private PageInfo page;

    // --------------------------------------------------
    // Links de navegação para facilitar a iteração entre páginas
    // --------------------------------------------------
    @Schema(description = &quot;Links de navegação&quot;)
    private PageLinks links;

    // ==================================================
    // Construtor que recebe Page&lt;T&gt; do Spring Data
    // ==================================================
<span class="nc" id="L36">    public PagedResponseWrapper(Page&lt;T&gt; page) {</span>
<span class="nc" id="L37">        this.content = page.getContent();</span>
<span class="nc" id="L38">        this.page = new PageInfo(</span>
<span class="nc" id="L39">            page.getNumber(),</span>
<span class="nc" id="L40">            page.getSize(),</span>
<span class="nc" id="L41">            page.getTotalElements(),</span>
<span class="nc" id="L42">            page.getTotalPages(),</span>
<span class="nc" id="L43">            page.isFirst(),</span>
<span class="nc" id="L44">            page.isLast()</span>
        );
<span class="nc" id="L46">        this.links = new PageLinks(page);</span>
<span class="nc" id="L47">    }</span>

    // =======================
    // CLASSE INTERNA: PageInfo
    // Contém detalhes da página atual
    // =======================
    @Schema(description = &quot;Informações de paginação&quot;)
    public static class PageInfo {
        @Schema(description = &quot;Número da página atual (base 0)&quot;, example = &quot;0&quot;)
        private int number;

        @Schema(description = &quot;Tamanho da página&quot;, example = &quot;10&quot;)
        private int size;

        @Schema(description = &quot;Total de elementos&quot;, example = &quot;50&quot;)
        private long totalElements;

        @Schema(description = &quot;Total de páginas&quot;, example = &quot;5&quot;)
        private int totalPages;

        @Schema(description = &quot;É a primeira página&quot;, example = &quot;true&quot;)
        private boolean first;

        @Schema(description = &quot;É a última página&quot;, example = &quot;false&quot;)
        private boolean last;

<span class="nc" id="L73">        public PageInfo(int number, int size, long totalElements, int totalPages, boolean first, boolean last) {</span>
<span class="nc" id="L74">            this.number = number;</span>
<span class="nc" id="L75">            this.size = size;</span>
<span class="nc" id="L76">            this.totalElements = totalElements;</span>
<span class="nc" id="L77">            this.totalPages = totalPages;</span>
<span class="nc" id="L78">            this.first = first;</span>
<span class="nc" id="L79">            this.last = last;</span>
<span class="nc" id="L80">        }</span>

        // Getters
<span class="nc" id="L83">        public int getNumber() { return number; }</span>
<span class="nc" id="L84">        public int getSize() { return size; }</span>
<span class="nc" id="L85">        public long getTotalElements() { return totalElements; }</span>
<span class="nc" id="L86">        public int getTotalPages() { return totalPages; }</span>
<span class="nc" id="L87">        public boolean isFirst() { return first; }</span>
<span class="nc" id="L88">        public boolean isLast() { return last; }</span>
    }

    // =======================
    // CLASSE INTERNA: PageLinks
    // Contém links para navegar entre páginas (first, last, next, prev)
    // =======================
    @Schema(description = &quot;Links de navegação&quot;)
    public static class PageLinks {
        @Schema(description = &quot;Link para primeira página&quot;)
        private String first;

        @Schema(description = &quot;Link para última página&quot;)
        private String last;

        @Schema(description = &quot;Link para próxima página&quot;)
        private String next;

        @Schema(description = &quot;Link para página anterior&quot;)
        private String prev;

<span class="nc" id="L109">        public PageLinks(Page&lt;?&gt; page) {</span>
<span class="nc" id="L110">            String baseUrl = &quot;/api&quot;; // URL base para os links</span>
<span class="nc" id="L111">            this.first = baseUrl + &quot;?page=0&amp;size=&quot; + page.getSize();</span>
<span class="nc" id="L112">            this.last = baseUrl + &quot;?page=&quot; + (page.getTotalPages() - 1) + &quot;&amp;size=&quot; + page.getSize();</span>

<span class="nc bnc" id="L114" title="All 2 branches missed.">            if (page.hasNext()) {</span>
<span class="nc" id="L115">                this.next = baseUrl + &quot;?page=&quot; + (page.getNumber() + 1) + &quot;&amp;size=&quot; + page.getSize();</span>
            }

<span class="nc bnc" id="L118" title="All 2 branches missed.">            if (page.hasPrevious()) {</span>
<span class="nc" id="L119">                this.prev = baseUrl + &quot;?page=&quot; + (page.getNumber() - 1) + &quot;&amp;size=&quot; + page.getSize();</span>
            }
<span class="nc" id="L121">        }</span>

        // Getters
<span class="nc" id="L124">        public String getFirst() { return first; }</span>
<span class="nc" id="L125">        public String getLast() { return last; }</span>
<span class="nc" id="L126">        public String getNext() { return next; }</span>
<span class="nc" id="L127">        public String getPrev() { return prev; }</span>
    }

    // =======================
    // GETTERS DA CLASSE PRINCIPAL
    // =======================
<span class="nc" id="L133">    public List&lt;T&gt; getContent() { return content; }</span>
<span class="nc" id="L134">    public PageInfo getPage() { return page; }</span>
<span class="nc" id="L135">    public PageLinks getLinks() { return links; }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>