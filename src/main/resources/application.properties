# ===================================================================
# CONFIGURAÇÃO H2 DATABASE (EM MEMÓRIA)
# ===================================================================
# URL de conexão JDBC para o banco em memória chamado 'deliverydb'
spring.datasource.url=jdbc:h2:mem:deliverydb
# Driver JDBC do H2
spring.datasource.driver-class-name=org.h2.Driver
# Usuário padrão do banco H2
spring.datasource.username=sa
# Senha padrão do banco H2
spring.datasource.password=

# ===================================================================
# H2 CONSOLE (Interface Web para o banco H2)
# ===================================================================
# Habilita o console web do H2
spring.h2.console.enabled=true
# Define o caminho para acessar o console (ex: http://localhost:8080/h2-console)
spring.h2.console.path=/h2-console
# Permite que o console seja acessado de outras máquinas (não apenas localhost)
spring.h2.console.settings.web-allow-others=true

# ===================================================================
# JPA / HIBERNATE (Configuração Específica do H2)
# ===================================================================
# Define o dialeto SQL específico para o banco H2
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
# 'create-drop': O Hibernate irá criar o schema no início e derrubá-lo no final (perfeito para testes)
spring.jpa.hibernate.ddl-auto=create-drop
# Garante que os scripts (data.sql) rodem APÓS a criação do schema pelo Hibernate
spring.jpa.defer-datasource-initialization=true
# 'false' é a melhor prática: Evita o "Open Session in View"
spring.jpa.open-in-view=false

# Configurações de otimização de batch (para inserts/updates em massa)
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ===================================================================
# INICIALIZAÇÃO DE SCRIPTS SQL (data.sql, schema.sql)
# ===================================================================
# 'always': Sempre executa os scripts de inicialização (data.sql)
spring.sql.init.mode=always
# Informa explicitamente que estamos usando H2
spring.sql.init.platform=h2
# Define o script a ser executado (nome personalizado)
spring.sql.init.data-locations=classpath:data-h2.sql
# Garante que o Hibernate crie as tabelas antes de inserir os dados
spring.jpa.defer-datasource-initialization=true

# ===================================================================
# CONFIGURAÇÃO JWT (JSON WEB TOKEN)
# ===================================================================
# Chave secreta para assinar os tokens (DEVE ser longa e segura em produção)
app.jwt.secret=mySecretKey123456789012345678901234567890123456789012345678901234567890
# Tempo de expiração em milissegundos (ex: 60000000ms = 1000 minutos)
app.jwt.expiration-ms=60000000

# ===================================================================
# CONFIGURAÇÃO SWAGGER / OPENAPI (Documentação)
# ===================================================================
# Caminho para a definição JSON da API
springdoc.api-docs.path=/api-docs
# Caminho para a interface gráfica do Swagger
springdoc.swagger-ui.path=/swagger-ui.html
# Ordena as operações (endpoints) por método (DELETE, GET, POST, PUT)
springdoc.swagger-ui.operationsSorter=method
# Ordena as Tags (Controllers) alfabeticamente
springdoc.swagger-ui.tagsSorter=alpha
# Habilita o botão "Try It Out" na interface do Swagger UI
springdoc.swagger-ui.tryItOutEnabled=true
# Habilita o filtro de busca na interface do Swagger UI
springdoc.swagger-ui.filter=true
# Habilita os endpoints do OpenAPI e Swagger UI
springdoc.api-docs.enabled=true
# Habilita a interface do Swagger UI
springdoc.swagger-ui.enabled=true

# Configurações OAuth2 para o Swagger UI (usado com JWT Bearer Token)
springdoc.swagger-ui.oauth.clientId=swagger-ui
springdoc.swagger-ui.oauth.realm=swagger-ui-realm
springdoc.swagger-ui.oauth.appName=swagger-ui

# ===================================================================
# CONFIGURAÇÃO DE CORS (Cross-Origin Resource Sharing)
# ===================================================================
# Esta é uma configuração global de CORS (menos granular que o SecurityConfig)
# Configura CORS para permitir requisições de qualquer origem
spring.web.cors.allowed-origins=*
# Configura CORS para permitir todos os métodos HTTP
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
# Configura CORS para permitir todos os headers
spring.web.cors.allowed-headers=*

# ===================================================================
# USUÁRIO PADRÃO (INATIVO)
# ===================================================================
# As linhas abaixo definem o usuário Basic Auth padrão do Spring Boot.
# Elas estão INATIVAS e sendo IGNORADAS, pois o SecurityConfig.java
# customizado (com securityFilterChain) toma prioridade.
# spring.security.user.name=admin
# spring.security.user.password=admin

# ===================================================================
# CONFIGURAÇÃO DE LOGGING (DEBUG)
# ===================================================================
# Mostra no console o SQL que o Hibernate está executando (DEBUG)
spring.jpa.show-sql=true
# Formata o SQL logado para ser mais legível
spring.jpa.properties.hibernate.format_sql=true
# Adiciona comentários ao SQL logado (ex: de qual método Java a query veio)
spring.jpa.properties.hibernate.use_sql_comments=true

# Logs detalhados de SQL e transações (ótimos para debug)
logging.level.org.hibernate.SQL=DEBUG
# Nível TRACE mostra os valores sendo "bindados" (setados) nas queries SQL
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.transaction=DEBUG

# Logs detalhados do Spring (Web, Security, SpringDoc)
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springdoc=DEBUG

# Log principal da aplicação
logging.level.com.deliverytech=DEBUG

# ===================================================================
# CONFIGURAÇÃO DO SERVIDOR
# ===================================================================
server.port=8080

# ===================================================================
# CONFIGURAÇÃO DO REDIS (Desabilitado neste perfil H2)
# ===================================================================
# # Configurando o redis para cache
# spring.redis.host=${SPRING_REDIS_HOST:localhost}
# spring.redis.port=${SPRING_REDIS_PORT:6379}
